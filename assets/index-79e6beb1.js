(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function e(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=e(r);fetch(r.href,s)}})();const Ne={};function Xb(n){Ne.context=n}const Qb=(n,t)=>n===t,xe=Symbol("solid-proxy"),Ts=Symbol("solid-track"),Lo={equals:Qb};let Tg=Ng;const Hn=1,Ro=2,Eg={owned:null,cleanups:null,context:null,owner:null},Tl={};var ge=null;let Fi=null,ie=null,Ie=null,Rn=null,La=0;function ms(n,t){const e=ie,i=ge,r=n.length===0,s=r?Eg:{owned:null,cleanups:null,context:null,owner:t===void 0?i:t},o=r?n:()=>n(()=>fn(()=>za(s)));ge=s,ie=null;try{return fi(o,!0)}finally{ie=e,ge=i}}function Zt(n,t){t=t?Object.assign({},Lo,t):Lo;const e={value:n,observers:null,observerSlots:null,comparator:t.equals||void 0},i=r=>(typeof r=="function"&&(r=r(e.value)),Ig(e,r));return[Dg.bind(e),i]}function Xh(n,t,e){const i=Ra(n,t,!0,Hn);jr(i)}function Oe(n,t,e){const i=Ra(n,t,!1,Hn);jr(i)}function er(n,t,e){Tg=o1;const i=Ra(n,t,!1,Hn);i.user=!0,Rn?Rn.push(i):jr(i)}function Re(n,t,e){e=e?Object.assign({},Lo,e):Lo;const i=Ra(n,t,!0,0);return i.observers=null,i.observerSlots=null,i.comparator=e.equals||void 0,jr(i),Dg.bind(i)}function Zb(n,t,e){let i,r,s;arguments.length===2&&typeof t=="object"||arguments.length===1?(i=!0,r=n,s=t||{}):(i=n,r=t,s=e||{});let o=null,a=Tl,l=null,c=!1,u="initialValue"in s,h=typeof i=="function"&&Re(i);const f=new Set,[d,g]=(s.storage||Zt)(s.initialValue),[b,k]=Zt(void 0),[O,D]=Zt(void 0,{equals:!1}),[F,W]=Zt(u?"ready":"unresolved");if(Ne.context){l=`${Ne.context.id}${Ne.context.count++}`;let st;s.ssrLoadFrom==="initial"?a=s.initialValue:Ne.load&&(st=Ne.load(l))&&(a=st[0])}function V(st,xt,bt,Tt){return o===st&&(o=null,u=!0,(st===a||xt===a)&&s.onHydrated&&queueMicrotask(()=>s.onHydrated(Tt,{value:xt})),a=Tl,T(xt,bt)),xt}function T(st,xt){fi(()=>{xt===void 0&&g(()=>st),W(xt!==void 0?"errored":"ready"),k(xt);for(const bt of f.keys())bt.decrement();f.clear()},!1)}function L(){const st=i1,xt=d(),bt=b();if(bt!==void 0&&!o)throw bt;return ie&&!ie.user&&st&&Xh(()=>{O(),o&&(st.resolved||f.has(st)||(st.increment(),f.add(st)))}),xt}function R(st=!0){if(st!==!1&&c)return;c=!1;const xt=h?h():i;if(xt==null||xt===!1){V(o,fn(d));return}const bt=a!==Tl?a:fn(()=>r(xt,{value:d(),refetching:st}));return typeof bt!="object"||!(bt&&"then"in bt)?(V(o,bt,void 0,xt),bt):(o=bt,c=!0,queueMicrotask(()=>c=!1),fi(()=>{W(u?"refreshing":"pending"),D()},!1),bt.then(Tt=>V(bt,Tt,void 0,xt),Tt=>V(bt,void 0,Rg(Tt),xt)))}return Object.defineProperties(L,{state:{get:()=>F()},error:{get:()=>b()},loading:{get(){const st=F();return st==="pending"||st==="refreshing"}},latest:{get(){if(!u)return L();const st=b();if(st&&!o)throw st;return d()}}}),h?Xh(()=>R(!1)):R(!1),[L,{refetch:R,mutate:g}]}function ys(n){return fi(n,!1)}function fn(n){if(ie===null)return n();const t=ie;ie=null;try{return n()}finally{ie=t}}function $g(n){return ge===null||(ge.cleanups===null?ge.cleanups=[n]:ge.cleanups.push(n)),n}function wu(){return ie}function t1(){return ge}function e1(n,t){const e=Symbol("context");return{id:e,Provider:a1(e),defaultValue:n}}function n1(n){let t;return(t=Bg(ge,n.id))!==void 0?t:n.defaultValue}function Pg(n){const t=Re(n),e=Re(()=>Mc(t()));return e.toArray=()=>{const i=e();return Array.isArray(i)?i:i!=null?[i]:[]},e}let i1;function Dg(){const n=Fi;if(this.sources&&(this.state||n))if(this.state===Hn||n)jr(this);else{const t=Ie;Ie=null,fi(()=>Bo(this),!1),Ie=t}if(ie){const t=this.observers?this.observers.length:0;ie.sources?(ie.sources.push(this),ie.sourceSlots.push(t)):(ie.sources=[this],ie.sourceSlots=[t]),this.observers?(this.observers.push(ie),this.observerSlots.push(ie.sources.length-1)):(this.observers=[ie],this.observerSlots=[ie.sources.length-1])}return this.value}function Ig(n,t,e){let i=n.value;return(!n.comparator||!n.comparator(i,t))&&(n.value=t,n.observers&&n.observers.length&&fi(()=>{for(let r=0;r<n.observers.length;r+=1){const s=n.observers[r],o=Fi&&Fi.running;o&&Fi.disposed.has(s),(o&&!s.tState||!o&&!s.state)&&(s.pure?Ie.push(s):Rn.push(s),s.observers&&Lg(s)),o||(s.state=Hn)}if(Ie.length>1e6)throw Ie=[],new Error},!1)),t}function jr(n){if(!n.fn)return;za(n);const t=ge,e=ie,i=La;ie=ge=n,r1(n,n.value,i),ie=e,ge=t}function r1(n,t,e){let i;try{i=n.fn(t)}catch(r){return n.pure&&(n.state=Hn,n.owned&&n.owned.forEach(za),n.owned=null),n.updatedAt=e+1,zg(r)}(!n.updatedAt||n.updatedAt<=e)&&(n.updatedAt!=null&&"observers"in n?Ig(n,i):n.value=i,n.updatedAt=e)}function Ra(n,t,e,i=Hn,r){const s={fn:n,state:i,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:ge,context:null,pure:e};return ge===null||ge!==Eg&&(ge.owned?ge.owned.push(s):ge.owned=[s]),s}function zo(n){const t=Fi;if(n.state===0||t)return;if(n.state===Ro||t)return Bo(n);if(n.suspense&&fn(n.suspense.inFallback))return n.suspense.effects.push(n);const e=[n];for(;(n=n.owner)&&(!n.updatedAt||n.updatedAt<La);)(n.state||t)&&e.push(n);for(let i=e.length-1;i>=0;i--)if(n=e[i],n.state===Hn||t)jr(n);else if(n.state===Ro||t){const r=Ie;Ie=null,fi(()=>Bo(n,e[0]),!1),Ie=r}}function fi(n,t){if(Ie)return n();let e=!1;t||(Ie=[]),Rn?e=!0:Rn=[],La++;try{const i=n();return s1(e),i}catch(i){e||(Rn=null),Ie=null,zg(i)}}function s1(n){if(Ie&&(Ng(Ie),Ie=null),n)return;const t=Rn;Rn=null,t.length&&fi(()=>Tg(t),!1)}function Ng(n){for(let t=0;t<n.length;t++)zo(n[t])}function o1(n){let t,e=0;for(t=0;t<n.length;t++){const i=n[t];i.user?n[e++]=i:zo(i)}for(Ne.context&&Xb(),t=0;t<e;t++)zo(n[t])}function Bo(n,t){const e=Fi;n.state=0;for(let i=0;i<n.sources.length;i+=1){const r=n.sources[i];r.sources&&(r.state===Hn||e?r!==t&&(!r.updatedAt||r.updatedAt<La)&&zo(r):(r.state===Ro||e)&&Bo(r,t))}}function Lg(n){const t=Fi;for(let e=0;e<n.observers.length;e+=1){const i=n.observers[e];(!i.state||t)&&(i.state=Ro,i.pure?Ie.push(i):Rn.push(i),i.observers&&Lg(i))}}function za(n){let t;if(n.sources)for(;n.sources.length;){const e=n.sources.pop(),i=n.sourceSlots.pop(),r=e.observers;if(r&&r.length){const s=r.pop(),o=e.observerSlots.pop();i<r.length&&(s.sourceSlots[o]=i,r[i]=s,e.observerSlots[i]=o)}}if(n.owned){for(t=0;t<n.owned.length;t++)za(n.owned[t]);n.owned=null}if(n.cleanups){for(t=0;t<n.cleanups.length;t++)n.cleanups[t]();n.cleanups=null}n.state=0,n.context=null}function Rg(n){return n instanceof Error||typeof n=="string"?n:new Error("Unknown error")}function zg(n){throw n=Rg(n),n}function Bg(n,t){return n?n.context&&n.context[t]!==void 0?n.context[t]:Bg(n.owner,t):void 0}function Mc(n){if(typeof n=="function"&&!n.length)return Mc(n());if(Array.isArray(n)){const t=[];for(let e=0;e<n.length;e++){const i=Mc(n[e]);Array.isArray(i)?t.push.apply(t,i):t.push(i)}return t}return n}function a1(n,t){return function(i){let r;return Oe(()=>r=fn(()=>(ge.context={[n]:i.value},Pg(()=>i.children))),void 0),r}}function l1(n){return{subscribe(t){if(!(t instanceof Object)||t==null)throw new TypeError("Expected the observer to be an object.");const e=typeof t=="function"?t:t.next&&t.next.bind(t);if(!e)return{unsubscribe(){}};const i=ms(r=>(er(()=>{const s=n();fn(()=>e(s))}),r));return t1()&&$g(i),{unsubscribe(){i()}}},[Symbol.observable||"@@observable"](){return this}}}const c1=Symbol("fallback");function Qh(n){for(let t=0;t<n.length;t++)n[t]()}function u1(n,t,e={}){let i=[],r=[],s=[],o=0,a=t.length>1?[]:null;return $g(()=>Qh(s)),()=>{let l=n()||[],c,u;return l[Ts],fn(()=>{let f=l.length,d,g,b,k,O,D,F,W,V;if(f===0)o!==0&&(Qh(s),s=[],i=[],r=[],o=0,a&&(a=[])),e.fallback&&(i=[c1],r[0]=ms(T=>(s[0]=T,e.fallback())),o=1);else if(o===0){for(r=new Array(f),u=0;u<f;u++)i[u]=l[u],r[u]=ms(h);o=f}else{for(b=new Array(f),k=new Array(f),a&&(O=new Array(f)),D=0,F=Math.min(o,f);D<F&&i[D]===l[D];D++);for(F=o-1,W=f-1;F>=D&&W>=D&&i[F]===l[W];F--,W--)b[W]=r[F],k[W]=s[F],a&&(O[W]=a[F]);for(d=new Map,g=new Array(W+1),u=W;u>=D;u--)V=l[u],c=d.get(V),g[u]=c===void 0?-1:c,d.set(V,u);for(c=D;c<=F;c++)V=i[c],u=d.get(V),u!==void 0&&u!==-1?(b[u]=r[c],k[u]=s[c],a&&(O[u]=a[c]),u=g[u],d.set(V,u)):s[c]();for(u=D;u<f;u++)u in b?(r[u]=b[u],s[u]=k[u],a&&(a[u]=O[u],a[u](u))):r[u]=ms(h);r=r.slice(0,o=f),i=l.slice(0)}return r});function h(f){if(s[u]=f,a){const[d,g]=Zt(u);return a[u]=g,t(l[u],d)}return t(l[u])}}}function I(n,t){return fn(()=>n(t||{}))}function io(){return!0}const Cc={get(n,t,e){return t===xe?e:n.get(t)},has(n,t){return t===xe?!0:n.has(t)},set:io,deleteProperty:io,getOwnPropertyDescriptor(n,t){return{configurable:!0,enumerable:!0,get(){return n.get(t)},set:io,deleteProperty:io}},ownKeys(n){return n.keys()}};function El(n){return(n=typeof n=="function"?n():n)?n:{}}function jn(...n){let t=!1;for(let i=0;i<n.length;i++){const r=n[i];t=t||!!r&&xe in r,n[i]=typeof r=="function"?(t=!0,Re(r)):r}if(t)return new Proxy({get(i){for(let r=n.length-1;r>=0;r--){const s=El(n[r])[i];if(s!==void 0)return s}},has(i){for(let r=n.length-1;r>=0;r--)if(i in El(n[r]))return!0;return!1},keys(){const i=[];for(let r=0;r<n.length;r++)i.push(...Object.keys(El(n[r])));return[...new Set(i)]}},Cc);const e={};for(let i=n.length-1;i>=0;i--)if(n[i]){const r=Object.getOwnPropertyDescriptors(n[i]);for(const s in r)s in e||Object.defineProperty(e,s,{enumerable:!0,get(){for(let o=n.length-1;o>=0;o--){const a=(n[o]||{})[s];if(a!==void 0)return a}}})}return e}function pn(n,...t){const e=new Set(t.flat());if(xe in n){const r=t.map(s=>new Proxy({get(o){return s.includes(o)?n[o]:void 0},has(o){return s.includes(o)&&o in n},keys(){return s.filter(o=>o in n)}},Cc));return r.push(new Proxy({get(s){return e.has(s)?void 0:n[s]},has(s){return e.has(s)?!1:s in n},keys(){return Object.keys(n).filter(s=>!e.has(s))}},Cc)),r}const i=Object.getOwnPropertyDescriptors(n);return t.push(Object.keys(i).filter(r=>!e.has(r))),t.map(r=>{const s={};for(let o=0;o<r.length;o++){const a=r[o];a in n&&Object.defineProperty(s,a,i[a]?i[a]:{get(){return n[a]},set(){return!0},enumerable:!0})}return s})}function xr(n){const t="fallback"in n&&{fallback:()=>n.fallback};return Re(u1(()=>n.each,n.children,t||void 0))}function Ce(n){let t=!1;const e=n.keyed,i=Re(()=>n.when,void 0,{equals:(r,s)=>t?r===s:!r==!s});return Re(()=>{const r=i();if(r){const s=n.children,o=typeof s=="function"&&s.length>0;return t=e||o,o?fn(()=>s(r)):s}return n.fallback},void 0,void 0)}function Vr(n){let t=!1,e=!1;const i=(o,a)=>o[0]===a[0]&&(t?o[1]===a[1]:!o[1]==!a[1])&&o[2]===a[2],r=Pg(()=>n.children),s=Re(()=>{let o=r();Array.isArray(o)||(o=[o]);for(let a=0;a<o.length;a++){const l=o[a].when;if(l)return e=!!o[a].keyed,[a,l,o[a]]}return[-1]},void 0,{equals:i});return Re(()=>{const[o,a,l]=s();if(o<0)return n.fallback;const c=l.children,u=typeof c=="function"&&c.length>0;return t=e||u,u?fn(()=>c(a)):c},void 0,void 0)}function We(n){return n}const h1=["allowfullscreen","async","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","indeterminate","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected"],f1=new Set(["className","value","readOnly","formNoValidate","isMap","noModule","playsInline",...h1]),d1=new Set(["innerHTML","textContent","innerText","children"]),p1=Object.assign(Object.create(null),{className:"class",htmlFor:"for"}),Zh=Object.assign(Object.create(null),{class:"className",formnovalidate:"formNoValidate",ismap:"isMap",nomodule:"noModule",playsinline:"playsInline",readonly:"readOnly"}),g1=new Set(["beforeinput","click","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"]),m1={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"};function y1(n,t,e){let i=e.length,r=t.length,s=i,o=0,a=0,l=t[r-1].nextSibling,c=null;for(;o<r||a<s;){if(t[o]===e[a]){o++,a++;continue}for(;t[r-1]===e[s-1];)r--,s--;if(r===o){const u=s<i?a?e[a-1].nextSibling:e[s-a]:l;for(;a<s;)n.insertBefore(e[a++],u)}else if(s===a)for(;o<r;)(!c||!c.has(t[o]))&&t[o].remove(),o++;else if(t[o]===e[s-1]&&e[a]===t[r-1]){const u=t[--r].nextSibling;n.insertBefore(e[a++],t[o++].nextSibling),n.insertBefore(e[--s],u),t[r]=e[s]}else{if(!c){c=new Map;let h=a;for(;h<s;)c.set(e[h],h++)}const u=c.get(t[o]);if(u!=null)if(a<u&&u<s){let h=o,f=1,d;for(;++h<r&&h<s&&!((d=c.get(t[h]))==null||d!==u+f);)f++;if(f>u-a){const g=t[o];for(;a<u;)n.insertBefore(e[a++],g)}else n.replaceChild(e[a++],t[o++])}else o++;else t[o++].remove()}}}const tf="_$DX_DELEGATE";function Fg(n,t,e,i={}){let r;return ms(s=>{r=s,t===document?n():J(t,n(),t.firstChild?null:void 0,e)},i.owner),()=>{r(),t.textContent=""}}function _t(n,t,e){const i=document.createElement("template");if(i.innerHTML=n,t&&i.innerHTML.split("<").length-1!==t)throw`The browser resolved template HTML does not match JSX input:
${i.innerHTML}

${n}. Is your HTML properly formed?`;let r=i.content.firstChild;return e&&(r=r.firstChild),r}function vi(n,t=window.document){const e=t[tf]||(t[tf]=new Set);for(let i=0,r=n.length;i<r;i++){const s=n[i];e.has(s)||(e.add(s),t.addEventListener(s,k1))}}function wr(n,t,e){e==null?n.removeAttribute(t):n.setAttribute(t,e)}function b1(n,t,e,i){i==null?n.removeAttributeNS(t,e):n.setAttributeNS(t,e,i)}function jg(n,t){t==null?n.removeAttribute("class"):n.className=t}function v1(n,t,e,i){if(i)Array.isArray(e)?(n[`$$${t}`]=e[0],n[`$$${t}Data`]=e[1]):n[`$$${t}`]=e;else if(Array.isArray(e)){const r=e[0];n.addEventListener(t,e[0]=s=>r.call(n,e[1],s))}else n.addEventListener(t,e)}function x1(n,t,e={}){const i=Object.keys(t||{}),r=Object.keys(e);let s,o;for(s=0,o=r.length;s<o;s++){const a=r[s];!a||a==="undefined"||t[a]||(ef(n,a,!1),delete e[a])}for(s=0,o=i.length;s<o;s++){const a=i[s],l=!!t[a];!a||a==="undefined"||e[a]===l||!l||(ef(n,a,!0),e[a]=l)}return e}function w1(n,t,e){if(!t)return e?wr(n,"style"):t;const i=n.style;if(typeof t=="string")return i.cssText=t;typeof e=="string"&&(i.cssText=e=void 0),e||(e={}),t||(t={});let r,s;for(s in e)t[s]==null&&i.removeProperty(s),delete e[s];for(s in t)r=t[s],r!==e[s]&&(i.setProperty(s,r),e[s]=r);return e}function xi(n,t={},e,i){const r={};return i||Oe(()=>r.children=Cr(n,t.children,r.children)),Oe(()=>t.ref&&t.ref(n)),Oe(()=>_1(n,t,e,!0,r,!0)),r}function Vg(n,t,e){return fn(()=>n(t,e))}function J(n,t,e,i){if(e!==void 0&&!i&&(i=[]),typeof t!="function")return Cr(n,t,i,e);Oe(r=>Cr(n,t(),r,e),i)}function _1(n,t,e,i,r={},s=!1){t||(t={});for(const o in r)if(!(o in t)){if(o==="children")continue;r[o]=nf(n,o,null,r[o],e,s)}for(const o in t){if(o==="children"){i||Cr(n,t.children);continue}const a=t[o];r[o]=nf(n,o,a,r[o],e,s)}}function S1(n){return n.toLowerCase().replace(/-([a-z])/g,(t,e)=>e.toUpperCase())}function ef(n,t,e){const i=t.trim().split(/\s+/);for(let r=0,s=i.length;r<s;r++)n.classList.toggle(i[r],e)}function nf(n,t,e,i,r,s){let o,a,l;if(t==="style")return w1(n,e,i);if(t==="classList")return x1(n,e,i);if(e===i)return i;if(t==="ref")s||e(n);else if(t.slice(0,3)==="on:"){const c=t.slice(3);i&&n.removeEventListener(c,i),e&&n.addEventListener(c,e)}else if(t.slice(0,10)==="oncapture:"){const c=t.slice(10);i&&n.removeEventListener(c,i,!0),e&&n.addEventListener(c,e,!0)}else if(t.slice(0,2)==="on"){const c=t.slice(2).toLowerCase(),u=g1.has(c);if(!u&&i){const h=Array.isArray(i)?i[0]:i;n.removeEventListener(c,h)}(u||e)&&(v1(n,c,e,u),u&&vi([c]))}else if((l=d1.has(t))||!r&&(Zh[t]||(a=f1.has(t)))||(o=n.nodeName.includes("-")))t==="class"||t==="className"?jg(n,e):o&&!a&&!l?n[S1(t)]=e:n[Zh[t]||t]=e;else{const c=r&&t.indexOf(":")>-1&&m1[t.split(":")[0]];c?b1(n,c,t,e):wr(n,p1[t]||t,e)}return e}function k1(n){const t=`$$${n.type}`;let e=n.composedPath&&n.composedPath()[0]||n.target;for(n.target!==e&&Object.defineProperty(n,"target",{configurable:!0,value:e}),Object.defineProperty(n,"currentTarget",{configurable:!0,get(){return e||document}}),Ne.registry&&!Ne.done&&(Ne.done=_$HY.done=!0);e;){const i=e[t];if(i&&!e.disabled){const r=e[`${t}Data`];if(r!==void 0?i.call(e,r,n):i.call(e,n),n.cancelBubble)return}e=e._$host||e.parentNode||e.host}}function Cr(n,t,e,i,r){for(Ne.context&&!e&&(e=[...n.childNodes]);typeof e=="function";)e=e();if(t===e)return e;const s=typeof t,o=i!==void 0;if(n=o&&e[0]&&e[0].parentNode||n,s==="string"||s==="number"){if(Ne.context)return e;if(s==="number"&&(t=t.toString()),o){let a=e[0];a&&a.nodeType===3?a.data=t:a=document.createTextNode(t),e=sr(n,e,i,a)}else e!==""&&typeof e=="string"?e=n.firstChild.data=t:e=n.textContent=t}else if(t==null||s==="boolean"){if(Ne.context)return e;e=sr(n,e,i)}else{if(s==="function")return Oe(()=>{let a=t();for(;typeof a=="function";)a=a();e=Cr(n,a,e,i)}),()=>e;if(Array.isArray(t)){const a=[],l=e&&Array.isArray(e);if(Oc(a,t,e,r))return Oe(()=>e=Cr(n,a,e,i,!0)),()=>e;if(Ne.context){if(!a.length)return e;for(let c=0;c<a.length;c++)if(a[c].parentNode)return e=a}if(a.length===0){if(e=sr(n,e,i),o)return e}else l?e.length===0?rf(n,a,i):y1(n,e,a):(e&&sr(n),rf(n,a));e=a}else if(t instanceof Node){if(Ne.context&&t.parentNode)return e=o?[t]:t;if(Array.isArray(e)){if(o)return e=sr(n,e,i,t);sr(n,e,null,t)}else e==null||e===""||!n.firstChild?n.appendChild(t):n.replaceChild(t,n.firstChild);e=t}else console.warn("Unrecognized value. Skipped inserting",t)}return e}function Oc(n,t,e,i){let r=!1;for(let s=0,o=t.length;s<o;s++){let a=t[s],l=e&&e[s];if(a instanceof Node)n.push(a);else if(!(a==null||a===!0||a===!1))if(Array.isArray(a))r=Oc(n,a,l)||r;else if(typeof a=="function")if(i){for(;typeof a=="function";)a=a();r=Oc(n,Array.isArray(a)?a:[a],Array.isArray(l)?l:[l])||r}else n.push(a),r=!0;else{const c=String(a);c==="<!>"?l&&l.nodeType===8&&n.push(l):l&&l.nodeType===3&&l.data===c?n.push(l):n.push(document.createTextNode(c))}}return r}function rf(n,t,e=null){for(let i=0,r=t.length;i<r;i++)n.insertBefore(t[i],e)}function sr(n,t,e,i){if(e===void 0)return n.textContent="";const r=i||document.createTextNode("");if(t.length){let s=!1;for(let o=t.length-1;o>=0;o--){const a=t[o];if(r!==a){const l=a.parentNode===n;!s&&!o?l?n.replaceChild(r,a):n.insertBefore(r,e):l&&a.remove()}else s=!0}}else n.insertBefore(r,e);return[r]}const[Ac,M1]=Zt("view");document.body.classList.add("mode-view");l1(Ac).subscribe(n=>n[0]);const he={get(){return n1(_u)??Ac()},set(n){document.body.classList.remove(`mode-${Ac()}`),M1(n),document.body.classList.add(`mode-${n}`)}},_u=e1();const C1=_t("<span></span>",2),De=n=>{const[t,e]=pn(n,["class","name"]);return(()=>{const i=C1.cloneNode(!0);return xi(i,jn({get class(){return t.class?`material-icons ${t.class}`:"material-icons"}},e),!1,!0),J(i,()=>t.name),i})()},sf={admin:0,friend:1,guest:2};function Hg(n){return n?sf[of()]<=sf[n]:of()}function of(){switch(window.location.search){case"?iddqd":return"admin";case"?idkfa":return"friend"}return"guest"}var cs=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ug(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function O1(){this.__data__=[],this.size=0}var A1=O1;function T1(n,t){return n===t||n!==n&&t!==t}var Ba=T1,E1=Ba;function $1(n,t){for(var e=n.length;e--;)if(E1(n[e][0],t))return e;return-1}var Fa=$1,P1=Fa,D1=Array.prototype,I1=D1.splice;function N1(n){var t=this.__data__,e=P1(t,n);if(e<0)return!1;var i=t.length-1;return e==i?t.pop():I1.call(t,e,1),--this.size,!0}var L1=N1,R1=Fa;function z1(n){var t=this.__data__,e=R1(t,n);return e<0?void 0:t[e][1]}var B1=z1,F1=Fa;function j1(n){return F1(this.__data__,n)>-1}var V1=j1,H1=Fa;function U1(n,t){var e=this.__data__,i=H1(e,n);return i<0?(++this.size,e.push([n,t])):e[i][1]=t,this}var q1=U1,W1=A1,K1=L1,J1=B1,G1=V1,Y1=q1;function Hr(n){var t=-1,e=n==null?0:n.length;for(this.clear();++t<e;){var i=n[t];this.set(i[0],i[1])}}Hr.prototype.clear=W1;Hr.prototype.delete=K1;Hr.prototype.get=J1;Hr.prototype.has=G1;Hr.prototype.set=Y1;var ja=Hr,X1=ja;function Q1(){this.__data__=new X1,this.size=0}var Z1=Q1;function tv(n){var t=this.__data__,e=t.delete(n);return this.size=t.size,e}var ev=tv;function nv(n){return this.__data__.get(n)}var iv=nv;function rv(n){return this.__data__.has(n)}var sv=rv,ov=typeof cs=="object"&&cs&&cs.Object===Object&&cs,qg=ov,av=qg,lv=typeof self=="object"&&self&&self.Object===Object&&self,cv=av||lv||Function("return this")(),An=cv,uv=An,hv=uv.Symbol,Us=hv,af=Us,Wg=Object.prototype,fv=Wg.hasOwnProperty,dv=Wg.toString,ts=af?af.toStringTag:void 0;function pv(n){var t=fv.call(n,ts),e=n[ts];try{n[ts]=void 0;var i=!0}catch{}var r=dv.call(n);return i&&(t?n[ts]=e:delete n[ts]),r}var gv=pv,mv=Object.prototype,yv=mv.toString;function bv(n){return yv.call(n)}var vv=bv,lf=Us,xv=gv,wv=vv,_v="[object Null]",Sv="[object Undefined]",cf=lf?lf.toStringTag:void 0;function kv(n){return n==null?n===void 0?Sv:_v:cf&&cf in Object(n)?xv(n):wv(n)}var Ur=kv;function Mv(n){var t=typeof n;return n!=null&&(t=="object"||t=="function")}var Un=Mv,Cv=Ur,Ov=Un,Av="[object AsyncFunction]",Tv="[object Function]",Ev="[object GeneratorFunction]",$v="[object Proxy]";function Pv(n){if(!Ov(n))return!1;var t=Cv(n);return t==Tv||t==Ev||t==Av||t==$v}var Su=Pv,Dv=An,Iv=Dv["__core-js_shared__"],Nv=Iv,$l=Nv,uf=function(){var n=/[^.]+$/.exec($l&&$l.keys&&$l.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function Lv(n){return!!uf&&uf in n}var Rv=Lv,zv=Function.prototype,Bv=zv.toString;function Fv(n){if(n!=null){try{return Bv.call(n)}catch{}try{return n+""}catch{}}return""}var Kg=Fv,jv=Su,Vv=Rv,Hv=Un,Uv=Kg,qv=/[\\^$.*+?()[\]{}|]/g,Wv=/^\[object .+?Constructor\]$/,Kv=Function.prototype,Jv=Object.prototype,Gv=Kv.toString,Yv=Jv.hasOwnProperty,Xv=RegExp("^"+Gv.call(Yv).replace(qv,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Qv(n){if(!Hv(n)||Vv(n))return!1;var t=jv(n)?Xv:Wv;return t.test(Uv(n))}var Zv=Qv;function tx(n,t){return n?.[t]}var ex=tx,nx=Zv,ix=ex;function rx(n,t){var e=ix(n,t);return nx(e)?e:void 0}var nr=rx,sx=nr,ox=An,ax=sx(ox,"Map"),ku=ax,lx=nr,cx=lx(Object,"create"),Va=cx,hf=Va;function ux(){this.__data__=hf?hf(null):{},this.size=0}var hx=ux;function fx(n){var t=this.has(n)&&delete this.__data__[n];return this.size-=t?1:0,t}var dx=fx,px=Va,gx="__lodash_hash_undefined__",mx=Object.prototype,yx=mx.hasOwnProperty;function bx(n){var t=this.__data__;if(px){var e=t[n];return e===gx?void 0:e}return yx.call(t,n)?t[n]:void 0}var vx=bx,xx=Va,wx=Object.prototype,_x=wx.hasOwnProperty;function Sx(n){var t=this.__data__;return xx?t[n]!==void 0:_x.call(t,n)}var kx=Sx,Mx=Va,Cx="__lodash_hash_undefined__";function Ox(n,t){var e=this.__data__;return this.size+=this.has(n)?0:1,e[n]=Mx&&t===void 0?Cx:t,this}var Ax=Ox,Tx=hx,Ex=dx,$x=vx,Px=kx,Dx=Ax;function qr(n){var t=-1,e=n==null?0:n.length;for(this.clear();++t<e;){var i=n[t];this.set(i[0],i[1])}}qr.prototype.clear=Tx;qr.prototype.delete=Ex;qr.prototype.get=$x;qr.prototype.has=Px;qr.prototype.set=Dx;var Ix=qr,ff=Ix,Nx=ja,Lx=ku;function Rx(){this.size=0,this.__data__={hash:new ff,map:new(Lx||Nx),string:new ff}}var zx=Rx;function Bx(n){var t=typeof n;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?n!=="__proto__":n===null}var Fx=Bx,jx=Fx;function Vx(n,t){var e=n.__data__;return jx(t)?e[typeof t=="string"?"string":"hash"]:e.map}var Ha=Vx,Hx=Ha;function Ux(n){var t=Hx(this,n).delete(n);return this.size-=t?1:0,t}var qx=Ux,Wx=Ha;function Kx(n){return Wx(this,n).get(n)}var Jx=Kx,Gx=Ha;function Yx(n){return Gx(this,n).has(n)}var Xx=Yx,Qx=Ha;function Zx(n,t){var e=Qx(this,n),i=e.size;return e.set(n,t),this.size+=e.size==i?0:1,this}var tw=Zx,ew=zx,nw=qx,iw=Jx,rw=Xx,sw=tw;function Wr(n){var t=-1,e=n==null?0:n.length;for(this.clear();++t<e;){var i=n[t];this.set(i[0],i[1])}}Wr.prototype.clear=ew;Wr.prototype.delete=nw;Wr.prototype.get=iw;Wr.prototype.has=rw;Wr.prototype.set=sw;var Mu=Wr,ow=ja,aw=ku,lw=Mu,cw=200;function uw(n,t){var e=this.__data__;if(e instanceof ow){var i=e.__data__;if(!aw||i.length<cw-1)return i.push([n,t]),this.size=++e.size,this;e=this.__data__=new lw(i)}return e.set(n,t),this.size=e.size,this}var hw=uw,fw=ja,dw=Z1,pw=ev,gw=iv,mw=sv,yw=hw;function Kr(n){var t=this.__data__=new fw(n);this.size=t.size}Kr.prototype.clear=dw;Kr.prototype.delete=pw;Kr.prototype.get=gw;Kr.prototype.has=mw;Kr.prototype.set=yw;var Jg=Kr,bw=nr,vw=function(){try{var n=bw(Object,"defineProperty");return n({},"",{}),n}catch{}}(),Gg=vw,df=Gg;function xw(n,t,e){t=="__proto__"&&df?df(n,t,{configurable:!0,enumerable:!0,value:e,writable:!0}):n[t]=e}var Cu=xw,ww=Cu,_w=Ba;function Sw(n,t,e){(e!==void 0&&!_w(n[t],e)||e===void 0&&!(t in n))&&ww(n,t,e)}var Yg=Sw;function kw(n){return function(t,e,i){for(var r=-1,s=Object(t),o=i(t),a=o.length;a--;){var l=o[n?a:++r];if(e(s[l],l,s)===!1)break}return t}}var Mw=kw,Cw=Mw,Ow=Cw(),Aw=Ow,Es={},Tw={get exports(){return Es},set exports(n){Es=n}};(function(n,t){var e=An,i=t&&!t.nodeType&&t,r=i&&!0&&n&&!n.nodeType&&n,s=r&&r.exports===i,o=s?e.Buffer:void 0,a=o?o.allocUnsafe:void 0;function l(c,u){if(u)return c.slice();var h=c.length,f=a?a(h):new c.constructor(h);return c.copy(f),f}n.exports=l})(Tw,Es);var Ew=An,$w=Ew.Uint8Array,Pw=$w,pf=Pw;function Dw(n){var t=new n.constructor(n.byteLength);return new pf(t).set(new pf(n)),t}var Ou=Dw,Iw=Ou;function Nw(n,t){var e=t?Iw(n.buffer):n.buffer;return new n.constructor(e,n.byteOffset,n.length)}var Xg=Nw;function Lw(n,t){var e=-1,i=n.length;for(t||(t=Array(i));++e<i;)t[e]=n[e];return t}var Qg=Lw,Rw=Un,gf=Object.create,zw=function(){function n(){}return function(t){if(!Rw(t))return{};if(gf)return gf(t);n.prototype=t;var e=new n;return n.prototype=void 0,e}}(),Bw=zw;function Fw(n,t){return function(e){return n(t(e))}}var Zg=Fw,jw=Zg,Vw=jw(Object.getPrototypeOf,Object),Au=Vw,Hw=Object.prototype;function Uw(n){var t=n&&n.constructor,e=typeof t=="function"&&t.prototype||Hw;return n===e}var Tu=Uw,qw=Bw,Ww=Au,Kw=Tu;function Jw(n){return typeof n.constructor=="function"&&!Kw(n)?qw(Ww(n)):{}}var tm=Jw;function Gw(n){return n!=null&&typeof n=="object"}var wi=Gw,Yw=Ur,Xw=wi,Qw="[object Arguments]";function Zw(n){return Xw(n)&&Yw(n)==Qw}var t_=Zw,mf=t_,e_=wi,em=Object.prototype,n_=em.hasOwnProperty,i_=em.propertyIsEnumerable,r_=mf(function(){return arguments}())?mf:function(n){return e_(n)&&n_.call(n,"callee")&&!i_.call(n,"callee")},Ua=r_,s_=Array.isArray,qn=s_,o_=9007199254740991;function a_(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=o_}var Eu=a_,l_=Su,c_=Eu;function u_(n){return n!=null&&c_(n.length)&&!l_(n)}var qa=u_,h_=qa,f_=wi;function d_(n){return f_(n)&&h_(n)}var $u=d_,Or={},p_={get exports(){return Or},set exports(n){Or=n}};function g_(){return!1}var m_=g_;(function(n,t){var e=An,i=m_,r=t&&!t.nodeType&&t,s=r&&!0&&n&&!n.nodeType&&n,o=s&&s.exports===r,a=o?e.Buffer:void 0,l=a?a.isBuffer:void 0,c=l||i;n.exports=c})(p_,Or);var y_=Ur,b_=Au,v_=wi,x_="[object Object]",w_=Function.prototype,__=Object.prototype,nm=w_.toString,S_=__.hasOwnProperty,k_=nm.call(Object);function M_(n){if(!v_(n)||y_(n)!=x_)return!1;var t=b_(n);if(t===null)return!0;var e=S_.call(t,"constructor")&&t.constructor;return typeof e=="function"&&e instanceof e&&nm.call(e)==k_}var im=M_,C_=Ur,O_=Eu,A_=wi,T_="[object Arguments]",E_="[object Array]",$_="[object Boolean]",P_="[object Date]",D_="[object Error]",I_="[object Function]",N_="[object Map]",L_="[object Number]",R_="[object Object]",z_="[object RegExp]",B_="[object Set]",F_="[object String]",j_="[object WeakMap]",V_="[object ArrayBuffer]",H_="[object DataView]",U_="[object Float32Array]",q_="[object Float64Array]",W_="[object Int8Array]",K_="[object Int16Array]",J_="[object Int32Array]",G_="[object Uint8Array]",Y_="[object Uint8ClampedArray]",X_="[object Uint16Array]",Q_="[object Uint32Array]",Yt={};Yt[U_]=Yt[q_]=Yt[W_]=Yt[K_]=Yt[J_]=Yt[G_]=Yt[Y_]=Yt[X_]=Yt[Q_]=!0;Yt[T_]=Yt[E_]=Yt[V_]=Yt[$_]=Yt[H_]=Yt[P_]=Yt[D_]=Yt[I_]=Yt[N_]=Yt[L_]=Yt[R_]=Yt[z_]=Yt[B_]=Yt[F_]=Yt[j_]=!1;function Z_(n){return A_(n)&&O_(n.length)&&!!Yt[C_(n)]}var tS=Z_;function eS(n){return function(t){return n(t)}}var qs=eS,Ar={},nS={get exports(){return Ar},set exports(n){Ar=n}};(function(n,t){var e=qg,i=t&&!t.nodeType&&t,r=i&&!0&&n&&!n.nodeType&&n,s=r&&r.exports===i,o=s&&e.process,a=function(){try{var l=r&&r.require&&r.require("util").types;return l||o&&o.binding&&o.binding("util")}catch{}}();n.exports=a})(nS,Ar);var iS=tS,rS=qs,yf=Ar,bf=yf&&yf.isTypedArray,sS=bf?rS(bf):iS,rm=sS;function oS(n,t){if(!(t==="constructor"&&typeof n[t]=="function")&&t!="__proto__")return n[t]}var sm=oS,aS=Cu,lS=Ba,cS=Object.prototype,uS=cS.hasOwnProperty;function hS(n,t,e){var i=n[t];(!(uS.call(n,t)&&lS(i,e))||e===void 0&&!(t in n))&&aS(n,t,e)}var Pu=hS,fS=Pu,dS=Cu;function pS(n,t,e,i){var r=!e;e||(e={});for(var s=-1,o=t.length;++s<o;){var a=t[s],l=i?i(e[a],n[a],a,e,n):void 0;l===void 0&&(l=n[a]),r?dS(e,a,l):fS(e,a,l)}return e}var Jr=pS;function gS(n,t){for(var e=-1,i=Array(n);++e<n;)i[e]=t(e);return i}var mS=gS,yS=9007199254740991,bS=/^(?:0|[1-9]\d*)$/;function vS(n,t){var e=typeof n;return t=t??yS,!!t&&(e=="number"||e!="symbol"&&bS.test(n))&&n>-1&&n%1==0&&n<t}var Wa=vS,xS=mS,wS=Ua,_S=qn,SS=Or,kS=Wa,MS=rm,CS=Object.prototype,OS=CS.hasOwnProperty;function AS(n,t){var e=_S(n),i=!e&&wS(n),r=!e&&!i&&SS(n),s=!e&&!i&&!r&&MS(n),o=e||i||r||s,a=o?xS(n.length,String):[],l=a.length;for(var c in n)(t||OS.call(n,c))&&!(o&&(c=="length"||r&&(c=="offset"||c=="parent")||s&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||kS(c,l)))&&a.push(c);return a}var om=AS;function TS(n){var t=[];if(n!=null)for(var e in Object(n))t.push(e);return t}var ES=TS,$S=Un,PS=Tu,DS=ES,IS=Object.prototype,NS=IS.hasOwnProperty;function LS(n){if(!$S(n))return DS(n);var t=PS(n),e=[];for(var i in n)i=="constructor"&&(t||!NS.call(n,i))||e.push(i);return e}var RS=LS,zS=om,BS=RS,FS=qa;function jS(n){return FS(n)?zS(n,!0):BS(n)}var Ws=jS,VS=Jr,HS=Ws;function US(n){return VS(n,HS(n))}var qS=US,vf=Yg,WS=Es,KS=Xg,JS=Qg,GS=tm,xf=Ua,wf=qn,YS=$u,XS=Or,QS=Su,ZS=Un,tk=im,ek=rm,_f=sm,nk=qS;function ik(n,t,e,i,r,s,o){var a=_f(n,e),l=_f(t,e),c=o.get(l);if(c){vf(n,e,c);return}var u=s?s(a,l,e+"",n,t,o):void 0,h=u===void 0;if(h){var f=wf(l),d=!f&&XS(l),g=!f&&!d&&ek(l);u=l,f||d||g?wf(a)?u=a:YS(a)?u=JS(a):d?(h=!1,u=WS(l,!0)):g?(h=!1,u=KS(l,!0)):u=[]:tk(l)||xf(l)?(u=a,xf(a)?u=nk(a):(!ZS(a)||QS(a))&&(u=GS(l))):h=!1}h&&(o.set(l,u),r(u,l,i,s,o),o.delete(l)),vf(n,e,u)}var rk=ik,sk=Jg,ok=Yg,ak=Aw,lk=rk,ck=Un,uk=Ws,hk=sm;function am(n,t,e,i,r){n!==t&&ak(t,function(s,o){if(r||(r=new sk),ck(s))lk(n,t,o,e,am,i,r);else{var a=i?i(hk(n,o),s,o+"",n,t,r):void 0;a===void 0&&(a=s),ok(n,o,a)}},uk)}var fk=am;function dk(n){return n}var lm=dk;function pk(n,t,e){switch(e.length){case 0:return n.call(t);case 1:return n.call(t,e[0]);case 2:return n.call(t,e[0],e[1]);case 3:return n.call(t,e[0],e[1],e[2])}return n.apply(t,e)}var gk=pk,mk=gk,Sf=Math.max;function yk(n,t,e){return t=Sf(t===void 0?n.length-1:t,0),function(){for(var i=arguments,r=-1,s=Sf(i.length-t,0),o=Array(s);++r<s;)o[r]=i[t+r];r=-1;for(var a=Array(t+1);++r<t;)a[r]=i[r];return a[t]=e(o),mk(n,this,a)}}var cm=yk;function bk(n){return function(){return n}}var vk=bk,xk=vk,kf=Gg,wk=lm,_k=kf?function(n,t){return kf(n,"toString",{configurable:!0,enumerable:!1,value:xk(t),writable:!0})}:wk,Sk=_k,kk=800,Mk=16,Ck=Date.now;function Ok(n){var t=0,e=0;return function(){var i=Ck(),r=Mk-(i-e);if(e=i,r>0){if(++t>=kk)return arguments[0]}else t=0;return n.apply(void 0,arguments)}}var Ak=Ok,Tk=Sk,Ek=Ak,$k=Ek(Tk),um=$k,Pk=lm,Dk=cm,Ik=um;function Nk(n,t){return Ik(Dk(n,t,Pk),n+"")}var Du=Nk,Lk=Ba,Rk=qa,zk=Wa,Bk=Un;function Fk(n,t,e){if(!Bk(e))return!1;var i=typeof t;return(i=="number"?Rk(e)&&zk(t,e.length):i=="string"&&t in e)?Lk(e[t],n):!1}var jk=Fk,Vk=Du,Hk=jk;function Uk(n){return Vk(function(t,e){var i=-1,r=e.length,s=r>1?e[r-1]:void 0,o=r>2?e[2]:void 0;for(s=n.length>3&&typeof s=="function"?(r--,s):void 0,o&&Hk(e[0],e[1],o)&&(s=r<3?void 0:s,r=1),t=Object(t);++i<r;){var a=e[i];a&&n(t,a,i,s)}return t})}var qk=Uk,Wk=fk,Kk=qk,Jk=Kk(function(n,t,e){Wk(n,t,e)}),Fo=Jk;function Gk(n,t){for(var e=-1,i=n==null?0:n.length,r=Array(i);++e<i;)r[e]=t(n[e],e,n);return r}var Ks=Gk;function Yk(n,t){for(var e=-1,i=n==null?0:n.length;++e<i&&t(n[e],e,n)!==!1;);return n}var Xk=Yk,Qk=Zg,Zk=Qk(Object.keys,Object),tM=Zk,eM=Tu,nM=tM,iM=Object.prototype,rM=iM.hasOwnProperty;function sM(n){if(!eM(n))return nM(n);var t=[];for(var e in Object(n))rM.call(n,e)&&e!="constructor"&&t.push(e);return t}var oM=sM,aM=om,lM=oM,cM=qa;function uM(n){return cM(n)?aM(n):lM(n)}var Iu=uM,hM=Jr,fM=Iu;function dM(n,t){return n&&hM(t,fM(t),n)}var pM=dM,gM=Jr,mM=Ws;function yM(n,t){return n&&gM(t,mM(t),n)}var bM=yM;function vM(n,t){for(var e=-1,i=n==null?0:n.length,r=0,s=[];++e<i;){var o=n[e];t(o,e,n)&&(s[r++]=o)}return s}var xM=vM;function wM(){return[]}var hm=wM,_M=xM,SM=hm,kM=Object.prototype,MM=kM.propertyIsEnumerable,Mf=Object.getOwnPropertySymbols,CM=Mf?function(n){return n==null?[]:(n=Object(n),_M(Mf(n),function(t){return MM.call(n,t)}))}:SM,Nu=CM,OM=Jr,AM=Nu;function TM(n,t){return OM(n,AM(n),t)}var EM=TM;function $M(n,t){for(var e=-1,i=t.length,r=n.length;++e<i;)n[r+e]=t[e];return n}var Lu=$M,PM=Lu,DM=Au,IM=Nu,NM=hm,LM=Object.getOwnPropertySymbols,RM=LM?function(n){for(var t=[];n;)PM(t,IM(n)),n=DM(n);return t}:NM,fm=RM,zM=Jr,BM=fm;function FM(n,t){return zM(n,BM(n),t)}var jM=FM,VM=Lu,HM=qn;function UM(n,t,e){var i=t(n);return HM(n)?i:VM(i,e(n))}var dm=UM,qM=dm,WM=Nu,KM=Iu;function JM(n){return qM(n,KM,WM)}var GM=JM,YM=dm,XM=fm,QM=Ws;function ZM(n){return YM(n,QM,XM)}var pm=ZM,t2=nr,e2=An,n2=t2(e2,"DataView"),i2=n2,r2=nr,s2=An,o2=r2(s2,"Promise"),a2=o2,l2=nr,c2=An,u2=l2(c2,"Set"),gm=u2,h2=nr,f2=An,d2=h2(f2,"WeakMap"),p2=d2,Tc=i2,Ec=ku,$c=a2,Pc=gm,Dc=p2,mm=Ur,Gr=Kg,Cf="[object Map]",g2="[object Object]",Of="[object Promise]",Af="[object Set]",Tf="[object WeakMap]",Ef="[object DataView]",m2=Gr(Tc),y2=Gr(Ec),b2=Gr($c),v2=Gr(Pc),x2=Gr(Dc),$i=mm;(Tc&&$i(new Tc(new ArrayBuffer(1)))!=Ef||Ec&&$i(new Ec)!=Cf||$c&&$i($c.resolve())!=Of||Pc&&$i(new Pc)!=Af||Dc&&$i(new Dc)!=Tf)&&($i=function(n){var t=mm(n),e=t==g2?n.constructor:void 0,i=e?Gr(e):"";if(i)switch(i){case m2:return Ef;case y2:return Cf;case b2:return Of;case v2:return Af;case x2:return Tf}return t});var Ru=$i,w2=Object.prototype,_2=w2.hasOwnProperty;function S2(n){var t=n.length,e=new n.constructor(t);return t&&typeof n[0]=="string"&&_2.call(n,"index")&&(e.index=n.index,e.input=n.input),e}var k2=S2,M2=Ou;function C2(n,t){var e=t?M2(n.buffer):n.buffer;return new n.constructor(e,n.byteOffset,n.byteLength)}var O2=C2,A2=/\w*$/;function T2(n){var t=new n.constructor(n.source,A2.exec(n));return t.lastIndex=n.lastIndex,t}var E2=T2,$f=Us,Pf=$f?$f.prototype:void 0,Df=Pf?Pf.valueOf:void 0;function $2(n){return Df?Object(Df.call(n)):{}}var P2=$2,D2=Ou,I2=O2,N2=E2,L2=P2,R2=Xg,z2="[object Boolean]",B2="[object Date]",F2="[object Map]",j2="[object Number]",V2="[object RegExp]",H2="[object Set]",U2="[object String]",q2="[object Symbol]",W2="[object ArrayBuffer]",K2="[object DataView]",J2="[object Float32Array]",G2="[object Float64Array]",Y2="[object Int8Array]",X2="[object Int16Array]",Q2="[object Int32Array]",Z2="[object Uint8Array]",tC="[object Uint8ClampedArray]",eC="[object Uint16Array]",nC="[object Uint32Array]";function iC(n,t,e){var i=n.constructor;switch(t){case W2:return D2(n);case z2:case B2:return new i(+n);case K2:return I2(n,e);case J2:case G2:case Y2:case X2:case Q2:case Z2:case tC:case eC:case nC:return R2(n,e);case F2:return new i;case j2:case U2:return new i(n);case V2:return N2(n);case H2:return new i;case q2:return L2(n)}}var rC=iC,sC=Ru,oC=wi,aC="[object Map]";function lC(n){return oC(n)&&sC(n)==aC}var cC=lC,uC=cC,hC=qs,If=Ar,Nf=If&&If.isMap,fC=Nf?hC(Nf):uC,dC=fC,pC=Ru,gC=wi,mC="[object Set]";function yC(n){return gC(n)&&pC(n)==mC}var bC=yC,vC=bC,xC=qs,Lf=Ar,Rf=Lf&&Lf.isSet,wC=Rf?xC(Rf):vC,_C=wC,SC=Jg,kC=Xk,MC=Pu,CC=pM,OC=bM,AC=Es,TC=Qg,EC=EM,$C=jM,PC=GM,DC=pm,IC=Ru,NC=k2,LC=rC,RC=tm,zC=qn,BC=Or,FC=dC,jC=Un,VC=_C,HC=Iu,UC=Ws,qC=1,WC=2,KC=4,ym="[object Arguments]",JC="[object Array]",GC="[object Boolean]",YC="[object Date]",XC="[object Error]",bm="[object Function]",QC="[object GeneratorFunction]",ZC="[object Map]",tO="[object Number]",vm="[object Object]",eO="[object RegExp]",nO="[object Set]",iO="[object String]",rO="[object Symbol]",sO="[object WeakMap]",oO="[object ArrayBuffer]",aO="[object DataView]",lO="[object Float32Array]",cO="[object Float64Array]",uO="[object Int8Array]",hO="[object Int16Array]",fO="[object Int32Array]",dO="[object Uint8Array]",pO="[object Uint8ClampedArray]",gO="[object Uint16Array]",mO="[object Uint32Array]",Kt={};Kt[ym]=Kt[JC]=Kt[oO]=Kt[aO]=Kt[GC]=Kt[YC]=Kt[lO]=Kt[cO]=Kt[uO]=Kt[hO]=Kt[fO]=Kt[ZC]=Kt[tO]=Kt[vm]=Kt[eO]=Kt[nO]=Kt[iO]=Kt[rO]=Kt[dO]=Kt[pO]=Kt[gO]=Kt[mO]=!0;Kt[XC]=Kt[bm]=Kt[sO]=!1;function Mo(n,t,e,i,r,s){var o,a=t&qC,l=t&WC,c=t&KC;if(e&&(o=r?e(n,i,r,s):e(n)),o!==void 0)return o;if(!jC(n))return n;var u=zC(n);if(u){if(o=NC(n),!a)return TC(n,o)}else{var h=IC(n),f=h==bm||h==QC;if(BC(n))return AC(n,a);if(h==vm||h==ym||f&&!r){if(o=l||f?{}:RC(n),!a)return l?$C(n,OC(o,n)):EC(n,CC(o,n))}else{if(!Kt[h])return r?n:{};o=LC(n,h,a)}}s||(s=new SC);var d=s.get(n);if(d)return d;s.set(n,o),VC(n)?n.forEach(function(k){o.add(Mo(k,t,e,k,n,s))}):FC(n)&&n.forEach(function(k,O){o.set(O,Mo(k,t,e,O,n,s))});var g=c?l?DC:PC:l?UC:HC,b=u?void 0:g(n);return kC(b||n,function(k,O){b&&(O=k,k=n[O]),MC(o,O,Mo(k,t,e,O,n,s))}),o}var yO=Mo,bO=Ur,vO=wi,xO="[object Symbol]";function wO(n){return typeof n=="symbol"||vO(n)&&bO(n)==xO}var zu=wO,_O=qn,SO=zu,kO=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,MO=/^\w*$/;function CO(n,t){if(_O(n))return!1;var e=typeof n;return e=="number"||e=="symbol"||e=="boolean"||n==null||SO(n)?!0:MO.test(n)||!kO.test(n)||t!=null&&n in Object(t)}var OO=CO,xm=Mu,AO="Expected a function";function Bu(n,t){if(typeof n!="function"||t!=null&&typeof t!="function")throw new TypeError(AO);var e=function(){var i=arguments,r=t?t.apply(this,i):i[0],s=e.cache;if(s.has(r))return s.get(r);var o=n.apply(this,i);return e.cache=s.set(r,o)||s,o};return e.cache=new(Bu.Cache||xm),e}Bu.Cache=xm;var TO=Bu,EO=TO,$O=500;function PO(n){var t=EO(n,function(i){return e.size===$O&&e.clear(),i}),e=t.cache;return t}var DO=PO,IO=DO,NO=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,LO=/\\(\\)?/g,RO=IO(function(n){var t=[];return n.charCodeAt(0)===46&&t.push(""),n.replace(NO,function(e,i,r,s){t.push(r?s.replace(LO,"$1"):i||e)}),t}),zO=RO,zf=Us,BO=Ks,FO=qn,jO=zu,VO=1/0,Bf=zf?zf.prototype:void 0,Ff=Bf?Bf.toString:void 0;function wm(n){if(typeof n=="string")return n;if(FO(n))return BO(n,wm)+"";if(jO(n))return Ff?Ff.call(n):"";var t=n+"";return t=="0"&&1/n==-VO?"-0":t}var HO=wm,UO=HO;function qO(n){return n==null?"":UO(n)}var Fu=qO,WO=qn,KO=OO,JO=zO,GO=Fu;function YO(n,t){return WO(n)?n:KO(n,t)?[n]:JO(GO(n))}var Yr=YO;function XO(n){var t=n==null?0:n.length;return t?n[t-1]:void 0}var $s=XO,QO=zu,ZO=1/0;function tA(n){if(typeof n=="string"||QO(n))return n;var t=n+"";return t=="0"&&1/n==-ZO?"-0":t}var Ka=tA,eA=Yr,nA=Ka;function iA(n,t){t=eA(t,n);for(var e=0,i=t.length;n!=null&&e<i;)n=n[nA(t[e++])];return e&&e==i?n:void 0}var ju=iA;function rA(n,t,e){var i=-1,r=n.length;t<0&&(t=-t>r?0:r+t),e=e>r?r:e,e<0&&(e+=r),r=t>e?0:e-t>>>0,t>>>=0;for(var s=Array(r);++i<r;)s[i]=n[i+t];return s}var _m=rA,sA=ju,oA=_m;function aA(n,t){return t.length<2?n:sA(n,oA(t,0,-1))}var lA=aA,cA=Yr,uA=$s,hA=lA,fA=Ka;function dA(n,t){return t=cA(t,n),n=hA(n,t),n==null||delete n[fA(uA(t))]}var pA=dA,gA=im;function mA(n){return gA(n)?void 0:n}var yA=mA,jf=Us,bA=Ua,vA=qn,Vf=jf?jf.isConcatSpreadable:void 0;function xA(n){return vA(n)||bA(n)||!!(Vf&&n&&n[Vf])}var wA=xA,_A=Lu,SA=wA;function Sm(n,t,e,i,r){var s=-1,o=n.length;for(e||(e=SA),r||(r=[]);++s<o;){var a=n[s];t>0&&e(a)?t>1?Sm(a,t-1,e,i,r):_A(r,a):i||(r[r.length]=a)}return r}var km=Sm,kA=km;function MA(n){var t=n==null?0:n.length;return t?kA(n,1):[]}var CA=MA,OA=CA,AA=cm,TA=um;function EA(n){return TA(AA(n,void 0,OA),n+"")}var Mm=EA,$A=Ks,PA=yO,DA=pA,IA=Yr,NA=Jr,LA=yA,RA=Mm,zA=pm,BA=1,FA=2,jA=4,VA=RA(function(n,t){var e={};if(n==null)return e;var i=!1;t=$A(t,function(s){return s=IA(s,n),i||(i=s.length>1),s}),NA(n,zA(n),e),i&&(e=PA(e,BA|FA|jA,LA));for(var r=t.length;r--;)DA(e,t[r]);return e}),HA=VA,UA=Pu,qA=Yr,WA=Wa,Hf=Un,KA=Ka;function JA(n,t,e,i){if(!Hf(n))return n;t=qA(t,n);for(var r=-1,s=t.length,o=s-1,a=n;a!=null&&++r<s;){var l=KA(t[r]),c=e;if(l==="__proto__"||l==="constructor"||l==="prototype")return n;if(r!=o){var u=a[l];c=i?i(u,l,a):void 0,c===void 0&&(c=Hf(u)?u:WA(t[r+1])?[]:{})}UA(a,l,c),a=a[l]}return n}var Cm=JA,GA=ju,YA=Cm,XA=Yr;function QA(n,t,e){for(var i=-1,r=t.length,s={};++i<r;){var o=t[i],a=GA(n,o);e(a,o)&&YA(s,XA(o,n),a)}return s}var ZA=QA;function tT(n,t){return n!=null&&t in Object(n)}var eT=tT,nT=Yr,iT=Ua,rT=qn,sT=Wa,oT=Eu,aT=Ka;function lT(n,t,e){t=nT(t,n);for(var i=-1,r=t.length,s=!1;++i<r;){var o=aT(t[i]);if(!(s=n!=null&&e(n,o)))break;n=n[o]}return s||++i!=r?s:(r=n==null?0:n.length,!!r&&oT(r)&&sT(o,r)&&(rT(n)||iT(n)))}var cT=lT,uT=eT,hT=cT;function fT(n,t){return n!=null&&hT(n,t,uT)}var dT=fT,pT=ZA,gT=dT;function mT(n,t){return pT(n,t,function(e,i){return gT(n,i)})}var yT=mT,bT=yT,vT=Mm,xT=vT(function(n,t){return n==null?{}:bT(n,t)}),wT=xT;const Tr=Symbol("store-raw"),di=Symbol("store-node"),Om=Symbol("store-name");function Am(n,t){let e=n[xe];if(!e&&(Object.defineProperty(n,xe,{value:e=new Proxy(n,ST)}),!Array.isArray(n))){const i=Object.keys(n),r=Object.getOwnPropertyDescriptors(n);for(let s=0,o=i.length;s<o;s++){const a=i[s];r[a].get&&Object.defineProperty(n,a,{enumerable:r[a].enumerable,get:r[a].get.bind(e)})}}return e}function Ki(n){let t;return n!=null&&typeof n=="object"&&(n[xe]||!(t=Object.getPrototypeOf(n))||t===Object.prototype||Array.isArray(n))}function pi(n,t=new Set){let e,i,r,s;if(e=n!=null&&n[Tr])return e;if(!Ki(n)||t.has(n))return n;if(Array.isArray(n)){Object.isFrozen(n)?n=n.slice(0):t.add(n);for(let o=0,a=n.length;o<a;o++)r=n[o],(i=pi(r,t))!==r&&(n[o]=i)}else{Object.isFrozen(n)?n=Object.assign({},n):t.add(n);const o=Object.keys(n),a=Object.getOwnPropertyDescriptors(n);for(let l=0,c=o.length;l<c;l++)s=o[l],!a[s].get&&(r=n[s],(i=pi(r,t))!==r&&(n[s]=i))}return n}function Ja(n){let t=n[di];return t||Object.defineProperty(n,di,{value:t={}}),t}function jo(n,t,e){return n[t]||(n[t]=Em(e))}function _T(n,t){const e=Reflect.getOwnPropertyDescriptor(n,t);return!e||e.get||!e.configurable||t===xe||t===di||t===Om||(delete e.value,delete e.writable,e.get=()=>n[xe][t]),e}function Vu(n){if(wu()){const t=Ja(n);(t._||(t._=Em()))()}}function Tm(n){return Vu(n),Reflect.ownKeys(n)}function Em(n){const[t,e]=Zt(n,{equals:!1,internal:!0});return t.$=e,t}const ST={get(n,t,e){if(t===Tr)return n;if(t===xe)return e;if(t===Ts)return Vu(n),e;const i=Ja(n),r=i.hasOwnProperty(t);let s=r?i[t]():n[t];if(t===di||t==="__proto__")return s;if(!r){const o=Object.getOwnPropertyDescriptor(n,t);wu()&&(typeof s!="function"||n.hasOwnProperty(t))&&!(o&&o.get)&&(s=jo(i,t,s)())}return Ki(s)?Am(s):s},has(n,t){return t===Tr||t===xe||t===Ts||t===di||t==="__proto__"?!0:(this.get(n,t,n),t in n)},set(){return!0},deleteProperty(){return!0},ownKeys:Tm,getOwnPropertyDescriptor:_T};function gi(n,t,e,i=!1){if(!i&&n[t]===e)return;const r=n[t],s=n.length;e===void 0?delete n[t]:n[t]=e;let o=Ja(n),a;(a=jo(o,t,r))&&a.$(()=>e),Array.isArray(n)&&n.length!==s&&(a=jo(o,"length",s))&&a.$(n.length),(a=o._)&&a.$()}function $m(n,t){const e=Object.keys(t);for(let i=0;i<e.length;i+=1){const r=e[i];gi(n,r,t[r])}}function kT(n,t){if(typeof t=="function"&&(t=t(n)),t=pi(t),Array.isArray(t)){if(n===t)return;let e=0,i=t.length;for(;e<i;e++){const r=t[e];n[e]!==r&&gi(n,e,r)}gi(n,"length",i)}else $m(n,t)}function us(n,t,e=[]){let i,r=n;if(t.length>1){i=t.shift();const o=typeof i,a=Array.isArray(n);if(Array.isArray(i)){for(let l=0;l<i.length;l++)us(n,[i[l]].concat(t),e);return}else if(a&&o==="function"){for(let l=0;l<n.length;l++)i(n[l],l)&&us(n,[l].concat(t),e);return}else if(a&&o==="object"){const{from:l=0,to:c=n.length-1,by:u=1}=i;for(let h=l;h<=c;h+=u)us(n,[h].concat(t),e);return}else if(t.length>1){us(n[i],t,[i].concat(e));return}r=n[i],e=[i].concat(e)}let s=t[0];typeof s=="function"&&(s=s(r,e),s===r)||i===void 0&&s==null||(s=pi(s),i===void 0||Ki(r)&&Ki(s)&&!Array.isArray(s)?$m(r,s):gi(n,i,s))}function Pm(...[n,t]){const e=pi(n||{}),i=Array.isArray(e),r=Am(e);function s(...o){ys(()=>{i&&o.length===1?kT(e,o[0]):us(e,o)})}return[r,s]}function MT(n,t){const e=Reflect.getOwnPropertyDescriptor(n,t);return!e||e.get||e.set||!e.configurable||t===xe||t===di||t===Om||(delete e.value,delete e.writable,e.get=()=>n[xe][t],e.set=i=>n[xe][t]=i),e}const CT={get(n,t,e){if(t===Tr)return n;if(t===xe)return e;if(t===Ts)return Vu(n),e;const i=Ja(n),r=i.hasOwnProperty(t);let s=r?i[t]():n[t];if(t===di||t==="__proto__")return s;if(!r){const o=Object.getOwnPropertyDescriptor(n,t),a=typeof s=="function";if(wu()&&(!a||n.hasOwnProperty(t))&&!(o&&o.get))s=jo(i,t,s)();else if(s!=null&&a&&s===Array.prototype[t])return(...l)=>ys(()=>Array.prototype[t].apply(e,l))}return Ki(s)?Dm(s):s},has(n,t){return t===Tr||t===xe||t===Ts||t===di||t==="__proto__"?!0:(this.get(n,t,n),t in n)},set(n,t,e){return ys(()=>gi(n,t,pi(e))),!0},deleteProperty(n,t){return ys(()=>gi(n,t,void 0,!0)),!0},ownKeys:Tm,getOwnPropertyDescriptor:MT};function Dm(n,t){let e=n[xe];if(!e){Object.defineProperty(n,xe,{value:e=new Proxy(n,CT)});const i=Object.keys(n),r=Object.getOwnPropertyDescriptors(n);for(let s=0,o=i.length;s<o;s++){const a=i[s];if(r[a].get){const l=r[a].get.bind(e);Object.defineProperty(n,a,{get:l})}if(r[a].set){const l=r[a].set;Object.defineProperty(n,a,{set:u=>ys(()=>l.call(e,u))})}}}return e}function OT(n,t){const e=pi(n||{});return Dm(e)}const Vo=new WeakMap,Im={get(n,t){if(t===Tr)return n;const e=n[t];let i;return Ki(e)?Vo.get(e)||(Vo.set(e,i=new Proxy(e,Im)),i):e},set(n,t,e){return gi(n,t,pi(e)),!0},deleteProperty(n,t){return gi(n,t,void 0,!0),!0}};function Ho(n){return t=>{if(Ki(t)){let e;(e=Vo.get(t))||Vo.set(t,e=new Proxy(t,Im)),n(e)}return t}}var Uo={},AT={get exports(){return Uo},set exports(n){Uo=n}};(function(n){var t=function(){var e=String.fromCharCode,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",s={};function o(l,c){if(!s[l]){s[l]={};for(var u=0;u<l.length;u++)s[l][l.charAt(u)]=u}return s[l][c]}var a={compressToBase64:function(l){if(l==null)return"";var c=a._compress(l,6,function(u){return i.charAt(u)});switch(c.length%4){default:case 0:return c;case 1:return c+"===";case 2:return c+"==";case 3:return c+"="}},decompressFromBase64:function(l){return l==null?"":l==""?null:a._decompress(l.length,32,function(c){return o(i,l.charAt(c))})},compressToUTF16:function(l){return l==null?"":a._compress(l,15,function(c){return e(c+32)})+" "},decompressFromUTF16:function(l){return l==null?"":l==""?null:a._decompress(l.length,16384,function(c){return l.charCodeAt(c)-32})},compressToUint8Array:function(l){for(var c=a.compress(l),u=new Uint8Array(c.length*2),h=0,f=c.length;h<f;h++){var d=c.charCodeAt(h);u[h*2]=d>>>8,u[h*2+1]=d%256}return u},decompressFromUint8Array:function(l){if(l==null)return a.decompress(l);for(var c=new Array(l.length/2),u=0,h=c.length;u<h;u++)c[u]=l[u*2]*256+l[u*2+1];var f=[];return c.forEach(function(d){f.push(e(d))}),a.decompress(f.join(""))},compressToEncodedURIComponent:function(l){return l==null?"":a._compress(l,6,function(c){return r.charAt(c)})},decompressFromEncodedURIComponent:function(l){return l==null?"":l==""?null:(l=l.replace(/ /g,"+"),a._decompress(l.length,32,function(c){return o(r,l.charAt(c))}))},compress:function(l){return a._compress(l,16,function(c){return e(c)})},_compress:function(l,c,u){if(l==null)return"";var h,f,d={},g={},b="",k="",O="",D=2,F=3,W=2,V=[],T=0,L=0,R;for(R=0;R<l.length;R+=1)if(b=l.charAt(R),Object.prototype.hasOwnProperty.call(d,b)||(d[b]=F++,g[b]=!0),k=O+b,Object.prototype.hasOwnProperty.call(d,k))O=k;else{if(Object.prototype.hasOwnProperty.call(g,O)){if(O.charCodeAt(0)<256){for(h=0;h<W;h++)T=T<<1,L==c-1?(L=0,V.push(u(T)),T=0):L++;for(f=O.charCodeAt(0),h=0;h<8;h++)T=T<<1|f&1,L==c-1?(L=0,V.push(u(T)),T=0):L++,f=f>>1}else{for(f=1,h=0;h<W;h++)T=T<<1|f,L==c-1?(L=0,V.push(u(T)),T=0):L++,f=0;for(f=O.charCodeAt(0),h=0;h<16;h++)T=T<<1|f&1,L==c-1?(L=0,V.push(u(T)),T=0):L++,f=f>>1}D--,D==0&&(D=Math.pow(2,W),W++),delete g[O]}else for(f=d[O],h=0;h<W;h++)T=T<<1|f&1,L==c-1?(L=0,V.push(u(T)),T=0):L++,f=f>>1;D--,D==0&&(D=Math.pow(2,W),W++),d[k]=F++,O=String(b)}if(O!==""){if(Object.prototype.hasOwnProperty.call(g,O)){if(O.charCodeAt(0)<256){for(h=0;h<W;h++)T=T<<1,L==c-1?(L=0,V.push(u(T)),T=0):L++;for(f=O.charCodeAt(0),h=0;h<8;h++)T=T<<1|f&1,L==c-1?(L=0,V.push(u(T)),T=0):L++,f=f>>1}else{for(f=1,h=0;h<W;h++)T=T<<1|f,L==c-1?(L=0,V.push(u(T)),T=0):L++,f=0;for(f=O.charCodeAt(0),h=0;h<16;h++)T=T<<1|f&1,L==c-1?(L=0,V.push(u(T)),T=0):L++,f=f>>1}D--,D==0&&(D=Math.pow(2,W),W++),delete g[O]}else for(f=d[O],h=0;h<W;h++)T=T<<1|f&1,L==c-1?(L=0,V.push(u(T)),T=0):L++,f=f>>1;D--,D==0&&(D=Math.pow(2,W),W++)}for(f=2,h=0;h<W;h++)T=T<<1|f&1,L==c-1?(L=0,V.push(u(T)),T=0):L++,f=f>>1;for(;;)if(T=T<<1,L==c-1){V.push(u(T));break}else L++;return V.join("")},decompress:function(l){return l==null?"":l==""?null:a._decompress(l.length,32768,function(c){return l.charCodeAt(c)})},_decompress:function(l,c,u){var h=[],f=4,d=4,g=3,b="",k=[],O,D,F,W,V,T,L,R={val:u(0),position:c,index:1};for(O=0;O<3;O+=1)h[O]=O;for(F=0,V=Math.pow(2,2),T=1;T!=V;)W=R.val&R.position,R.position>>=1,R.position==0&&(R.position=c,R.val=u(R.index++)),F|=(W>0?1:0)*T,T<<=1;switch(F){case 0:for(F=0,V=Math.pow(2,8),T=1;T!=V;)W=R.val&R.position,R.position>>=1,R.position==0&&(R.position=c,R.val=u(R.index++)),F|=(W>0?1:0)*T,T<<=1;L=e(F);break;case 1:for(F=0,V=Math.pow(2,16),T=1;T!=V;)W=R.val&R.position,R.position>>=1,R.position==0&&(R.position=c,R.val=u(R.index++)),F|=(W>0?1:0)*T,T<<=1;L=e(F);break;case 2:return""}for(h[3]=L,D=L,k.push(L);;){if(R.index>l)return"";for(F=0,V=Math.pow(2,g),T=1;T!=V;)W=R.val&R.position,R.position>>=1,R.position==0&&(R.position=c,R.val=u(R.index++)),F|=(W>0?1:0)*T,T<<=1;switch(L=F){case 0:for(F=0,V=Math.pow(2,8),T=1;T!=V;)W=R.val&R.position,R.position>>=1,R.position==0&&(R.position=c,R.val=u(R.index++)),F|=(W>0?1:0)*T,T<<=1;h[d++]=e(F),L=d-1,f--;break;case 1:for(F=0,V=Math.pow(2,16),T=1;T!=V;)W=R.val&R.position,R.position>>=1,R.position==0&&(R.position=c,R.val=u(R.index++)),F|=(W>0?1:0)*T,T<<=1;h[d++]=e(F),L=d-1,f--;break;case 2:return k.join("")}if(f==0&&(f=Math.pow(2,g),g++),h[L])b=h[L];else if(L===d)b=D+D.charAt(0);else return null;k.push(b),h[d++]=D+b.charAt(0),f--,D=b,f==0&&(f=Math.pow(2,g),g++)}}};return a}();n!=null?n.exports=t:typeof angular<"u"&&angular!=null&&angular.module("LZString",[]).factory("LZString",function(){return t})})(AT);const Nm={title:"Curriculum Vitae",person:{name:"Someone Awesome"},cv:{experience:[],profile:{grouped:!0,scope:[0,1]}},keywords:{}},[es,Pl]=Pm(Nm),[TT,Uf]=Zt(!1),qf=["person.contacts","person.documents","person.location","cv.profile"],kt={store:es,init:n=>{const t=()=>{try{return JSON.parse(window.localStorage.getItem("data")??"")}catch{return{}}},e=()=>{try{return JSON.parse(Uo.decompressFromBase64(document.location.hash.substring(1)))}catch{return{}}},i=Fo({},Nm,n,t(),e());for(const r of Object.keys(i))Pl(r,i[r])},isModified:TT,export:()=>({persisted:HA(es,qf),exported:wT(es,qf)}),import:()=>Pl(Ho(n=>Fo(n,es))),update:n=>{Pl(Ho(t=>{n(t),Uf(!0)}))},persist(){console.log(1),window.localStorage.setItem("data",JSON.stringify(es)),console.log(2),Uf(!1),console.log(3)}};const ET=_t('<nav class="toggle"><ul><li></li><li><input type="checkbox" role="switch"></li><li></li></ul></nav>',11),Ga=n=>{const[t,e]=pn(n,["value","offIcon","onIcon","handler"]);return(()=>{const i=ET.cloneNode(!0),r=i.firstChild,s=r.firstChild,o=s.nextSibling,a=o.firstChild,l=o.nextSibling;return xi(i,e,!1,!0),J(s,I(De,{get name(){return t.offIcon}})),a.addEventListener("change",({target:c})=>{c instanceof HTMLInputElement&&t.handler(!n.value)}),J(l,I(De,{get name(){return t.onIcon}})),Oe(()=>a.checked=n.value),i})()},$T=()=>I(Ga,{offIcon:"preview",onIcon:"edit_note",get value(){return he.get()==="edit"},get classList(){return{invisible:!Hg("admin")}},handler:n=>{n?(he.set("edit"),window.onbeforeunload=()=>kt.persist()):(window.onbeforeunload=null,kt.persist(),he.set("view"))}});const Js=(...n)=>n.filter(t=>!!t).join(" "),Lm=()=>`${document.location.protocol}//${document.location.host}/#${Uo.compressToBase64(JSON.stringify(kt.export().exported))}`;const PT=_t("<button></button>",2),Nt=n=>{const[t,e]=pn(n,["icon","class","action"]);return(()=>{const i=PT.cloneNode(!0);return i.$$click=()=>t.action(),xi(i,jn({get class(){return Js("material-symbols-outlined",t.class)}},e),!1,!0),J(i,()=>t.icon),i})()};vi(["click"]);const DT=_t("<dialog></dialog>",2),dr=OT([]),IT=()=>{const[n,t]=Pm([]);return()=>(()=>{const e=DT.cloneNode(!0);return J(e,()=>(dr.length<n.length&&t(Ho(i=>i.pop())),dr.length>n.length&&t(Ho(i=>i.push($s(dr)()))),$s(n))),Oe(()=>e.open=!!dr.length),e})()};Fg(()=>I(IT,{}),document.body);const re={push(n){dr.push(n)},back(){dr.pop()}},NT=_t("<article><header><h1>Are you sure?</h1></header><p>This action will reset all the data to it's initial state and reload the page.</p><p><i><b>If you've done any edits, they will be lost.</b></i></p><footer><nav><ul><li></li></ul><ul><li></li></ul></nav></footer></article>",26),LT=()=>I(Nt,{icon:"restart_alt",action:()=>{re.push(()=>(()=>{const n=NT.cloneNode(!0),t=n.firstChild,e=t.nextSibling,i=e.nextSibling,r=i.nextSibling,s=r.firstChild,o=s.firstChild,a=o.firstChild,l=o.nextSibling,c=l.firstChild;return J(a,I(Nt,{icon:"close",get action(){return re.back}})),J(c,I(Nt,{icon:"done",action:()=>{window.localStorage.clear(),window.location.reload()}})),n})())},class:"danger outline"});var Ic=function(n,t){return Ic=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])},Ic(n,t)};function Ya(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Ic(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}function Nc(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],i=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function qo(n,t){var e=typeof Symbol=="function"&&n[Symbol.iterator];if(!e)return n;var i=e.call(n),r,s=[],o;try{for(;(t===void 0||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(a){o={error:a}}finally{try{r&&!r.done&&(e=i.return)&&e.call(i)}finally{if(o)throw o.error}}return s}function Wo(n,t,e){if(e||arguments.length===2)for(var i=0,r=t.length,s;i<r;i++)(s||!(i in t))&&(s||(s=Array.prototype.slice.call(t,0,i)),s[i]=t[i]);return n.concat(s||Array.prototype.slice.call(t))}function zn(n){return typeof n=="function"}function Rm(n){var t=function(i){Error.call(i),i.stack=new Error().stack},e=n(t);return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}var Dl=Rm(function(n){return function(e){n(this),this.message=e?e.length+` errors occurred during unsubscription:
`+e.map(function(i,r){return r+1+") "+i.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=e}});function Lc(n,t){if(n){var e=n.indexOf(t);0<=e&&n.splice(e,1)}}var Xa=function(){function n(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}return n.prototype.unsubscribe=function(){var t,e,i,r,s;if(!this.closed){this.closed=!0;var o=this._parentage;if(o)if(this._parentage=null,Array.isArray(o))try{for(var a=Nc(o),l=a.next();!l.done;l=a.next()){var c=l.value;c.remove(this)}}catch(b){t={error:b}}finally{try{l&&!l.done&&(e=a.return)&&e.call(a)}finally{if(t)throw t.error}}else o.remove(this);var u=this.initialTeardown;if(zn(u))try{u()}catch(b){s=b instanceof Dl?b.errors:[b]}var h=this._finalizers;if(h){this._finalizers=null;try{for(var f=Nc(h),d=f.next();!d.done;d=f.next()){var g=d.value;try{Wf(g)}catch(b){s=s??[],b instanceof Dl?s=Wo(Wo([],qo(s)),qo(b.errors)):s.push(b)}}}catch(b){i={error:b}}finally{try{d&&!d.done&&(r=f.return)&&r.call(f)}finally{if(i)throw i.error}}}if(s)throw new Dl(s)}},n.prototype.add=function(t){var e;if(t&&t!==this)if(this.closed)Wf(t);else{if(t instanceof n){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(e=this._finalizers)!==null&&e!==void 0?e:[]).push(t)}},n.prototype._hasParent=function(t){var e=this._parentage;return e===t||Array.isArray(e)&&e.includes(t)},n.prototype._addParent=function(t){var e=this._parentage;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t},n.prototype._removeParent=function(t){var e=this._parentage;e===t?this._parentage=null:Array.isArray(e)&&Lc(e,t)},n.prototype.remove=function(t){var e=this._finalizers;e&&Lc(e,t),t instanceof n&&t._removeParent(this)},n.EMPTY=function(){var t=new n;return t.closed=!0,t}(),n}(),zm=Xa.EMPTY;function Bm(n){return n instanceof Xa||n&&"closed"in n&&zn(n.remove)&&zn(n.add)&&zn(n.unsubscribe)}function Wf(n){zn(n)?n():n.unsubscribe()}var Fm={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Rc={setTimeout:function(n,t){for(var e=[],i=2;i<arguments.length;i++)e[i-2]=arguments[i];var r=Rc.delegate;return r?.setTimeout?r.setTimeout.apply(r,Wo([n,t],qo(e))):setTimeout.apply(void 0,Wo([n,t],qo(e)))},clearTimeout:function(n){var t=Rc.delegate;return(t?.clearTimeout||clearTimeout)(n)},delegate:void 0};function RT(n){Rc.setTimeout(function(){throw n})}function Kf(){}function Co(n){n()}var jm=function(n){Ya(t,n);function t(e){var i=n.call(this)||this;return i.isStopped=!1,e?(i.destination=e,Bm(e)&&e.add(i)):i.destination=jT,i}return t.create=function(e,i,r){return new zc(e,i,r)},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,n.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(Xa),zT=Function.prototype.bind;function Il(n,t){return zT.call(n,t)}var BT=function(){function n(t){this.partialObserver=t}return n.prototype.next=function(t){var e=this.partialObserver;if(e.next)try{e.next(t)}catch(i){ro(i)}},n.prototype.error=function(t){var e=this.partialObserver;if(e.error)try{e.error(t)}catch(i){ro(i)}else ro(t)},n.prototype.complete=function(){var t=this.partialObserver;if(t.complete)try{t.complete()}catch(e){ro(e)}},n}(),zc=function(n){Ya(t,n);function t(e,i,r){var s=n.call(this)||this,o;if(zn(e)||!e)o={next:e??void 0,error:i??void 0,complete:r??void 0};else{var a;s&&Fm.useDeprecatedNextContext?(a=Object.create(e),a.unsubscribe=function(){return s.unsubscribe()},o={next:e.next&&Il(e.next,a),error:e.error&&Il(e.error,a),complete:e.complete&&Il(e.complete,a)}):o=e}return s.destination=new BT(o),s}return t}(jm);function ro(n){RT(n)}function FT(n){throw n}var jT={closed:!0,next:Kf,error:FT,complete:Kf},VT=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function HT(n){return n}function UT(n){return n.length===0?HT:n.length===1?n[0]:function(e){return n.reduce(function(i,r){return r(i)},e)}}var Jf=function(){function n(t){t&&(this._subscribe=t)}return n.prototype.lift=function(t){var e=new n;return e.source=this,e.operator=t,e},n.prototype.subscribe=function(t,e,i){var r=this,s=WT(t)?t:new zc(t,e,i);return Co(function(){var o=r,a=o.operator,l=o.source;s.add(a?a.call(s,l):l?r._subscribe(s):r._trySubscribe(s))}),s},n.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){t.error(e)}},n.prototype.forEach=function(t,e){var i=this;return e=Gf(e),new e(function(r,s){var o=new zc({next:function(a){try{t(a)}catch(l){s(l),o.unsubscribe()}},error:s,complete:r});i.subscribe(o)})},n.prototype._subscribe=function(t){var e;return(e=this.source)===null||e===void 0?void 0:e.subscribe(t)},n.prototype[VT]=function(){return this},n.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return UT(t)(this)},n.prototype.toPromise=function(t){var e=this;return t=Gf(t),new t(function(i,r){var s;e.subscribe(function(o){return s=o},function(o){return r(o)},function(){return i(s)})})},n.create=function(t){return new n(t)},n}();function Gf(n){var t;return(t=n??Fm.Promise)!==null&&t!==void 0?t:Promise}function qT(n){return n&&zn(n.next)&&zn(n.error)&&zn(n.complete)}function WT(n){return n&&n instanceof jm||qT(n)&&Bm(n)}var KT=Rm(function(n){return function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),Vm=function(n){Ya(t,n);function t(){var e=n.call(this)||this;return e.closed=!1,e.currentObservers=null,e.observers=[],e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return t.prototype.lift=function(e){var i=new Yf(this,this);return i.operator=e,i},t.prototype._throwIfClosed=function(){if(this.closed)throw new KT},t.prototype.next=function(e){var i=this;Co(function(){var r,s;if(i._throwIfClosed(),!i.isStopped){i.currentObservers||(i.currentObservers=Array.from(i.observers));try{for(var o=Nc(i.currentObservers),a=o.next();!a.done;a=o.next()){var l=a.value;l.next(e)}}catch(c){r={error:c}}finally{try{a&&!a.done&&(s=o.return)&&s.call(o)}finally{if(r)throw r.error}}}})},t.prototype.error=function(e){var i=this;Co(function(){if(i._throwIfClosed(),!i.isStopped){i.hasError=i.isStopped=!0,i.thrownError=e;for(var r=i.observers;r.length;)r.shift().error(e)}})},t.prototype.complete=function(){var e=this;Co(function(){if(e._throwIfClosed(),!e.isStopped){e.isStopped=!0;for(var i=e.observers;i.length;)i.shift().complete()}})},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var e;return((e=this.observers)===null||e===void 0?void 0:e.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(e){return this._throwIfClosed(),n.prototype._trySubscribe.call(this,e)},t.prototype._subscribe=function(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)},t.prototype._innerSubscribe=function(e){var i=this,r=this,s=r.hasError,o=r.isStopped,a=r.observers;return s||o?zm:(this.currentObservers=null,a.push(e),new Xa(function(){i.currentObservers=null,Lc(a,e)}))},t.prototype._checkFinalizedStatuses=function(e){var i=this,r=i.hasError,s=i.thrownError,o=i.isStopped;r?e.error(s):o&&e.complete()},t.prototype.asObservable=function(){var e=new Jf;return e.source=this,e},t.create=function(e,i){return new Yf(e,i)},t}(Jf),Yf=function(n){Ya(t,n);function t(e,i){var r=n.call(this)||this;return r.destination=e,r.source=i,r}return t.prototype.next=function(e){var i,r;(r=(i=this.destination)===null||i===void 0?void 0:i.next)===null||r===void 0||r.call(i,e)},t.prototype.error=function(e){var i,r;(r=(i=this.destination)===null||i===void 0?void 0:i.error)===null||r===void 0||r.call(i,e)},t.prototype.complete=function(){var e,i;(i=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||i===void 0||i.call(e)},t.prototype._subscribe=function(e){var i,r;return(r=(i=this.source)===null||i===void 0?void 0:i.subscribe(e))!==null&&r!==void 0?r:zm},t}(Vm);const[Hm,Um]=Zt(!1),[qm,JT]=Zt(window.matchMedia("(prefers-color-scheme: dark)").matches),Wm=new Vm,or=()=>Ko.value,In={isInversed:Hm,setInversed(n){Um(n),Hu()},getCurrent:or,getInversed:()=>qm()?"light":"dark",getColor(n){switch(n){case"professional":return or()==="light"?"#00897b":"#43a047";case"education":return or()==="light"?"#f4511e":"#fdd835";case"hobby":return or()==="light","#546e7a";case"primary":return or()==="light","#039be5"}return or()==="light"?"#000":"#fff"},observe(n){Wm.subscribe(n)}},Ko=document.createAttribute("data-theme");document.body.parentElement?.attributes.setNamedItem(Ko);const Hu=()=>{Ko.value=qm()!==Hm()?"dark":"light",Wm.next(Ko.value)};window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",({matches:n})=>{JT(!!n),Um(!1),Hu()});Hu();const GT=()=>I(Ga,{get value(){return In.isInversed()},offIcon:"auto_mode",get onIcon(){return`${In.getInversed()}_mode`},handler:n=>In.setInversed(n)}),YT=_t("<blockquote><aside></aside>please don't print me on a paper!&nbsp;<br>this is to create <span>PDF</span> files<br>share function is available on mobile devices<br>or just scan or click the <!>QR code below<br><footer><br><i>sincerly yours,<br>planet Earth</i></footer></blockquote>",17),XT=_t("<header></header>",2),QT=_t("<ul><li></li></ul>",4),ZT=_t("<nav><ul><li></li></ul><ul><li></li></ul></nav>",10),tE=()=>(()=>{const n=XT.cloneNode(!0);return J(n,I(Ce,{get when(){return he.get()==="print"},get fallback(){return(()=>{const t=ZT.cloneNode(!0),e=t.firstChild,i=e.firstChild,r=e.nextSibling,s=r.firstChild;return J(i,I($T,{})),J(t,I(Ce,{get when(){return he.get()==="edit"},get children(){const o=QT.cloneNode(!0),a=o.firstChild;return J(a,I(LT,{})),o}}),r),J(s,I(GT,{})),t})()},get children(){const t=YT.cloneNode(!0),e=t.firstChild,i=e.nextSibling,r=i.nextSibling,s=r.nextSibling,o=s.nextSibling,a=o.nextSibling,l=a.nextSibling,c=l.nextSibling,u=c.nextSibling,h=u.nextSibling,f=h.nextSibling;return f.nextSibling,J(e,I(De,{name:"eco",style:{color:"#43a047"}})),J(t,I(De,{name:"block",style:{color:"#e53935"}}),r),J(t,I(De,{name:"print",style:{color:"#546e7a"}}),r),o.style.setProperty("color","var(--primary)"),J(t,I(De,{name:"share",style:{color:"var(--primary)"}}),c),J(t,I(De,{name:"qr_code_2",style:{color:"var(--primary)"}}),f),t}})),n})(),eE=()=>I(Ga,{offIcon:"workspaces",onIcon:"group_work",get value(){return kt.store.cv.profile.grouped},handler:n=>kt.update(t=>t.cv.profile.grouped=n)});var Jo={},nE={get exports(){return Jo},set exports(n){Jo=n}};(function(n,t){(function(e,i){i(t)})(cs,function(e){e.PipsMode=void 0,function(_){_.Range="range",_.Steps="steps",_.Positions="positions",_.Count="count",_.Values="values"}(e.PipsMode||(e.PipsMode={})),e.PipsType=void 0,function(_){_[_.None=-1]="None",_[_.NoValue=0]="NoValue",_[_.LargeValue=1]="LargeValue",_[_.SmallValue=2]="SmallValue"}(e.PipsType||(e.PipsType={}));function i(_){return r(_)&&typeof _.from=="function"}function r(_){return typeof _=="object"&&typeof _.to=="function"}function s(_){_.parentElement.removeChild(_)}function o(_){return _!=null}function a(_){_.preventDefault()}function l(_){return _.filter(function(m){return this[m]?!1:this[m]=!0},{})}function c(_,m){return Math.round(_/m)*m}function u(_,m){var X=_.getBoundingClientRect(),Y=_.ownerDocument,tt=Y.documentElement,lt=F(Y);return/webkit.*Chrome.*Mobile/i.test(navigator.userAgent)&&(lt.x=0),m?X.top+lt.y-tt.clientTop:X.left+lt.x-tt.clientLeft}function h(_){return typeof _=="number"&&!isNaN(_)&&isFinite(_)}function f(_,m,X){X>0&&(k(_,m),setTimeout(function(){O(_,m)},X))}function d(_){return Math.max(Math.min(_,100),0)}function g(_){return Array.isArray(_)?_:[_]}function b(_){_=String(_);var m=_.split(".");return m.length>1?m[1].length:0}function k(_,m){_.classList&&!/\s/.test(m)?_.classList.add(m):_.className+=" "+m}function O(_,m){_.classList&&!/\s/.test(m)?_.classList.remove(m):_.className=_.className.replace(new RegExp("(^|\\b)"+m.split(" ").join("|")+"(\\b|$)","gi")," ")}function D(_,m){return _.classList?_.classList.contains(m):new RegExp("\\b"+m+"\\b").test(_.className)}function F(_){var m=window.pageXOffset!==void 0,X=(_.compatMode||"")==="CSS1Compat",Y=m?window.pageXOffset:X?_.documentElement.scrollLeft:_.body.scrollLeft,tt=m?window.pageYOffset:X?_.documentElement.scrollTop:_.body.scrollTop;return{x:Y,y:tt}}function W(){return window.navigator.pointerEnabled?{start:"pointerdown",move:"pointermove",end:"pointerup"}:window.navigator.msPointerEnabled?{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:{start:"mousedown touchstart",move:"mousemove touchmove",end:"mouseup touchend"}}function V(){var _=!1;try{var m=Object.defineProperty({},"passive",{get:function(){_=!0}});window.addEventListener("test",null,m)}catch{}return _}function T(){return window.CSS&&CSS.supports&&CSS.supports("touch-action","none")}function L(_,m){return 100/(m-_)}function R(_,m,X){return m*100/(_[X+1]-_[X])}function st(_,m){return R(_,_[0]<0?m+Math.abs(_[0]):m-_[0],0)}function xt(_,m){return m*(_[1]-_[0])/100+_[0]}function bt(_,m){for(var X=1;_>=m[X];)X+=1;return X}function Tt(_,m,X){if(X>=_.slice(-1)[0])return 100;var Y=bt(X,_),tt=_[Y-1],lt=_[Y],ut=m[Y-1],At=m[Y];return ut+st([tt,lt],X)/L(ut,At)}function Lt(_,m,X){if(X>=100)return _.slice(-1)[0];var Y=bt(X,m),tt=_[Y-1],lt=_[Y],ut=m[Y-1],At=m[Y];return xt([tt,lt],(X-ut)*L(ut,At))}function q(_,m,X,Y){if(Y===100)return Y;var tt=bt(Y,_),lt=_[tt-1],ut=_[tt];return X?Y-lt>(ut-lt)/2?ut:lt:m[tt-1]?_[tt-1]+c(Y-_[tt-1],m[tt-1]):Y}var H=function(){function _(m,X,Y){this.xPct=[],this.xVal=[],this.xSteps=[],this.xNumSteps=[],this.xHighestCompleteStep=[],this.xSteps=[Y||!1],this.xNumSteps=[!1],this.snap=X;var tt,lt=[];for(Object.keys(m).forEach(function(ut){lt.push([g(m[ut]),ut])}),lt.sort(function(ut,At){return ut[0][0]-At[0][0]}),tt=0;tt<lt.length;tt++)this.handleEntryPoint(lt[tt][1],lt[tt][0]);for(this.xNumSteps=this.xSteps.slice(0),tt=0;tt<this.xNumSteps.length;tt++)this.handleStepPoint(tt,this.xNumSteps[tt])}return _.prototype.getDistance=function(m){for(var X=[],Y=0;Y<this.xNumSteps.length-1;Y++)X[Y]=R(this.xVal,m,Y);return X},_.prototype.getAbsoluteDistance=function(m,X,Y){var tt=0;if(m<this.xPct[this.xPct.length-1])for(;m>this.xPct[tt+1];)tt++;else m===this.xPct[this.xPct.length-1]&&(tt=this.xPct.length-2);!Y&&m===this.xPct[tt+1]&&tt++,X===null&&(X=[]);var lt,ut=1,At=X[tt],mt=0,yt=0,Jt=0,Bt=0;for(Y?lt=(m-this.xPct[tt])/(this.xPct[tt+1]-this.xPct[tt]):lt=(this.xPct[tt+1]-m)/(this.xPct[tt+1]-this.xPct[tt]);At>0;)mt=this.xPct[tt+1+Bt]-this.xPct[tt+Bt],X[tt+Bt]*ut+100-lt*100>100?(yt=mt*lt,ut=(At-100*lt)/X[tt+Bt],lt=1):(yt=X[tt+Bt]*mt/100*ut,ut=0),Y?(Jt=Jt-yt,this.xPct.length+Bt>=1&&Bt--):(Jt=Jt+yt,this.xPct.length-Bt>=1&&Bt++),At=X[tt+Bt]*ut;return m+Jt},_.prototype.toStepping=function(m){return m=Tt(this.xVal,this.xPct,m),m},_.prototype.fromStepping=function(m){return Lt(this.xVal,this.xPct,m)},_.prototype.getStep=function(m){return m=q(this.xPct,this.xSteps,this.snap,m),m},_.prototype.getDefaultStep=function(m,X,Y){var tt=bt(m,this.xPct);return(m===100||X&&m===this.xPct[tt-1])&&(tt=Math.max(tt-1,1)),(this.xVal[tt]-this.xVal[tt-1])/Y},_.prototype.getNearbySteps=function(m){var X=bt(m,this.xPct);return{stepBefore:{startValue:this.xVal[X-2],step:this.xNumSteps[X-2],highestStep:this.xHighestCompleteStep[X-2]},thisStep:{startValue:this.xVal[X-1],step:this.xNumSteps[X-1],highestStep:this.xHighestCompleteStep[X-1]},stepAfter:{startValue:this.xVal[X],step:this.xNumSteps[X],highestStep:this.xHighestCompleteStep[X]}}},_.prototype.countStepDecimals=function(){var m=this.xNumSteps.map(b);return Math.max.apply(null,m)},_.prototype.hasNoSize=function(){return this.xVal[0]===this.xVal[this.xVal.length-1]},_.prototype.convert=function(m){return this.getStep(this.toStepping(m))},_.prototype.handleEntryPoint=function(m,X){var Y;if(m==="min"?Y=0:m==="max"?Y=100:Y=parseFloat(m),!h(Y)||!h(X[0]))throw new Error("noUiSlider: 'range' value isn't numeric.");this.xPct.push(Y),this.xVal.push(X[0]);var tt=Number(X[1]);Y?this.xSteps.push(isNaN(tt)?!1:tt):isNaN(tt)||(this.xSteps[0]=tt),this.xHighestCompleteStep.push(0)},_.prototype.handleStepPoint=function(m,X){if(X){if(this.xVal[m]===this.xVal[m+1]){this.xSteps[m]=this.xHighestCompleteStep[m]=this.xVal[m];return}this.xSteps[m]=R([this.xVal[m],this.xVal[m+1]],X,0)/L(this.xPct[m],this.xPct[m+1]);var Y=(this.xVal[m+1]-this.xVal[m])/this.xNumSteps[m],tt=Math.ceil(Number(Y.toFixed(3))-1),lt=this.xVal[m]+this.xNumSteps[m]*tt;this.xHighestCompleteStep[m]=lt}},_}(),U={to:function(_){return _===void 0?"":_.toFixed(2)},from:Number},j={target:"target",base:"base",origin:"origin",handle:"handle",handleLower:"handle-lower",handleUpper:"handle-upper",touchArea:"touch-area",horizontal:"horizontal",vertical:"vertical",background:"background",connect:"connect",connects:"connects",ltr:"ltr",rtl:"rtl",textDirectionLtr:"txt-dir-ltr",textDirectionRtl:"txt-dir-rtl",draggable:"draggable",drag:"state-drag",tap:"state-tap",active:"active",tooltip:"tooltip",pips:"pips",pipsHorizontal:"pips-horizontal",pipsVertical:"pips-vertical",marker:"marker",markerHorizontal:"marker-horizontal",markerVertical:"marker-vertical",markerNormal:"marker-normal",markerLarge:"marker-large",markerSub:"marker-sub",value:"value",valueHorizontal:"value-horizontal",valueVertical:"value-vertical",valueNormal:"value-normal",valueLarge:"value-large",valueSub:"value-sub"},z={tooltips:".__tooltips",aria:".__aria"};function G(_,m){if(!h(m))throw new Error("noUiSlider: 'step' is not numeric.");_.singleStep=m}function rt(_,m){if(!h(m))throw new Error("noUiSlider: 'keyboardPageMultiplier' is not numeric.");_.keyboardPageMultiplier=m}function Z(_,m){if(!h(m))throw new Error("noUiSlider: 'keyboardMultiplier' is not numeric.");_.keyboardMultiplier=m}function ct(_,m){if(!h(m))throw new Error("noUiSlider: 'keyboardDefaultStep' is not numeric.");_.keyboardDefaultStep=m}function It(_,m){if(typeof m!="object"||Array.isArray(m))throw new Error("noUiSlider: 'range' is not an object.");if(m.min===void 0||m.max===void 0)throw new Error("noUiSlider: Missing 'min' or 'max' in 'range'.");_.spectrum=new H(m,_.snap||!1,_.singleStep)}function Ht(_,m){if(m=g(m),!Array.isArray(m)||!m.length)throw new Error("noUiSlider: 'start' option is incorrect.");_.handles=m.length,_.start=m}function pt(_,m){if(typeof m!="boolean")throw new Error("noUiSlider: 'snap' option must be a boolean.");_.snap=m}function y(_,m){if(typeof m!="boolean")throw new Error("noUiSlider: 'animate' option must be a boolean.");_.animate=m}function p(_,m){if(typeof m!="number")throw new Error("noUiSlider: 'animationDuration' option must be a number.");_.animationDuration=m}function v(_,m){var X=[!1],Y;if(m==="lower"?m=[!0,!1]:m==="upper"&&(m=[!1,!0]),m===!0||m===!1){for(Y=1;Y<_.handles;Y++)X.push(m);X.push(!1)}else{if(!Array.isArray(m)||!m.length||m.length!==_.handles+1)throw new Error("noUiSlider: 'connect' option doesn't match handle count.");X=m}_.connect=X}function w(_,m){switch(m){case"horizontal":_.ort=0;break;case"vertical":_.ort=1;break;default:throw new Error("noUiSlider: 'orientation' option is invalid.")}}function x(_,m){if(!h(m))throw new Error("noUiSlider: 'margin' option must be numeric.");m!==0&&(_.margin=_.spectrum.getDistance(m))}function C(_,m){if(!h(m))throw new Error("noUiSlider: 'limit' option must be numeric.");if(_.limit=_.spectrum.getDistance(m),!_.limit||_.handles<2)throw new Error("noUiSlider: 'limit' option is only supported on linear sliders with 2 or more handles.")}function S(_,m){var X;if(!h(m)&&!Array.isArray(m))throw new Error("noUiSlider: 'padding' option must be numeric or array of exactly 2 numbers.");if(Array.isArray(m)&&!(m.length===2||h(m[0])||h(m[1])))throw new Error("noUiSlider: 'padding' option must be numeric or array of exactly 2 numbers.");if(m!==0){for(Array.isArray(m)||(m=[m,m]),_.padding=[_.spectrum.getDistance(m[0]),_.spectrum.getDistance(m[1])],X=0;X<_.spectrum.xNumSteps.length-1;X++)if(_.padding[0][X]<0||_.padding[1][X]<0)throw new Error("noUiSlider: 'padding' option must be a positive number(s).");var Y=m[0]+m[1],tt=_.spectrum.xVal[0],lt=_.spectrum.xVal[_.spectrum.xVal.length-1];if(Y/(lt-tt)>1)throw new Error("noUiSlider: 'padding' option must not exceed 100% of the range.")}}function A(_,m){switch(m){case"ltr":_.dir=0;break;case"rtl":_.dir=1;break;default:throw new Error("noUiSlider: 'direction' option was not recognized.")}}function P(_,m){if(typeof m!="string")throw new Error("noUiSlider: 'behaviour' must be a string containing options.");var X=m.indexOf("tap")>=0,Y=m.indexOf("drag")>=0,tt=m.indexOf("fixed")>=0,lt=m.indexOf("snap")>=0,ut=m.indexOf("hover")>=0,At=m.indexOf("unconstrained")>=0,mt=m.indexOf("drag-all")>=0,yt=m.indexOf("smooth-steps")>=0;if(tt){if(_.handles!==2)throw new Error("noUiSlider: 'fixed' behaviour must be used with 2 handles");x(_,_.start[1]-_.start[0])}if(At&&(_.margin||_.limit))throw new Error("noUiSlider: 'unconstrained' behaviour cannot be used with margin or limit");_.events={tap:X||lt,drag:Y,dragAll:mt,smoothSteps:yt,fixed:tt,snap:lt,hover:ut,unconstrained:At}}function E(_,m){if(m!==!1)if(m===!0||r(m)){_.tooltips=[];for(var X=0;X<_.handles;X++)_.tooltips.push(m)}else{if(m=g(m),m.length!==_.handles)throw new Error("noUiSlider: must pass a formatter for all handles.");m.forEach(function(Y){if(typeof Y!="boolean"&&!r(Y))throw new Error("noUiSlider: 'tooltips' must be passed a formatter or 'false'.")}),_.tooltips=m}}function $(_,m){if(m.length!==_.handles)throw new Error("noUiSlider: must pass a attributes for all handles.");_.handleAttributes=m}function K(_,m){if(!r(m))throw new Error("noUiSlider: 'ariaFormat' requires 'to' method.");_.ariaFormat=m}function nt(_,m){if(!i(m))throw new Error("noUiSlider: 'format' requires 'to' and 'from' methods.");_.format=m}function ft(_,m){if(typeof m!="boolean")throw new Error("noUiSlider: 'keyboardSupport' option must be a boolean.");_.keyboardSupport=m}function wt(_,m){_.documentElement=m}function St(_,m){if(typeof m!="string"&&m!==!1)throw new Error("noUiSlider: 'cssPrefix' must be a string or `false`.");_.cssPrefix=m}function Ct(_,m){if(typeof m!="object")throw new Error("noUiSlider: 'cssClasses' must be an object.");typeof _.cssPrefix=="string"?(_.cssClasses={},Object.keys(m).forEach(function(X){_.cssClasses[X]=_.cssPrefix+m[X]})):_.cssClasses=m}function Xt(_){var m={margin:null,limit:null,padding:null,animate:!0,animationDuration:300,ariaFormat:U,format:U},X={step:{r:!1,t:G},keyboardPageMultiplier:{r:!1,t:rt},keyboardMultiplier:{r:!1,t:Z},keyboardDefaultStep:{r:!1,t:ct},start:{r:!0,t:Ht},connect:{r:!0,t:v},direction:{r:!0,t:A},snap:{r:!1,t:pt},animate:{r:!1,t:y},animationDuration:{r:!1,t:p},range:{r:!0,t:It},orientation:{r:!1,t:w},margin:{r:!1,t:x},limit:{r:!1,t:C},padding:{r:!1,t:S},behaviour:{r:!0,t:P},ariaFormat:{r:!1,t:K},format:{r:!1,t:nt},tooltips:{r:!1,t:E},keyboardSupport:{r:!0,t:ft},documentElement:{r:!1,t:wt},cssPrefix:{r:!0,t:St},cssClasses:{r:!0,t:Ct},handleAttributes:{r:!1,t:$}},Y={connect:!1,direction:"ltr",behaviour:"tap",orientation:"horizontal",keyboardSupport:!0,cssPrefix:"noUi-",cssClasses:j,keyboardPageMultiplier:5,keyboardMultiplier:1,keyboardDefaultStep:10};_.format&&!_.ariaFormat&&(_.ariaFormat=_.format),Object.keys(X).forEach(function(mt){if(!o(_[mt])&&Y[mt]===void 0){if(X[mt].r)throw new Error("noUiSlider: '"+mt+"' is required.");return}X[mt].t(m,o(_[mt])?_[mt]:Y[mt])}),m.pips=_.pips;var tt=document.createElement("div"),lt=tt.style.msTransform!==void 0,ut=tt.style.transform!==void 0;m.transformRule=ut?"transform":lt?"msTransform":"webkitTransform";var At=[["left","top"],["right","bottom"]];return m.style=At[m.dir][m.ort],m}function Qt(_,m,X){var Y=W(),tt=T(),lt=tt&&V(),ut=_,At,mt,yt,Jt,Bt,Dt=m.spectrum,Ye=[],jt=[],Ve=[],gl=0,Tn={},rr=_.ownerDocument,Qs=m.documentElement||rr.documentElement,Zs=rr.body,kb=rr.dir==="rtl"||m.ort===1?0:100;function En(M,N){var B=rr.createElement("div");return N&&k(B,N),M.appendChild(B),B}function Mb(M,N){var B=En(M,m.cssClasses.origin),Q=En(B,m.cssClasses.handle);if(En(Q,m.cssClasses.touchArea),Q.setAttribute("data-handle",String(N)),m.keyboardSupport&&(Q.setAttribute("tabindex","0"),Q.addEventListener("keydown",function(ot){return jb(ot,N)})),m.handleAttributes!==void 0){var at=m.handleAttributes[N];Object.keys(at).forEach(function(ot){Q.setAttribute(ot,at[ot])})}return Q.setAttribute("role","slider"),Q.setAttribute("aria-orientation",m.ort?"vertical":"horizontal"),N===0?k(Q,m.cssClasses.handleLower):N===m.handles-1&&k(Q,m.cssClasses.handleUpper),B.handle=Q,B}function Lh(M,N){return N?En(M,m.cssClasses.connect):!1}function Cb(M,N){var B=En(N,m.cssClasses.connects);mt=[],yt=[],yt.push(Lh(B,M[0]));for(var Q=0;Q<m.handles;Q++)mt.push(Mb(N,Q)),Ve[Q]=Q,yt.push(Lh(B,M[Q+1]))}function Ob(M){k(M,m.cssClasses.target),m.dir===0?k(M,m.cssClasses.ltr):k(M,m.cssClasses.rtl),m.ort===0?k(M,m.cssClasses.horizontal):k(M,m.cssClasses.vertical);var N=getComputedStyle(M).direction;return N==="rtl"?k(M,m.cssClasses.textDirectionRtl):k(M,m.cssClasses.textDirectionLtr),En(M,m.cssClasses.base)}function Ab(M,N){return!m.tooltips||!m.tooltips[N]?!1:En(M.firstChild,m.cssClasses.tooltip)}function Rh(){return ut.hasAttribute("disabled")}function ml(M){var N=mt[M];return N.hasAttribute("disabled")}function Tb(M){M!=null?(mt[M].setAttribute("disabled",""),mt[M].handle.removeAttribute("tabindex")):(ut.setAttribute("disabled",""),mt.forEach(function(N){N.handle.removeAttribute("tabindex")}))}function Eb(M){M!=null?(mt[M].removeAttribute("disabled"),mt[M].handle.setAttribute("tabindex","0")):(ut.removeAttribute("disabled"),mt.forEach(function(N){N.removeAttribute("disabled"),N.handle.setAttribute("tabindex","0")}))}function yl(){Bt&&(Zr("update"+z.tooltips),Bt.forEach(function(M){M&&s(M)}),Bt=null)}function zh(){yl(),Bt=mt.map(Ab),_l("update"+z.tooltips,function(M,N,B){if(!(!Bt||!m.tooltips)&&Bt[N]!==!1){var Q=M[N];m.tooltips[N]!==!0&&(Q=m.tooltips[N].to(B[N])),Bt[N].innerHTML=Q}})}function $b(){Zr("update"+z.aria),_l("update"+z.aria,function(M,N,B,Q,at){Ve.forEach(function(ot){var Ot=mt[ot],gt=to(jt,ot,0,!0,!0,!0),Gt=to(jt,ot,100,!0,!0,!0),qt=at[ot],te=String(m.ariaFormat.to(B[ot]));gt=Dt.fromStepping(gt).toFixed(1),Gt=Dt.fromStepping(Gt).toFixed(1),qt=Dt.fromStepping(qt).toFixed(1),Ot.children[0].setAttribute("aria-valuemin",gt),Ot.children[0].setAttribute("aria-valuemax",Gt),Ot.children[0].setAttribute("aria-valuenow",qt),Ot.children[0].setAttribute("aria-valuetext",te)})})}function Pb(M){if(M.mode===e.PipsMode.Range||M.mode===e.PipsMode.Steps)return Dt.xVal;if(M.mode===e.PipsMode.Count){if(M.values<2)throw new Error("noUiSlider: 'values' (>= 2) required for mode 'count'.");for(var N=M.values-1,B=100/N,Q=[];N--;)Q[N]=N*B;return Q.push(100),Bh(Q,M.stepped)}return M.mode===e.PipsMode.Positions?Bh(M.values,M.stepped):M.mode===e.PipsMode.Values?M.stepped?M.values.map(function(at){return Dt.fromStepping(Dt.getStep(Dt.toStepping(at)))}):M.values:[]}function Bh(M,N){return M.map(function(B){return Dt.fromStepping(N?Dt.getStep(B):B)})}function Db(M){function N(qt,te){return Number((qt+te).toFixed(7))}var B=Pb(M),Q={},at=Dt.xVal[0],ot=Dt.xVal[Dt.xVal.length-1],Ot=!1,gt=!1,Gt=0;return B=l(B.slice().sort(function(qt,te){return qt-te})),B[0]!==at&&(B.unshift(at),Ot=!0),B[B.length-1]!==ot&&(B.push(ot),gt=!0),B.forEach(function(qt,te){var ee,Vt,fe,Te=qt,ye=B[te+1],Se,Ml,Cl,Ol,Jh,Al,Gh,Yh=M.mode===e.PipsMode.Steps;for(Yh&&(ee=Dt.xNumSteps[te]),ee||(ee=ye-Te),ye===void 0&&(ye=Te),ee=Math.max(ee,1e-7),Vt=Te;Vt<=ye;Vt=N(Vt,ee)){for(Se=Dt.toStepping(Vt),Ml=Se-Gt,Jh=Ml/(M.density||1),Al=Math.round(Jh),Gh=Ml/Al,fe=1;fe<=Al;fe+=1)Cl=Gt+fe*Gh,Q[Cl.toFixed(5)]=[Dt.fromStepping(Cl),0];Ol=B.indexOf(Vt)>-1?e.PipsType.LargeValue:Yh?e.PipsType.SmallValue:e.PipsType.NoValue,!te&&Ot&&Vt!==ye&&(Ol=0),Vt===ye&&gt||(Q[Se.toFixed(5)]=[Vt,Ol]),Gt=Se}}),Q}function Ib(M,N,B){var Q,at,ot=rr.createElement("div"),Ot=(Q={},Q[e.PipsType.None]="",Q[e.PipsType.NoValue]=m.cssClasses.valueNormal,Q[e.PipsType.LargeValue]=m.cssClasses.valueLarge,Q[e.PipsType.SmallValue]=m.cssClasses.valueSub,Q),gt=(at={},at[e.PipsType.None]="",at[e.PipsType.NoValue]=m.cssClasses.markerNormal,at[e.PipsType.LargeValue]=m.cssClasses.markerLarge,at[e.PipsType.SmallValue]=m.cssClasses.markerSub,at),Gt=[m.cssClasses.valueHorizontal,m.cssClasses.valueVertical],qt=[m.cssClasses.markerHorizontal,m.cssClasses.markerVertical];k(ot,m.cssClasses.pips),k(ot,m.ort===0?m.cssClasses.pipsHorizontal:m.cssClasses.pipsVertical);function te(Vt,fe){var Te=fe===m.cssClasses.value,ye=Te?Gt:qt,Se=Te?Ot:gt;return fe+" "+ye[m.ort]+" "+Se[Vt]}function ee(Vt,fe,Te){if(Te=N?N(fe,Te):Te,Te!==e.PipsType.None){var ye=En(ot,!1);ye.className=te(Te,m.cssClasses.marker),ye.style[m.style]=Vt+"%",Te>e.PipsType.NoValue&&(ye=En(ot,!1),ye.className=te(Te,m.cssClasses.value),ye.setAttribute("data-value",String(fe)),ye.style[m.style]=Vt+"%",ye.innerHTML=String(B.to(fe)))}}return Object.keys(M).forEach(function(Vt){ee(Vt,M[Vt][0],M[Vt][1])}),ot}function bl(){Jt&&(s(Jt),Jt=null)}function vl(M){bl();var N=Db(M),B=M.filter,Q=M.format||{to:function(at){return String(Math.round(at))}};return Jt=ut.appendChild(Ib(N,B,Q)),Jt}function Fh(){var M=At.getBoundingClientRect(),N="offset"+["Width","Height"][m.ort];return m.ort===0?M.width||At[N]:M.height||At[N]}function Mi(M,N,B,Q){var at=function(Ot){var gt=Nb(Ot,Q.pageOffset,Q.target||N);if(!gt||Rh()&&!Q.doNotReject||D(ut,m.cssClasses.tap)&&!Q.doNotReject||M===Y.start&&gt.buttons!==void 0&&gt.buttons>1||Q.hover&&gt.buttons)return!1;lt||gt.preventDefault(),gt.calcPoint=gt.points[m.ort],B(gt,Q)},ot=[];return M.split(" ").forEach(function(Ot){N.addEventListener(Ot,at,lt?{passive:!0}:!1),ot.push([Ot,at])}),ot}function Nb(M,N,B){var Q=M.type.indexOf("touch")===0,at=M.type.indexOf("mouse")===0,ot=M.type.indexOf("pointer")===0,Ot=0,gt=0;if(M.type.indexOf("MSPointer")===0&&(ot=!0),M.type==="mousedown"&&!M.buttons&&!M.touches)return!1;if(Q){var Gt=function(ee){var Vt=ee.target;return Vt===B||B.contains(Vt)||M.composed&&M.composedPath().shift()===B};if(M.type==="touchstart"){var qt=Array.prototype.filter.call(M.touches,Gt);if(qt.length>1)return!1;Ot=qt[0].pageX,gt=qt[0].pageY}else{var te=Array.prototype.find.call(M.changedTouches,Gt);if(!te)return!1;Ot=te.pageX,gt=te.pageY}}return N=N||F(rr),(at||ot)&&(Ot=M.clientX+N.x,gt=M.clientY+N.y),M.pageOffset=N,M.points=[Ot,gt],M.cursor=at||ot,M}function jh(M){var N=M-u(At,m.ort),B=N*100/Fh();return B=d(B),m.dir?100-B:B}function Lb(M){var N=100,B=!1;return mt.forEach(function(Q,at){if(!ml(at)){var ot=jt[at],Ot=Math.abs(ot-M),gt=Ot===100&&N===100,Gt=Ot<N,qt=Ot<=N&&M>ot;(Gt||qt||gt)&&(B=at,N=Ot)}}),B}function Rb(M,N){M.type==="mouseout"&&M.target.nodeName==="HTML"&&M.relatedTarget===null&&xl(M,N)}function zb(M,N){if(navigator.appVersion.indexOf("MSIE 9")===-1&&M.buttons===0&&N.buttonsProperty!==0)return xl(M,N);var B=(m.dir?-1:1)*(M.calcPoint-N.startCalcPoint),Q=B*100/N.baseSize;Vh(B>0,Q,N.locations,N.handleNumbers,N.connect)}function xl(M,N){N.handle&&(O(N.handle,m.cssClasses.active),gl-=1),N.listeners.forEach(function(B){Qs.removeEventListener(B[0],B[1])}),gl===0&&(O(ut,m.cssClasses.drag),kl(),M.cursor&&(Zs.style.cursor="",Zs.removeEventListener("selectstart",a))),m.events.smoothSteps&&(N.handleNumbers.forEach(function(B){Ci(B,jt[B],!0,!0,!1,!1)}),N.handleNumbers.forEach(function(B){ue("update",B)})),N.handleNumbers.forEach(function(B){ue("change",B),ue("set",B),ue("end",B)})}function wl(M,N){if(!N.handleNumbers.some(ml)){var B;if(N.handleNumbers.length===1){var Q=mt[N.handleNumbers[0]];B=Q.children[0],gl+=1,k(B,m.cssClasses.active)}M.stopPropagation();var at=[],ot=Mi(Y.move,Qs,zb,{target:M.target,handle:B,connect:N.connect,listeners:at,startCalcPoint:M.calcPoint,baseSize:Fh(),pageOffset:M.pageOffset,handleNumbers:N.handleNumbers,buttonsProperty:M.buttons,locations:jt.slice()}),Ot=Mi(Y.end,Qs,xl,{target:M.target,handle:B,listeners:at,doNotReject:!0,handleNumbers:N.handleNumbers}),gt=Mi("mouseout",Qs,Rb,{target:M.target,handle:B,listeners:at,doNotReject:!0,handleNumbers:N.handleNumbers});at.push.apply(at,ot.concat(Ot,gt)),M.cursor&&(Zs.style.cursor=getComputedStyle(M.target).cursor,mt.length>1&&k(ut,m.cssClasses.drag),Zs.addEventListener("selectstart",a,!1)),N.handleNumbers.forEach(function(Gt){ue("start",Gt)})}}function Bb(M){M.stopPropagation();var N=jh(M.calcPoint),B=Lb(N);B!==!1&&(m.events.snap||f(ut,m.cssClasses.tap,m.animationDuration),Ci(B,N,!0,!0),kl(),ue("slide",B,!0),ue("update",B,!0),m.events.snap?wl(M,{handleNumbers:[B]}):(ue("change",B,!0),ue("set",B,!0)))}function Fb(M){var N=jh(M.calcPoint),B=Dt.getStep(N),Q=Dt.fromStepping(B);Object.keys(Tn).forEach(function(at){at.split(".")[0]==="hover"&&Tn[at].forEach(function(ot){ot.call(no,Q)})})}function jb(M,N){if(Rh()||ml(N))return!1;var B=["Left","Right"],Q=["Down","Up"],at=["PageDown","PageUp"],ot=["Home","End"];m.dir&&!m.ort?B.reverse():m.ort&&!m.dir&&(Q.reverse(),at.reverse());var Ot=M.key.replace("Arrow",""),gt=Ot===at[0],Gt=Ot===at[1],qt=Ot===Q[0]||Ot===B[0]||gt,te=Ot===Q[1]||Ot===B[1]||Gt,ee=Ot===ot[0],Vt=Ot===ot[1];if(!qt&&!te&&!ee&&!Vt)return!0;M.preventDefault();var fe;if(te||qt){var Te=qt?0:1,ye=Kh(N),Se=ye[Te];if(Se===null)return!1;Se===!1&&(Se=Dt.getDefaultStep(jt[N],qt,m.keyboardDefaultStep)),Gt||gt?Se*=m.keyboardPageMultiplier:Se*=m.keyboardMultiplier,Se=Math.max(Se,1e-7),Se=(qt?-1:1)*Se,fe=Ye[N]+Se}else Vt?fe=m.spectrum.xVal[m.spectrum.xVal.length-1]:fe=m.spectrum.xVal[0];return Ci(N,Dt.toStepping(fe),!0,!0),ue("slide",N),ue("update",N),ue("change",N),ue("set",N),!1}function Vb(M){M.fixed||mt.forEach(function(N,B){Mi(Y.start,N.children[0],wl,{handleNumbers:[B]})}),M.tap&&Mi(Y.start,At,Bb,{}),M.hover&&Mi(Y.move,At,Fb,{hover:!0}),M.drag&&yt.forEach(function(N,B){if(!(N===!1||B===0||B===yt.length-1)){var Q=mt[B-1],at=mt[B],ot=[N],Ot=[Q,at],gt=[B-1,B];k(N,m.cssClasses.draggable),M.fixed&&(ot.push(Q.children[0]),ot.push(at.children[0])),M.dragAll&&(Ot=mt,gt=Ve),ot.forEach(function(Gt){Mi(Y.start,Gt,wl,{handles:Ot,handleNumbers:gt,connect:N})})}})}function _l(M,N){Tn[M]=Tn[M]||[],Tn[M].push(N),M.split(".")[0]==="update"&&mt.forEach(function(B,Q){ue("update",Q)})}function Hb(M){return M===z.aria||M===z.tooltips}function Zr(M){var N=M&&M.split(".")[0],B=N?M.substring(N.length):M;Object.keys(Tn).forEach(function(Q){var at=Q.split(".")[0],ot=Q.substring(at.length);(!N||N===at)&&(!B||B===ot)&&(!Hb(ot)||B===ot)&&delete Tn[Q]})}function ue(M,N,B){Object.keys(Tn).forEach(function(Q){var at=Q.split(".")[0];M===at&&Tn[Q].forEach(function(ot){ot.call(no,Ye.map(m.format.to),N,Ye.slice(),B||!1,jt.slice(),no)})})}function to(M,N,B,Q,at,ot,Ot){var gt;return mt.length>1&&!m.events.unconstrained&&(Q&&N>0&&(gt=Dt.getAbsoluteDistance(M[N-1],m.margin,!1),B=Math.max(B,gt)),at&&N<mt.length-1&&(gt=Dt.getAbsoluteDistance(M[N+1],m.margin,!0),B=Math.min(B,gt))),mt.length>1&&m.limit&&(Q&&N>0&&(gt=Dt.getAbsoluteDistance(M[N-1],m.limit,!1),B=Math.min(B,gt)),at&&N<mt.length-1&&(gt=Dt.getAbsoluteDistance(M[N+1],m.limit,!0),B=Math.max(B,gt))),m.padding&&(N===0&&(gt=Dt.getAbsoluteDistance(0,m.padding[0],!1),B=Math.max(B,gt)),N===mt.length-1&&(gt=Dt.getAbsoluteDistance(100,m.padding[1],!0),B=Math.min(B,gt))),Ot||(B=Dt.getStep(B)),B=d(B),B===M[N]&&!ot?!1:B}function Sl(M,N){var B=m.ort;return(B?N:M)+", "+(B?M:N)}function Vh(M,N,B,Q,at){var ot=B.slice(),Ot=Q[0],gt=m.events.smoothSteps,Gt=[!M,M],qt=[M,!M];Q=Q.slice(),M&&Q.reverse(),Q.length>1?Q.forEach(function(ee,Vt){var fe=to(ot,ee,ot[ee]+N,Gt[Vt],qt[Vt],!1,gt);fe===!1?N=0:(N=fe-ot[ee],ot[ee]=fe)}):Gt=qt=[!0];var te=!1;Q.forEach(function(ee,Vt){te=Ci(ee,B[ee]+N,Gt[Vt],qt[Vt],!1,gt)||te}),te&&(Q.forEach(function(ee){ue("update",ee),ue("slide",ee)}),at!=null&&ue("drag",Ot))}function Hh(M,N){return m.dir?100-M-N:M}function Ub(M,N){jt[M]=N,Ye[M]=Dt.fromStepping(N);var B=Hh(N,0)-kb,Q="translate("+Sl(B+"%","0")+")";mt[M].style[m.transformRule]=Q,Uh(M),Uh(M+1)}function kl(){Ve.forEach(function(M){var N=jt[M]>50?-1:1,B=3+(mt.length+N*M);mt[M].style.zIndex=String(B)})}function Ci(M,N,B,Q,at,ot){return at||(N=to(jt,M,N,B,Q,!1,ot)),N===!1?!1:(Ub(M,N),!0)}function Uh(M){if(yt[M]){var N=0,B=100;M!==0&&(N=jt[M-1]),M!==yt.length-1&&(B=jt[M]);var Q=B-N,at="translate("+Sl(Hh(N,Q)+"%","0")+")",ot="scale("+Sl(Q/100,"1")+")";yt[M].style[m.transformRule]=at+" "+ot}}function qh(M,N){return M===null||M===!1||M===void 0||(typeof M=="number"&&(M=String(M)),M=m.format.from(M),M!==!1&&(M=Dt.toStepping(M)),M===!1||isNaN(M))?jt[N]:M}function eo(M,N,B){var Q=g(M),at=jt[0]===void 0;N=N===void 0?!0:N,m.animate&&!at&&f(ut,m.cssClasses.tap,m.animationDuration),Ve.forEach(function(gt){Ci(gt,qh(Q[gt],gt),!0,!1,B)});var ot=Ve.length===1?0:1;if(at&&Dt.hasNoSize()&&(B=!0,jt[0]=0,Ve.length>1)){var Ot=100/(Ve.length-1);Ve.forEach(function(gt){jt[gt]=gt*Ot})}for(;ot<Ve.length;++ot)Ve.forEach(function(gt){Ci(gt,jt[gt],!0,!0,B)});kl(),Ve.forEach(function(gt){ue("update",gt),Q[gt]!==null&&N&&ue("set",gt)})}function qb(M){eo(m.start,M)}function Wb(M,N,B,Q){if(M=Number(M),!(M>=0&&M<Ve.length))throw new Error("noUiSlider: invalid handle number, got: "+M);Ci(M,qh(N,M),!0,!0,Q),ue("update",M),B&&ue("set",M)}function Wh(M){if(M===void 0&&(M=!1),M)return Ye.length===1?Ye[0]:Ye.slice(0);var N=Ye.map(m.format.to);return N.length===1?N[0]:N}function Kb(){for(Zr(z.aria),Zr(z.tooltips),Object.keys(m.cssClasses).forEach(function(M){O(ut,m.cssClasses[M])});ut.firstChild;)ut.removeChild(ut.firstChild);delete ut.noUiSlider}function Kh(M){var N=jt[M],B=Dt.getNearbySteps(N),Q=Ye[M],at=B.thisStep.step,ot=null;if(m.snap)return[Q-B.stepBefore.startValue||null,B.stepAfter.startValue-Q||null];at!==!1&&Q+at>B.stepAfter.startValue&&(at=B.stepAfter.startValue-Q),Q>B.thisStep.startValue?ot=B.thisStep.step:B.stepBefore.step===!1?ot=!1:ot=Q-B.stepBefore.highestStep,N===100?at=null:N===0&&(ot=null);var Ot=Dt.countStepDecimals();return at!==null&&at!==!1&&(at=Number(at.toFixed(Ot))),ot!==null&&ot!==!1&&(ot=Number(ot.toFixed(Ot))),[ot,at]}function Jb(){return Ve.map(Kh)}function Gb(M,N){var B=Wh(),Q=["margin","limit","padding","range","animate","snap","step","format","pips","tooltips"];Q.forEach(function(ot){M[ot]!==void 0&&(X[ot]=M[ot])});var at=Xt(X);Q.forEach(function(ot){M[ot]!==void 0&&(m[ot]=at[ot])}),Dt=at.spectrum,m.margin=at.margin,m.limit=at.limit,m.padding=at.padding,m.pips?vl(m.pips):bl(),m.tooltips?zh():yl(),jt=[],eo(o(M.start)?M.start:B,N)}function Yb(){At=Ob(ut),Cb(m.connect,At),Vb(m.events),eo(m.start),m.pips&&vl(m.pips),m.tooltips&&zh(),$b()}Yb();var no={destroy:Kb,steps:Jb,on:_l,off:Zr,get:Wh,set:eo,setHandle:Wb,reset:qb,disable:Tb,enable:Eb,__moveHandles:function(M,N,B){Vh(M,N,jt,B)},options:X,updateOptions:Gb,target:ut,removePips:bl,removeTooltips:yl,getPositions:function(){return jt.slice()},getTooltips:function(){return Bt},getOrigins:function(){return mt},pips:vl};return no}function zt(_,m){if(!_||!_.nodeName)throw new Error("noUiSlider: create requires a single element, got: "+_);if(_.noUiSlider)throw new Error("noUiSlider: Slider was already initialized.");var X=Xt(m),Y=Qt(_,X,m);return _.noUiSlider=Y,Y}var Rt={__spectrum:H,cssClasses:j,create:zt};e.create=zt,e.cssClasses=j,e.default=Rt,Object.defineProperty(e,"__esModule",{value:!0})})})(nE,Jo);const iE=Ug(Jo);const rE=_t("<div></div>",2),sE=n=>{const[t,e]=pn(n,["onChange"]);return(()=>{const i=rE.cloneNode(!0);return Vg(r=>{document.adoptNode(r),iE.create(r,e).on("set",t.onChange)},i),i})()};const oE={professional:"work",education:"school",hobby:"self_improvement"},Oo=n=>I(De,{get name(){return oE[typeof n.record=="string"?n.record:n.record.type]},class:"record-icon"});const aE=_t('<div class="scope"><nav><ul><li class="professional"></li><li class="education"></li><li class="hobby"></li></ul></nav><nav><ul><li></li></ul></nav></div>',18),lE=()=>(()=>{const n=aE.cloneNode(!0),t=n.firstChild,e=t.firstChild,i=e.firstChild,r=i.nextSibling,s=r.nextSibling,o=t.nextSibling,a=o.firstChild,l=a.firstChild;return J(i,I(Oo,{record:"professional"})),J(r,I(Oo,{record:"education"})),J(s,I(Oo,{record:"hobby"})),J(l,I(sE,{onChange:c=>{kt.update(u=>u.cv.profile.scope=c.sort().map(h=>+h))},get start(){return kt.store.cv.profile.scope},connect:!0,step:1,range:{min:0,max:2}})),Oe(()=>n.style.setProperty("visibility",Hg("friend")?void 0:"hidden")),n})();const cE=()=>I(Vr,{get fallback(){return I(uE,{})},get children(){return[I(We,{get when(){return he.get()==="edit"},get children(){return I(fE,{})}}),I(We,{get when(){return dE()},get children(){return I(hE,{})}})]}}),uE=()=>I(Nt,{icon:"print",action:()=>{he.set("print"),print(),he.set("view")}}),hE=()=>I(Nt,{icon:"share",action:async()=>{he.set("print");try{await navigator.share({url:Lm()})}catch{}finally{await new Promise(n=>setTimeout(n,1e3))}he.set("view")},children:"share"}),fE=()=>I(Nt,{icon:"cloud_upload",action:()=>{const n="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(kt.export().persisted,null,2)),t=document.createElement("a");t.setAttribute("href",n),t.setAttribute("download","data.json"),document.adoptNode(t),t.click(),t.remove()}}),dE=()=>/Android|webOS|iPhone|iPad|iPod|BlackBerry|BB|PlayBook|IEMobile|Windows Phone|Kindle|Silk|Opera Mini/i.test(navigator.userAgent),pE=_t("<footer><nav><ul><li></li></ul><ul><li></li></ul></nav></footer>",12),gE=()=>(()=>{const n=pE.cloneNode(!0),t=n.firstChild,e=t.firstChild,i=e.firstChild,r=e.nextSibling,s=r.firstChild;return J(i,I(eE,{})),J(t,I(lE,{}),r),J(s,I(cE,{})),Oe(()=>e.style.setProperty("visibility",kt.store.cv.profile.scope[0]===kt.store.cv.profile.scope[1]?"hidden":"inherit")),n})();const mE=_t("<span></span>",2),Ji=n=>{const[t,e]=pn(n,["class","vertical"]);return(()=>{const i=mE.cloneNode(!0);return xi(i,jn({get class(){return Js(t.vertical?"vgroup":"hgroup",t.class)}},e),!1,!1),i})()};const yE=_t("<span></span>",2),Km=n=>{const[t,e]=pn(n,["class","children","nowrap"]);return(()=>{const i=yE.cloneNode(!0);return xi(i,jn({get class(){return Js("row",t.class,n.nowrap?"nowrap":void 0)}},e),!1,!0),J(i,()=>t.children),i})()};var bE=ju;function vE(n,t,e){var i=n==null?void 0:bE(n,t);return i===void 0?e:i}var Bn=vE,xE=Cm;function wE(n,t,e){return n==null?n:xE(n,t,e)}var Uu=wE;const _E=_t('<input type="text" size="1" minlength="0">',1),SE=_t("<span></span>",2),kE=_t('<span class="inline-editor"></span>',2),ME=_t('<span class="inline-viewer"></span>',2),CE=n=>{const t=n.path.endsWith("]")?"...":$s(n.path.split(".")),[e,i]=Zt(!1),[r,s]=Zt(Bn(kt.store,n.path));er(()=>s(Bn(kt.store,n.path)));const[o,a]=pn(n,["path","children"]),l=(()=>{const d=_E.cloneNode(!0);return d.$$input=({target:g})=>{g instanceof HTMLInputElement&&(c.dataset.value=g.value)},d.$$keydown=({key:g})=>{switch(g){case"Enter":h();break;case"Escape":f();break}},wr(d,"placeholder",t),xi(d,jn({get value(){return Bn(kt.store,o.path)}},a),!1,!1),d})(),c=(()=>{const d=SE.cloneNode(!0);return J(d,l),d})();function u(){c.dataset.value=r()??t,l.value=r()??"",i(!0),l.focus()}function h(){kt.update(d=>Uu(d,n.path,l.value)),i(!1)}function f(){i(!1)}return I(Vr,{get children(){return[I(We,{get when(){return he.get()!=="edit"},get children(){return I(Ce,{get when(){return r()},get children(){return Re(()=>!!n.children)()?n.children(r()):r()}})}}),I(We,{get when(){return e()},get children(){const d=kE.cloneNode(!0);return J(d,c,null),J(d,I(Ji,{get children(){return[I(Nt,{icon:"done",action:()=>h(),class:"outline green"}),I(Nt,{icon:"close",action:()=>f(),class:"outline red"})]}}),null),d}}),I(We,{get when(){return!e()},get children(){const d=ME.cloneNode(!0);return J(d,(()=>{const g=Re(()=>!!n.children);return()=>g()?n.children(r()):r()})(),null),J(d,I(Nt,{icon:"edit",action:u,class:"outline blue"}),null),d}})]}})};vi(["keydown","input"]);function ke(n){this.content=n}ke.prototype={constructor:ke,find:function(n){for(var t=0;t<this.content.length;t+=2)if(this.content[t]===n)return t;return-1},get:function(n){var t=this.find(n);return t==-1?void 0:this.content[t+1]},update:function(n,t,e){var i=e&&e!=n?this.remove(e):this,r=i.find(n),s=i.content.slice();return r==-1?s.push(e||n,t):(s[r+1]=t,e&&(s[r]=e)),new ke(s)},remove:function(n){var t=this.find(n);if(t==-1)return this;var e=this.content.slice();return e.splice(t,2),new ke(e)},addToStart:function(n,t){return new ke([n,t].concat(this.remove(n).content))},addToEnd:function(n,t){var e=this.remove(n).content.slice();return e.push(n,t),new ke(e)},addBefore:function(n,t,e){var i=this.remove(t),r=i.content.slice(),s=i.find(n);return r.splice(s==-1?r.length:s,0,t,e),new ke(r)},forEach:function(n){for(var t=0;t<this.content.length;t+=2)n(this.content[t],this.content[t+1])},prepend:function(n){return n=ke.from(n),n.size?new ke(n.content.concat(this.subtract(n).content)):this},append:function(n){return n=ke.from(n),n.size?new ke(this.subtract(n).content.concat(n.content)):this},subtract:function(n){var t=this;n=ke.from(n);for(var e=0;e<n.content.length;e+=2)t=t.remove(n.content[e]);return t},toObject:function(){var n={};return this.forEach(function(t,e){n[t]=e}),n},get size(){return this.content.length>>1}};ke.from=function(n){if(n instanceof ke)return n;var t=[];if(n)for(var e in n)t.push(e,n[e]);return new ke(t)};function Jm(n,t,e){for(let i=0;;i++){if(i==n.childCount||i==t.childCount)return n.childCount==t.childCount?null:e;let r=n.child(i),s=t.child(i);if(r==s){e+=r.nodeSize;continue}if(!r.sameMarkup(s))return e;if(r.isText&&r.text!=s.text){for(let o=0;r.text[o]==s.text[o];o++)e++;return e}if(r.content.size||s.content.size){let o=Jm(r.content,s.content,e+1);if(o!=null)return o}e+=r.nodeSize}}function Gm(n,t,e,i){for(let r=n.childCount,s=t.childCount;;){if(r==0||s==0)return r==s?null:{a:e,b:i};let o=n.child(--r),a=t.child(--s),l=o.nodeSize;if(o==a){e-=l,i-=l;continue}if(!o.sameMarkup(a))return{a:e,b:i};if(o.isText&&o.text!=a.text){let c=0,u=Math.min(o.text.length,a.text.length);for(;c<u&&o.text[o.text.length-c-1]==a.text[a.text.length-c-1];)c++,e--,i--;return{a:e,b:i}}if(o.content.size||a.content.size){let c=Gm(o.content,a.content,e-1,i-1);if(c)return c}e-=l,i-=l}}class et{constructor(t,e){if(this.content=t,this.size=e||0,e==null)for(let i=0;i<t.length;i++)this.size+=t[i].nodeSize}nodesBetween(t,e,i,r=0,s){for(let o=0,a=0;a<e;o++){let l=this.content[o],c=a+l.nodeSize;if(c>t&&i(l,r+a,s||null,o)!==!1&&l.content.size){let u=a+1;l.nodesBetween(Math.max(0,t-u),Math.min(l.content.size,e-u),i,r+u)}a=c}}descendants(t){this.nodesBetween(0,this.size,t)}textBetween(t,e,i,r){let s="",o=!0;return this.nodesBetween(t,e,(a,l)=>{a.isText?(s+=a.text.slice(Math.max(t,l)-l,e-l),o=!i):a.isLeaf?(r?s+=typeof r=="function"?r(a):r:a.type.spec.leafText&&(s+=a.type.spec.leafText(a)),o=!i):!o&&a.isBlock&&(s+=i,o=!0)},0),s}append(t){if(!t.size)return this;if(!this.size)return t;let e=this.lastChild,i=t.firstChild,r=this.content.slice(),s=0;for(e.isText&&e.sameMarkup(i)&&(r[r.length-1]=e.withText(e.text+i.text),s=1);s<t.content.length;s++)r.push(t.content[s]);return new et(r,this.size+t.size)}cut(t,e=this.size){if(t==0&&e==this.size)return this;let i=[],r=0;if(e>t)for(let s=0,o=0;o<e;s++){let a=this.content[s],l=o+a.nodeSize;l>t&&((o<t||l>e)&&(a.isText?a=a.cut(Math.max(0,t-o),Math.min(a.text.length,e-o)):a=a.cut(Math.max(0,t-o-1),Math.min(a.content.size,e-o-1))),i.push(a),r+=a.nodeSize),o=l}return new et(i,r)}cutByIndex(t,e){return t==e?et.empty:t==0&&e==this.content.length?this:new et(this.content.slice(t,e))}replaceChild(t,e){let i=this.content[t];if(i==e)return this;let r=this.content.slice(),s=this.size+e.nodeSize-i.nodeSize;return r[t]=e,new et(r,s)}addToStart(t){return new et([t].concat(this.content),this.size+t.nodeSize)}addToEnd(t){return new et(this.content.concat(t),this.size+t.nodeSize)}eq(t){if(this.content.length!=t.content.length)return!1;for(let e=0;e<this.content.length;e++)if(!this.content[e].eq(t.content[e]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(t){let e=this.content[t];if(!e)throw new RangeError("Index "+t+" out of range for "+this);return e}maybeChild(t){return this.content[t]||null}forEach(t){for(let e=0,i=0;e<this.content.length;e++){let r=this.content[e];t(r,i,e),i+=r.nodeSize}}findDiffStart(t,e=0){return Jm(this,t,e)}findDiffEnd(t,e=this.size,i=t.size){return Gm(this,t,e,i)}findIndex(t,e=-1){if(t==0)return so(0,t);if(t==this.size)return so(this.content.length,t);if(t>this.size||t<0)throw new RangeError(`Position ${t} outside of fragment (${this})`);for(let i=0,r=0;;i++){let s=this.child(i),o=r+s.nodeSize;if(o>=t)return o==t||e>0?so(i+1,o):so(i,r);r=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(t=>t.toJSON()):null}static fromJSON(t,e){if(!e)return et.empty;if(!Array.isArray(e))throw new RangeError("Invalid input for Fragment.fromJSON");return new et(e.map(t.nodeFromJSON))}static fromArray(t){if(!t.length)return et.empty;let e,i=0;for(let r=0;r<t.length;r++){let s=t[r];i+=s.nodeSize,r&&s.isText&&t[r-1].sameMarkup(s)?(e||(e=t.slice(0,r)),e[e.length-1]=s.withText(e[e.length-1].text+s.text)):e&&e.push(s)}return new et(e||t,i)}static from(t){if(!t)return et.empty;if(t instanceof et)return t;if(Array.isArray(t))return this.fromArray(t);if(t.attrs)return new et([t],t.nodeSize);throw new RangeError("Can not convert "+t+" to a Fragment"+(t.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}et.empty=new et([],0);const Nl={index:0,offset:0};function so(n,t){return Nl.index=n,Nl.offset=t,Nl}function Go(n,t){if(n===t)return!0;if(!(n&&typeof n=="object")||!(t&&typeof t=="object"))return!1;let e=Array.isArray(n);if(Array.isArray(t)!=e)return!1;if(e){if(n.length!=t.length)return!1;for(let i=0;i<n.length;i++)if(!Go(n[i],t[i]))return!1}else{for(let i in n)if(!(i in t)||!Go(n[i],t[i]))return!1;for(let i in t)if(!(i in n))return!1}return!0}let Ut=class Bc{constructor(t,e){this.type=t,this.attrs=e}addToSet(t){let e,i=!1;for(let r=0;r<t.length;r++){let s=t[r];if(this.eq(s))return t;if(this.type.excludes(s.type))e||(e=t.slice(0,r));else{if(s.type.excludes(this.type))return t;!i&&s.type.rank>this.type.rank&&(e||(e=t.slice(0,r)),e.push(this),i=!0),e&&e.push(s)}}return e||(e=t.slice()),i||e.push(this),e}removeFromSet(t){for(let e=0;e<t.length;e++)if(this.eq(t[e]))return t.slice(0,e).concat(t.slice(e+1));return t}isInSet(t){for(let e=0;e<t.length;e++)if(this.eq(t[e]))return!0;return!1}eq(t){return this==t||this.type==t.type&&Go(this.attrs,t.attrs)}toJSON(){let t={type:this.type.name};for(let e in this.attrs){t.attrs=this.attrs;break}return t}static fromJSON(t,e){if(!e)throw new RangeError("Invalid input for Mark.fromJSON");let i=t.marks[e.type];if(!i)throw new RangeError(`There is no mark type ${e.type} in this schema`);return i.create(e.attrs)}static sameSet(t,e){if(t==e)return!0;if(t.length!=e.length)return!1;for(let i=0;i<t.length;i++)if(!t[i].eq(e[i]))return!1;return!0}static setFrom(t){if(!t||Array.isArray(t)&&t.length==0)return Bc.none;if(t instanceof Bc)return[t];let e=t.slice();return e.sort((i,r)=>i.type.rank-r.type.rank),e}};Ut.none=[];class Yo extends Error{}class ht{constructor(t,e,i){this.content=t,this.openStart=e,this.openEnd=i}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(t,e){let i=Xm(this.content,t+this.openStart,e);return i&&new ht(i,this.openStart,this.openEnd)}removeBetween(t,e){return new ht(Ym(this.content,t+this.openStart,e+this.openStart),this.openStart,this.openEnd)}eq(t){return this.content.eq(t.content)&&this.openStart==t.openStart&&this.openEnd==t.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let t={content:this.content.toJSON()};return this.openStart>0&&(t.openStart=this.openStart),this.openEnd>0&&(t.openEnd=this.openEnd),t}static fromJSON(t,e){if(!e)return ht.empty;let i=e.openStart||0,r=e.openEnd||0;if(typeof i!="number"||typeof r!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new ht(et.fromJSON(t,e.content),i,r)}static maxOpen(t,e=!0){let i=0,r=0;for(let s=t.firstChild;s&&!s.isLeaf&&(e||!s.type.spec.isolating);s=s.firstChild)i++;for(let s=t.lastChild;s&&!s.isLeaf&&(e||!s.type.spec.isolating);s=s.lastChild)r++;return new ht(t,i,r)}}ht.empty=new ht(et.empty,0,0);function Ym(n,t,e){let{index:i,offset:r}=n.findIndex(t),s=n.maybeChild(i),{index:o,offset:a}=n.findIndex(e);if(r==t||s.isText){if(a!=e&&!n.child(o).isText)throw new RangeError("Removing non-flat range");return n.cut(0,t).append(n.cut(e))}if(i!=o)throw new RangeError("Removing non-flat range");return n.replaceChild(i,s.copy(Ym(s.content,t-r-1,e-r-1)))}function Xm(n,t,e,i){let{index:r,offset:s}=n.findIndex(t),o=n.maybeChild(r);if(s==t||o.isText)return i&&!i.canReplace(r,r,e)?null:n.cut(0,t).append(e).append(n.cut(t));let a=Xm(o.content,t-s-1,e);return a&&n.replaceChild(r,o.copy(a))}function OE(n,t,e){if(e.openStart>n.depth)throw new Yo("Inserted content deeper than insertion position");if(n.depth-e.openStart!=t.depth-e.openEnd)throw new Yo("Inconsistent open depths");return Qm(n,t,e,0)}function Qm(n,t,e,i){let r=n.index(i),s=n.node(i);if(r==t.index(i)&&i<n.depth-e.openStart){let o=Qm(n,t,e,i+1);return s.copy(s.content.replaceChild(r,o))}else if(e.content.size)if(!e.openStart&&!e.openEnd&&n.depth==i&&t.depth==i){let o=n.parent,a=o.content;return Vi(o,a.cut(0,n.parentOffset).append(e.content).append(a.cut(t.parentOffset)))}else{let{start:o,end:a}=AE(e,n);return Vi(s,t0(n,o,a,t,i))}else return Vi(s,Xo(n,t,i))}function Zm(n,t){if(!t.type.compatibleContent(n.type))throw new Yo("Cannot join "+t.type.name+" onto "+n.type.name)}function Fc(n,t,e){let i=n.node(e);return Zm(i,t.node(e)),i}function ji(n,t){let e=t.length-1;e>=0&&n.isText&&n.sameMarkup(t[e])?t[e]=n.withText(t[e].text+n.text):t.push(n)}function bs(n,t,e,i){let r=(t||n).node(e),s=0,o=t?t.index(e):r.childCount;n&&(s=n.index(e),n.depth>e?s++:n.textOffset&&(ji(n.nodeAfter,i),s++));for(let a=s;a<o;a++)ji(r.child(a),i);t&&t.depth==e&&t.textOffset&&ji(t.nodeBefore,i)}function Vi(n,t){return n.type.checkContent(t),n.copy(t)}function t0(n,t,e,i,r){let s=n.depth>r&&Fc(n,t,r+1),o=i.depth>r&&Fc(e,i,r+1),a=[];return bs(null,n,r,a),s&&o&&t.index(r)==e.index(r)?(Zm(s,o),ji(Vi(s,t0(n,t,e,i,r+1)),a)):(s&&ji(Vi(s,Xo(n,t,r+1)),a),bs(t,e,r,a),o&&ji(Vi(o,Xo(e,i,r+1)),a)),bs(i,null,r,a),new et(a)}function Xo(n,t,e){let i=[];if(bs(null,n,e,i),n.depth>e){let r=Fc(n,t,e+1);ji(Vi(r,Xo(n,t,e+1)),i)}return bs(t,null,e,i),new et(i)}function AE(n,t){let e=t.depth-n.openStart,r=t.node(e).copy(n.content);for(let s=e-1;s>=0;s--)r=t.node(s).copy(et.from(r));return{start:r.resolveNoCache(n.openStart+e),end:r.resolveNoCache(r.content.size-n.openEnd-e)}}class Ps{constructor(t,e,i){this.pos=t,this.path=e,this.parentOffset=i,this.depth=e.length/3-1}resolveDepth(t){return t==null?this.depth:t<0?this.depth+t:t}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(t){return this.path[this.resolveDepth(t)*3]}index(t){return this.path[this.resolveDepth(t)*3+1]}indexAfter(t){return t=this.resolveDepth(t),this.index(t)+(t==this.depth&&!this.textOffset?0:1)}start(t){return t=this.resolveDepth(t),t==0?0:this.path[t*3-1]+1}end(t){return t=this.resolveDepth(t),this.start(t)+this.node(t).content.size}before(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position before the top-level node");return t==this.depth+1?this.pos:this.path[t*3-1]}after(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position after the top-level node");return t==this.depth+1?this.pos:this.path[t*3-1]+this.path[t*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let t=this.parent,e=this.index(this.depth);if(e==t.childCount)return null;let i=this.pos-this.path[this.path.length-1],r=t.child(e);return i?t.child(e).cut(i):r}get nodeBefore(){let t=this.index(this.depth),e=this.pos-this.path[this.path.length-1];return e?this.parent.child(t).cut(0,e):t==0?null:this.parent.child(t-1)}posAtIndex(t,e){e=this.resolveDepth(e);let i=this.path[e*3],r=e==0?0:this.path[e*3-1]+1;for(let s=0;s<t;s++)r+=i.child(s).nodeSize;return r}marks(){let t=this.parent,e=this.index();if(t.content.size==0)return Ut.none;if(this.textOffset)return t.child(e).marks;let i=t.maybeChild(e-1),r=t.maybeChild(e);if(!i){let a=i;i=r,r=a}let s=i.marks;for(var o=0;o<s.length;o++)s[o].type.spec.inclusive===!1&&(!r||!s[o].isInSet(r.marks))&&(s=s[o--].removeFromSet(s));return s}marksAcross(t){let e=this.parent.maybeChild(this.index());if(!e||!e.isInline)return null;let i=e.marks,r=t.parent.maybeChild(t.index());for(var s=0;s<i.length;s++)i[s].type.spec.inclusive===!1&&(!r||!i[s].isInSet(r.marks))&&(i=i[s--].removeFromSet(i));return i}sharedDepth(t){for(let e=this.depth;e>0;e--)if(this.start(e)<=t&&this.end(e)>=t)return e;return 0}blockRange(t=this,e){if(t.pos<this.pos)return t.blockRange(this);for(let i=this.depth-(this.parent.inlineContent||this.pos==t.pos?1:0);i>=0;i--)if(t.pos<=this.end(i)&&(!e||e(this.node(i))))return new Qo(this,t,i);return null}sameParent(t){return this.pos-this.parentOffset==t.pos-t.parentOffset}max(t){return t.pos>this.pos?t:this}min(t){return t.pos<this.pos?t:this}toString(){let t="";for(let e=1;e<=this.depth;e++)t+=(t?"/":"")+this.node(e).type.name+"_"+this.index(e-1);return t+":"+this.parentOffset}static resolve(t,e){if(!(e>=0&&e<=t.content.size))throw new RangeError("Position "+e+" out of range");let i=[],r=0,s=e;for(let o=t;;){let{index:a,offset:l}=o.content.findIndex(s),c=s-l;if(i.push(o,a,r+l),!c||(o=o.child(a),o.isText))break;s=c-1,r+=l+1}return new Ps(e,i,s)}static resolveCached(t,e){for(let r=0;r<Ll.length;r++){let s=Ll[r];if(s.pos==e&&s.doc==t)return s}let i=Ll[Rl]=Ps.resolve(t,e);return Rl=(Rl+1)%TE,i}}let Ll=[],Rl=0,TE=12;class Qo{constructor(t,e,i){this.$from=t,this.$to=e,this.depth=i}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const EE=Object.create(null);let Hi=class jc{constructor(t,e,i,r=Ut.none){this.type=t,this.attrs=e,this.marks=r,this.content=i||et.empty}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(t){return this.content.child(t)}maybeChild(t){return this.content.maybeChild(t)}forEach(t){this.content.forEach(t)}nodesBetween(t,e,i,r=0){this.content.nodesBetween(t,e,i,r,this)}descendants(t){this.nodesBetween(0,this.content.size,t)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(t,e,i,r){return this.content.textBetween(t,e,i,r)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(t){return this==t||this.sameMarkup(t)&&this.content.eq(t.content)}sameMarkup(t){return this.hasMarkup(t.type,t.attrs,t.marks)}hasMarkup(t,e,i){return this.type==t&&Go(this.attrs,e||t.defaultAttrs||EE)&&Ut.sameSet(this.marks,i||Ut.none)}copy(t=null){return t==this.content?this:new jc(this.type,this.attrs,t,this.marks)}mark(t){return t==this.marks?this:new jc(this.type,this.attrs,this.content,t)}cut(t,e=this.content.size){return t==0&&e==this.content.size?this:this.copy(this.content.cut(t,e))}slice(t,e=this.content.size,i=!1){if(t==e)return ht.empty;let r=this.resolve(t),s=this.resolve(e),o=i?0:r.sharedDepth(e),a=r.start(o),c=r.node(o).content.cut(r.pos-a,s.pos-a);return new ht(c,r.depth-o,s.depth-o)}replace(t,e,i){return OE(this.resolve(t),this.resolve(e),i)}nodeAt(t){for(let e=this;;){let{index:i,offset:r}=e.content.findIndex(t);if(e=e.maybeChild(i),!e)return null;if(r==t||e.isText)return e;t-=r+1}}childAfter(t){let{index:e,offset:i}=this.content.findIndex(t);return{node:this.content.maybeChild(e),index:e,offset:i}}childBefore(t){if(t==0)return{node:null,index:0,offset:0};let{index:e,offset:i}=this.content.findIndex(t);if(i<t)return{node:this.content.child(e),index:e,offset:i};let r=this.content.child(e-1);return{node:r,index:e-1,offset:i-r.nodeSize}}resolve(t){return Ps.resolveCached(this,t)}resolveNoCache(t){return Ps.resolve(this,t)}rangeHasMark(t,e,i){let r=!1;return e>t&&this.nodesBetween(t,e,s=>(i.isInSet(s.marks)&&(r=!0),!r)),r}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let t=this.type.name;return this.content.size&&(t+="("+this.content.toStringInner()+")"),e0(this.marks,t)}contentMatchAt(t){let e=this.type.contentMatch.matchFragment(this.content,0,t);if(!e)throw new Error("Called contentMatchAt on a node with invalid content");return e}canReplace(t,e,i=et.empty,r=0,s=i.childCount){let o=this.contentMatchAt(t).matchFragment(i,r,s),a=o&&o.matchFragment(this.content,e);if(!a||!a.validEnd)return!1;for(let l=r;l<s;l++)if(!this.type.allowsMarks(i.child(l).marks))return!1;return!0}canReplaceWith(t,e,i,r){if(r&&!this.type.allowsMarks(r))return!1;let s=this.contentMatchAt(t).matchType(i),o=s&&s.matchFragment(this.content,e);return o?o.validEnd:!1}canAppend(t){return t.content.size?this.canReplace(this.childCount,this.childCount,t.content):this.type.compatibleContent(t.type)}check(){this.type.checkContent(this.content);let t=Ut.none;for(let e=0;e<this.marks.length;e++)t=this.marks[e].addToSet(t);if(!Ut.sameSet(t,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(e=>e.type.name)}`);this.content.forEach(e=>e.check())}toJSON(){let t={type:this.type.name};for(let e in this.attrs){t.attrs=this.attrs;break}return this.content.size&&(t.content=this.content.toJSON()),this.marks.length&&(t.marks=this.marks.map(e=>e.toJSON())),t}static fromJSON(t,e){if(!e)throw new RangeError("Invalid input for Node.fromJSON");let i=null;if(e.marks){if(!Array.isArray(e.marks))throw new RangeError("Invalid mark data for Node.fromJSON");i=e.marks.map(t.markFromJSON)}if(e.type=="text"){if(typeof e.text!="string")throw new RangeError("Invalid text node in JSON");return t.text(e.text,i)}let r=et.fromJSON(t,e.content);return t.nodeType(e.type).create(e.attrs,r,i)}};Hi.prototype.text=void 0;class Zo extends Hi{constructor(t,e,i,r){if(super(t,e,null,r),!i)throw new RangeError("Empty text nodes are not allowed");this.text=i}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):e0(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(t,e){return this.text.slice(t,e)}get nodeSize(){return this.text.length}mark(t){return t==this.marks?this:new Zo(this.type,this.attrs,this.text,t)}withText(t){return t==this.text?this:new Zo(this.type,this.attrs,t,this.marks)}cut(t=0,e=this.text.length){return t==0&&e==this.text.length?this:this.withText(this.text.slice(t,e))}eq(t){return this.sameMarkup(t)&&this.text==t.text}toJSON(){let t=super.toJSON();return t.text=this.text,t}}function e0(n,t){for(let e=n.length-1;e>=0;e--)t=n[e].type.name+"("+t+")";return t}class Gi{constructor(t){this.validEnd=t,this.next=[],this.wrapCache=[]}static parse(t,e){let i=new $E(t,e);if(i.next==null)return Gi.empty;let r=n0(i);i.next&&i.err("Unexpected trailing text");let s=zE(RE(r));return BE(s,i),s}matchType(t){for(let e=0;e<this.next.length;e++)if(this.next[e].type==t)return this.next[e].next;return null}matchFragment(t,e=0,i=t.childCount){let r=this;for(let s=e;r&&s<i;s++)r=r.matchType(t.child(s).type);return r}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let t=0;t<this.next.length;t++){let{type:e}=this.next[t];if(!(e.isText||e.hasRequiredAttrs()))return e}return null}compatible(t){for(let e=0;e<this.next.length;e++)for(let i=0;i<t.next.length;i++)if(this.next[e].type==t.next[i].type)return!0;return!1}fillBefore(t,e=!1,i=0){let r=[this];function s(o,a){let l=o.matchFragment(t,i);if(l&&(!e||l.validEnd))return et.from(a.map(c=>c.createAndFill()));for(let c=0;c<o.next.length;c++){let{type:u,next:h}=o.next[c];if(!(u.isText||u.hasRequiredAttrs())&&r.indexOf(h)==-1){r.push(h);let f=s(h,a.concat(u));if(f)return f}}return null}return s(this,[])}findWrapping(t){for(let i=0;i<this.wrapCache.length;i+=2)if(this.wrapCache[i]==t)return this.wrapCache[i+1];let e=this.computeWrapping(t);return this.wrapCache.push(t,e),e}computeWrapping(t){let e=Object.create(null),i=[{match:this,type:null,via:null}];for(;i.length;){let r=i.shift(),s=r.match;if(s.matchType(t)){let o=[];for(let a=r;a.type;a=a.via)o.push(a.type);return o.reverse()}for(let o=0;o<s.next.length;o++){let{type:a,next:l}=s.next[o];!a.isLeaf&&!a.hasRequiredAttrs()&&!(a.name in e)&&(!r.type||l.validEnd)&&(i.push({match:a.contentMatch,type:a,via:r}),e[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(t){if(t>=this.next.length)throw new RangeError(`There's no ${t}th edge in this content match`);return this.next[t]}toString(){let t=[];function e(i){t.push(i);for(let r=0;r<i.next.length;r++)t.indexOf(i.next[r].next)==-1&&e(i.next[r].next)}return e(this),t.map((i,r)=>{let s=r+(i.validEnd?"*":" ")+" ";for(let o=0;o<i.next.length;o++)s+=(o?", ":"")+i.next[o].type.name+"->"+t.indexOf(i.next[o].next);return s}).join(`
`)}}Gi.empty=new Gi(!0);class $E{constructor(t,e){this.string=t,this.nodeTypes=e,this.inline=null,this.pos=0,this.tokens=t.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(t){return this.next==t&&(this.pos++||!0)}err(t){throw new SyntaxError(t+" (in content expression '"+this.string+"')")}}function n0(n){let t=[];do t.push(PE(n));while(n.eat("|"));return t.length==1?t[0]:{type:"choice",exprs:t}}function PE(n){let t=[];do t.push(DE(n));while(n.next&&n.next!=")"&&n.next!="|");return t.length==1?t[0]:{type:"seq",exprs:t}}function DE(n){let t=LE(n);for(;;)if(n.eat("+"))t={type:"plus",expr:t};else if(n.eat("*"))t={type:"star",expr:t};else if(n.eat("?"))t={type:"opt",expr:t};else if(n.eat("{"))t=IE(n,t);else break;return t}function Xf(n){/\D/.test(n.next)&&n.err("Expected number, got '"+n.next+"'");let t=Number(n.next);return n.pos++,t}function IE(n,t){let e=Xf(n),i=e;return n.eat(",")&&(n.next!="}"?i=Xf(n):i=-1),n.eat("}")||n.err("Unclosed braced range"),{type:"range",min:e,max:i,expr:t}}function NE(n,t){let e=n.nodeTypes,i=e[t];if(i)return[i];let r=[];for(let s in e){let o=e[s];o.groups.indexOf(t)>-1&&r.push(o)}return r.length==0&&n.err("No node type or group '"+t+"' found"),r}function LE(n){if(n.eat("(")){let t=n0(n);return n.eat(")")||n.err("Missing closing paren"),t}else if(/\W/.test(n.next))n.err("Unexpected token '"+n.next+"'");else{let t=NE(n,n.next).map(e=>(n.inline==null?n.inline=e.isInline:n.inline!=e.isInline&&n.err("Mixing inline and block content"),{type:"name",value:e}));return n.pos++,t.length==1?t[0]:{type:"choice",exprs:t}}}function RE(n){let t=[[]];return r(s(n,0),e()),t;function e(){return t.push([])-1}function i(o,a,l){let c={term:l,to:a};return t[o].push(c),c}function r(o,a){o.forEach(l=>l.to=a)}function s(o,a){if(o.type=="choice")return o.exprs.reduce((l,c)=>l.concat(s(c,a)),[]);if(o.type=="seq")for(let l=0;;l++){let c=s(o.exprs[l],a);if(l==o.exprs.length-1)return c;r(c,a=e())}else if(o.type=="star"){let l=e();return i(a,l),r(s(o.expr,l),l),[i(l)]}else if(o.type=="plus"){let l=e();return r(s(o.expr,a),l),r(s(o.expr,l),l),[i(l)]}else{if(o.type=="opt")return[i(a)].concat(s(o.expr,a));if(o.type=="range"){let l=a;for(let c=0;c<o.min;c++){let u=e();r(s(o.expr,l),u),l=u}if(o.max==-1)r(s(o.expr,l),l);else for(let c=o.min;c<o.max;c++){let u=e();i(l,u),r(s(o.expr,l),u),l=u}return[i(l)]}else{if(o.type=="name")return[i(a,void 0,o.value)];throw new Error("Unknown expr type")}}}}function i0(n,t){return t-n}function Qf(n,t){let e=[];return i(t),e.sort(i0);function i(r){let s=n[r];if(s.length==1&&!s[0].term)return i(s[0].to);e.push(r);for(let o=0;o<s.length;o++){let{term:a,to:l}=s[o];!a&&e.indexOf(l)==-1&&i(l)}}}function zE(n){let t=Object.create(null);return e(Qf(n,0));function e(i){let r=[];i.forEach(o=>{n[o].forEach(({term:a,to:l})=>{if(!a)return;let c;for(let u=0;u<r.length;u++)r[u][0]==a&&(c=r[u][1]);Qf(n,l).forEach(u=>{c||r.push([a,c=[]]),c.indexOf(u)==-1&&c.push(u)})})});let s=t[i.join(",")]=new Gi(i.indexOf(n.length-1)>-1);for(let o=0;o<r.length;o++){let a=r[o][1].sort(i0);s.next.push({type:r[o][0],next:t[a.join(",")]||e(a)})}return s}}function BE(n,t){for(let e=0,i=[n];e<i.length;e++){let r=i[e],s=!r.validEnd,o=[];for(let a=0;a<r.next.length;a++){let{type:l,next:c}=r.next[a];o.push(l.name),s&&!(l.isText||l.hasRequiredAttrs())&&(s=!1),i.indexOf(c)==-1&&i.push(c)}s&&t.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function r0(n){let t=Object.create(null);for(let e in n){let i=n[e];if(!i.hasDefault)return null;t[e]=i.default}return t}function s0(n,t){let e=Object.create(null);for(let i in n){let r=t&&t[i];if(r===void 0){let s=n[i];if(s.hasDefault)r=s.default;else throw new RangeError("No value supplied for attribute "+i)}e[i]=r}return e}function o0(n){let t=Object.create(null);if(n)for(let e in n)t[e]=new FE(n[e]);return t}let Zf=class a0{constructor(t,e,i){this.name=t,this.schema=e,this.spec=i,this.markSet=null,this.groups=i.group?i.group.split(" "):[],this.attrs=o0(i.attrs),this.defaultAttrs=r0(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(i.inline||t=="text"),this.isText=t=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Gi.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let t in this.attrs)if(this.attrs[t].isRequired)return!0;return!1}compatibleContent(t){return this==t||this.contentMatch.compatible(t.contentMatch)}computeAttrs(t){return!t&&this.defaultAttrs?this.defaultAttrs:s0(this.attrs,t)}create(t=null,e,i){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Hi(this,this.computeAttrs(t),et.from(e),Ut.setFrom(i))}createChecked(t=null,e,i){return e=et.from(e),this.checkContent(e),new Hi(this,this.computeAttrs(t),e,Ut.setFrom(i))}createAndFill(t=null,e,i){if(t=this.computeAttrs(t),e=et.from(e),e.size){let o=this.contentMatch.fillBefore(e);if(!o)return null;e=o.append(e)}let r=this.contentMatch.matchFragment(e),s=r&&r.fillBefore(et.empty,!0);return s?new Hi(this,t,e.append(s),Ut.setFrom(i)):null}validContent(t){let e=this.contentMatch.matchFragment(t);if(!e||!e.validEnd)return!1;for(let i=0;i<t.childCount;i++)if(!this.allowsMarks(t.child(i).marks))return!1;return!0}checkContent(t){if(!this.validContent(t))throw new RangeError(`Invalid content for node ${this.name}: ${t.toString().slice(0,50)}`)}allowsMarkType(t){return this.markSet==null||this.markSet.indexOf(t)>-1}allowsMarks(t){if(this.markSet==null)return!0;for(let e=0;e<t.length;e++)if(!this.allowsMarkType(t[e].type))return!1;return!0}allowedMarks(t){if(this.markSet==null)return t;let e;for(let i=0;i<t.length;i++)this.allowsMarkType(t[i].type)?e&&e.push(t[i]):e||(e=t.slice(0,i));return e?e.length?e:Ut.none:t}static compile(t,e){let i=Object.create(null);t.forEach((s,o)=>i[s]=new a0(s,e,o));let r=e.spec.topNode||"doc";if(!i[r])throw new RangeError("Schema is missing its top node type ('"+r+"')");if(!i.text)throw new RangeError("Every schema needs a 'text' type");for(let s in i.text.attrs)throw new RangeError("The text node type should not have attributes");return i}};class FE{constructor(t){this.hasDefault=Object.prototype.hasOwnProperty.call(t,"default"),this.default=t.default}get isRequired(){return!this.hasDefault}}class Qa{constructor(t,e,i,r){this.name=t,this.rank=e,this.schema=i,this.spec=r,this.attrs=o0(r.attrs),this.excluded=null;let s=r0(this.attrs);this.instance=s?new Ut(this,s):null}create(t=null){return!t&&this.instance?this.instance:new Ut(this,s0(this.attrs,t))}static compile(t,e){let i=Object.create(null),r=0;return t.forEach((s,o)=>i[s]=new Qa(s,r++,e,o)),i}removeFromSet(t){for(var e=0;e<t.length;e++)t[e].type==this&&(t=t.slice(0,e).concat(t.slice(e+1)),e--);return t}isInSet(t){for(let e=0;e<t.length;e++)if(t[e].type==this)return t[e]}excludes(t){return this.excluded.indexOf(t)>-1}}class jE{constructor(t){this.cached=Object.create(null);let e=this.spec={};for(let r in t)e[r]=t[r];e.nodes=ke.from(t.nodes),e.marks=ke.from(t.marks||{}),this.nodes=Zf.compile(this.spec.nodes,this),this.marks=Qa.compile(this.spec.marks,this);let i=Object.create(null);for(let r in this.nodes){if(r in this.marks)throw new RangeError(r+" can not be both a node and a mark");let s=this.nodes[r],o=s.spec.content||"",a=s.spec.marks;s.contentMatch=i[o]||(i[o]=Gi.parse(o,this.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.markSet=a=="_"?null:a?td(this,a.split(" ")):a==""||!s.inlineContent?[]:null}for(let r in this.marks){let s=this.marks[r],o=s.spec.excludes;s.excluded=o==null?[s]:o==""?[]:td(this,o.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(t,e=null,i,r){if(typeof t=="string")t=this.nodeType(t);else if(t instanceof Zf){if(t.schema!=this)throw new RangeError("Node type from different schema used ("+t.name+")")}else throw new RangeError("Invalid node type: "+t);return t.createChecked(e,i,r)}text(t,e){let i=this.nodes.text;return new Zo(i,i.defaultAttrs,t,Ut.setFrom(e))}mark(t,e){return typeof t=="string"&&(t=this.marks[t]),t.create(e)}nodeFromJSON(t){return Hi.fromJSON(this,t)}markFromJSON(t){return Ut.fromJSON(this,t)}nodeType(t){let e=this.nodes[t];if(!e)throw new RangeError("Unknown node type: "+t);return e}}function td(n,t){let e=[];for(let i=0;i<t.length;i++){let r=t[i],s=n.marks[r],o=s;if(s)e.push(s);else for(let a in n.marks){let l=n.marks[a];(r=="_"||l.spec.group&&l.spec.group.split(" ").indexOf(r)>-1)&&e.push(o=l)}if(!o)throw new SyntaxError("Unknown mark type: '"+t[i]+"'")}return e}class Er{constructor(t,e){this.schema=t,this.rules=e,this.tags=[],this.styles=[],e.forEach(i=>{i.tag?this.tags.push(i):i.style&&this.styles.push(i)}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let r=t.nodes[i.node];return r.contentMatch.matchType(r)})}parse(t,e={}){let i=new nd(this,e,!1);return i.addAll(t,e.from,e.to),i.finish()}parseSlice(t,e={}){let i=new nd(this,e,!0);return i.addAll(t,e.from,e.to),ht.maxOpen(i.finish())}matchTag(t,e,i){for(let r=i?this.tags.indexOf(i)+1:0;r<this.tags.length;r++){let s=this.tags[r];if(UE(t,s.tag)&&(s.namespace===void 0||t.namespaceURI==s.namespace)&&(!s.context||e.matchesContext(s.context))){if(s.getAttrs){let o=s.getAttrs(t);if(o===!1)continue;s.attrs=o||void 0}return s}}}matchStyle(t,e,i,r){for(let s=r?this.styles.indexOf(r)+1:0;s<this.styles.length;s++){let o=this.styles[s],a=o.style;if(!(a.indexOf(t)!=0||o.context&&!i.matchesContext(o.context)||a.length>t.length&&(a.charCodeAt(t.length)!=61||a.slice(t.length+1)!=e))){if(o.getAttrs){let l=o.getAttrs(e);if(l===!1)continue;o.attrs=l||void 0}return o}}}static schemaRules(t){let e=[];function i(r){let s=r.priority==null?50:r.priority,o=0;for(;o<e.length;o++){let a=e[o];if((a.priority==null?50:a.priority)<s)break}e.splice(o,0,r)}for(let r in t.marks){let s=t.marks[r].spec.parseDOM;s&&s.forEach(o=>{i(o=id(o)),o.mark||o.ignore||o.clearMark||(o.mark=r)})}for(let r in t.nodes){let s=t.nodes[r].spec.parseDOM;s&&s.forEach(o=>{i(o=id(o)),o.node||o.ignore||o.mark||(o.node=r)})}return e}static fromSchema(t){return t.cached.domParser||(t.cached.domParser=new Er(t,Er.schemaRules(t)))}}const l0={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},VE={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},c0={ol:!0,ul:!0},ta=1,ea=2,vs=4;function ed(n,t,e){return t!=null?(t?ta:0)|(t==="full"?ea:0):n&&n.whitespace=="pre"?ta|ea:e&~vs}class oo{constructor(t,e,i,r,s,o,a){this.type=t,this.attrs=e,this.marks=i,this.pendingMarks=r,this.solid=s,this.options=a,this.content=[],this.activeMarks=Ut.none,this.stashMarks=[],this.match=o||(a&vs?null:t.contentMatch)}findWrapping(t){if(!this.match){if(!this.type)return[];let e=this.type.contentMatch.fillBefore(et.from(t));if(e)this.match=this.type.contentMatch.matchFragment(e);else{let i=this.type.contentMatch,r;return(r=i.findWrapping(t.type))?(this.match=i,r):null}}return this.match.findWrapping(t.type)}finish(t){if(!(this.options&ta)){let i=this.content[this.content.length-1],r;if(i&&i.isText&&(r=/[ \t\r\n\u000c]+$/.exec(i.text))){let s=i;i.text.length==r[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-r[0].length))}}let e=et.from(this.content);return!t&&this.match&&(e=e.append(this.match.fillBefore(et.empty,!0))),this.type?this.type.create(this.attrs,e,this.marks):e}popFromStashMark(t){for(let e=this.stashMarks.length-1;e>=0;e--)if(t.eq(this.stashMarks[e]))return this.stashMarks.splice(e,1)[0]}applyPending(t){for(let e=0,i=this.pendingMarks;e<i.length;e++){let r=i[e];(this.type?this.type.allowsMarkType(r.type):WE(r.type,t))&&!r.isInSet(this.activeMarks)&&(this.activeMarks=r.addToSet(this.activeMarks),this.pendingMarks=r.removeFromSet(this.pendingMarks))}}inlineContext(t){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:t.parentNode&&!l0.hasOwnProperty(t.parentNode.nodeName.toLowerCase())}}class nd{constructor(t,e,i){this.parser=t,this.options=e,this.isOpen=i,this.open=0;let r=e.topNode,s,o=ed(null,e.preserveWhitespace,0)|(i?vs:0);r?s=new oo(r.type,r.attrs,Ut.none,Ut.none,!0,e.topMatch||r.type.contentMatch,o):i?s=new oo(null,null,Ut.none,Ut.none,!0,null,o):s=new oo(t.schema.topNodeType,null,Ut.none,Ut.none,!0,null,o),this.nodes=[s],this.find=e.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(t){if(t.nodeType==3)this.addTextNode(t);else if(t.nodeType==1){let e=t.getAttribute("style");if(!e)this.addElement(t);else{let i=this.readStyles(qE(e));if(!i)return;let[r,s]=i,o=this.top;for(let a=0;a<s.length;a++)this.removePendingMark(s[a],o);for(let a=0;a<r.length;a++)this.addPendingMark(r[a]);this.addElement(t);for(let a=0;a<r.length;a++)this.removePendingMark(r[a],o);for(let a=0;a<s.length;a++)this.addPendingMark(s[a])}}}addTextNode(t){let e=t.nodeValue,i=this.top;if(i.options&ea||i.inlineContext(t)||/[^ \t\r\n\u000c]/.test(e)){if(i.options&ta)i.options&ea?e=e.replace(/\r\n?/g,`
`):e=e.replace(/\r?\n|\r/g," ");else if(e=e.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(e)&&this.open==this.nodes.length-1){let r=i.content[i.content.length-1],s=t.previousSibling;(!r||s&&s.nodeName=="BR"||r.isText&&/[ \t\r\n\u000c]$/.test(r.text))&&(e=e.slice(1))}e&&this.insertNode(this.parser.schema.text(e)),this.findInText(t)}else this.findInside(t)}addElement(t,e){let i=t.nodeName.toLowerCase(),r;c0.hasOwnProperty(i)&&this.parser.normalizeLists&&HE(t);let s=this.options.ruleFromNode&&this.options.ruleFromNode(t)||(r=this.parser.matchTag(t,this,e));if(s?s.ignore:VE.hasOwnProperty(i))this.findInside(t),this.ignoreFallback(t);else if(!s||s.skip||s.closeParent){s&&s.closeParent?this.open=Math.max(0,this.open-1):s&&s.skip.nodeType&&(t=s.skip);let o,a=this.top,l=this.needsBlock;if(l0.hasOwnProperty(i))a.content.length&&a.content[0].isInline&&this.open&&(this.open--,a=this.top),o=!0,a.type||(this.needsBlock=!0);else if(!t.firstChild){this.leafFallback(t);return}this.addAll(t),o&&this.sync(a),this.needsBlock=l}else this.addElementByRule(t,s,s.consuming===!1?r:void 0)}leafFallback(t){t.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(t.ownerDocument.createTextNode(`
`))}ignoreFallback(t){t.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"))}readStyles(t){let e=Ut.none,i=Ut.none;t:for(let r=0;r<t.length;r+=2)for(let s=void 0;;){let o=this.parser.matchStyle(t[r],t[r+1],this,s);if(!o)continue t;if(o.ignore)return null;if(o.clearMark?this.top.pendingMarks.forEach(a=>{o.clearMark(a)&&(i=a.addToSet(i))}):e=this.parser.schema.marks[o.mark].create(o.attrs).addToSet(e),o.consuming===!1)s=o;else break}return[e,i]}addElementByRule(t,e,i){let r,s,o;e.node?(s=this.parser.schema.nodes[e.node],s.isLeaf?this.insertNode(s.create(e.attrs))||this.leafFallback(t):r=this.enter(s,e.attrs||null,e.preserveWhitespace)):(o=this.parser.schema.marks[e.mark].create(e.attrs),this.addPendingMark(o));let a=this.top;if(s&&s.isLeaf)this.findInside(t);else if(i)this.addElement(t,i);else if(e.getContent)this.findInside(t),e.getContent(t,this.parser.schema).forEach(l=>this.insertNode(l));else{let l=t;typeof e.contentElement=="string"?l=t.querySelector(e.contentElement):typeof e.contentElement=="function"?l=e.contentElement(t):e.contentElement&&(l=e.contentElement),this.findAround(t,l,!0),this.addAll(l)}r&&this.sync(a)&&this.open--,o&&this.removePendingMark(o,a)}addAll(t,e,i){let r=e||0;for(let s=e?t.childNodes[e]:t.firstChild,o=i==null?null:t.childNodes[i];s!=o;s=s.nextSibling,++r)this.findAtPoint(t,r),this.addDOM(s);this.findAtPoint(t,r)}findPlace(t){let e,i;for(let r=this.open;r>=0;r--){let s=this.nodes[r],o=s.findWrapping(t);if(o&&(!e||e.length>o.length)&&(e=o,i=s,!o.length)||s.solid)break}if(!e)return!1;this.sync(i);for(let r=0;r<e.length;r++)this.enterInner(e[r],null,!1);return!0}insertNode(t){if(t.isInline&&this.needsBlock&&!this.top.type){let e=this.textblockFromContext();e&&this.enterInner(e)}if(this.findPlace(t)){this.closeExtra();let e=this.top;e.applyPending(t.type),e.match&&(e.match=e.match.matchType(t.type));let i=e.activeMarks;for(let r=0;r<t.marks.length;r++)(!e.type||e.type.allowsMarkType(t.marks[r].type))&&(i=t.marks[r].addToSet(i));return e.content.push(t.mark(i)),!0}return!1}enter(t,e,i){let r=this.findPlace(t.create(e));return r&&this.enterInner(t,e,!0,i),r}enterInner(t,e=null,i=!1,r){this.closeExtra();let s=this.top;s.applyPending(t),s.match=s.match&&s.match.matchType(t);let o=ed(t,r,s.options);s.options&vs&&s.content.length==0&&(o|=vs),this.nodes.push(new oo(t,e,s.activeMarks,s.pendingMarks,i,null,o)),this.open++}closeExtra(t=!1){let e=this.nodes.length-1;if(e>this.open){for(;e>this.open;e--)this.nodes[e-1].content.push(this.nodes[e].finish(t));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(t){for(let e=this.open;e>=0;e--)if(this.nodes[e]==t)return this.open=e,!0;return!1}get currentPos(){this.closeExtra();let t=0;for(let e=this.open;e>=0;e--){let i=this.nodes[e].content;for(let r=i.length-1;r>=0;r--)t+=i[r].nodeSize;e&&t++}return t}findAtPoint(t,e){if(this.find)for(let i=0;i<this.find.length;i++)this.find[i].node==t&&this.find[i].offset==e&&(this.find[i].pos=this.currentPos)}findInside(t){if(this.find)for(let e=0;e<this.find.length;e++)this.find[e].pos==null&&t.nodeType==1&&t.contains(this.find[e].node)&&(this.find[e].pos=this.currentPos)}findAround(t,e,i){if(t!=e&&this.find)for(let r=0;r<this.find.length;r++)this.find[r].pos==null&&t.nodeType==1&&t.contains(this.find[r].node)&&e.compareDocumentPosition(this.find[r].node)&(i?2:4)&&(this.find[r].pos=this.currentPos)}findInText(t){if(this.find)for(let e=0;e<this.find.length;e++)this.find[e].node==t&&(this.find[e].pos=this.currentPos-(t.nodeValue.length-this.find[e].offset))}matchesContext(t){if(t.indexOf("|")>-1)return t.split(/\s*\|\s*/).some(this.matchesContext,this);let e=t.split("/"),i=this.options.context,r=!this.isOpen&&(!i||i.parent.type==this.nodes[0].type),s=-(i?i.depth+1:0)+(r?0:1),o=(a,l)=>{for(;a>=0;a--){let c=e[a];if(c==""){if(a==e.length-1||a==0)continue;for(;l>=s;l--)if(o(a-1,l))return!0;return!1}else{let u=l>0||l==0&&r?this.nodes[l].type:i&&l>=s?i.node(l-s).type:null;if(!u||u.name!=c&&u.groups.indexOf(c)==-1)return!1;l--}}return!0};return o(e.length-1,this.open)}textblockFromContext(){let t=this.options.context;if(t)for(let e=t.depth;e>=0;e--){let i=t.node(e).contentMatchAt(t.indexAfter(e)).defaultType;if(i&&i.isTextblock&&i.defaultAttrs)return i}for(let e in this.parser.schema.nodes){let i=this.parser.schema.nodes[e];if(i.isTextblock&&i.defaultAttrs)return i}}addPendingMark(t){let e=KE(t,this.top.pendingMarks);e&&this.top.stashMarks.push(e),this.top.pendingMarks=t.addToSet(this.top.pendingMarks)}removePendingMark(t,e){for(let i=this.open;i>=0;i--){let r=this.nodes[i];if(r.pendingMarks.lastIndexOf(t)>-1)r.pendingMarks=t.removeFromSet(r.pendingMarks);else{r.activeMarks=t.removeFromSet(r.activeMarks);let o=r.popFromStashMark(t);o&&r.type&&r.type.allowsMarkType(o.type)&&(r.activeMarks=o.addToSet(r.activeMarks))}if(r==e)break}}}function HE(n){for(let t=n.firstChild,e=null;t;t=t.nextSibling){let i=t.nodeType==1?t.nodeName.toLowerCase():null;i&&c0.hasOwnProperty(i)&&e?(e.appendChild(t),t=e):i=="li"?e=t:i&&(e=null)}}function UE(n,t){return(n.matches||n.msMatchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector).call(n,t)}function qE(n){let t=/\s*([\w-]+)\s*:\s*([^;]+)/g,e,i=[];for(;e=t.exec(n);)i.push(e[1],e[2].trim());return i}function id(n){let t={};for(let e in n)t[e]=n[e];return t}function WE(n,t){let e=t.schema.nodes;for(let i in e){let r=e[i];if(!r.allowsMarkType(n))continue;let s=[],o=a=>{s.push(a);for(let l=0;l<a.edgeCount;l++){let{type:c,next:u}=a.edge(l);if(c==t||s.indexOf(u)<0&&o(u))return!0}};if(o(r.contentMatch))return!0}}function KE(n,t){for(let e=0;e<t.length;e++)if(n.eq(t[e]))return t[e]}class Sn{constructor(t,e){this.nodes=t,this.marks=e}serializeFragment(t,e={},i){i||(i=zl(e).createDocumentFragment());let r=i,s=[];return t.forEach(o=>{if(s.length||o.marks.length){let a=0,l=0;for(;a<s.length&&l<o.marks.length;){let c=o.marks[l];if(!this.marks[c.type.name]){l++;continue}if(!c.eq(s[a][0])||c.type.spec.spanning===!1)break;a++,l++}for(;a<s.length;)r=s.pop()[1];for(;l<o.marks.length;){let c=o.marks[l++],u=this.serializeMark(c,o.isInline,e);u&&(s.push([c,r]),r.appendChild(u.dom),r=u.contentDOM||u.dom)}}r.appendChild(this.serializeNodeInner(o,e))}),i}serializeNodeInner(t,e){let{dom:i,contentDOM:r}=Sn.renderSpec(zl(e),this.nodes[t.type.name](t));if(r){if(t.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(t.content,e,r)}return i}serializeNode(t,e={}){let i=this.serializeNodeInner(t,e);for(let r=t.marks.length-1;r>=0;r--){let s=this.serializeMark(t.marks[r],t.isInline,e);s&&((s.contentDOM||s.dom).appendChild(i),i=s.dom)}return i}serializeMark(t,e,i={}){let r=this.marks[t.type.name];return r&&Sn.renderSpec(zl(i),r(t,e))}static renderSpec(t,e,i=null){if(typeof e=="string")return{dom:t.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let r=e[0],s=r.indexOf(" ");s>0&&(i=r.slice(0,s),r=r.slice(s+1));let o,a=i?t.createElementNS(i,r):t.createElement(r),l=e[1],c=1;if(l&&typeof l=="object"&&l.nodeType==null&&!Array.isArray(l)){c=2;for(let u in l)if(l[u]!=null){let h=u.indexOf(" ");h>0?a.setAttributeNS(u.slice(0,h),u.slice(h+1),l[u]):a.setAttribute(u,l[u])}}for(let u=c;u<e.length;u++){let h=e[u];if(h===0){if(u<e.length-1||u>c)throw new RangeError("Content hole must be the only child of its parent node");return{dom:a,contentDOM:a}}else{let{dom:f,contentDOM:d}=Sn.renderSpec(t,h,i);if(a.appendChild(f),d){if(o)throw new RangeError("Multiple content holes");o=d}}}return{dom:a,contentDOM:o}}static fromSchema(t){return t.cached.domSerializer||(t.cached.domSerializer=new Sn(this.nodesFromSchema(t),this.marksFromSchema(t)))}static nodesFromSchema(t){let e=rd(t.nodes);return e.text||(e.text=i=>i.text),e}static marksFromSchema(t){return rd(t.marks)}}function rd(n){let t={};for(let e in n){let i=n[e].spec.toDOM;i&&(t[e]=i)}return t}function zl(n){return n.document||window.document}const u0=65535,h0=Math.pow(2,16);function JE(n,t){return n+t*h0}function sd(n){return n&u0}function GE(n){return(n-(n&u0))/h0}const f0=1,d0=2,Ao=4,p0=8;class Vc{constructor(t,e,i){this.pos=t,this.delInfo=e,this.recover=i}get deleted(){return(this.delInfo&p0)>0}get deletedBefore(){return(this.delInfo&(f0|Ao))>0}get deletedAfter(){return(this.delInfo&(d0|Ao))>0}get deletedAcross(){return(this.delInfo&Ao)>0}}class rn{constructor(t,e=!1){if(this.ranges=t,this.inverted=e,!t.length&&rn.empty)return rn.empty}recover(t){let e=0,i=sd(t);if(!this.inverted)for(let r=0;r<i;r++)e+=this.ranges[r*3+2]-this.ranges[r*3+1];return this.ranges[i*3]+e+GE(t)}mapResult(t,e=1){return this._map(t,e,!1)}map(t,e=1){return this._map(t,e,!0)}_map(t,e,i){let r=0,s=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?r:0);if(l>t)break;let c=this.ranges[a+s],u=this.ranges[a+o],h=l+c;if(t<=h){let f=c?t==l?-1:t==h?1:e:e,d=l+r+(f<0?0:u);if(i)return d;let g=t==(e<0?l:h)?null:JE(a/3,t-l),b=t==l?d0:t==h?f0:Ao;return(e<0?t!=l:t!=h)&&(b|=p0),new Vc(d,b,g)}r+=u-c}return i?t+r:new Vc(t+r,0,null)}touches(t,e){let i=0,r=sd(e),s=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?i:0);if(l>t)break;let c=this.ranges[a+s],u=l+c;if(t<=u&&a==r*3)return!0;i+=this.ranges[a+o]-c}return!1}forEach(t){let e=this.inverted?2:1,i=this.inverted?1:2;for(let r=0,s=0;r<this.ranges.length;r+=3){let o=this.ranges[r],a=o-(this.inverted?s:0),l=o+(this.inverted?0:s),c=this.ranges[r+e],u=this.ranges[r+i];t(a,a+c,l,l+u),s+=u-c}}invert(){return new rn(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(t){return t==0?rn.empty:new rn(t<0?[0,-t,0]:[0,0,t])}}rn.empty=new rn([]);class _r{constructor(t=[],e,i=0,r=t.length){this.maps=t,this.mirror=e,this.from=i,this.to=r}slice(t=0,e=this.maps.length){return new _r(this.maps,this.mirror,t,e)}copy(){return new _r(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(t,e){this.to=this.maps.push(t),e!=null&&this.setMirror(this.maps.length-1,e)}appendMapping(t){for(let e=0,i=this.maps.length;e<t.maps.length;e++){let r=t.getMirror(e);this.appendMap(t.maps[e],r!=null&&r<e?i+r:void 0)}}getMirror(t){if(this.mirror){for(let e=0;e<this.mirror.length;e++)if(this.mirror[e]==t)return this.mirror[e+(e%2?-1:1)]}}setMirror(t,e){this.mirror||(this.mirror=[]),this.mirror.push(t,e)}appendMappingInverted(t){for(let e=t.maps.length-1,i=this.maps.length+t.maps.length;e>=0;e--){let r=t.getMirror(e);this.appendMap(t.maps[e].invert(),r!=null&&r>e?i-r-1:void 0)}}invert(){let t=new _r;return t.appendMappingInverted(this),t}map(t,e=1){if(this.mirror)return this._map(t,e,!0);for(let i=this.from;i<this.to;i++)t=this.maps[i].map(t,e);return t}mapResult(t,e=1){return this._map(t,e,!1)}_map(t,e,i){let r=0;for(let s=this.from;s<this.to;s++){let o=this.maps[s],a=o.mapResult(t,e);if(a.recover!=null){let l=this.getMirror(s);if(l!=null&&l>s&&l<this.to){s=l,t=this.maps[l].recover(a.recover);continue}}r|=a.delInfo,t=a.pos}return i?t:new Vc(t,r,null)}}const Bl=Object.create(null);class Je{getMap(){return rn.empty}merge(t){return null}static fromJSON(t,e){if(!e||!e.stepType)throw new RangeError("Invalid input for Step.fromJSON");let i=Bl[e.stepType];if(!i)throw new RangeError(`No step type ${e.stepType} defined`);return i.fromJSON(t,e)}static jsonID(t,e){if(t in Bl)throw new RangeError("Duplicate use of step JSON ID "+t);return Bl[t]=e,e.prototype.jsonID=t,e}}class me{constructor(t,e){this.doc=t,this.failed=e}static ok(t){return new me(t,null)}static fail(t){return new me(null,t)}static fromReplace(t,e,i,r){try{return me.ok(t.replace(e,i,r))}catch(s){if(s instanceof Yo)return me.fail(s.message);throw s}}}function qu(n,t,e){let i=[];for(let r=0;r<n.childCount;r++){let s=n.child(r);s.content.size&&(s=s.copy(qu(s.content,t,s))),s.isInline&&(s=t(s,e,r)),i.push(s)}return et.fromArray(i)}class Zn extends Je{constructor(t,e,i){super(),this.from=t,this.to=e,this.mark=i}apply(t){let e=t.slice(this.from,this.to),i=t.resolve(this.from),r=i.node(i.sharedDepth(this.to)),s=new ht(qu(e.content,(o,a)=>!o.isAtom||!a.type.allowsMarkType(this.mark.type)?o:o.mark(this.mark.addToSet(o.marks)),r),e.openStart,e.openEnd);return me.fromReplace(t,this.from,this.to,s)}invert(){return new kn(this.from,this.to,this.mark)}map(t){let e=t.mapResult(this.from,1),i=t.mapResult(this.to,-1);return e.deleted&&i.deleted||e.pos>=i.pos?null:new Zn(e.pos,i.pos,this.mark)}merge(t){return t instanceof Zn&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new Zn(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,e){if(typeof e.from!="number"||typeof e.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Zn(e.from,e.to,t.markFromJSON(e.mark))}}Je.jsonID("addMark",Zn);class kn extends Je{constructor(t,e,i){super(),this.from=t,this.to=e,this.mark=i}apply(t){let e=t.slice(this.from,this.to),i=new ht(qu(e.content,r=>r.mark(this.mark.removeFromSet(r.marks)),t),e.openStart,e.openEnd);return me.fromReplace(t,this.from,this.to,i)}invert(){return new Zn(this.from,this.to,this.mark)}map(t){let e=t.mapResult(this.from,1),i=t.mapResult(this.to,-1);return e.deleted&&i.deleted||e.pos>=i.pos?null:new kn(e.pos,i.pos,this.mark)}merge(t){return t instanceof kn&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new kn(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,e){if(typeof e.from!="number"||typeof e.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new kn(e.from,e.to,t.markFromJSON(e.mark))}}Je.jsonID("removeMark",kn);class ti extends Je{constructor(t,e){super(),this.pos=t,this.mark=e}apply(t){let e=t.nodeAt(this.pos);if(!e)return me.fail("No node at mark step's position");let i=e.type.create(e.attrs,null,this.mark.addToSet(e.marks));return me.fromReplace(t,this.pos,this.pos+1,new ht(et.from(i),0,e.isLeaf?0:1))}invert(t){let e=t.nodeAt(this.pos);if(e){let i=this.mark.addToSet(e.marks);if(i.length==e.marks.length){for(let r=0;r<e.marks.length;r++)if(!e.marks[r].isInSet(i))return new ti(this.pos,e.marks[r]);return new ti(this.pos,this.mark)}}return new $r(this.pos,this.mark)}map(t){let e=t.mapResult(this.pos,1);return e.deletedAfter?null:new ti(e.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,e){if(typeof e.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new ti(e.pos,t.markFromJSON(e.mark))}}Je.jsonID("addNodeMark",ti);class $r extends Je{constructor(t,e){super(),this.pos=t,this.mark=e}apply(t){let e=t.nodeAt(this.pos);if(!e)return me.fail("No node at mark step's position");let i=e.type.create(e.attrs,null,this.mark.removeFromSet(e.marks));return me.fromReplace(t,this.pos,this.pos+1,new ht(et.from(i),0,e.isLeaf?0:1))}invert(t){let e=t.nodeAt(this.pos);return!e||!this.mark.isInSet(e.marks)?this:new ti(this.pos,this.mark)}map(t){let e=t.mapResult(this.pos,1);return e.deletedAfter?null:new $r(e.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,e){if(typeof e.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new $r(e.pos,t.markFromJSON(e.mark))}}Je.jsonID("removeNodeMark",$r);class Pe extends Je{constructor(t,e,i,r=!1){super(),this.from=t,this.to=e,this.slice=i,this.structure=r}apply(t){return this.structure&&Hc(t,this.from,this.to)?me.fail("Structure replace would overwrite content"):me.fromReplace(t,this.from,this.to,this.slice)}getMap(){return new rn([this.from,this.to-this.from,this.slice.size])}invert(t){return new Pe(this.from,this.from+this.slice.size,t.slice(this.from,this.to))}map(t){let e=t.mapResult(this.from,1),i=t.mapResult(this.to,-1);return e.deletedAcross&&i.deletedAcross?null:new Pe(e.pos,Math.max(e.pos,i.pos),this.slice)}merge(t){if(!(t instanceof Pe)||t.structure||this.structure)return null;if(this.from+this.slice.size==t.from&&!this.slice.openEnd&&!t.slice.openStart){let e=this.slice.size+t.slice.size==0?ht.empty:new ht(this.slice.content.append(t.slice.content),this.slice.openStart,t.slice.openEnd);return new Pe(this.from,this.to+(t.to-t.from),e,this.structure)}else if(t.to==this.from&&!this.slice.openStart&&!t.slice.openEnd){let e=this.slice.size+t.slice.size==0?ht.empty:new ht(t.slice.content.append(this.slice.content),t.slice.openStart,this.slice.openEnd);return new Pe(t.from,this.to,e,this.structure)}else return null}toJSON(){let t={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,e){if(typeof e.from!="number"||typeof e.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Pe(e.from,e.to,ht.fromJSON(t,e.slice),!!e.structure)}}Je.jsonID("replace",Pe);class we extends Je{constructor(t,e,i,r,s,o,a=!1){super(),this.from=t,this.to=e,this.gapFrom=i,this.gapTo=r,this.slice=s,this.insert=o,this.structure=a}apply(t){if(this.structure&&(Hc(t,this.from,this.gapFrom)||Hc(t,this.gapTo,this.to)))return me.fail("Structure gap-replace would overwrite content");let e=t.slice(this.gapFrom,this.gapTo);if(e.openStart||e.openEnd)return me.fail("Gap is not a flat range");let i=this.slice.insertAt(this.insert,e.content);return i?me.fromReplace(t,this.from,this.to,i):me.fail("Content does not fit in gap")}getMap(){return new rn([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(t){let e=this.gapTo-this.gapFrom;return new we(this.from,this.from+this.slice.size+e,this.from+this.insert,this.from+this.insert+e,t.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(t){let e=t.mapResult(this.from,1),i=t.mapResult(this.to,-1),r=t.map(this.gapFrom,-1),s=t.map(this.gapTo,1);return e.deletedAcross&&i.deletedAcross||r<e.pos||s>i.pos?null:new we(e.pos,i.pos,r,s,this.slice,this.insert,this.structure)}toJSON(){let t={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,e){if(typeof e.from!="number"||typeof e.to!="number"||typeof e.gapFrom!="number"||typeof e.gapTo!="number"||typeof e.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new we(e.from,e.to,e.gapFrom,e.gapTo,ht.fromJSON(t,e.slice),e.insert,!!e.structure)}}Je.jsonID("replaceAround",we);function Hc(n,t,e){let i=n.resolve(t),r=e-t,s=i.depth;for(;r>0&&s>0&&i.indexAfter(s)==i.node(s).childCount;)s--,r--;if(r>0){let o=i.node(s).maybeChild(i.indexAfter(s));for(;r>0;){if(!o||o.isLeaf)return!0;o=o.firstChild,r--}}return!1}function YE(n,t,e,i){let r=[],s=[],o,a;n.doc.nodesBetween(t,e,(l,c,u)=>{if(!l.isInline)return;let h=l.marks;if(!i.isInSet(h)&&u.type.allowsMarkType(i.type)){let f=Math.max(c,t),d=Math.min(c+l.nodeSize,e),g=i.addToSet(h);for(let b=0;b<h.length;b++)h[b].isInSet(g)||(o&&o.to==f&&o.mark.eq(h[b])?o.to=d:r.push(o=new kn(f,d,h[b])));a&&a.to==f?a.to=d:s.push(a=new Zn(f,d,i))}}),r.forEach(l=>n.step(l)),s.forEach(l=>n.step(l))}function XE(n,t,e,i){let r=[],s=0;n.doc.nodesBetween(t,e,(o,a)=>{if(!o.isInline)return;s++;let l=null;if(i instanceof Qa){let c=o.marks,u;for(;u=i.isInSet(c);)(l||(l=[])).push(u),c=u.removeFromSet(c)}else i?i.isInSet(o.marks)&&(l=[i]):l=o.marks;if(l&&l.length){let c=Math.min(a+o.nodeSize,e);for(let u=0;u<l.length;u++){let h=l[u],f;for(let d=0;d<r.length;d++){let g=r[d];g.step==s-1&&h.eq(r[d].style)&&(f=g)}f?(f.to=c,f.step=s):r.push({style:h,from:Math.max(a,t),to:c,step:s})}}}),r.forEach(o=>n.step(new kn(o.from,o.to,o.style)))}function QE(n,t,e,i=e.contentMatch){let r=n.doc.nodeAt(t),s=[],o=t+1;for(let a=0;a<r.childCount;a++){let l=r.child(a),c=o+l.nodeSize,u=i.matchType(l.type);if(!u)s.push(new Pe(o,c,ht.empty));else{i=u;for(let h=0;h<l.marks.length;h++)e.allowsMarkType(l.marks[h].type)||n.step(new kn(o,c,l.marks[h]))}o=c}if(!i.validEnd){let a=i.fillBefore(et.empty,!0);n.replace(o,o,new ht(a,0,0))}for(let a=s.length-1;a>=0;a--)n.step(s[a])}function ZE(n,t,e){return(t==0||n.canReplace(t,n.childCount))&&(e==n.childCount||n.canReplace(0,e))}function Xr(n){let e=n.parent.content.cutByIndex(n.startIndex,n.endIndex);for(let i=n.depth;;--i){let r=n.$from.node(i),s=n.$from.index(i),o=n.$to.indexAfter(i);if(i<n.depth&&r.canReplace(s,o,e))return i;if(i==0||r.type.spec.isolating||!ZE(r,s,o))break}return null}function t$(n,t,e){let{$from:i,$to:r,depth:s}=t,o=i.before(s+1),a=r.after(s+1),l=o,c=a,u=et.empty,h=0;for(let g=s,b=!1;g>e;g--)b||i.index(g)>0?(b=!0,u=et.from(i.node(g).copy(u)),h++):l--;let f=et.empty,d=0;for(let g=s,b=!1;g>e;g--)b||r.after(g+1)<r.end(g)?(b=!0,f=et.from(r.node(g).copy(f)),d++):c++;n.step(new we(l,c,o,a,new ht(u.append(f),h,d),u.size-h,!0))}function Wu(n,t,e=null,i=n){let r=e$(n,t),s=r&&n$(i,t);return s?r.map(od).concat({type:t,attrs:e}).concat(s.map(od)):null}function od(n){return{type:n,attrs:null}}function e$(n,t){let{parent:e,startIndex:i,endIndex:r}=n,s=e.contentMatchAt(i).findWrapping(t);if(!s)return null;let o=s.length?s[0]:t;return e.canReplaceWith(i,r,o)?s:null}function n$(n,t){let{parent:e,startIndex:i,endIndex:r}=n,s=e.child(i),o=t.contentMatch.findWrapping(s.type);if(!o)return null;let l=(o.length?o[o.length-1]:t).contentMatch;for(let c=i;l&&c<r;c++)l=l.matchType(e.child(c).type);return!l||!l.validEnd?null:o}function i$(n,t,e){let i=et.empty;for(let o=e.length-1;o>=0;o--){if(i.size){let a=e[o].type.contentMatch.matchFragment(i);if(!a||!a.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}i=et.from(e[o].type.create(e[o].attrs,i))}let r=t.start,s=t.end;n.step(new we(r,s,r,s,new ht(i,0,0),e.length,!0))}function r$(n,t,e,i,r){if(!i.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=n.steps.length;n.doc.nodesBetween(t,e,(o,a)=>{if(o.isTextblock&&!o.hasMarkup(i,r)&&s$(n.doc,n.mapping.slice(s).map(a),i)){n.clearIncompatible(n.mapping.slice(s).map(a,1),i);let l=n.mapping.slice(s),c=l.map(a,1),u=l.map(a+o.nodeSize,1);return n.step(new we(c,u,c+1,u-1,new ht(et.from(i.create(r,null,o.marks)),0,0),1,!0)),!1}})}function s$(n,t,e){let i=n.resolve(t),r=i.index();return i.parent.canReplaceWith(r,r+1,e)}function o$(n,t,e,i,r){let s=n.doc.nodeAt(t);if(!s)throw new RangeError("No node at given position");e||(e=s.type);let o=e.create(i,null,r||s.marks);if(s.isLeaf)return n.replaceWith(t,t+s.nodeSize,o);if(!e.validContent(s.content))throw new RangeError("Invalid content for node type "+e.name);n.step(new we(t,t+s.nodeSize,t+1,t+s.nodeSize-1,new ht(et.from(o),0,0),1,!0))}function Sr(n,t,e=1,i){let r=n.resolve(t),s=r.depth-e,o=i&&i[i.length-1]||r.parent;if(s<0||r.parent.type.spec.isolating||!r.parent.canReplace(r.index(),r.parent.childCount)||!o.type.validContent(r.parent.content.cutByIndex(r.index(),r.parent.childCount)))return!1;for(let c=r.depth-1,u=e-2;c>s;c--,u--){let h=r.node(c),f=r.index(c);if(h.type.spec.isolating)return!1;let d=h.content.cutByIndex(f,h.childCount),g=i&&i[u]||h;if(g!=h&&(d=d.replaceChild(0,g.type.create(g.attrs))),!h.canReplace(f+1,h.childCount)||!g.type.validContent(d))return!1}let a=r.indexAfter(s),l=i&&i[0];return r.node(s).canReplaceWith(a,a,l?l.type:r.node(s+1).type)}function a$(n,t,e=1,i){let r=n.doc.resolve(t),s=et.empty,o=et.empty;for(let a=r.depth,l=r.depth-e,c=e-1;a>l;a--,c--){s=et.from(r.node(a).copy(s));let u=i&&i[c];o=et.from(u?u.type.create(u.attrs,o):r.node(a).copy(o))}n.step(new Pe(t,t,new ht(s.append(o),e,e),!0))}function _i(n,t){let e=n.resolve(t),i=e.index();return g0(e.nodeBefore,e.nodeAfter)&&e.parent.canReplace(i,i+1)}function g0(n,t){return!!(n&&t&&!n.isLeaf&&n.canAppend(t))}function m0(n,t,e=-1){let i=n.resolve(t);for(let r=i.depth;;r--){let s,o,a=i.index(r);if(r==i.depth?(s=i.nodeBefore,o=i.nodeAfter):e>0?(s=i.node(r+1),a++,o=i.node(r).maybeChild(a)):(s=i.node(r).maybeChild(a-1),o=i.node(r+1)),s&&!s.isTextblock&&g0(s,o)&&i.node(r).canReplace(a,a+1))return t;if(r==0)break;t=e<0?i.before(r):i.after(r)}}function l$(n,t,e){let i=new Pe(t-e,t+e,ht.empty,!0);n.step(i)}function c$(n,t,e){let i=n.resolve(t);if(i.parent.canReplaceWith(i.index(),i.index(),e))return t;if(i.parentOffset==0)for(let r=i.depth-1;r>=0;r--){let s=i.index(r);if(i.node(r).canReplaceWith(s,s,e))return i.before(r+1);if(s>0)return null}if(i.parentOffset==i.parent.content.size)for(let r=i.depth-1;r>=0;r--){let s=i.indexAfter(r);if(i.node(r).canReplaceWith(s,s,e))return i.after(r+1);if(s<i.node(r).childCount)return null}return null}function y0(n,t,e){let i=n.resolve(t);if(!e.content.size)return t;let r=e.content;for(let s=0;s<e.openStart;s++)r=r.firstChild.content;for(let s=1;s<=(e.openStart==0&&e.size?2:1);s++)for(let o=i.depth;o>=0;o--){let a=o==i.depth?0:i.pos<=(i.start(o+1)+i.end(o+1))/2?-1:1,l=i.index(o)+(a>0?1:0),c=i.node(o),u=!1;if(s==1)u=c.canReplace(l,l,r);else{let h=c.contentMatchAt(l).findWrapping(r.firstChild.type);u=h&&c.canReplaceWith(l,l,h[0])}if(u)return a==0?i.pos:a<0?i.before(o+1):i.after(o+1)}return null}function Ku(n,t,e=t,i=ht.empty){if(t==e&&!i.size)return null;let r=n.resolve(t),s=n.resolve(e);return b0(r,s,i)?new Pe(t,e,i):new u$(r,s,i).fit()}function b0(n,t,e){return!e.openStart&&!e.openEnd&&n.start()==t.start()&&n.parent.canReplace(n.index(),t.index(),e.content)}class u${constructor(t,e,i){this.$from=t,this.$to=e,this.unplaced=i,this.frontier=[],this.placed=et.empty;for(let r=0;r<=t.depth;r++){let s=t.node(r);this.frontier.push({type:s.type,match:s.contentMatchAt(t.indexAfter(r))})}for(let r=t.depth;r>0;r--)this.placed=et.from(t.node(r).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let c=this.findFittable();c?this.placeNodes(c):this.openMore()||this.dropNode()}let t=this.mustMoveInline(),e=this.placed.size-this.depth-this.$from.depth,i=this.$from,r=this.close(t<0?this.$to:i.doc.resolve(t));if(!r)return null;let s=this.placed,o=i.depth,a=r.depth;for(;o&&a&&s.childCount==1;)s=s.firstChild.content,o--,a--;let l=new ht(s,o,a);return t>-1?new we(i.pos,t,this.$to.pos,this.$to.end(),l,e):l.size||i.pos!=this.$to.pos?new Pe(i.pos,r.pos,l):null}findFittable(){let t=this.unplaced.openStart;for(let e=this.unplaced.content,i=0,r=this.unplaced.openEnd;i<t;i++){let s=e.firstChild;if(e.childCount>1&&(r=0),s.type.spec.isolating&&r<=i){t=i;break}e=s.content}for(let e=1;e<=2;e++)for(let i=e==1?t:this.unplaced.openStart;i>=0;i--){let r,s=null;i?(s=Fl(this.unplaced.content,i-1).firstChild,r=s.content):r=this.unplaced.content;let o=r.firstChild;for(let a=this.depth;a>=0;a--){let{type:l,match:c}=this.frontier[a],u,h=null;if(e==1&&(o?c.matchType(o.type)||(h=c.fillBefore(et.from(o),!1)):s&&l.compatibleContent(s.type)))return{sliceDepth:i,frontierDepth:a,parent:s,inject:h};if(e==2&&o&&(u=c.findWrapping(o.type)))return{sliceDepth:i,frontierDepth:a,parent:s,wrap:u};if(s&&c.matchType(s.type))break}}}openMore(){let{content:t,openStart:e,openEnd:i}=this.unplaced,r=Fl(t,e);return!r.childCount||r.firstChild.isLeaf?!1:(this.unplaced=new ht(t,e+1,Math.max(i,r.size+e>=t.size-i?e+1:0)),!0)}dropNode(){let{content:t,openStart:e,openEnd:i}=this.unplaced,r=Fl(t,e);if(r.childCount<=1&&e>0){let s=t.size-e<=e+r.size;this.unplaced=new ht(hs(t,e-1,1),e-1,s?e-1:i)}else this.unplaced=new ht(hs(t,e,1),e,i)}placeNodes({sliceDepth:t,frontierDepth:e,parent:i,inject:r,wrap:s}){for(;this.depth>e;)this.closeFrontierNode();if(s)for(let b=0;b<s.length;b++)this.openFrontierNode(s[b]);let o=this.unplaced,a=i?i.content:o.content,l=o.openStart-t,c=0,u=[],{match:h,type:f}=this.frontier[e];if(r){for(let b=0;b<r.childCount;b++)u.push(r.child(b));h=h.matchFragment(r)}let d=a.size+t-(o.content.size-o.openEnd);for(;c<a.childCount;){let b=a.child(c),k=h.matchType(b.type);if(!k)break;c++,(c>1||l==0||b.content.size)&&(h=k,u.push(v0(b.mark(f.allowedMarks(b.marks)),c==1?l:0,c==a.childCount?d:-1)))}let g=c==a.childCount;g||(d=-1),this.placed=fs(this.placed,e,et.from(u)),this.frontier[e].match=h,g&&d<0&&i&&i.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let b=0,k=a;b<d;b++){let O=k.lastChild;this.frontier.push({type:O.type,match:O.contentMatchAt(O.childCount)}),k=O.content}this.unplaced=g?t==0?ht.empty:new ht(hs(o.content,t-1,1),t-1,d<0?o.openEnd:t-1):new ht(hs(o.content,t,c),o.openStart,o.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let t=this.frontier[this.depth],e;if(!t.type.isTextblock||!jl(this.$to,this.$to.depth,t.type,t.match,!1)||this.$to.depth==this.depth&&(e=this.findCloseLevel(this.$to))&&e.depth==this.depth)return-1;let{depth:i}=this.$to,r=this.$to.after(i);for(;i>1&&r==this.$to.end(--i);)++r;return r}findCloseLevel(t){t:for(let e=Math.min(this.depth,t.depth);e>=0;e--){let{match:i,type:r}=this.frontier[e],s=e<t.depth&&t.end(e+1)==t.pos+(t.depth-(e+1)),o=jl(t,e,r,i,s);if(o){for(let a=e-1;a>=0;a--){let{match:l,type:c}=this.frontier[a],u=jl(t,a,c,l,!0);if(!u||u.childCount)continue t}return{depth:e,fit:o,move:s?t.doc.resolve(t.after(e+1)):t}}}}close(t){let e=this.findCloseLevel(t);if(!e)return null;for(;this.depth>e.depth;)this.closeFrontierNode();e.fit.childCount&&(this.placed=fs(this.placed,e.depth,e.fit)),t=e.move;for(let i=e.depth+1;i<=t.depth;i++){let r=t.node(i),s=r.type.contentMatch.fillBefore(r.content,!0,t.index(i));this.openFrontierNode(r.type,r.attrs,s)}return t}openFrontierNode(t,e=null,i){let r=this.frontier[this.depth];r.match=r.match.matchType(t),this.placed=fs(this.placed,this.depth,et.from(t.create(e,i))),this.frontier.push({type:t,match:t.contentMatch})}closeFrontierNode(){let e=this.frontier.pop().match.fillBefore(et.empty,!0);e.childCount&&(this.placed=fs(this.placed,this.frontier.length,e))}}function hs(n,t,e){return t==0?n.cutByIndex(e,n.childCount):n.replaceChild(0,n.firstChild.copy(hs(n.firstChild.content,t-1,e)))}function fs(n,t,e){return t==0?n.append(e):n.replaceChild(n.childCount-1,n.lastChild.copy(fs(n.lastChild.content,t-1,e)))}function Fl(n,t){for(let e=0;e<t;e++)n=n.firstChild.content;return n}function v0(n,t,e){if(t<=0)return n;let i=n.content;return t>1&&(i=i.replaceChild(0,v0(i.firstChild,t-1,i.childCount==1?e-1:0))),t>0&&(i=n.type.contentMatch.fillBefore(i).append(i),e<=0&&(i=i.append(n.type.contentMatch.matchFragment(i).fillBefore(et.empty,!0)))),n.copy(i)}function jl(n,t,e,i,r){let s=n.node(t),o=r?n.indexAfter(t):n.index(t);if(o==s.childCount&&!e.compatibleContent(s.type))return null;let a=i.fillBefore(s.content,!0,o);return a&&!h$(e,s.content,o)?a:null}function h$(n,t,e){for(let i=e;i<t.childCount;i++)if(!n.allowsMarks(t.child(i).marks))return!0;return!1}function f$(n){return n.spec.defining||n.spec.definingForContent}function d$(n,t,e,i){if(!i.size)return n.deleteRange(t,e);let r=n.doc.resolve(t),s=n.doc.resolve(e);if(b0(r,s,i))return n.step(new Pe(t,e,i));let o=w0(r,n.doc.resolve(e));o[o.length-1]==0&&o.pop();let a=-(r.depth+1);o.unshift(a);for(let f=r.depth,d=r.pos-1;f>0;f--,d--){let g=r.node(f).type.spec;if(g.defining||g.definingAsContext||g.isolating)break;o.indexOf(f)>-1?a=f:r.before(f)==d&&o.splice(1,0,-f)}let l=o.indexOf(a),c=[],u=i.openStart;for(let f=i.content,d=0;;d++){let g=f.firstChild;if(c.push(g),d==i.openStart)break;f=g.content}for(let f=u-1;f>=0;f--){let d=c[f].type,g=f$(d);if(g&&r.node(l).type!=d)u=f;else if(g||!d.isTextblock)break}for(let f=i.openStart;f>=0;f--){let d=(f+u+1)%(i.openStart+1),g=c[d];if(g)for(let b=0;b<o.length;b++){let k=o[(b+l)%o.length],O=!0;k<0&&(O=!1,k=-k);let D=r.node(k-1),F=r.index(k-1);if(D.canReplaceWith(F,F,g.type,g.marks))return n.replace(r.before(k),O?s.after(k):e,new ht(x0(i.content,0,i.openStart,d),d,i.openEnd))}}let h=n.steps.length;for(let f=o.length-1;f>=0&&(n.replace(t,e,i),!(n.steps.length>h));f--){let d=o[f];d<0||(t=r.before(d),e=s.after(d))}}function x0(n,t,e,i,r){if(t<e){let s=n.firstChild;n=n.replaceChild(0,s.copy(x0(s.content,t+1,e,i,s)))}if(t>i){let s=r.contentMatchAt(0),o=s.fillBefore(n).append(n);n=o.append(s.matchFragment(o).fillBefore(et.empty,!0))}return n}function p$(n,t,e,i){if(!i.isInline&&t==e&&n.doc.resolve(t).parent.content.size){let r=c$(n.doc,t,i.type);r!=null&&(t=e=r)}n.replaceRange(t,e,new ht(et.from(i),0,0))}function g$(n,t,e){let i=n.doc.resolve(t),r=n.doc.resolve(e),s=w0(i,r);for(let o=0;o<s.length;o++){let a=s[o],l=o==s.length-1;if(l&&a==0||i.node(a).type.contentMatch.validEnd)return n.delete(i.start(a),r.end(a));if(a>0&&(l||i.node(a-1).canReplace(i.index(a-1),r.indexAfter(a-1))))return n.delete(i.before(a),r.after(a))}for(let o=1;o<=i.depth&&o<=r.depth;o++)if(t-i.start(o)==i.depth-o&&e>i.end(o)&&r.end(o)-e!=r.depth-o)return n.delete(i.before(o),e);n.delete(t,e)}function w0(n,t){let e=[],i=Math.min(n.depth,t.depth);for(let r=i;r>=0;r--){let s=n.start(r);if(s<n.pos-(n.depth-r)||t.end(r)>t.pos+(t.depth-r)||n.node(r).type.spec.isolating||t.node(r).type.spec.isolating)break;(s==t.start(r)||r==n.depth&&r==t.depth&&n.parent.inlineContent&&t.parent.inlineContent&&r&&t.start(r-1)==s-1)&&e.push(r)}return e}class kr extends Je{constructor(t,e,i){super(),this.pos=t,this.attr=e,this.value=i}apply(t){let e=t.nodeAt(this.pos);if(!e)return me.fail("No node at attribute step's position");let i=Object.create(null);for(let s in e.attrs)i[s]=e.attrs[s];i[this.attr]=this.value;let r=e.type.create(i,null,e.marks);return me.fromReplace(t,this.pos,this.pos+1,new ht(et.from(r),0,e.isLeaf?0:1))}getMap(){return rn.empty}invert(t){return new kr(this.pos,this.attr,t.nodeAt(this.pos).attrs[this.attr])}map(t){let e=t.mapResult(this.pos,1);return e.deletedAfter?null:new kr(e.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(t,e){if(typeof e.pos!="number"||typeof e.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new kr(e.pos,e.attr,e.value)}}Je.jsonID("attr",kr);let Pr=class extends Error{};Pr=function n(t){let e=Error.call(this,t);return e.__proto__=n.prototype,e};Pr.prototype=Object.create(Error.prototype);Pr.prototype.constructor=Pr;Pr.prototype.name="TransformError";class _0{constructor(t){this.doc=t,this.steps=[],this.docs=[],this.mapping=new _r}get before(){return this.docs.length?this.docs[0]:this.doc}step(t){let e=this.maybeStep(t);if(e.failed)throw new Pr(e.failed);return this}maybeStep(t){let e=t.apply(this.doc);return e.failed||this.addStep(t,e.doc),e}get docChanged(){return this.steps.length>0}addStep(t,e){this.docs.push(this.doc),this.steps.push(t),this.mapping.appendMap(t.getMap()),this.doc=e}replace(t,e=t,i=ht.empty){let r=Ku(this.doc,t,e,i);return r&&this.step(r),this}replaceWith(t,e,i){return this.replace(t,e,new ht(et.from(i),0,0))}delete(t,e){return this.replace(t,e,ht.empty)}insert(t,e){return this.replaceWith(t,t,e)}replaceRange(t,e,i){return d$(this,t,e,i),this}replaceRangeWith(t,e,i){return p$(this,t,e,i),this}deleteRange(t,e){return g$(this,t,e),this}lift(t,e){return t$(this,t,e),this}join(t,e=1){return l$(this,t,e),this}wrap(t,e){return i$(this,t,e),this}setBlockType(t,e=t,i,r=null){return r$(this,t,e,i,r),this}setNodeMarkup(t,e,i=null,r){return o$(this,t,e,i,r),this}setNodeAttribute(t,e,i){return this.step(new kr(t,e,i)),this}addNodeMark(t,e){return this.step(new ti(t,e)),this}removeNodeMark(t,e){if(!(e instanceof Ut)){let i=this.doc.nodeAt(t);if(!i)throw new RangeError("No node at position "+t);if(e=e.isInSet(i.marks),!e)return this}return this.step(new $r(t,e)),this}split(t,e=1,i){return a$(this,t,e,i),this}addMark(t,e,i){return YE(this,t,e,i),this}removeMark(t,e,i){return XE(this,t,e,i),this}clearIncompatible(t,e,i){return QE(this,t,e,i),this}}const Vl=Object.create(null);class $t{constructor(t,e,i){this.$anchor=t,this.$head=e,this.ranges=i||[new m$(t.min(e),t.max(e))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let t=this.ranges;for(let e=0;e<t.length;e++)if(t[e].$from.pos!=t[e].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(t,e=ht.empty){let i=e.content.lastChild,r=null;for(let a=0;a<e.openEnd;a++)r=i,i=i.lastChild;let s=t.steps.length,o=this.ranges;for(let a=0;a<o.length;a++){let{$from:l,$to:c}=o[a],u=t.mapping.slice(s);t.replaceRange(u.map(l.pos),u.map(c.pos),a?ht.empty:e),a==0&&cd(t,s,(i?i.isInline:r&&r.isTextblock)?-1:1)}}replaceWith(t,e){let i=t.steps.length,r=this.ranges;for(let s=0;s<r.length;s++){let{$from:o,$to:a}=r[s],l=t.mapping.slice(i),c=l.map(o.pos),u=l.map(a.pos);s?t.deleteRange(c,u):(t.replaceRangeWith(c,u,e),cd(t,i,e.isInline?-1:1))}}static findFrom(t,e,i=!1){let r=t.parent.inlineContent?new Pt(t):ur(t.node(0),t.parent,t.pos,t.index(),e,i);if(r)return r;for(let s=t.depth-1;s>=0;s--){let o=e<0?ur(t.node(0),t.node(s),t.before(s+1),t.index(s),e,i):ur(t.node(0),t.node(s),t.after(s+1),t.index(s)+1,e,i);if(o)return o}return null}static near(t,e=1){return this.findFrom(t,e)||this.findFrom(t,-e)||new un(t.node(0))}static atStart(t){return ur(t,t,0,0,1)||new un(t)}static atEnd(t){return ur(t,t,t.content.size,t.childCount,-1)||new un(t)}static fromJSON(t,e){if(!e||!e.type)throw new RangeError("Invalid input for Selection.fromJSON");let i=Vl[e.type];if(!i)throw new RangeError(`No selection type ${e.type} defined`);return i.fromJSON(t,e)}static jsonID(t,e){if(t in Vl)throw new RangeError("Duplicate use of selection JSON ID "+t);return Vl[t]=e,e.prototype.jsonID=t,e}getBookmark(){return Pt.between(this.$anchor,this.$head).getBookmark()}}$t.prototype.visible=!0;class m${constructor(t,e){this.$from=t,this.$to=e}}let ad=!1;function ld(n){!ad&&!n.parent.inlineContent&&(ad=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+n.parent.type.name+")"))}class Pt extends $t{constructor(t,e=t){ld(t),ld(e),super(t,e)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(t,e){let i=t.resolve(e.map(this.head));if(!i.parent.inlineContent)return $t.near(i);let r=t.resolve(e.map(this.anchor));return new Pt(r.parent.inlineContent?r:i,i)}replace(t,e=ht.empty){if(super.replace(t,e),e==ht.empty){let i=this.$from.marksAcross(this.$to);i&&t.ensureMarks(i)}}eq(t){return t instanceof Pt&&t.anchor==this.anchor&&t.head==this.head}getBookmark(){return new Za(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(t,e){if(typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new Pt(t.resolve(e.anchor),t.resolve(e.head))}static create(t,e,i=e){let r=t.resolve(e);return new this(r,i==e?r:t.resolve(i))}static between(t,e,i){let r=t.pos-e.pos;if((!i||r)&&(i=r>=0?1:-1),!e.parent.inlineContent){let s=$t.findFrom(e,i,!0)||$t.findFrom(e,-i,!0);if(s)e=s.$head;else return $t.near(e,i)}return t.parent.inlineContent||(r==0?t=e:(t=($t.findFrom(t,-i,!0)||$t.findFrom(t,i,!0)).$anchor,t.pos<e.pos!=r<0&&(t=e))),new Pt(t,e)}}$t.jsonID("text",Pt);class Za{constructor(t,e){this.anchor=t,this.head=e}map(t){return new Za(t.map(this.anchor),t.map(this.head))}resolve(t){return Pt.between(t.resolve(this.anchor),t.resolve(this.head))}}class Mt extends $t{constructor(t){let e=t.nodeAfter,i=t.node(0).resolve(t.pos+e.nodeSize);super(t,i),this.node=e}map(t,e){let{deleted:i,pos:r}=e.mapResult(this.anchor),s=t.resolve(r);return i?$t.near(s):new Mt(s)}content(){return new ht(et.from(this.node),0,0)}eq(t){return t instanceof Mt&&t.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new Ju(this.anchor)}static fromJSON(t,e){if(typeof e.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new Mt(t.resolve(e.anchor))}static create(t,e){return new Mt(t.resolve(e))}static isSelectable(t){return!t.isText&&t.type.spec.selectable!==!1}}Mt.prototype.visible=!1;$t.jsonID("node",Mt);class Ju{constructor(t){this.anchor=t}map(t){let{deleted:e,pos:i}=t.mapResult(this.anchor);return e?new Za(i,i):new Ju(i)}resolve(t){let e=t.resolve(this.anchor),i=e.nodeAfter;return i&&Mt.isSelectable(i)?new Mt(e):$t.near(e)}}class un extends $t{constructor(t){super(t.resolve(0),t.resolve(t.content.size))}replace(t,e=ht.empty){if(e==ht.empty){t.delete(0,t.doc.content.size);let i=$t.atStart(t.doc);i.eq(t.selection)||t.setSelection(i)}else super.replace(t,e)}toJSON(){return{type:"all"}}static fromJSON(t){return new un(t)}map(t){return new un(t)}eq(t){return t instanceof un}getBookmark(){return y$}}$t.jsonID("all",un);const y$={map(){return this},resolve(n){return new un(n)}};function ur(n,t,e,i,r,s=!1){if(t.inlineContent)return Pt.create(n,e);for(let o=i-(r>0?0:1);r>0?o<t.childCount:o>=0;o+=r){let a=t.child(o);if(a.isAtom){if(!s&&Mt.isSelectable(a))return Mt.create(n,e-(r<0?a.nodeSize:0))}else{let l=ur(n,a,e+r,r<0?a.childCount:0,r,s);if(l)return l}e+=a.nodeSize*r}return null}function cd(n,t,e){let i=n.steps.length-1;if(i<t)return;let r=n.steps[i];if(!(r instanceof Pe||r instanceof we))return;let s=n.mapping.maps[i],o;s.forEach((a,l,c,u)=>{o==null&&(o=u)}),n.setSelection($t.near(n.doc.resolve(o),e))}const ud=1,ao=2,hd=4;class b$ extends _0{constructor(t){super(t.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=t.selection,this.storedMarks=t.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(t){if(t.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=t,this.curSelectionFor=this.steps.length,this.updated=(this.updated|ud)&~ao,this.storedMarks=null,this}get selectionSet(){return(this.updated&ud)>0}setStoredMarks(t){return this.storedMarks=t,this.updated|=ao,this}ensureMarks(t){return Ut.sameSet(this.storedMarks||this.selection.$from.marks(),t)||this.setStoredMarks(t),this}addStoredMark(t){return this.ensureMarks(t.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(t){return this.ensureMarks(t.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&ao)>0}addStep(t,e){super.addStep(t,e),this.updated=this.updated&~ao,this.storedMarks=null}setTime(t){return this.time=t,this}replaceSelection(t){return this.selection.replace(this,t),this}replaceSelectionWith(t,e=!0){let i=this.selection;return e&&(t=t.mark(this.storedMarks||(i.empty?i.$from.marks():i.$from.marksAcross(i.$to)||Ut.none))),i.replaceWith(this,t),this}deleteSelection(){return this.selection.replace(this),this}insertText(t,e,i){let r=this.doc.type.schema;if(e==null)return t?this.replaceSelectionWith(r.text(t),!0):this.deleteSelection();{if(i==null&&(i=e),i=i??e,!t)return this.deleteRange(e,i);let s=this.storedMarks;if(!s){let o=this.doc.resolve(e);s=i==e?o.marks():o.marksAcross(this.doc.resolve(i))}return this.replaceRangeWith(e,i,r.text(t,s)),this.selection.empty||this.setSelection($t.near(this.selection.$to)),this}}setMeta(t,e){return this.meta[typeof t=="string"?t:t.key]=e,this}getMeta(t){return this.meta[typeof t=="string"?t:t.key]}get isGeneric(){for(let t in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=hd,this}get scrolledIntoView(){return(this.updated&hd)>0}}function fd(n,t){return!t||!n?n:n.bind(t)}class ds{constructor(t,e,i){this.name=t,this.init=fd(e.init,i),this.apply=fd(e.apply,i)}}const v$=[new ds("doc",{init(n){return n.doc||n.schema.topNodeType.createAndFill()},apply(n){return n.doc}}),new ds("selection",{init(n,t){return n.selection||$t.atStart(t.doc)},apply(n){return n.selection}}),new ds("storedMarks",{init(n){return n.storedMarks||null},apply(n,t,e,i){return i.selection.$cursor?n.storedMarks:null}}),new ds("scrollToSelection",{init(){return 0},apply(n,t){return n.scrolledIntoView?t+1:t}})];class Hl{constructor(t,e){this.schema=t,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=v$.slice(),e&&e.forEach(i=>{if(this.pluginsByKey[i.key])throw new RangeError("Adding different instances of a keyed plugin ("+i.key+")");this.plugins.push(i),this.pluginsByKey[i.key]=i,i.spec.state&&this.fields.push(new ds(i.key,i.spec.state,i))})}}class pr{constructor(t){this.config=t}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(t){return this.applyTransaction(t).state}filterTransaction(t,e=-1){for(let i=0;i<this.config.plugins.length;i++)if(i!=e){let r=this.config.plugins[i];if(r.spec.filterTransaction&&!r.spec.filterTransaction.call(r,t,this))return!1}return!0}applyTransaction(t){if(!this.filterTransaction(t))return{state:this,transactions:[]};let e=[t],i=this.applyInner(t),r=null;for(;;){let s=!1;for(let o=0;o<this.config.plugins.length;o++){let a=this.config.plugins[o];if(a.spec.appendTransaction){let l=r?r[o].n:0,c=r?r[o].state:this,u=l<e.length&&a.spec.appendTransaction.call(a,l?e.slice(l):e,c,i);if(u&&i.filterTransaction(u,o)){if(u.setMeta("appendedTransaction",t),!r){r=[];for(let h=0;h<this.config.plugins.length;h++)r.push(h<o?{state:i,n:e.length}:{state:this,n:0})}e.push(u),i=i.applyInner(u),s=!0}r&&(r[o]={state:i,n:e.length})}}if(!s)return{state:i,transactions:e}}}applyInner(t){if(!t.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let e=new pr(this.config),i=this.config.fields;for(let r=0;r<i.length;r++){let s=i[r];e[s.name]=s.apply(t,this[s.name],this,e)}return e}get tr(){return new b$(this)}static create(t){let e=new Hl(t.doc?t.doc.type.schema:t.schema,t.plugins),i=new pr(e);for(let r=0;r<e.fields.length;r++)i[e.fields[r].name]=e.fields[r].init(t,i);return i}reconfigure(t){let e=new Hl(this.schema,t.plugins),i=e.fields,r=new pr(e);for(let s=0;s<i.length;s++){let o=i[s].name;r[o]=this.hasOwnProperty(o)?this[o]:i[s].init(t,r)}return r}toJSON(t){let e={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(e.storedMarks=this.storedMarks.map(i=>i.toJSON())),t&&typeof t=="object")for(let i in t){if(i=="doc"||i=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let r=t[i],s=r.spec.state;s&&s.toJSON&&(e[i]=s.toJSON.call(r,this[r.key]))}return e}static fromJSON(t,e,i){if(!e)throw new RangeError("Invalid input for EditorState.fromJSON");if(!t.schema)throw new RangeError("Required config field 'schema' missing");let r=new Hl(t.schema,t.plugins),s=new pr(r);return r.fields.forEach(o=>{if(o.name=="doc")s.doc=Hi.fromJSON(t.schema,e.doc);else if(o.name=="selection")s.selection=$t.fromJSON(s.doc,e.selection);else if(o.name=="storedMarks")e.storedMarks&&(s.storedMarks=e.storedMarks.map(t.schema.markFromJSON));else{if(i)for(let a in i){let l=i[a],c=l.spec.state;if(l.key==o.name&&c&&c.fromJSON&&Object.prototype.hasOwnProperty.call(e,a)){s[o.name]=c.fromJSON.call(l,t,e[a],s);return}}s[o.name]=o.init(t,s)}}),s}}function S0(n,t,e){for(let i in n){let r=n[i];r instanceof Function?r=r.bind(t):i=="handleDOMEvents"&&(r=S0(r,t,{})),e[i]=r}return e}class je{constructor(t){this.spec=t,this.props={},t.props&&S0(t.props,this,this.props),this.key=t.key?t.key.key:k0("plugin")}getState(t){return t[this.key]}}const Ul=Object.create(null);function k0(n){return n in Ul?n+"$"+ ++Ul[n]:(Ul[n]=0,n+"$")}class gn{constructor(t="key"){this.key=k0(t)}get(t){return t.config.pluginsByKey[this.key]}getState(t){return t[this.key]}}const Qe=function(n){for(var t=0;;t++)if(n=n.previousSibling,!n)return t},Ds=function(n){let t=n.assignedSlot||n.parentNode;return t&&t.nodeType==11?t.host:t};let dd=null;const Dn=function(n,t,e){let i=dd||(dd=document.createRange());return i.setEnd(n,e??n.nodeValue.length),i.setStart(n,t||0),i},Yi=function(n,t,e,i){return e&&(pd(n,t,e,i,-1)||pd(n,t,e,i,1))},x$=/^(img|br|input|textarea|hr)$/i;function pd(n,t,e,i,r){for(;;){if(n==e&&t==i)return!0;if(t==(r<0?0:_n(n))){let s=n.parentNode;if(!s||s.nodeType!=1||_$(n)||x$.test(n.nodeName)||n.contentEditable=="false")return!1;t=Qe(n)+(r<0?0:1),n=s}else if(n.nodeType==1){if(n=n.childNodes[t+(r<0?-1:0)],n.contentEditable=="false")return!1;t=r<0?_n(n):0}else return!1}}function _n(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function w$(n,t,e){for(let i=t==0,r=t==_n(n);i||r;){if(n==e)return!0;let s=Qe(n);if(n=n.parentNode,!n)return!1;i=i&&s==0,r=r&&s==_n(n)}}function _$(n){let t;for(let e=n;e&&!(t=e.pmViewDesc);e=e.parentNode);return t&&t.node&&t.node.isBlock&&(t.dom==n||t.contentDOM==n)}const tl=function(n){return n.focusNode&&Yi(n.focusNode,n.focusOffset,n.anchorNode,n.anchorOffset)};function Di(n,t){let e=document.createEvent("Event");return e.initEvent("keydown",!0,!0),e.keyCode=n,e.key=e.code=t,e}function S$(n){let t=n.activeElement;for(;t&&t.shadowRoot;)t=t.shadowRoot.activeElement;return t}const mi=typeof navigator<"u"?navigator:null,gd=typeof document<"u"?document:null,Si=mi&&mi.userAgent||"",Uc=/Edge\/(\d+)/.exec(Si),M0=/MSIE \d/.exec(Si),qc=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Si),Ke=!!(M0||qc||Uc),oi=M0?document.documentMode:qc?+qc[1]:Uc?+Uc[1]:0,dn=!Ke&&/gecko\/(\d+)/i.test(Si);dn&&+(/Firefox\/(\d+)/.exec(Si)||[0,0])[1];const Wc=!Ke&&/Chrome\/(\d+)/.exec(Si),Le=!!Wc,k$=Wc?+Wc[1]:0,ze=!Ke&&!!mi&&/Apple Computer/.test(mi.vendor),Dr=ze&&(/Mobile\/\w+/.test(Si)||!!mi&&mi.maxTouchPoints>2),nn=Dr||(mi?/Mac/.test(mi.platform):!1),ln=/Android \d/.test(Si),el=!!gd&&"webkitFontSmoothing"in gd.documentElement.style,M$=el?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function C$(n){return{left:0,right:n.documentElement.clientWidth,top:0,bottom:n.documentElement.clientHeight}}function Wn(n,t){return typeof n=="number"?n:n[t]}function O$(n){let t=n.getBoundingClientRect(),e=t.width/n.offsetWidth||1,i=t.height/n.offsetHeight||1;return{left:t.left,right:t.left+n.clientWidth*e,top:t.top,bottom:t.top+n.clientHeight*i}}function md(n,t,e){let i=n.someProp("scrollThreshold")||0,r=n.someProp("scrollMargin")||5,s=n.dom.ownerDocument;for(let o=e||n.dom;o;o=Ds(o)){if(o.nodeType!=1)continue;let a=o,l=a==s.body,c=l?C$(s):O$(a),u=0,h=0;if(t.top<c.top+Wn(i,"top")?h=-(c.top-t.top+Wn(r,"top")):t.bottom>c.bottom-Wn(i,"bottom")&&(h=t.bottom-c.bottom+Wn(r,"bottom")),t.left<c.left+Wn(i,"left")?u=-(c.left-t.left+Wn(r,"left")):t.right>c.right-Wn(i,"right")&&(u=t.right-c.right+Wn(r,"right")),u||h)if(l)s.defaultView.scrollBy(u,h);else{let f=a.scrollLeft,d=a.scrollTop;h&&(a.scrollTop+=h),u&&(a.scrollLeft+=u);let g=a.scrollLeft-f,b=a.scrollTop-d;t={left:t.left-g,top:t.top-b,right:t.right-g,bottom:t.bottom-b}}if(l)break}}function A$(n){let t=n.dom.getBoundingClientRect(),e=Math.max(0,t.top),i,r;for(let s=(t.left+t.right)/2,o=e+1;o<Math.min(innerHeight,t.bottom);o+=5){let a=n.root.elementFromPoint(s,o);if(!a||a==n.dom||!n.dom.contains(a))continue;let l=a.getBoundingClientRect();if(l.top>=e-20){i=a,r=l.top;break}}return{refDOM:i,refTop:r,stack:C0(n.dom)}}function C0(n){let t=[],e=n.ownerDocument;for(let i=n;i&&(t.push({dom:i,top:i.scrollTop,left:i.scrollLeft}),n!=e);i=Ds(i));return t}function T$({refDOM:n,refTop:t,stack:e}){let i=n?n.getBoundingClientRect().top:0;O0(e,i==0?0:i-t)}function O0(n,t){for(let e=0;e<n.length;e++){let{dom:i,top:r,left:s}=n[e];i.scrollTop!=r+t&&(i.scrollTop=r+t),i.scrollLeft!=s&&(i.scrollLeft=s)}}let ar=null;function E$(n){if(n.setActive)return n.setActive();if(ar)return n.focus(ar);let t=C0(n);n.focus(ar==null?{get preventScroll(){return ar={preventScroll:!0},!0}}:void 0),ar||(ar=!1,O0(t,0))}function A0(n,t){let e,i=2e8,r,s=0,o=t.top,a=t.top;for(let l=n.firstChild,c=0;l;l=l.nextSibling,c++){let u;if(l.nodeType==1)u=l.getClientRects();else if(l.nodeType==3)u=Dn(l).getClientRects();else continue;for(let h=0;h<u.length;h++){let f=u[h];if(f.top<=o&&f.bottom>=a){o=Math.max(f.bottom,o),a=Math.min(f.top,a);let d=f.left>t.left?f.left-t.left:f.right<t.left?t.left-f.right:0;if(d<i){e=l,i=d,r=d&&e.nodeType==3?{left:f.right<t.left?f.right:f.left,top:t.top}:t,l.nodeType==1&&d&&(s=c+(t.left>=(f.left+f.right)/2?1:0));continue}}!e&&(t.left>=f.right&&t.top>=f.top||t.left>=f.left&&t.top>=f.bottom)&&(s=c+1)}}return e&&e.nodeType==3?$$(e,r):!e||i&&e.nodeType==1?{node:n,offset:s}:A0(e,r)}function $$(n,t){let e=n.nodeValue.length,i=document.createRange();for(let r=0;r<e;r++){i.setEnd(n,r+1),i.setStart(n,r);let s=Jn(i,1);if(s.top!=s.bottom&&Gu(t,s))return{node:n,offset:r+(t.left>=(s.left+s.right)/2?1:0)}}return{node:n,offset:0}}function Gu(n,t){return n.left>=t.left-1&&n.left<=t.right+1&&n.top>=t.top-1&&n.top<=t.bottom+1}function P$(n,t){let e=n.parentNode;return e&&/^li$/i.test(e.nodeName)&&t.left<n.getBoundingClientRect().left?e:n}function D$(n,t,e){let{node:i,offset:r}=A0(t,e),s=-1;if(i.nodeType==1&&!i.firstChild){let o=i.getBoundingClientRect();s=o.left!=o.right&&e.left>(o.left+o.right)/2?1:-1}return n.docView.posFromDOM(i,r,s)}function I$(n,t,e,i){let r=-1;for(let s=t,o=!1;s!=n.dom;){let a=n.docView.nearestDesc(s,!0);if(!a)return null;if(a.dom.nodeType==1&&(a.node.isBlock&&a.parent&&!o||!a.contentDOM)){let l=a.dom.getBoundingClientRect();if(a.node.isBlock&&a.parent&&!o&&(o=!0,l.left>i.left||l.top>i.top?r=a.posBefore:(l.right<i.left||l.bottom<i.top)&&(r=a.posAfter)),!a.contentDOM&&r<0)return(a.node.isBlock?i.top<(l.top+l.bottom)/2:i.left<(l.left+l.right)/2)?a.posBefore:a.posAfter}s=a.dom.parentNode}return r>-1?r:n.docView.posFromDOM(t,e,-1)}function T0(n,t,e){let i=n.childNodes.length;if(i&&e.top<e.bottom)for(let r=Math.max(0,Math.min(i-1,Math.floor(i*(t.top-e.top)/(e.bottom-e.top))-2)),s=r;;){let o=n.childNodes[s];if(o.nodeType==1){let a=o.getClientRects();for(let l=0;l<a.length;l++){let c=a[l];if(Gu(t,c))return T0(o,t,c)}}if((s=(s+1)%i)==r)break}return n}function N$(n,t){let e=n.dom.ownerDocument,i,r=0;if(e.caretPositionFromPoint)try{let l=e.caretPositionFromPoint(t.left,t.top);l&&({offsetNode:i,offset:r}=l)}catch{}if(!i&&e.caretRangeFromPoint){let l=e.caretRangeFromPoint(t.left,t.top);l&&({startContainer:i,startOffset:r}=l)}let s=(n.root.elementFromPoint?n.root:e).elementFromPoint(t.left,t.top),o;if(!s||!n.dom.contains(s.nodeType!=1?s.parentNode:s)){let l=n.dom.getBoundingClientRect();if(!Gu(t,l)||(s=T0(n.dom,t,l),!s))return null}if(ze)for(let l=s;i&&l;l=Ds(l))l.draggable&&(i=void 0);if(s=P$(s,t),i){if(dn&&i.nodeType==1&&(r=Math.min(r,i.childNodes.length),r<i.childNodes.length)){let l=i.childNodes[r],c;l.nodeName=="IMG"&&(c=l.getBoundingClientRect()).right<=t.left&&c.bottom>t.top&&r++}i==n.dom&&r==i.childNodes.length-1&&i.lastChild.nodeType==1&&t.top>i.lastChild.getBoundingClientRect().bottom?o=n.state.doc.content.size:(r==0||i.nodeType!=1||i.childNodes[r-1].nodeName!="BR")&&(o=I$(n,i,r,t))}o==null&&(o=D$(n,s,t));let a=n.docView.nearestDesc(s,!0);return{pos:o,inside:a?a.posAtStart-a.border:-1}}function Jn(n,t){let e=n.getClientRects();return e.length?e[t<0?0:e.length-1]:n.getBoundingClientRect()}const L$=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function E0(n,t,e){let{node:i,offset:r,atom:s}=n.docView.domFromPos(t,e<0?-1:1),o=el||dn;if(i.nodeType==3)if(o&&(L$.test(i.nodeValue)||(e<0?!r:r==i.nodeValue.length))){let l=Jn(Dn(i,r,r),e);if(dn&&r&&/\s/.test(i.nodeValue[r-1])&&r<i.nodeValue.length){let c=Jn(Dn(i,r-1,r-1),-1);if(c.top==l.top){let u=Jn(Dn(i,r,r+1),-1);if(u.top!=l.top)return ns(u,u.left<c.left)}}return l}else{let l=r,c=r,u=e<0?1:-1;return e<0&&!r?(c++,u=-1):e>=0&&r==i.nodeValue.length?(l--,u=1):e<0?l--:c++,ns(Jn(Dn(i,l,c),1),u<0)}if(!n.state.doc.resolve(t-(s||0)).parent.inlineContent){if(s==null&&r&&(e<0||r==_n(i))){let l=i.childNodes[r-1];if(l.nodeType==1)return ql(l.getBoundingClientRect(),!1)}if(s==null&&r<_n(i)){let l=i.childNodes[r];if(l.nodeType==1)return ql(l.getBoundingClientRect(),!0)}return ql(i.getBoundingClientRect(),e>=0)}if(s==null&&r&&(e<0||r==_n(i))){let l=i.childNodes[r-1],c=l.nodeType==3?Dn(l,_n(l)-(o?0:1)):l.nodeType==1&&(l.nodeName!="BR"||!l.nextSibling)?l:null;if(c)return ns(Jn(c,1),!1)}if(s==null&&r<_n(i)){let l=i.childNodes[r];for(;l.pmViewDesc&&l.pmViewDesc.ignoreForCoords;)l=l.nextSibling;let c=l?l.nodeType==3?Dn(l,0,o?0:1):l.nodeType==1?l:null:null;if(c)return ns(Jn(c,-1),!0)}return ns(Jn(i.nodeType==3?Dn(i):i,-e),e>=0)}function ns(n,t){if(n.width==0)return n;let e=t?n.left:n.right;return{top:n.top,bottom:n.bottom,left:e,right:e}}function ql(n,t){if(n.height==0)return n;let e=t?n.top:n.bottom;return{top:e,bottom:e,left:n.left,right:n.right}}function $0(n,t,e){let i=n.state,r=n.root.activeElement;i!=t&&n.updateState(t),r!=n.dom&&n.focus();try{return e()}finally{i!=t&&n.updateState(i),r!=n.dom&&r&&r.focus()}}function R$(n,t,e){let i=t.selection,r=e=="up"?i.$from:i.$to;return $0(n,t,()=>{let{node:s}=n.docView.domFromPos(r.pos,e=="up"?-1:1);for(;;){let a=n.docView.nearestDesc(s,!0);if(!a)break;if(a.node.isBlock){s=a.contentDOM||a.dom;break}s=a.dom.parentNode}let o=E0(n,r.pos,1);for(let a=s.firstChild;a;a=a.nextSibling){let l;if(a.nodeType==1)l=a.getClientRects();else if(a.nodeType==3)l=Dn(a,0,a.nodeValue.length).getClientRects();else continue;for(let c=0;c<l.length;c++){let u=l[c];if(u.bottom>u.top+1&&(e=="up"?o.top-u.top>(u.bottom-o.top)*2:u.bottom-o.bottom>(o.bottom-u.top)*2))return!1}}return!0})}const z$=/[\u0590-\u08ac]/;function B$(n,t,e){let{$head:i}=t.selection;if(!i.parent.isTextblock)return!1;let r=i.parentOffset,s=!r,o=r==i.parent.content.size,a=n.domSelection();return!z$.test(i.parent.textContent)||!a.modify?e=="left"||e=="backward"?s:o:$0(n,t,()=>{let{focusNode:l,focusOffset:c,anchorNode:u,anchorOffset:h}=n.domSelectionRange(),f=a.caretBidiLevel;a.modify("move",e,"character");let d=i.depth?n.docView.domAfterPos(i.before()):n.dom,{focusNode:g,focusOffset:b}=n.domSelectionRange(),k=g&&!d.contains(g.nodeType==1?g:g.parentNode)||l==g&&c==b;try{a.collapse(u,h),l&&(l!=u||c!=h)&&a.extend&&a.extend(l,c)}catch{}return f!=null&&(a.caretBidiLevel=f),k})}let yd=null,bd=null,vd=!1;function F$(n,t,e){return yd==t&&bd==e?vd:(yd=t,bd=e,vd=e=="up"||e=="down"?R$(n,t,e):B$(n,t,e))}const hn=0,xd=1,gr=2,Cn=3;class Gs{constructor(t,e,i,r){this.parent=t,this.children=e,this.dom=i,this.contentDOM=r,this.dirty=hn,i.pmViewDesc=this}matchesWidget(t){return!1}matchesMark(t){return!1}matchesNode(t,e,i){return!1}matchesHack(t){return!1}parseRule(){return null}stopEvent(t){return!1}get size(){let t=0;for(let e=0;e<this.children.length;e++)t+=this.children[e].size;return t}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let t=0;t<this.children.length;t++)this.children[t].destroy()}posBeforeChild(t){for(let e=0,i=this.posAtStart;;e++){let r=this.children[e];if(r==t)return i;i+=r.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(t,e,i){if(this.contentDOM&&this.contentDOM.contains(t.nodeType==1?t:t.parentNode))if(i<0){let s,o;if(t==this.contentDOM)s=t.childNodes[e-1];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;s=t.previousSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.previousSibling;return s?this.posBeforeChild(o)+o.size:this.posAtStart}else{let s,o;if(t==this.contentDOM)s=t.childNodes[e];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;s=t.nextSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.nextSibling;return s?this.posBeforeChild(o):this.posAtEnd}let r;if(t==this.dom&&this.contentDOM)r=e>Qe(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))r=t.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(e==0)for(let s=t;;s=s.parentNode){if(s==this.dom){r=!1;break}if(s.previousSibling)break}if(r==null&&e==t.childNodes.length)for(let s=t;;s=s.parentNode){if(s==this.dom){r=!0;break}if(s.nextSibling)break}}return r??i>0?this.posAtEnd:this.posAtStart}nearestDesc(t,e=!1){for(let i=!0,r=t;r;r=r.parentNode){let s=this.getDesc(r),o;if(s&&(!e||s.node))if(i&&(o=s.nodeDOM)&&!(o.nodeType==1?o.contains(t.nodeType==1?t:t.parentNode):o==t))i=!1;else return s}}getDesc(t){let e=t.pmViewDesc;for(let i=e;i;i=i.parent)if(i==this)return e}posFromDOM(t,e,i){for(let r=t;r;r=r.parentNode){let s=this.getDesc(r);if(s)return s.localPosFromDOM(t,e,i)}return-1}descAt(t){for(let e=0,i=0;e<this.children.length;e++){let r=this.children[e],s=i+r.size;if(i==t&&s!=i){for(;!r.border&&r.children.length;)r=r.children[0];return r}if(t<s)return r.descAt(t-i-r.border);i=s}}domFromPos(t,e){if(!this.contentDOM)return{node:this.dom,offset:0,atom:t+1};let i=0,r=0;for(let s=0;i<this.children.length;i++){let o=this.children[i],a=s+o.size;if(a>t||o instanceof D0){r=t-s;break}s=a}if(r)return this.children[i].domFromPos(r-this.children[i].border,e);for(let s;i&&!(s=this.children[i-1]).size&&s instanceof P0&&s.side>=0;i--);if(e<=0){let s,o=!0;for(;s=i?this.children[i-1]:null,!(!s||s.dom.parentNode==this.contentDOM);i--,o=!1);return s&&e&&o&&!s.border&&!s.domAtom?s.domFromPos(s.size,e):{node:this.contentDOM,offset:s?Qe(s.dom)+1:0}}else{let s,o=!0;for(;s=i<this.children.length?this.children[i]:null,!(!s||s.dom.parentNode==this.contentDOM);i++,o=!1);return s&&o&&!s.border&&!s.domAtom?s.domFromPos(0,e):{node:this.contentDOM,offset:s?Qe(s.dom):this.contentDOM.childNodes.length}}}parseRange(t,e,i=0){if(this.children.length==0)return{node:this.contentDOM,from:t,to:e,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let r=-1,s=-1;for(let o=i,a=0;;a++){let l=this.children[a],c=o+l.size;if(r==-1&&t<=c){let u=o+l.border;if(t>=u&&e<=c-l.border&&l.node&&l.contentDOM&&this.contentDOM.contains(l.contentDOM))return l.parseRange(t,e,u);t=o;for(let h=a;h>0;h--){let f=this.children[h-1];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(1)){r=Qe(f.dom)+1;break}t-=f.size}r==-1&&(r=0)}if(r>-1&&(c>e||a==this.children.length-1)){e=c;for(let u=a+1;u<this.children.length;u++){let h=this.children[u];if(h.size&&h.dom.parentNode==this.contentDOM&&!h.emptyChildAt(-1)){s=Qe(h.dom);break}e+=h.size}s==-1&&(s=this.contentDOM.childNodes.length);break}o=c}return{node:this.contentDOM,from:t,to:e,fromOffset:r,toOffset:s}}emptyChildAt(t){if(this.border||!this.contentDOM||!this.children.length)return!1;let e=this.children[t<0?0:this.children.length-1];return e.size==0||e.emptyChildAt(t)}domAfterPos(t){let{node:e,offset:i}=this.domFromPos(t,0);if(e.nodeType!=1||i==e.childNodes.length)throw new RangeError("No node after pos "+t);return e.childNodes[i]}setSelection(t,e,i,r=!1){let s=Math.min(t,e),o=Math.max(t,e);for(let f=0,d=0;f<this.children.length;f++){let g=this.children[f],b=d+g.size;if(s>d&&o<b)return g.setSelection(t-d-g.border,e-d-g.border,i,r);d=b}let a=this.domFromPos(t,t?-1:1),l=e==t?a:this.domFromPos(e,e?-1:1),c=i.getSelection(),u=!1;if((dn||ze)&&t==e){let{node:f,offset:d}=a;if(f.nodeType==3){if(u=!!(d&&f.nodeValue[d-1]==`
`),u&&d==f.nodeValue.length)for(let g=f,b;g;g=g.parentNode){if(b=g.nextSibling){b.nodeName=="BR"&&(a=l={node:b.parentNode,offset:Qe(b)+1});break}let k=g.pmViewDesc;if(k&&k.node&&k.node.isBlock)break}}else{let g=f.childNodes[d-1];u=g&&(g.nodeName=="BR"||g.contentEditable=="false")}}if(dn&&c.focusNode&&c.focusNode!=l.node&&c.focusNode.nodeType==1){let f=c.focusNode.childNodes[c.focusOffset];f&&f.contentEditable=="false"&&(r=!0)}if(!(r||u&&ze)&&Yi(a.node,a.offset,c.anchorNode,c.anchorOffset)&&Yi(l.node,l.offset,c.focusNode,c.focusOffset))return;let h=!1;if((c.extend||t==e)&&!u){c.collapse(a.node,a.offset);try{t!=e&&c.extend(l.node,l.offset),h=!0}catch{}}if(!h){if(t>e){let d=a;a=l,l=d}let f=document.createRange();f.setEnd(l.node,l.offset),f.setStart(a.node,a.offset),c.removeAllRanges(),c.addRange(f)}}ignoreMutation(t){return!this.contentDOM&&t.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(t,e){for(let i=0,r=0;r<this.children.length;r++){let s=this.children[r],o=i+s.size;if(i==o?t<=o&&e>=i:t<o&&e>i){let a=i+s.border,l=o-s.border;if(t>=a&&e<=l){this.dirty=t==i||e==o?gr:xd,t==a&&e==l&&(s.contentLost||s.dom.parentNode!=this.contentDOM)?s.dirty=Cn:s.markDirty(t-a,e-a);return}else s.dirty=s.dom==s.contentDOM&&s.dom.parentNode==this.contentDOM&&!s.children.length?gr:Cn}i=o}this.dirty=gr}markParentsDirty(){let t=1;for(let e=this.parent;e;e=e.parent,t++){let i=t==1?gr:xd;e.dirty<i&&(e.dirty=i)}}get domAtom(){return!1}get ignoreForCoords(){return!1}}class P0 extends Gs{constructor(t,e,i,r){let s,o=e.type.toDOM;if(typeof o=="function"&&(o=o(i,()=>{if(!s)return r;if(s.parent)return s.parent.posBeforeChild(s)})),!e.type.spec.raw){if(o.nodeType!=1){let a=document.createElement("span");a.appendChild(o),o=a}o.contentEditable="false",o.classList.add("ProseMirror-widget")}super(t,[],o,null),this.widget=e,this.widget=e,s=this}matchesWidget(t){return this.dirty==hn&&t.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(t){let e=this.widget.spec.stopEvent;return e?e(t):!1}ignoreMutation(t){return t.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class j$ extends Gs{constructor(t,e,i,r){super(t,[],e,null),this.textDOM=i,this.text=r}get size(){return this.text.length}localPosFromDOM(t,e){return t!=this.textDOM?this.posAtStart+(e?this.size:0):this.posAtStart+e}domFromPos(t){return{node:this.textDOM,offset:t}}ignoreMutation(t){return t.type==="characterData"&&t.target.nodeValue==t.oldValue}}class Xi extends Gs{constructor(t,e,i,r){super(t,[],i,r),this.mark=e}static create(t,e,i,r){let s=r.nodeViews[e.type.name],o=s&&s(e,r,i);return(!o||!o.dom)&&(o=Sn.renderSpec(document,e.type.spec.toDOM(e,i))),new Xi(t,e,o.dom,o.contentDOM||o.dom)}parseRule(){return this.dirty&Cn||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM||void 0}}matchesMark(t){return this.dirty!=Cn&&this.mark.eq(t)}markDirty(t,e){if(super.markDirty(t,e),this.dirty!=hn){let i=this.parent;for(;!i.node;)i=i.parent;i.dirty<this.dirty&&(i.dirty=this.dirty),this.dirty=hn}}slice(t,e,i){let r=Xi.create(this.parent,this.mark,!0,i),s=this.children,o=this.size;e<o&&(s=Gc(s,e,o,i)),t>0&&(s=Gc(s,0,t,i));for(let a=0;a<s.length;a++)s[a].parent=r;return r.children=s,r}}class Qi extends Gs{constructor(t,e,i,r,s,o,a,l,c){super(t,[],s,o),this.node=e,this.outerDeco=i,this.innerDeco=r,this.nodeDOM=a,o&&this.updateChildren(l,c)}static create(t,e,i,r,s,o){let a=s.nodeViews[e.type.name],l,c=a&&a(e,s,()=>{if(!l)return o;if(l.parent)return l.parent.posBeforeChild(l)},i,r),u=c&&c.dom,h=c&&c.contentDOM;if(e.isText){if(!u)u=document.createTextNode(e.text);else if(u.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else u||({dom:u,contentDOM:h}=Sn.renderSpec(document,e.type.spec.toDOM(e)));!h&&!e.isText&&u.nodeName!="BR"&&(u.hasAttribute("contenteditable")||(u.contentEditable="false"),e.type.spec.draggable&&(u.draggable=!0));let f=u;return u=L0(u,i,e),c?l=new V$(t,e,i,r,u,h||null,f,c,s,o+1):e.isText?new nl(t,e,i,r,u,f,s):new Qi(t,e,i,r,u,h||null,f,s,o+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let t={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(t.preserveWhitespace="full"),!this.contentDOM)t.getContent=()=>this.node.content;else if(!this.contentLost)t.contentElement=this.contentDOM;else{for(let e=this.children.length-1;e>=0;e--){let i=this.children[e];if(this.dom.contains(i.dom.parentNode)){t.contentElement=i.dom.parentNode;break}}t.contentElement||(t.getContent=()=>et.empty)}return t}matchesNode(t,e,i){return this.dirty==hn&&t.eq(this.node)&&Jc(e,this.outerDeco)&&i.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(t,e){let i=this.node.inlineContent,r=e,s=t.composing?this.localCompositionInfo(t,e):null,o=s&&s.pos>-1?s:null,a=s&&s.pos<0,l=new U$(this,o&&o.node,t);K$(this.node,this.innerDeco,(c,u,h)=>{c.spec.marks?l.syncToMarks(c.spec.marks,i,t):c.type.side>=0&&!h&&l.syncToMarks(u==this.node.childCount?Ut.none:this.node.child(u).marks,i,t),l.placeWidget(c,t,r)},(c,u,h,f)=>{l.syncToMarks(c.marks,i,t);let d;l.findNodeMatch(c,u,h,f)||a&&t.state.selection.from>r&&t.state.selection.to<r+c.nodeSize&&(d=l.findIndexWithChild(s.node))>-1&&l.updateNodeAt(c,u,h,d,t)||l.updateNextNode(c,u,h,t,f)||l.addNode(c,u,h,t,r),r+=c.nodeSize}),l.syncToMarks([],i,t),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||this.dirty==gr)&&(o&&this.protectLocalComposition(t,o),I0(this.contentDOM,this.children,t),Dr&&J$(this.dom))}localCompositionInfo(t,e){let{from:i,to:r}=t.state.selection;if(!(t.state.selection instanceof Pt)||i<e||r>e+this.node.content.size)return null;let s=t.domSelectionRange(),o=G$(s.focusNode,s.focusOffset);if(!o||!this.dom.contains(o.parentNode))return null;if(this.node.inlineContent){let a=o.nodeValue,l=Y$(this.node.content,a,i-e,r-e);return l<0?null:{node:o,pos:l,text:a}}else return{node:o,pos:-1,text:""}}protectLocalComposition(t,{node:e,pos:i,text:r}){if(this.getDesc(e))return;let s=e;for(;s.parentNode!=this.contentDOM;s=s.parentNode){for(;s.previousSibling;)s.parentNode.removeChild(s.previousSibling);for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling);s.pmViewDesc&&(s.pmViewDesc=void 0)}let o=new j$(this,s,e,r);t.input.compositionNodes.push(o),this.children=Gc(this.children,i,i+r.length,t,o)}update(t,e,i,r){return this.dirty==Cn||!t.sameMarkup(this.node)?!1:(this.updateInner(t,e,i,r),!0)}updateInner(t,e,i,r){this.updateOuterDeco(e),this.node=t,this.innerDeco=i,this.contentDOM&&this.updateChildren(r,this.posAtStart),this.dirty=hn}updateOuterDeco(t){if(Jc(t,this.outerDeco))return;let e=this.nodeDOM.nodeType!=1,i=this.dom;this.dom=N0(this.dom,this.nodeDOM,Kc(this.outerDeco,this.node,e),Kc(t,this.node,e)),this.dom!=i&&(i.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=t}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable")}get domAtom(){return this.node.isAtom}}function wd(n,t,e,i,r){return L0(i,t,n),new Qi(void 0,n,t,e,i,i,i,r,0)}class nl extends Qi{constructor(t,e,i,r,s,o,a){super(t,e,i,r,s,null,o,a,0)}parseRule(){let t=this.nodeDOM.parentNode;for(;t&&t!=this.dom&&!t.pmIsDeco;)t=t.parentNode;return{skip:t||!0}}update(t,e,i,r){return this.dirty==Cn||this.dirty!=hn&&!this.inParent()||!t.sameMarkup(this.node)?!1:(this.updateOuterDeco(e),(this.dirty!=hn||t.text!=this.node.text)&&t.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=t.text,r.trackWrites==this.nodeDOM&&(r.trackWrites=null)),this.node=t,this.dirty=hn,!0)}inParent(){let t=this.parent.contentDOM;for(let e=this.nodeDOM;e;e=e.parentNode)if(e==t)return!0;return!1}domFromPos(t){return{node:this.nodeDOM,offset:t}}localPosFromDOM(t,e,i){return t==this.nodeDOM?this.posAtStart+Math.min(e,this.node.text.length):super.localPosFromDOM(t,e,i)}ignoreMutation(t){return t.type!="characterData"&&t.type!="selection"}slice(t,e,i){let r=this.node.cut(t,e),s=document.createTextNode(r.text);return new nl(this.parent,r,this.outerDeco,this.innerDeco,s,s,i)}markDirty(t,e){super.markDirty(t,e),this.dom!=this.nodeDOM&&(t==0||e==this.nodeDOM.nodeValue.length)&&(this.dirty=Cn)}get domAtom(){return!1}}class D0 extends Gs{parseRule(){return{ignore:!0}}matchesHack(t){return this.dirty==hn&&this.dom.nodeName==t}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class V$ extends Qi{constructor(t,e,i,r,s,o,a,l,c,u){super(t,e,i,r,s,o,a,c,u),this.spec=l}update(t,e,i,r){if(this.dirty==Cn)return!1;if(this.spec.update){let s=this.spec.update(t,e,i);return s&&this.updateInner(t,e,i,r),s}else return!this.contentDOM&&!t.isLeaf?!1:super.update(t,e,i,r)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(t,e,i,r){this.spec.setSelection?this.spec.setSelection(t,e,i):super.setSelection(t,e,i,r)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(t){return this.spec.stopEvent?this.spec.stopEvent(t):!1}ignoreMutation(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):super.ignoreMutation(t)}}function I0(n,t,e){let i=n.firstChild,r=!1;for(let s=0;s<t.length;s++){let o=t[s],a=o.dom;if(a.parentNode==n){for(;a!=i;)i=_d(i),r=!0;i=i.nextSibling}else r=!0,n.insertBefore(a,i);if(o instanceof Xi){let l=i?i.previousSibling:n.lastChild;I0(o.contentDOM,o.children,e),i=l?l.nextSibling:n.firstChild}}for(;i;)i=_d(i),r=!0;r&&e.trackWrites==n&&(e.trackWrites=null)}const xs=function(n){n&&(this.nodeName=n)};xs.prototype=Object.create(null);const Ri=[new xs];function Kc(n,t,e){if(n.length==0)return Ri;let i=e?Ri[0]:new xs,r=[i];for(let s=0;s<n.length;s++){let o=n[s].type.attrs;if(o){o.nodeName&&r.push(i=new xs(o.nodeName));for(let a in o){let l=o[a];l!=null&&(e&&r.length==1&&r.push(i=new xs(t.isInline?"span":"div")),a=="class"?i.class=(i.class?i.class+" ":"")+l:a=="style"?i.style=(i.style?i.style+";":"")+l:a!="nodeName"&&(i[a]=l))}}}return r}function N0(n,t,e,i){if(e==Ri&&i==Ri)return t;let r=t;for(let s=0;s<i.length;s++){let o=i[s],a=e[s];if(s){let l;a&&a.nodeName==o.nodeName&&r!=n&&(l=r.parentNode)&&l.nodeName.toLowerCase()==o.nodeName||(l=document.createElement(o.nodeName),l.pmIsDeco=!0,l.appendChild(r),a=Ri[0]),r=l}H$(r,a||Ri[0],o)}return r}function H$(n,t,e){for(let i in t)i!="class"&&i!="style"&&i!="nodeName"&&!(i in e)&&n.removeAttribute(i);for(let i in e)i!="class"&&i!="style"&&i!="nodeName"&&e[i]!=t[i]&&n.setAttribute(i,e[i]);if(t.class!=e.class){let i=t.class?t.class.split(" ").filter(Boolean):[],r=e.class?e.class.split(" ").filter(Boolean):[];for(let s=0;s<i.length;s++)r.indexOf(i[s])==-1&&n.classList.remove(i[s]);for(let s=0;s<r.length;s++)i.indexOf(r[s])==-1&&n.classList.add(r[s]);n.classList.length==0&&n.removeAttribute("class")}if(t.style!=e.style){if(t.style){let i=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,r;for(;r=i.exec(t.style);)n.style.removeProperty(r[1])}e.style&&(n.style.cssText+=e.style)}}function L0(n,t,e){return N0(n,n,Ri,Kc(t,e,n.nodeType!=1))}function Jc(n,t){if(n.length!=t.length)return!1;for(let e=0;e<n.length;e++)if(!n[e].type.eq(t[e].type))return!1;return!0}function _d(n){let t=n.nextSibling;return n.parentNode.removeChild(n),t}class U${constructor(t,e,i){this.lock=e,this.view=i,this.index=0,this.stack=[],this.changed=!1,this.top=t,this.preMatch=q$(t.node.content,t)}destroyBetween(t,e){if(t!=e){for(let i=t;i<e;i++)this.top.children[i].destroy();this.top.children.splice(t,e-t),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(t,e,i){let r=0,s=this.stack.length>>1,o=Math.min(s,t.length);for(;r<o&&(r==s-1?this.top:this.stack[r+1<<1]).matchesMark(t[r])&&t[r].type.spec.spanning!==!1;)r++;for(;r<s;)this.destroyRest(),this.top.dirty=hn,this.index=this.stack.pop(),this.top=this.stack.pop(),s--;for(;s<t.length;){this.stack.push(this.top,this.index+1);let a=-1;for(let l=this.index;l<Math.min(this.index+3,this.top.children.length);l++){let c=this.top.children[l];if(c.matchesMark(t[s])&&!this.isLocked(c.dom)){a=l;break}}if(a>-1)a>this.index&&(this.changed=!0,this.destroyBetween(this.index,a)),this.top=this.top.children[this.index];else{let l=Xi.create(this.top,t[s],e,i);this.top.children.splice(this.index,0,l),this.top=l,this.changed=!0}this.index=0,s++}}findNodeMatch(t,e,i,r){let s=-1,o;if(r>=this.preMatch.index&&(o=this.preMatch.matches[r-this.preMatch.index]).parent==this.top&&o.matchesNode(t,e,i))s=this.top.children.indexOf(o,this.index);else for(let a=this.index,l=Math.min(this.top.children.length,a+5);a<l;a++){let c=this.top.children[a];if(c.matchesNode(t,e,i)&&!this.preMatch.matched.has(c)){s=a;break}}return s<0?!1:(this.destroyBetween(this.index,s),this.index++,!0)}updateNodeAt(t,e,i,r,s){let o=this.top.children[r];return o.dirty==Cn&&o.dom==o.contentDOM&&(o.dirty=gr),o.update(t,e,i,s)?(this.destroyBetween(this.index,r),this.index++,!0):!1}findIndexWithChild(t){for(;;){let e=t.parentNode;if(!e)return-1;if(e==this.top.contentDOM){let i=t.pmViewDesc;if(i){for(let r=this.index;r<this.top.children.length;r++)if(this.top.children[r]==i)return r}return-1}t=e}}updateNextNode(t,e,i,r,s){for(let o=this.index;o<this.top.children.length;o++){let a=this.top.children[o];if(a instanceof Qi){let l=this.preMatch.matched.get(a);if(l!=null&&l!=s)return!1;let c=a.dom;if(!(this.isLocked(c)&&!(t.isText&&a.node&&a.node.isText&&a.nodeDOM.nodeValue==t.text&&a.dirty!=Cn&&Jc(e,a.outerDeco)))&&a.update(t,e,i,r))return this.destroyBetween(this.index,o),a.dom!=c&&(this.changed=!0),this.index++,!0;break}}return!1}addNode(t,e,i,r,s){this.top.children.splice(this.index++,0,Qi.create(this.top,t,e,i,r,s)),this.changed=!0}placeWidget(t,e,i){let r=this.index<this.top.children.length?this.top.children[this.index]:null;if(r&&r.matchesWidget(t)&&(t==r.widget||!r.widget.type.toDOM.parentNode))this.index++;else{let s=new P0(this.top,t,e,i);this.top.children.splice(this.index++,0,s),this.changed=!0}}addTextblockHacks(){let t=this.top.children[this.index-1],e=this.top;for(;t instanceof Xi;)e=t,t=e.children[e.children.length-1];(!t||!(t instanceof nl)||/\n$/.test(t.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(t.node.text))&&((ze||Le)&&t&&t.dom.contentEditable=="false"&&this.addHackNode("IMG",e),this.addHackNode("BR",this.top))}addHackNode(t,e){if(e==this.top&&this.index<e.children.length&&e.children[this.index].matchesHack(t))this.index++;else{let i=document.createElement(t);t=="IMG"&&(i.className="ProseMirror-separator",i.alt=""),t=="BR"&&(i.className="ProseMirror-trailingBreak");let r=new D0(this.top,[],i,null);e!=this.top?e.children.push(r):e.children.splice(this.index++,0,r),this.changed=!0}}isLocked(t){return this.lock&&(t==this.lock||t.nodeType==1&&t.contains(this.lock.parentNode))}}function q$(n,t){let e=t,i=e.children.length,r=n.childCount,s=new Map,o=[];t:for(;r>0;){let a;for(;;)if(i){let c=e.children[i-1];if(c instanceof Xi)e=c,i=c.children.length;else{a=c,i--;break}}else{if(e==t)break t;i=e.parent.children.indexOf(e),e=e.parent}let l=a.node;if(l){if(l!=n.child(r-1))break;--r,s.set(a,r),o.push(a)}}return{index:r,matched:s,matches:o.reverse()}}function W$(n,t){return n.type.side-t.type.side}function K$(n,t,e,i){let r=t.locals(n),s=0;if(r.length==0){for(let c=0;c<n.childCount;c++){let u=n.child(c);i(u,r,t.forChild(s,u),c),s+=u.nodeSize}return}let o=0,a=[],l=null;for(let c=0;;){if(o<r.length&&r[o].to==s){let g=r[o++],b;for(;o<r.length&&r[o].to==s;)(b||(b=[g])).push(r[o++]);if(b){b.sort(W$);for(let k=0;k<b.length;k++)e(b[k],c,!!l)}else e(g,c,!!l)}let u,h;if(l)h=-1,u=l,l=null;else if(c<n.childCount)h=c,u=n.child(c++);else break;for(let g=0;g<a.length;g++)a[g].to<=s&&a.splice(g--,1);for(;o<r.length&&r[o].from<=s&&r[o].to>s;)a.push(r[o++]);let f=s+u.nodeSize;if(u.isText){let g=f;o<r.length&&r[o].from<g&&(g=r[o].from);for(let b=0;b<a.length;b++)a[b].to<g&&(g=a[b].to);g<f&&(l=u.cut(g-s),u=u.cut(0,g-s),f=g,h=-1)}let d=u.isInline&&!u.isLeaf?a.filter(g=>!g.inline):a.slice();i(u,d,t.forChild(s,u),h),s=f}}function J$(n){if(n.nodeName=="UL"||n.nodeName=="OL"){let t=n.style.cssText;n.style.cssText=t+"; list-style: square !important",window.getComputedStyle(n).listStyle,n.style.cssText=t}}function G$(n,t){for(;;){if(n.nodeType==3)return n;if(n.nodeType==1&&t>0){if(n.childNodes.length>t&&n.childNodes[t].nodeType==3)return n.childNodes[t];n=n.childNodes[t-1],t=_n(n)}else if(n.nodeType==1&&t<n.childNodes.length)n=n.childNodes[t],t=0;else return null}}function Y$(n,t,e,i){for(let r=0,s=0;r<n.childCount&&s<=i;){let o=n.child(r++),a=s;if(s+=o.nodeSize,!o.isText)continue;let l=o.text;for(;r<n.childCount;){let c=n.child(r++);if(s+=c.nodeSize,!c.isText)break;l+=c.text}if(s>=e){let c=a<i?l.lastIndexOf(t,i-a-1):-1;if(c>=0&&c+t.length+a>=e)return a+c;if(e==i&&l.length>=i+t.length-a&&l.slice(i-a,i-a+t.length)==t)return i}}return-1}function Gc(n,t,e,i,r){let s=[];for(let o=0,a=0;o<n.length;o++){let l=n[o],c=a,u=a+=l.size;c>=e||u<=t?s.push(l):(c<t&&s.push(l.slice(0,t-c,i)),r&&(s.push(r),r=void 0),u>e&&s.push(l.slice(e-c,l.size,i)))}return s}function Yu(n,t=null){let e=n.domSelectionRange(),i=n.state.doc;if(!e.focusNode)return null;let r=n.docView.nearestDesc(e.focusNode),s=r&&r.size==0,o=n.docView.posFromDOM(e.focusNode,e.focusOffset,1);if(o<0)return null;let a=i.resolve(o),l,c;if(tl(e)){for(l=a;r&&!r.node;)r=r.parent;let u=r.node;if(r&&u.isAtom&&Mt.isSelectable(u)&&r.parent&&!(u.isInline&&w$(e.focusNode,e.focusOffset,r.dom))){let h=r.posBefore;c=new Mt(o==h?a:i.resolve(h))}}else{let u=n.docView.posFromDOM(e.anchorNode,e.anchorOffset,1);if(u<0)return null;l=i.resolve(u)}if(!c){let u=t=="pointer"||n.state.selection.head<a.pos&&!s?1:-1;c=Xu(n,l,a,u)}return c}function R0(n){return n.editable?n.hasFocus():B0(n)&&document.activeElement&&document.activeElement.contains(n.dom)}function Fn(n,t=!1){let e=n.state.selection;if(z0(n,e),!!R0(n)){if(!t&&n.input.mouseDown&&n.input.mouseDown.allowDefault&&Le){let i=n.domSelectionRange(),r=n.domObserver.currentSelection;if(i.anchorNode&&r.anchorNode&&Yi(i.anchorNode,i.anchorOffset,r.anchorNode,r.anchorOffset)){n.input.mouseDown.delayedSelectionSync=!0,n.domObserver.setCurSelection();return}}if(n.domObserver.disconnectSelection(),n.cursorWrapper)Q$(n);else{let{anchor:i,head:r}=e,s,o;Sd&&!(e instanceof Pt)&&(e.$from.parent.inlineContent||(s=kd(n,e.from)),!e.empty&&!e.$from.parent.inlineContent&&(o=kd(n,e.to))),n.docView.setSelection(i,r,n.root,t),Sd&&(s&&Md(s),o&&Md(o)),e.visible?n.dom.classList.remove("ProseMirror-hideselection"):(n.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&X$(n))}n.domObserver.setCurSelection(),n.domObserver.connectSelection()}}const Sd=ze||Le&&k$<63;function kd(n,t){let{node:e,offset:i}=n.docView.domFromPos(t,0),r=i<e.childNodes.length?e.childNodes[i]:null,s=i?e.childNodes[i-1]:null;if(ze&&r&&r.contentEditable=="false")return Wl(r);if((!r||r.contentEditable=="false")&&(!s||s.contentEditable=="false")){if(r)return Wl(r);if(s)return Wl(s)}}function Wl(n){return n.contentEditable="true",ze&&n.draggable&&(n.draggable=!1,n.wasDraggable=!0),n}function Md(n){n.contentEditable="false",n.wasDraggable&&(n.draggable=!0,n.wasDraggable=null)}function X$(n){let t=n.dom.ownerDocument;t.removeEventListener("selectionchange",n.input.hideSelectionGuard);let e=n.domSelectionRange(),i=e.anchorNode,r=e.anchorOffset;t.addEventListener("selectionchange",n.input.hideSelectionGuard=()=>{(e.anchorNode!=i||e.anchorOffset!=r)&&(t.removeEventListener("selectionchange",n.input.hideSelectionGuard),setTimeout(()=>{(!R0(n)||n.state.selection.visible)&&n.dom.classList.remove("ProseMirror-hideselection")},20))})}function Q$(n){let t=n.domSelection(),e=document.createRange(),i=n.cursorWrapper.dom,r=i.nodeName=="IMG";r?e.setEnd(i.parentNode,Qe(i)+1):e.setEnd(i,0),e.collapse(!1),t.removeAllRanges(),t.addRange(e),!r&&!n.state.selection.visible&&Ke&&oi<=11&&(i.disabled=!0,i.disabled=!1)}function z0(n,t){if(t instanceof Mt){let e=n.docView.descAt(t.from);e!=n.lastSelectedViewDesc&&(Cd(n),e&&e.selectNode(),n.lastSelectedViewDesc=e)}else Cd(n)}function Cd(n){n.lastSelectedViewDesc&&(n.lastSelectedViewDesc.parent&&n.lastSelectedViewDesc.deselectNode(),n.lastSelectedViewDesc=void 0)}function Xu(n,t,e,i){return n.someProp("createSelectionBetween",r=>r(n,t,e))||Pt.between(t,e,i)}function Od(n){return n.editable&&!n.hasFocus()?!1:B0(n)}function B0(n){let t=n.domSelectionRange();if(!t.anchorNode)return!1;try{return n.dom.contains(t.anchorNode.nodeType==3?t.anchorNode.parentNode:t.anchorNode)&&(n.editable||n.dom.contains(t.focusNode.nodeType==3?t.focusNode.parentNode:t.focusNode))}catch{return!1}}function Z$(n){let t=n.docView.domFromPos(n.state.selection.anchor,0),e=n.domSelectionRange();return Yi(t.node,t.offset,e.anchorNode,e.anchorOffset)}function Yc(n,t){let{$anchor:e,$head:i}=n.selection,r=t>0?e.max(i):e.min(i),s=r.parent.inlineContent?r.depth?n.doc.resolve(t>0?r.after():r.before()):null:r;return s&&$t.findFrom(s,t)}function Ii(n,t){return n.dispatch(n.state.tr.setSelection(t).scrollIntoView()),!0}function Ad(n,t,e){let i=n.state.selection;if(i instanceof Pt){if(!i.empty||e.indexOf("s")>-1)return!1;if(n.endOfTextblock(t>0?"right":"left")){let r=Yc(n.state,t);return r&&r instanceof Mt?Ii(n,r):!1}else if(!(nn&&e.indexOf("m")>-1)){let r=i.$head,s=r.textOffset?null:t<0?r.nodeBefore:r.nodeAfter,o;if(!s||s.isText)return!1;let a=t<0?r.pos-s.nodeSize:r.pos;return s.isAtom||(o=n.docView.descAt(a))&&!o.contentDOM?Mt.isSelectable(s)?Ii(n,new Mt(t<0?n.state.doc.resolve(r.pos-s.nodeSize):r)):el?Ii(n,new Pt(n.state.doc.resolve(t<0?a:a+s.nodeSize))):!1:!1}}else{if(i instanceof Mt&&i.node.isInline)return Ii(n,new Pt(t>0?i.$to:i.$from));{let r=Yc(n.state,t);return r?Ii(n,r):!1}}}function na(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function ws(n){let t=n.pmViewDesc;return t&&t.size==0&&(n.nextSibling||n.nodeName!="BR")}function Kl(n){let t=n.domSelectionRange(),e=t.focusNode,i=t.focusOffset;if(!e)return;let r,s,o=!1;for(dn&&e.nodeType==1&&i<na(e)&&ws(e.childNodes[i])&&(o=!0);;)if(i>0){if(e.nodeType!=1)break;{let a=e.childNodes[i-1];if(ws(a))r=e,s=--i;else if(a.nodeType==3)e=a,i=e.nodeValue.length;else break}}else{if(F0(e))break;{let a=e.previousSibling;for(;a&&ws(a);)r=e.parentNode,s=Qe(a),a=a.previousSibling;if(a)e=a,i=na(e);else{if(e=e.parentNode,e==n.dom)break;i=0}}}o?Xc(n,e,i):r&&Xc(n,r,s)}function Jl(n){let t=n.domSelectionRange(),e=t.focusNode,i=t.focusOffset;if(!e)return;let r=na(e),s,o;for(;;)if(i<r){if(e.nodeType!=1)break;let a=e.childNodes[i];if(ws(a))s=e,o=++i;else break}else{if(F0(e))break;{let a=e.nextSibling;for(;a&&ws(a);)s=a.parentNode,o=Qe(a)+1,a=a.nextSibling;if(a)e=a,i=0,r=na(e);else{if(e=e.parentNode,e==n.dom)break;i=r=0}}}s&&Xc(n,s,o)}function F0(n){let t=n.pmViewDesc;return t&&t.node&&t.node.isBlock}function Xc(n,t,e){let i=n.domSelection();if(tl(i)){let s=document.createRange();s.setEnd(t,e),s.setStart(t,e),i.removeAllRanges(),i.addRange(s)}else i.extend&&i.extend(t,e);n.domObserver.setCurSelection();let{state:r}=n;setTimeout(()=>{n.state==r&&Fn(n)},50)}function Td(n,t,e){let i=n.state.selection;if(i instanceof Pt&&!i.empty||e.indexOf("s")>-1||nn&&e.indexOf("m")>-1)return!1;let{$from:r,$to:s}=i;if(!r.parent.inlineContent||n.endOfTextblock(t<0?"up":"down")){let o=Yc(n.state,t);if(o&&o instanceof Mt)return Ii(n,o)}if(!r.parent.inlineContent){let o=t<0?r:s,a=i instanceof un?$t.near(o,t):$t.findFrom(o,t);return a?Ii(n,a):!1}return!1}function Ed(n,t){if(!(n.state.selection instanceof Pt))return!0;let{$head:e,$anchor:i,empty:r}=n.state.selection;if(!e.sameParent(i))return!0;if(!r)return!1;if(n.endOfTextblock(t>0?"forward":"backward"))return!0;let s=!e.textOffset&&(t<0?e.nodeBefore:e.nodeAfter);if(s&&!s.isText){let o=n.state.tr;return t<0?o.delete(e.pos-s.nodeSize,e.pos):o.delete(e.pos,e.pos+s.nodeSize),n.dispatch(o),!0}return!1}function $d(n,t,e){n.domObserver.stop(),t.contentEditable=e,n.domObserver.start()}function tP(n){if(!ze||n.state.selection.$head.parentOffset>0)return!1;let{focusNode:t,focusOffset:e}=n.domSelectionRange();if(t&&t.nodeType==1&&e==0&&t.firstChild&&t.firstChild.contentEditable=="false"){let i=t.firstChild;$d(n,i,"true"),setTimeout(()=>$d(n,i,"false"),20)}return!1}function eP(n){let t="";return n.ctrlKey&&(t+="c"),n.metaKey&&(t+="m"),n.altKey&&(t+="a"),n.shiftKey&&(t+="s"),t}function nP(n,t){let e=t.keyCode,i=eP(t);return e==8||nn&&e==72&&i=="c"?Ed(n,-1)||Kl(n):e==46||nn&&e==68&&i=="c"?Ed(n,1)||Jl(n):e==13||e==27?!0:e==37||nn&&e==66&&i=="c"?Ad(n,-1,i)||Kl(n):e==39||nn&&e==70&&i=="c"?Ad(n,1,i)||Jl(n):e==38||nn&&e==80&&i=="c"?Td(n,-1,i)||Kl(n):e==40||nn&&e==78&&i=="c"?tP(n)||Td(n,1,i)||Jl(n):i==(nn?"m":"c")&&(e==66||e==73||e==89||e==90)}function j0(n,t){n.someProp("transformCopied",d=>{t=d(t,n)});let e=[],{content:i,openStart:r,openEnd:s}=t;for(;r>1&&s>1&&i.childCount==1&&i.firstChild.childCount==1;){r--,s--;let d=i.firstChild;e.push(d.type.name,d.attrs!=d.type.defaultAttrs?d.attrs:null),i=d.content}let o=n.someProp("clipboardSerializer")||Sn.fromSchema(n.state.schema),a=K0(),l=a.createElement("div");l.appendChild(o.serializeFragment(i,{document:a}));let c=l.firstChild,u,h=0;for(;c&&c.nodeType==1&&(u=W0[c.nodeName.toLowerCase()]);){for(let d=u.length-1;d>=0;d--){let g=a.createElement(u[d]);for(;l.firstChild;)g.appendChild(l.firstChild);l.appendChild(g),h++}c=l.firstChild}c&&c.nodeType==1&&c.setAttribute("data-pm-slice",`${r} ${s}${h?` -${h}`:""} ${JSON.stringify(e)}`);let f=n.someProp("clipboardTextSerializer",d=>d(t,n))||t.content.textBetween(0,t.content.size,`

`);return{dom:l,text:f}}function V0(n,t,e,i,r){let s=r.parent.type.spec.code,o,a;if(!e&&!t)return null;let l=t&&(i||s||!e);if(l){if(n.someProp("transformPastedText",f=>{t=f(t,s||i,n)}),s)return t?new ht(et.from(n.state.schema.text(t.replace(/\r\n?/g,`
`))),0,0):ht.empty;let h=n.someProp("clipboardTextParser",f=>f(t,r,i,n));if(h)a=h;else{let f=r.marks(),{schema:d}=n.state,g=Sn.fromSchema(d);o=document.createElement("div"),t.split(/(?:\r\n?|\n)+/).forEach(b=>{let k=o.appendChild(document.createElement("p"));b&&k.appendChild(g.serializeNode(d.text(b,f)))})}}else n.someProp("transformPastedHTML",h=>{e=h(e,n)}),o=sP(e),el&&oP(o);let c=o&&o.querySelector("[data-pm-slice]"),u=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(u&&u[3])for(let h=+u[3];h>0;h--){let f=o.firstChild;for(;f&&f.nodeType!=1;)f=f.nextSibling;if(!f)break;o=f}if(a||(a=(n.someProp("clipboardParser")||n.someProp("domParser")||Er.fromSchema(n.state.schema)).parseSlice(o,{preserveWhitespace:!!(l||u),context:r,ruleFromNode(f){return f.nodeName=="BR"&&!f.nextSibling&&f.parentNode&&!iP.test(f.parentNode.nodeName)?{ignore:!0}:null}})),u)a=aP(Pd(a,+u[1],+u[2]),u[4]);else if(a=ht.maxOpen(rP(a.content,r),!0),a.openStart||a.openEnd){let h=0,f=0;for(let d=a.content.firstChild;h<a.openStart&&!d.type.spec.isolating;h++,d=d.firstChild);for(let d=a.content.lastChild;f<a.openEnd&&!d.type.spec.isolating;f++,d=d.lastChild);a=Pd(a,h,f)}return n.someProp("transformPasted",h=>{a=h(a,n)}),a}const iP=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function rP(n,t){if(n.childCount<2)return n;for(let e=t.depth;e>=0;e--){let r=t.node(e).contentMatchAt(t.index(e)),s,o=[];if(n.forEach(a=>{if(!o)return;let l=r.findWrapping(a.type),c;if(!l)return o=null;if(c=o.length&&s.length&&U0(l,s,a,o[o.length-1],0))o[o.length-1]=c;else{o.length&&(o[o.length-1]=q0(o[o.length-1],s.length));let u=H0(a,l);o.push(u),r=r.matchType(u.type),s=l}}),o)return et.from(o)}return n}function H0(n,t,e=0){for(let i=t.length-1;i>=e;i--)n=t[i].create(null,et.from(n));return n}function U0(n,t,e,i,r){if(r<n.length&&r<t.length&&n[r]==t[r]){let s=U0(n,t,e,i.lastChild,r+1);if(s)return i.copy(i.content.replaceChild(i.childCount-1,s));if(i.contentMatchAt(i.childCount).matchType(r==n.length-1?e.type:n[r+1]))return i.copy(i.content.append(et.from(H0(e,n,r+1))))}}function q0(n,t){if(t==0)return n;let e=n.content.replaceChild(n.childCount-1,q0(n.lastChild,t-1)),i=n.contentMatchAt(n.childCount).fillBefore(et.empty,!0);return n.copy(e.append(i))}function Qc(n,t,e,i,r,s){let o=t<0?n.firstChild:n.lastChild,a=o.content;return r<i-1&&(a=Qc(a,t,e,i,r+1,s)),r>=e&&(a=t<0?o.contentMatchAt(0).fillBefore(a,n.childCount>1||s<=r).append(a):a.append(o.contentMatchAt(o.childCount).fillBefore(et.empty,!0))),n.replaceChild(t<0?0:n.childCount-1,o.copy(a))}function Pd(n,t,e){return t<n.openStart&&(n=new ht(Qc(n.content,-1,t,n.openStart,0,n.openEnd),t,n.openEnd)),e<n.openEnd&&(n=new ht(Qc(n.content,1,e,n.openEnd,0,0),n.openStart,e)),n}const W0={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let Dd=null;function K0(){return Dd||(Dd=document.implementation.createHTMLDocument("title"))}function sP(n){let t=/^(\s*<meta [^>]*>)*/.exec(n);t&&(n=n.slice(t[0].length));let e=K0().createElement("div"),i=/<([a-z][^>\s]+)/i.exec(n),r;if((r=i&&W0[i[1].toLowerCase()])&&(n=r.map(s=>"<"+s+">").join("")+n+r.map(s=>"</"+s+">").reverse().join("")),e.innerHTML=n,r)for(let s=0;s<r.length;s++)e=e.querySelector(r[s])||e;return e}function oP(n){let t=n.querySelectorAll(Le?"span:not([class]):not([style])":"span.Apple-converted-space");for(let e=0;e<t.length;e++){let i=t[e];i.childNodes.length==1&&i.textContent==""&&i.parentNode&&i.parentNode.replaceChild(n.ownerDocument.createTextNode(" "),i)}}function aP(n,t){if(!n.size)return n;let e=n.content.firstChild.type.schema,i;try{i=JSON.parse(t)}catch{return n}let{content:r,openStart:s,openEnd:o}=n;for(let a=i.length-2;a>=0;a-=2){let l=e.nodes[i[a]];if(!l||l.hasRequiredAttrs())break;r=et.from(l.create(i[a+1],r)),s++,o++}return new ht(r,s,o)}const Be={},Fe={},lP={touchstart:!0,touchmove:!0};class cP{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastAndroidDelete=0,this.composing=!1,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function uP(n){for(let t in Be){let e=Be[t];n.dom.addEventListener(t,n.input.eventHandlers[t]=i=>{fP(n,i)&&!Qu(n,i)&&(n.editable||!(i.type in Fe))&&e(n,i)},lP[t]?{passive:!0}:void 0)}ze&&n.dom.addEventListener("input",()=>null),Zc(n)}function ei(n,t){n.input.lastSelectionOrigin=t,n.input.lastSelectionTime=Date.now()}function hP(n){n.domObserver.stop();for(let t in n.input.eventHandlers)n.dom.removeEventListener(t,n.input.eventHandlers[t]);clearTimeout(n.input.composingTimeout),clearTimeout(n.input.lastIOSEnterFallbackTimeout)}function Zc(n){n.someProp("handleDOMEvents",t=>{for(let e in t)n.input.eventHandlers[e]||n.dom.addEventListener(e,n.input.eventHandlers[e]=i=>Qu(n,i))})}function Qu(n,t){return n.someProp("handleDOMEvents",e=>{let i=e[t.type];return i?i(n,t)||t.defaultPrevented:!1})}function fP(n,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let e=t.target;e!=n.dom;e=e.parentNode)if(!e||e.nodeType==11||e.pmViewDesc&&e.pmViewDesc.stopEvent(t))return!1;return!0}function dP(n,t){!Qu(n,t)&&Be[t.type]&&(n.editable||!(t.type in Fe))&&Be[t.type](n,t)}Fe.keydown=(n,t)=>{let e=t;if(n.input.shiftKey=e.keyCode==16||e.shiftKey,!G0(n,e)&&(n.input.lastKeyCode=e.keyCode,n.input.lastKeyCodeTime=Date.now(),!(ln&&Le&&e.keyCode==13)))if(e.keyCode!=229&&n.domObserver.forceFlush(),Dr&&e.keyCode==13&&!e.ctrlKey&&!e.altKey&&!e.metaKey){let i=Date.now();n.input.lastIOSEnter=i,n.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{n.input.lastIOSEnter==i&&(n.someProp("handleKeyDown",r=>r(n,Di(13,"Enter"))),n.input.lastIOSEnter=0)},200)}else n.someProp("handleKeyDown",i=>i(n,e))||nP(n,e)?e.preventDefault():ei(n,"key")};Fe.keyup=(n,t)=>{t.keyCode==16&&(n.input.shiftKey=!1)};Fe.keypress=(n,t)=>{let e=t;if(G0(n,e)||!e.charCode||e.ctrlKey&&!e.altKey||nn&&e.metaKey)return;if(n.someProp("handleKeyPress",r=>r(n,e))){e.preventDefault();return}let i=n.state.selection;if(!(i instanceof Pt)||!i.$from.sameParent(i.$to)){let r=String.fromCharCode(e.charCode);!/[\r\n]/.test(r)&&!n.someProp("handleTextInput",s=>s(n,i.$from.pos,i.$to.pos,r))&&n.dispatch(n.state.tr.insertText(r).scrollIntoView()),e.preventDefault()}};function il(n){return{left:n.clientX,top:n.clientY}}function pP(n,t){let e=t.x-n.clientX,i=t.y-n.clientY;return e*e+i*i<100}function Zu(n,t,e,i,r){if(i==-1)return!1;let s=n.state.doc.resolve(i);for(let o=s.depth+1;o>0;o--)if(n.someProp(t,a=>o>s.depth?a(n,e,s.nodeAfter,s.before(o),r,!0):a(n,e,s.node(o),s.before(o),r,!1)))return!0;return!1}function Mr(n,t,e){n.focused||n.focus();let i=n.state.tr.setSelection(t);e=="pointer"&&i.setMeta("pointer",!0),n.dispatch(i)}function gP(n,t){if(t==-1)return!1;let e=n.state.doc.resolve(t),i=e.nodeAfter;return i&&i.isAtom&&Mt.isSelectable(i)?(Mr(n,new Mt(e),"pointer"),!0):!1}function mP(n,t){if(t==-1)return!1;let e=n.state.selection,i,r;e instanceof Mt&&(i=e.node);let s=n.state.doc.resolve(t);for(let o=s.depth+1;o>0;o--){let a=o>s.depth?s.nodeAfter:s.node(o);if(Mt.isSelectable(a)){i&&e.$from.depth>0&&o>=e.$from.depth&&s.before(e.$from.depth+1)==e.$from.pos?r=s.before(e.$from.depth):r=s.before(o);break}}return r!=null?(Mr(n,Mt.create(n.state.doc,r),"pointer"),!0):!1}function yP(n,t,e,i,r){return Zu(n,"handleClickOn",t,e,i)||n.someProp("handleClick",s=>s(n,t,i))||(r?mP(n,e):gP(n,e))}function bP(n,t,e,i){return Zu(n,"handleDoubleClickOn",t,e,i)||n.someProp("handleDoubleClick",r=>r(n,t,i))}function vP(n,t,e,i){return Zu(n,"handleTripleClickOn",t,e,i)||n.someProp("handleTripleClick",r=>r(n,t,i))||xP(n,e,i)}function xP(n,t,e){if(e.button!=0)return!1;let i=n.state.doc;if(t==-1)return i.inlineContent?(Mr(n,Pt.create(i,0,i.content.size),"pointer"),!0):!1;let r=i.resolve(t);for(let s=r.depth+1;s>0;s--){let o=s>r.depth?r.nodeAfter:r.node(s),a=r.before(s);if(o.inlineContent)Mr(n,Pt.create(i,a+1,a+1+o.content.size),"pointer");else if(Mt.isSelectable(o))Mr(n,Mt.create(i,a),"pointer");else continue;return!0}}function th(n){return ia(n)}const J0=nn?"metaKey":"ctrlKey";Be.mousedown=(n,t)=>{let e=t;n.input.shiftKey=e.shiftKey;let i=th(n),r=Date.now(),s="singleClick";r-n.input.lastClick.time<500&&pP(e,n.input.lastClick)&&!e[J0]&&(n.input.lastClick.type=="singleClick"?s="doubleClick":n.input.lastClick.type=="doubleClick"&&(s="tripleClick")),n.input.lastClick={time:r,x:e.clientX,y:e.clientY,type:s};let o=n.posAtCoords(il(e));o&&(s=="singleClick"?(n.input.mouseDown&&n.input.mouseDown.done(),n.input.mouseDown=new wP(n,o,e,!!i)):(s=="doubleClick"?bP:vP)(n,o.pos,o.inside,e)?e.preventDefault():ei(n,"pointer"))};class wP{constructor(t,e,i,r){this.view=t,this.pos=e,this.event=i,this.flushed=r,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=t.state.doc,this.selectNode=!!i[J0],this.allowDefault=i.shiftKey;let s,o;if(e.inside>-1)s=t.state.doc.nodeAt(e.inside),o=e.inside;else{let u=t.state.doc.resolve(e.pos);s=u.parent,o=u.depth?u.before():0}const a=r?null:i.target,l=a?t.docView.nearestDesc(a,!0):null;this.target=l?l.dom:null;let{selection:c}=t.state;(i.button==0&&s.type.spec.draggable&&s.type.spec.selectable!==!1||c instanceof Mt&&c.from<=o&&c.to>o)&&(this.mightDrag={node:s,pos:o,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&dn&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),t.root.addEventListener("mouseup",this.up=this.up.bind(this)),t.root.addEventListener("mousemove",this.move=this.move.bind(this)),ei(t,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Fn(this.view)),this.view.input.mouseDown=null}up(t){if(this.done(),!this.view.dom.contains(t.target))return;let e=this.pos;this.view.state.doc!=this.startDoc&&(e=this.view.posAtCoords(il(t))),this.updateAllowDefault(t),this.allowDefault||!e?ei(this.view,"pointer"):yP(this.view,e.pos,e.inside,t,this.selectNode)?t.preventDefault():t.button==0&&(this.flushed||ze&&this.mightDrag&&!this.mightDrag.node.isAtom||Le&&!this.view.state.selection.visible&&Math.min(Math.abs(e.pos-this.view.state.selection.from),Math.abs(e.pos-this.view.state.selection.to))<=2)?(Mr(this.view,$t.near(this.view.state.doc.resolve(e.pos)),"pointer"),t.preventDefault()):ei(this.view,"pointer")}move(t){this.updateAllowDefault(t),ei(this.view,"pointer"),t.buttons==0&&this.done()}updateAllowDefault(t){!this.allowDefault&&(Math.abs(this.event.x-t.clientX)>4||Math.abs(this.event.y-t.clientY)>4)&&(this.allowDefault=!0)}}Be.touchstart=n=>{n.input.lastTouch=Date.now(),th(n),ei(n,"pointer")};Be.touchmove=n=>{n.input.lastTouch=Date.now(),ei(n,"pointer")};Be.contextmenu=n=>th(n);function G0(n,t){return n.composing?!0:ze&&Math.abs(t.timeStamp-n.input.compositionEndedAt)<500?(n.input.compositionEndedAt=-2e8,!0):!1}const _P=ln?5e3:-1;Fe.compositionstart=Fe.compositionupdate=n=>{if(!n.composing){n.domObserver.flush();let{state:t}=n,e=t.selection.$from;if(t.selection.empty&&(t.storedMarks||!e.textOffset&&e.parentOffset&&e.nodeBefore.marks.some(i=>i.type.spec.inclusive===!1)))n.markCursor=n.state.storedMarks||e.marks(),ia(n,!0),n.markCursor=null;else if(ia(n),dn&&t.selection.empty&&e.parentOffset&&!e.textOffset&&e.nodeBefore.marks.length){let i=n.domSelectionRange();for(let r=i.focusNode,s=i.focusOffset;r&&r.nodeType==1&&s!=0;){let o=s<0?r.lastChild:r.childNodes[s-1];if(!o)break;if(o.nodeType==3){n.domSelection().collapse(o,o.nodeValue.length);break}else r=o,s=-1}}n.input.composing=!0}Y0(n,_P)};Fe.compositionend=(n,t)=>{n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=t.timeStamp,Y0(n,20))};function Y0(n,t){clearTimeout(n.input.composingTimeout),t>-1&&(n.input.composingTimeout=setTimeout(()=>ia(n),t))}function X0(n){for(n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=SP());n.input.compositionNodes.length>0;)n.input.compositionNodes.pop().markParentsDirty()}function SP(){let n=document.createEvent("Event");return n.initEvent("event",!0,!0),n.timeStamp}function ia(n,t=!1){if(!(ln&&n.domObserver.flushingSoon>=0)){if(n.domObserver.forceFlush(),X0(n),t||n.docView&&n.docView.dirty){let e=Yu(n);return e&&!e.eq(n.state.selection)?n.dispatch(n.state.tr.setSelection(e)):n.updateState(n.state),!0}return!1}}function kP(n,t){if(!n.dom.parentNode)return;let e=n.dom.parentNode.appendChild(document.createElement("div"));e.appendChild(t),e.style.cssText="position: fixed; left: -10000px; top: 10px";let i=getSelection(),r=document.createRange();r.selectNodeContents(t),n.dom.blur(),i.removeAllRanges(),i.addRange(r),setTimeout(()=>{e.parentNode&&e.parentNode.removeChild(e),n.focus()},50)}const Ir=Ke&&oi<15||Dr&&M$<604;Be.copy=Fe.cut=(n,t)=>{let e=t,i=n.state.selection,r=e.type=="cut";if(i.empty)return;let s=Ir?null:e.clipboardData,o=i.content(),{dom:a,text:l}=j0(n,o);s?(e.preventDefault(),s.clearData(),s.setData("text/html",a.innerHTML),s.setData("text/plain",l)):kP(n,a),r&&n.dispatch(n.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function MP(n){return n.openStart==0&&n.openEnd==0&&n.content.childCount==1?n.content.firstChild:null}function CP(n,t){if(!n.dom.parentNode)return;let e=n.input.shiftKey||n.state.selection.$from.parent.type.spec.code,i=n.dom.parentNode.appendChild(document.createElement(e?"textarea":"div"));e||(i.contentEditable="true"),i.style.cssText="position: fixed; left: -10000px; top: 10px",i.focus(),setTimeout(()=>{n.focus(),i.parentNode&&i.parentNode.removeChild(i),e?Is(n,i.value,null,n.input.shiftKey,t):Is(n,i.textContent,i.innerHTML,n.input.shiftKey,t)},50)}function Is(n,t,e,i,r){let s=V0(n,t,e,i,n.state.selection.$from);if(n.someProp("handlePaste",l=>l(n,r,s||ht.empty)))return!0;if(!s)return!1;let o=MP(s),a=o?n.state.tr.replaceSelectionWith(o,n.input.shiftKey):n.state.tr.replaceSelection(s);return n.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}Fe.paste=(n,t)=>{let e=t;if(n.composing&&!ln)return;let i=Ir?null:e.clipboardData;i&&Is(n,i.getData("text/plain"),i.getData("text/html"),n.input.shiftKey,e)?e.preventDefault():CP(n,e)};class OP{constructor(t,e){this.slice=t,this.move=e}}const Q0=nn?"altKey":"ctrlKey";Be.dragstart=(n,t)=>{let e=t,i=n.input.mouseDown;if(i&&i.done(),!e.dataTransfer)return;let r=n.state.selection,s=r.empty?null:n.posAtCoords(il(e));if(!(s&&s.pos>=r.from&&s.pos<=(r instanceof Mt?r.to-1:r.to))){if(i&&i.mightDrag)n.dispatch(n.state.tr.setSelection(Mt.create(n.state.doc,i.mightDrag.pos)));else if(e.target&&e.target.nodeType==1){let c=n.docView.nearestDesc(e.target,!0);c&&c.node.type.spec.draggable&&c!=n.docView&&n.dispatch(n.state.tr.setSelection(Mt.create(n.state.doc,c.posBefore)))}}let o=n.state.selection.content(),{dom:a,text:l}=j0(n,o);e.dataTransfer.clearData(),e.dataTransfer.setData(Ir?"Text":"text/html",a.innerHTML),e.dataTransfer.effectAllowed="copyMove",Ir||e.dataTransfer.setData("text/plain",l),n.dragging=new OP(o,!e[Q0])};Be.dragend=n=>{let t=n.dragging;window.setTimeout(()=>{n.dragging==t&&(n.dragging=null)},50)};Fe.dragover=Fe.dragenter=(n,t)=>t.preventDefault();Fe.drop=(n,t)=>{let e=t,i=n.dragging;if(n.dragging=null,!e.dataTransfer)return;let r=n.posAtCoords(il(e));if(!r)return;let s=n.state.doc.resolve(r.pos),o=i&&i.slice;o?n.someProp("transformPasted",g=>{o=g(o,n)}):o=V0(n,e.dataTransfer.getData(Ir?"Text":"text/plain"),Ir?null:e.dataTransfer.getData("text/html"),!1,s);let a=!!(i&&!e[Q0]);if(n.someProp("handleDrop",g=>g(n,e,o||ht.empty,a))){e.preventDefault();return}if(!o)return;e.preventDefault();let l=o?y0(n.state.doc,s.pos,o):s.pos;l==null&&(l=s.pos);let c=n.state.tr;a&&c.deleteSelection();let u=c.mapping.map(l),h=o.openStart==0&&o.openEnd==0&&o.content.childCount==1,f=c.doc;if(h?c.replaceRangeWith(u,u,o.content.firstChild):c.replaceRange(u,u,o),c.doc.eq(f))return;let d=c.doc.resolve(u);if(h&&Mt.isSelectable(o.content.firstChild)&&d.nodeAfter&&d.nodeAfter.sameMarkup(o.content.firstChild))c.setSelection(new Mt(d));else{let g=c.mapping.map(l);c.mapping.maps[c.mapping.maps.length-1].forEach((b,k,O,D)=>g=D),c.setSelection(Xu(n,d,c.doc.resolve(g)))}n.focus(),n.dispatch(c.setMeta("uiEvent","drop"))};Be.focus=n=>{n.input.lastFocus=Date.now(),n.focused||(n.domObserver.stop(),n.dom.classList.add("ProseMirror-focused"),n.domObserver.start(),n.focused=!0,setTimeout(()=>{n.docView&&n.hasFocus()&&!n.domObserver.currentSelection.eq(n.domSelectionRange())&&Fn(n)},20))};Be.blur=(n,t)=>{let e=t;n.focused&&(n.domObserver.stop(),n.dom.classList.remove("ProseMirror-focused"),n.domObserver.start(),e.relatedTarget&&n.dom.contains(e.relatedTarget)&&n.domObserver.currentSelection.clear(),n.focused=!1)};Be.beforeinput=(n,t)=>{if(Le&&ln&&t.inputType=="deleteContentBackward"){n.domObserver.flushSoon();let{domChangeCount:i}=n.input;setTimeout(()=>{if(n.input.domChangeCount!=i||(n.dom.blur(),n.focus(),n.someProp("handleKeyDown",s=>s(n,Di(8,"Backspace")))))return;let{$cursor:r}=n.state.selection;r&&r.pos>0&&n.dispatch(n.state.tr.delete(r.pos-1,r.pos).scrollIntoView())},50)}};for(let n in Fe)Be[n]=Fe[n];function Ns(n,t){if(n==t)return!0;for(let e in n)if(n[e]!==t[e])return!1;for(let e in t)if(!(e in n))return!1;return!0}class eh{constructor(t,e){this.toDOM=t,this.spec=e||Ui,this.side=this.spec.side||0}map(t,e,i,r){let{pos:s,deleted:o}=t.mapResult(e.from+r,this.side<0?-1:1);return o?null:new sn(s-i,s-i,this)}valid(){return!0}eq(t){return this==t||t instanceof eh&&(this.spec.key&&this.spec.key==t.spec.key||this.toDOM==t.toDOM&&Ns(this.spec,t.spec))}destroy(t){this.spec.destroy&&this.spec.destroy(t)}}class ai{constructor(t,e){this.attrs=t,this.spec=e||Ui}map(t,e,i,r){let s=t.map(e.from+r,this.spec.inclusiveStart?-1:1)-i,o=t.map(e.to+r,this.spec.inclusiveEnd?1:-1)-i;return s>=o?null:new sn(s,o,this)}valid(t,e){return e.from<e.to}eq(t){return this==t||t instanceof ai&&Ns(this.attrs,t.attrs)&&Ns(this.spec,t.spec)}static is(t){return t.type instanceof ai}destroy(){}}class nh{constructor(t,e){this.attrs=t,this.spec=e||Ui}map(t,e,i,r){let s=t.mapResult(e.from+r,1);if(s.deleted)return null;let o=t.mapResult(e.to+r,-1);return o.deleted||o.pos<=s.pos?null:new sn(s.pos-i,o.pos-i,this)}valid(t,e){let{index:i,offset:r}=t.content.findIndex(e.from),s;return r==e.from&&!(s=t.child(i)).isText&&r+s.nodeSize==e.to}eq(t){return this==t||t instanceof nh&&Ns(this.attrs,t.attrs)&&Ns(this.spec,t.spec)}destroy(){}}class sn{constructor(t,e,i){this.from=t,this.to=e,this.type=i}copy(t,e){return new sn(t,e,this.type)}eq(t,e=0){return this.type.eq(t.type)&&this.from+e==t.from&&this.to+e==t.to}map(t,e,i){return this.type.map(t,this,e,i)}static widget(t,e,i){return new sn(t,t,new eh(e,i))}static inline(t,e,i,r){return new sn(t,e,new ai(i,r))}static node(t,e,i,r){return new sn(t,e,new nh(i,r))}get spec(){return this.type.spec}get inline(){return this.type instanceof ai}}const hr=[],Ui={};class pe{constructor(t,e){this.local=t.length?t:hr,this.children=e.length?e:hr}static create(t,e){return e.length?ra(e,t,0,Ui):$e}find(t,e,i){let r=[];return this.findInner(t??0,e??1e9,r,0,i),r}findInner(t,e,i,r,s){for(let o=0;o<this.local.length;o++){let a=this.local[o];a.from<=e&&a.to>=t&&(!s||s(a.spec))&&i.push(a.copy(a.from+r,a.to+r))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<e&&this.children[o+1]>t){let a=this.children[o]+1;this.children[o+2].findInner(t-a,e-a,i,r+a,s)}}map(t,e,i){return this==$e||t.maps.length==0?this:this.mapInner(t,e,0,0,i||Ui)}mapInner(t,e,i,r,s){let o;for(let a=0;a<this.local.length;a++){let l=this.local[a].map(t,i,r);l&&l.type.valid(e,l)?(o||(o=[])).push(l):s.onRemove&&s.onRemove(this.local[a].spec)}return this.children.length?AP(this.children,o||[],t,e,i,r,s):o?new pe(o.sort(qi),hr):$e}add(t,e){return e.length?this==$e?pe.create(t,e):this.addInner(t,e,0):this}addInner(t,e,i){let r,s=0;t.forEach((a,l)=>{let c=l+i,u;if(u=ty(e,a,c)){for(r||(r=this.children.slice());s<r.length&&r[s]<l;)s+=3;r[s]==l?r[s+2]=r[s+2].addInner(a,u,c+1):r.splice(s,0,l,l+a.nodeSize,ra(u,a,c+1,Ui)),s+=3}});let o=Z0(s?ey(e):e,-i);for(let a=0;a<o.length;a++)o[a].type.valid(t,o[a])||o.splice(a--,1);return new pe(o.length?this.local.concat(o).sort(qi):this.local,r||this.children)}remove(t){return t.length==0||this==$e?this:this.removeInner(t,0)}removeInner(t,e){let i=this.children,r=this.local;for(let s=0;s<i.length;s+=3){let o,a=i[s]+e,l=i[s+1]+e;for(let u=0,h;u<t.length;u++)(h=t[u])&&h.from>a&&h.to<l&&(t[u]=null,(o||(o=[])).push(h));if(!o)continue;i==this.children&&(i=this.children.slice());let c=i[s+2].removeInner(o,a+1);c!=$e?i[s+2]=c:(i.splice(s,3),s-=3)}if(r.length){for(let s=0,o;s<t.length;s++)if(o=t[s])for(let a=0;a<r.length;a++)r[a].eq(o,e)&&(r==this.local&&(r=this.local.slice()),r.splice(a--,1))}return i==this.children&&r==this.local?this:r.length||i.length?new pe(r,i):$e}forChild(t,e){if(this==$e)return this;if(e.isLeaf)return pe.empty;let i,r;for(let a=0;a<this.children.length;a+=3)if(this.children[a]>=t){this.children[a]==t&&(i=this.children[a+2]);break}let s=t+1,o=s+e.content.size;for(let a=0;a<this.local.length;a++){let l=this.local[a];if(l.from<o&&l.to>s&&l.type instanceof ai){let c=Math.max(s,l.from)-s,u=Math.min(o,l.to)-s;c<u&&(r||(r=[])).push(l.copy(c,u))}}if(r){let a=new pe(r.sort(qi),hr);return i?new Xn([a,i]):a}return i||$e}eq(t){if(this==t)return!0;if(!(t instanceof pe)||this.local.length!=t.local.length||this.children.length!=t.children.length)return!1;for(let e=0;e<this.local.length;e++)if(!this.local[e].eq(t.local[e]))return!1;for(let e=0;e<this.children.length;e+=3)if(this.children[e]!=t.children[e]||this.children[e+1]!=t.children[e+1]||!this.children[e+2].eq(t.children[e+2]))return!1;return!0}locals(t){return ih(this.localsInner(t))}localsInner(t){if(this==$e)return hr;if(t.inlineContent||!this.local.some(ai.is))return this.local;let e=[];for(let i=0;i<this.local.length;i++)this.local[i].type instanceof ai||e.push(this.local[i]);return e}}pe.empty=new pe([],[]);pe.removeOverlap=ih;const $e=pe.empty;class Xn{constructor(t){this.members=t}map(t,e){const i=this.members.map(r=>r.map(t,e,Ui));return Xn.from(i)}forChild(t,e){if(e.isLeaf)return pe.empty;let i=[];for(let r=0;r<this.members.length;r++){let s=this.members[r].forChild(t,e);s!=$e&&(s instanceof Xn?i=i.concat(s.members):i.push(s))}return Xn.from(i)}eq(t){if(!(t instanceof Xn)||t.members.length!=this.members.length)return!1;for(let e=0;e<this.members.length;e++)if(!this.members[e].eq(t.members[e]))return!1;return!0}locals(t){let e,i=!0;for(let r=0;r<this.members.length;r++){let s=this.members[r].localsInner(t);if(s.length)if(!e)e=s;else{i&&(e=e.slice(),i=!1);for(let o=0;o<s.length;o++)e.push(s[o])}}return e?ih(i?e:e.sort(qi)):hr}static from(t){switch(t.length){case 0:return $e;case 1:return t[0];default:return new Xn(t.every(e=>e instanceof pe)?t:t.reduce((e,i)=>e.concat(i instanceof pe?i:i.members),[]))}}}function AP(n,t,e,i,r,s,o){let a=n.slice();for(let c=0,u=s;c<e.maps.length;c++){let h=0;e.maps[c].forEach((f,d,g,b)=>{let k=b-g-(d-f);for(let O=0;O<a.length;O+=3){let D=a[O+1];if(D<0||f>D+u-h)continue;let F=a[O]+u-h;d>=F?a[O+1]=f<=F?-2:-1:g>=r&&k&&(a[O]+=k,a[O+1]+=k)}h+=k}),u=e.maps[c].map(u,-1)}let l=!1;for(let c=0;c<a.length;c+=3)if(a[c+1]<0){if(a[c+1]==-2){l=!0,a[c+1]=-1;continue}let u=e.map(n[c]+s),h=u-r;if(h<0||h>=i.content.size){l=!0;continue}let f=e.map(n[c+1]+s,-1),d=f-r,{index:g,offset:b}=i.content.findIndex(h),k=i.maybeChild(g);if(k&&b==h&&b+k.nodeSize==d){let O=a[c+2].mapInner(e,k,u+1,n[c]+s+1,o);O!=$e?(a[c]=h,a[c+1]=d,a[c+2]=O):(a[c+1]=-2,l=!0)}else l=!0}if(l){let c=TP(a,n,t,e,r,s,o),u=ra(c,i,0,o);t=u.local;for(let h=0;h<a.length;h+=3)a[h+1]<0&&(a.splice(h,3),h-=3);for(let h=0,f=0;h<u.children.length;h+=3){let d=u.children[h];for(;f<a.length&&a[f]<d;)f+=3;a.splice(f,0,u.children[h],u.children[h+1],u.children[h+2])}}return new pe(t.sort(qi),a)}function Z0(n,t){if(!t||!n.length)return n;let e=[];for(let i=0;i<n.length;i++){let r=n[i];e.push(new sn(r.from+t,r.to+t,r.type))}return e}function TP(n,t,e,i,r,s,o){function a(l,c){for(let u=0;u<l.local.length;u++){let h=l.local[u].map(i,r,c);h?e.push(h):o.onRemove&&o.onRemove(l.local[u].spec)}for(let u=0;u<l.children.length;u+=3)a(l.children[u+2],l.children[u]+c+1)}for(let l=0;l<n.length;l+=3)n[l+1]==-1&&a(n[l+2],t[l]+s+1);return e}function ty(n,t,e){if(t.isLeaf)return null;let i=e+t.nodeSize,r=null;for(let s=0,o;s<n.length;s++)(o=n[s])&&o.from>e&&o.to<i&&((r||(r=[])).push(o),n[s]=null);return r}function ey(n){let t=[];for(let e=0;e<n.length;e++)n[e]!=null&&t.push(n[e]);return t}function ra(n,t,e,i){let r=[],s=!1;t.forEach((a,l)=>{let c=ty(n,a,l+e);if(c){s=!0;let u=ra(c,a,e+l+1,i);u!=$e&&r.push(l,l+a.nodeSize,u)}});let o=Z0(s?ey(n):n,-e).sort(qi);for(let a=0;a<o.length;a++)o[a].type.valid(t,o[a])||(i.onRemove&&i.onRemove(o[a].spec),o.splice(a--,1));return o.length||r.length?new pe(o,r):$e}function qi(n,t){return n.from-t.from||n.to-t.to}function ih(n){let t=n;for(let e=0;e<t.length-1;e++){let i=t[e];if(i.from!=i.to)for(let r=e+1;r<t.length;r++){let s=t[r];if(s.from==i.from){s.to!=i.to&&(t==n&&(t=n.slice()),t[r]=s.copy(s.from,i.to),Id(t,r+1,s.copy(i.to,s.to)));continue}else{s.from<i.to&&(t==n&&(t=n.slice()),t[e]=i.copy(i.from,s.from),Id(t,r,i.copy(s.from,i.to)));break}}}return t}function Id(n,t,e){for(;t<n.length&&qi(e,n[t])>0;)t++;n.splice(t,0,e)}function Gl(n){let t=[];return n.someProp("decorations",e=>{let i=e(n.state);i&&i!=$e&&t.push(i)}),n.cursorWrapper&&t.push(pe.create(n.state.doc,[n.cursorWrapper.deco])),Xn.from(t)}const EP={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},$P=Ke&&oi<=11;class PP{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(t){this.anchorNode=t.anchorNode,this.anchorOffset=t.anchorOffset,this.focusNode=t.focusNode,this.focusOffset=t.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(t){return t.anchorNode==this.anchorNode&&t.anchorOffset==this.anchorOffset&&t.focusNode==this.focusNode&&t.focusOffset==this.focusOffset}}class DP{constructor(t,e){this.view=t,this.handleDOMChange=e,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new PP,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.observer=window.MutationObserver&&new window.MutationObserver(i=>{for(let r=0;r<i.length;r++)this.queue.push(i[r]);Ke&&oi<=11&&i.some(r=>r.type=="childList"&&r.removedNodes.length||r.type=="characterData"&&r.oldValue.length>r.target.nodeValue.length)?this.flushSoon():this.flush()}),$P&&(this.onCharData=i=>{this.queue.push({target:i.target,type:"characterData",oldValue:i.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,EP)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let t=this.observer.takeRecords();if(t.length){for(let e=0;e<t.length;e++)this.queue.push(t[e]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(Od(this.view)){if(this.suppressingSelectionUpdates)return Fn(this.view);if(Ke&&oi<=11&&!this.view.state.selection.empty){let t=this.view.domSelectionRange();if(t.focusNode&&Yi(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(t){if(!t.focusNode)return!0;let e=new Set,i;for(let s=t.focusNode;s;s=Ds(s))e.add(s);for(let s=t.anchorNode;s;s=Ds(s))if(e.has(s)){i=s;break}let r=i&&this.view.docView.nearestDesc(i);if(r&&r.ignoreMutation({type:"selection",target:i.nodeType==3?i.parentNode:i}))return this.setCurSelection(),!0}flush(){let{view:t}=this;if(!t.docView||this.flushingSoon>-1)return;let e=this.observer?this.observer.takeRecords():[];this.queue.length&&(e=this.queue.concat(e),this.queue.length=0);let i=t.domSelectionRange(),r=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(i)&&Od(t)&&!this.ignoreSelectionChange(i),s=-1,o=-1,a=!1,l=[];if(t.editable)for(let u=0;u<e.length;u++){let h=this.registerMutation(e[u],l);h&&(s=s<0?h.from:Math.min(h.from,s),o=o<0?h.to:Math.max(h.to,o),h.typeOver&&(a=!0))}if(dn&&l.length>1){let u=l.filter(h=>h.nodeName=="BR");if(u.length==2){let h=u[0],f=u[1];h.parentNode&&h.parentNode.parentNode==f.parentNode?f.remove():h.remove()}}let c=null;s<0&&r&&t.input.lastFocus>Date.now()-200&&Math.max(t.input.lastTouch,t.input.lastClick.time)<Date.now()-300&&tl(i)&&(c=Yu(t))&&c.eq($t.near(t.state.doc.resolve(0),1))?(t.input.lastFocus=0,Fn(t),this.currentSelection.set(i),t.scrollToSelection()):(s>-1||r)&&(s>-1&&(t.docView.markDirty(s,o),IP(t)),this.handleDOMChange(s,o,a,l),t.docView&&t.docView.dirty?t.updateState(t.state):this.currentSelection.eq(i)||Fn(t),this.currentSelection.set(i))}registerMutation(t,e){if(e.indexOf(t.target)>-1)return null;let i=this.view.docView.nearestDesc(t.target);if(t.type=="attributes"&&(i==this.view.docView||t.attributeName=="contenteditable"||t.attributeName=="style"&&!t.oldValue&&!t.target.getAttribute("style"))||!i||i.ignoreMutation(t))return null;if(t.type=="childList"){for(let u=0;u<t.addedNodes.length;u++)e.push(t.addedNodes[u]);if(i.contentDOM&&i.contentDOM!=i.dom&&!i.contentDOM.contains(t.target))return{from:i.posBefore,to:i.posAfter};let r=t.previousSibling,s=t.nextSibling;if(Ke&&oi<=11&&t.addedNodes.length)for(let u=0;u<t.addedNodes.length;u++){let{previousSibling:h,nextSibling:f}=t.addedNodes[u];(!h||Array.prototype.indexOf.call(t.addedNodes,h)<0)&&(r=h),(!f||Array.prototype.indexOf.call(t.addedNodes,f)<0)&&(s=f)}let o=r&&r.parentNode==t.target?Qe(r)+1:0,a=i.localPosFromDOM(t.target,o,-1),l=s&&s.parentNode==t.target?Qe(s):t.target.childNodes.length,c=i.localPosFromDOM(t.target,l,1);return{from:a,to:c}}else return t.type=="attributes"?{from:i.posAtStart-i.border,to:i.posAtEnd+i.border}:{from:i.posAtStart,to:i.posAtEnd,typeOver:t.target.nodeValue==t.oldValue}}}let Nd=new WeakMap,Ld=!1;function IP(n){if(!Nd.has(n)&&(Nd.set(n,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(n.dom).whiteSpace)!==-1)){if(n.requiresGeckoHackNode=dn,Ld)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),Ld=!0}}function NP(n){let t;function e(l){l.preventDefault(),l.stopImmediatePropagation(),t=l.getTargetRanges()[0]}n.dom.addEventListener("beforeinput",e,!0),document.execCommand("indent"),n.dom.removeEventListener("beforeinput",e,!0);let i=t.startContainer,r=t.startOffset,s=t.endContainer,o=t.endOffset,a=n.domAtPos(n.state.selection.anchor);return Yi(a.node,a.offset,s,o)&&([i,r,s,o]=[s,o,i,r]),{anchorNode:i,anchorOffset:r,focusNode:s,focusOffset:o}}function LP(n,t,e){let{node:i,fromOffset:r,toOffset:s,from:o,to:a}=n.docView.parseRange(t,e),l=n.domSelectionRange(),c,u=l.anchorNode;if(u&&n.dom.contains(u.nodeType==1?u:u.parentNode)&&(c=[{node:u,offset:l.anchorOffset}],tl(l)||c.push({node:l.focusNode,offset:l.focusOffset})),Le&&n.input.lastKeyCode===8)for(let k=s;k>r;k--){let O=i.childNodes[k-1],D=O.pmViewDesc;if(O.nodeName=="BR"&&!D){s=k;break}if(!D||D.size)break}let h=n.state.doc,f=n.someProp("domParser")||Er.fromSchema(n.state.schema),d=h.resolve(o),g=null,b=f.parse(i,{topNode:d.parent,topMatch:d.parent.contentMatchAt(d.index()),topOpen:!0,from:r,to:s,preserveWhitespace:d.parent.type.whitespace=="pre"?"full":!0,findPositions:c,ruleFromNode:RP,context:d});if(c&&c[0].pos!=null){let k=c[0].pos,O=c[1]&&c[1].pos;O==null&&(O=k),g={anchor:k+o,head:O+o}}return{doc:b,sel:g,from:o,to:a}}function RP(n){let t=n.pmViewDesc;if(t)return t.parseRule();if(n.nodeName=="BR"&&n.parentNode){if(ze&&/^(ul|ol)$/i.test(n.parentNode.nodeName)){let e=document.createElement("div");return e.appendChild(document.createElement("li")),{skip:e}}else if(n.parentNode.lastChild==n||ze&&/^(tr|table)$/i.test(n.parentNode.nodeName))return{ignore:!0}}else if(n.nodeName=="IMG"&&n.getAttribute("mark-placeholder"))return{ignore:!0};return null}const zP=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function BP(n,t,e,i,r){if(t<0){let R=n.input.lastSelectionTime>Date.now()-50?n.input.lastSelectionOrigin:null,st=Yu(n,R);if(st&&!n.state.selection.eq(st)){if(Le&&ln&&n.input.lastKeyCode===13&&Date.now()-100<n.input.lastKeyCodeTime&&n.someProp("handleKeyDown",bt=>bt(n,Di(13,"Enter"))))return;let xt=n.state.tr.setSelection(st);R=="pointer"?xt.setMeta("pointer",!0):R=="key"&&xt.scrollIntoView(),n.dispatch(xt)}return}let s=n.state.doc.resolve(t),o=s.sharedDepth(e);t=s.before(o+1),e=n.state.doc.resolve(e).after(o+1);let a=n.state.selection,l=LP(n,t,e),c=n.state.doc,u=c.slice(l.from,l.to),h,f;n.input.lastKeyCode===8&&Date.now()-100<n.input.lastKeyCodeTime?(h=n.state.selection.to,f="end"):(h=n.state.selection.from,f="start"),n.input.lastKeyCode=null;let d=VP(u.content,l.doc.content,l.from,h,f);if((Dr&&n.input.lastIOSEnter>Date.now()-225||ln)&&r.some(R=>R.nodeType==1&&!zP.test(R.nodeName))&&(!d||d.endA>=d.endB)&&n.someProp("handleKeyDown",R=>R(n,Di(13,"Enter")))){n.input.lastIOSEnter=0;return}if(!d)if(i&&a instanceof Pt&&!a.empty&&a.$head.sameParent(a.$anchor)&&!n.composing&&!(l.sel&&l.sel.anchor!=l.sel.head))d={start:a.from,endA:a.to,endB:a.to};else{if(l.sel){let R=Rd(n,n.state.doc,l.sel);R&&!R.eq(n.state.selection)&&n.dispatch(n.state.tr.setSelection(R))}return}if(Le&&n.cursorWrapper&&l.sel&&l.sel.anchor==n.cursorWrapper.deco.from&&l.sel.head==l.sel.anchor){let R=d.endB-d.start;l.sel={anchor:l.sel.anchor+R,head:l.sel.anchor+R}}n.input.domChangeCount++,n.state.selection.from<n.state.selection.to&&d.start==d.endB&&n.state.selection instanceof Pt&&(d.start>n.state.selection.from&&d.start<=n.state.selection.from+2&&n.state.selection.from>=l.from?d.start=n.state.selection.from:d.endA<n.state.selection.to&&d.endA>=n.state.selection.to-2&&n.state.selection.to<=l.to&&(d.endB+=n.state.selection.to-d.endA,d.endA=n.state.selection.to)),Ke&&oi<=11&&d.endB==d.start+1&&d.endA==d.start&&d.start>l.from&&l.doc.textBetween(d.start-l.from-1,d.start-l.from+1)==" "&&(d.start--,d.endA--,d.endB--);let g=l.doc.resolveNoCache(d.start-l.from),b=l.doc.resolveNoCache(d.endB-l.from),k=c.resolve(d.start),O=g.sameParent(b)&&g.parent.inlineContent&&k.end()>=d.endA,D;if((Dr&&n.input.lastIOSEnter>Date.now()-225&&(!O||r.some(R=>R.nodeName=="DIV"||R.nodeName=="P"))||!O&&g.pos<l.doc.content.size&&(D=$t.findFrom(l.doc.resolve(g.pos+1),1,!0))&&D.head==b.pos)&&n.someProp("handleKeyDown",R=>R(n,Di(13,"Enter")))){n.input.lastIOSEnter=0;return}if(n.state.selection.anchor>d.start&&jP(c,d.start,d.endA,g,b)&&n.someProp("handleKeyDown",R=>R(n,Di(8,"Backspace")))){ln&&Le&&n.domObserver.suppressSelectionUpdates();return}Le&&ln&&d.endB==d.start&&(n.input.lastAndroidDelete=Date.now()),ln&&!O&&g.start()!=b.start()&&b.parentOffset==0&&g.depth==b.depth&&l.sel&&l.sel.anchor==l.sel.head&&l.sel.head==d.endA&&(d.endB-=2,b=l.doc.resolveNoCache(d.endB-l.from),setTimeout(()=>{n.someProp("handleKeyDown",function(R){return R(n,Di(13,"Enter"))})},20));let F=d.start,W=d.endA,V,T,L;if(O){if(g.pos==b.pos)Ke&&oi<=11&&g.parentOffset==0&&(n.domObserver.suppressSelectionUpdates(),setTimeout(()=>Fn(n),20)),V=n.state.tr.delete(F,W),T=c.resolve(d.start).marksAcross(c.resolve(d.endA));else if(d.endA==d.endB&&(L=FP(g.parent.content.cut(g.parentOffset,b.parentOffset),k.parent.content.cut(k.parentOffset,d.endA-k.start()))))V=n.state.tr,L.type=="add"?V.addMark(F,W,L.mark):V.removeMark(F,W,L.mark);else if(g.parent.child(g.index()).isText&&g.index()==b.index()-(b.textOffset?0:1)){let R=g.parent.textBetween(g.parentOffset,b.parentOffset);if(n.someProp("handleTextInput",st=>st(n,F,W,R)))return;V=n.state.tr.insertText(R,F,W)}}if(V||(V=n.state.tr.replace(F,W,l.doc.slice(d.start-l.from,d.endB-l.from))),l.sel){let R=Rd(n,V.doc,l.sel);R&&!(Le&&ln&&n.composing&&R.empty&&(d.start!=d.endB||n.input.lastAndroidDelete<Date.now()-100)&&(R.head==F||R.head==V.mapping.map(W)-1)||Ke&&R.empty&&R.head==F)&&V.setSelection(R)}T&&V.ensureMarks(T),n.dispatch(V.scrollIntoView())}function Rd(n,t,e){return Math.max(e.anchor,e.head)>t.content.size?null:Xu(n,t.resolve(e.anchor),t.resolve(e.head))}function FP(n,t){let e=n.firstChild.marks,i=t.firstChild.marks,r=e,s=i,o,a,l;for(let u=0;u<i.length;u++)r=i[u].removeFromSet(r);for(let u=0;u<e.length;u++)s=e[u].removeFromSet(s);if(r.length==1&&s.length==0)a=r[0],o="add",l=u=>u.mark(a.addToSet(u.marks));else if(r.length==0&&s.length==1)a=s[0],o="remove",l=u=>u.mark(a.removeFromSet(u.marks));else return null;let c=[];for(let u=0;u<t.childCount;u++)c.push(l(t.child(u)));if(et.from(c).eq(n))return{mark:a,type:o}}function jP(n,t,e,i,r){if(!i.parent.isTextblock||e-t<=r.pos-i.pos||Yl(i,!0,!1)<r.pos)return!1;let s=n.resolve(t);if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;let o=n.resolve(Yl(s,!0,!0));return!o.parent.isTextblock||o.pos>e||Yl(o,!0,!1)<e?!1:i.parent.content.cut(i.parentOffset).eq(o.parent.content)}function Yl(n,t,e){let i=n.depth,r=t?n.end():n.pos;for(;i>0&&(t||n.indexAfter(i)==n.node(i).childCount);)i--,r++,t=!1;if(e){let s=n.node(i).maybeChild(n.indexAfter(i));for(;s&&!s.isLeaf;)s=s.firstChild,r++}return r}function VP(n,t,e,i,r){let s=n.findDiffStart(t,e);if(s==null)return null;let{a:o,b:a}=n.findDiffEnd(t,e+n.size,e+t.size);if(r=="end"){let l=Math.max(0,s-Math.min(o,a));i-=o+l-s}if(o<s&&n.size<t.size){let l=i<=s&&i>=o?s-i:0;s-=l,a=s+(a-o),o=s}else if(a<s){let l=i<=s&&i>=a?s-i:0;s-=l,o=s+(o-a),a=s}return{start:s,endA:o,endB:a}}class HP{constructor(t,e){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new cP,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=e,this.state=e.state,this.directPlugins=e.plugins||[],this.directPlugins.forEach(Vd),this.dispatch=this.dispatch.bind(this),this.dom=t&&t.mount||document.createElement("div"),t&&(t.appendChild?t.appendChild(this.dom):typeof t=="function"?t(this.dom):t.mount&&(this.mounted=!0)),this.editable=Fd(this),Bd(this),this.nodeViews=jd(this),this.docView=wd(this.state.doc,zd(this),Gl(this),this.dom,this),this.domObserver=new DP(this,(i,r,s,o)=>BP(this,i,r,s,o)),this.domObserver.start(),uP(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let t=this._props;this._props={};for(let e in t)this._props[e]=t[e];this._props.state=this.state}return this._props}update(t){t.handleDOMEvents!=this._props.handleDOMEvents&&Zc(this);let e=this._props;this._props=t,t.plugins&&(t.plugins.forEach(Vd),this.directPlugins=t.plugins),this.updateStateInner(t.state,e)}setProps(t){let e={};for(let i in this._props)e[i]=this._props[i];e.state=this.state;for(let i in t)e[i]=t[i];this.update(e)}updateState(t){this.updateStateInner(t,this._props)}updateStateInner(t,e){let i=this.state,r=!1,s=!1;t.storedMarks&&this.composing&&(X0(this),s=!0),this.state=t;let o=i.plugins!=t.plugins||this._props.plugins!=e.plugins;if(o||this._props.plugins!=e.plugins||this._props.nodeViews!=e.nodeViews){let f=jd(this);qP(f,this.nodeViews)&&(this.nodeViews=f,r=!0)}(o||e.handleDOMEvents!=this._props.handleDOMEvents)&&Zc(this),this.editable=Fd(this),Bd(this);let a=Gl(this),l=zd(this),c=i.plugins!=t.plugins&&!i.doc.eq(t.doc)?"reset":t.scrollToSelection>i.scrollToSelection?"to selection":"preserve",u=r||!this.docView.matchesNode(t.doc,l,a);(u||!t.selection.eq(i.selection))&&(s=!0);let h=c=="preserve"&&s&&this.dom.style.overflowAnchor==null&&A$(this);if(s){this.domObserver.stop();let f=u&&(Ke||Le)&&!this.composing&&!i.selection.empty&&!t.selection.empty&&UP(i.selection,t.selection);if(u){let d=Le?this.trackWrites=this.domSelectionRange().focusNode:null;(r||!this.docView.update(t.doc,l,a,this))&&(this.docView.updateOuterDeco([]),this.docView.destroy(),this.docView=wd(t.doc,l,a,this.dom,this)),d&&!this.trackWrites&&(f=!0)}f||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&Z$(this))?Fn(this,f):(z0(this,t.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),c=="reset"?this.dom.scrollTop=0:c=="to selection"?this.scrollToSelection():h&&T$(h)}scrollToSelection(){let t=this.domSelectionRange().focusNode;if(!this.someProp("handleScrollToSelection",e=>e(this)))if(this.state.selection instanceof Mt){let e=this.docView.domAfterPos(this.state.selection.from);e.nodeType==1&&md(this,e.getBoundingClientRect(),t)}else md(this,this.coordsAtPos(this.state.selection.head,1),t)}destroyPluginViews(){let t;for(;t=this.pluginViews.pop();)t.destroy&&t.destroy()}updatePluginViews(t){if(!t||t.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let e=0;e<this.directPlugins.length;e++){let i=this.directPlugins[e];i.spec.view&&this.pluginViews.push(i.spec.view(this))}for(let e=0;e<this.state.plugins.length;e++){let i=this.state.plugins[e];i.spec.view&&this.pluginViews.push(i.spec.view(this))}}else for(let e=0;e<this.pluginViews.length;e++){let i=this.pluginViews[e];i.update&&i.update(this,t)}}someProp(t,e){let i=this._props&&this._props[t],r;if(i!=null&&(r=e?e(i):i))return r;for(let o=0;o<this.directPlugins.length;o++){let a=this.directPlugins[o].props[t];if(a!=null&&(r=e?e(a):a))return r}let s=this.state.plugins;if(s)for(let o=0;o<s.length;o++){let a=s[o].props[t];if(a!=null&&(r=e?e(a):a))return r}}hasFocus(){if(Ke){let t=this.root.activeElement;if(t==this.dom)return!0;if(!t||!this.dom.contains(t))return!1;for(;t&&this.dom!=t&&this.dom.contains(t);){if(t.contentEditable=="false")return!1;t=t.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&E$(this.dom),Fn(this),this.domObserver.start()}get root(){let t=this._root;if(t==null){for(let e=this.dom.parentNode;e;e=e.parentNode)if(e.nodeType==9||e.nodeType==11&&e.host)return e.getSelection||(Object.getPrototypeOf(e).getSelection=()=>e.ownerDocument.getSelection()),this._root=e}return t||document}posAtCoords(t){return N$(this,t)}coordsAtPos(t,e=1){return E0(this,t,e)}domAtPos(t,e=0){return this.docView.domFromPos(t,e)}nodeDOM(t){let e=this.docView.descAt(t);return e?e.nodeDOM:null}posAtDOM(t,e,i=-1){let r=this.docView.posFromDOM(t,e,i);if(r==null)throw new RangeError("DOM position not inside the editor");return r}endOfTextblock(t,e){return F$(this,e||this.state,t)}pasteHTML(t,e){return Is(this,"",t,!1,e||new ClipboardEvent("paste"))}pasteText(t,e){return Is(this,t,null,!0,e||new ClipboardEvent("paste"))}destroy(){this.docView&&(hP(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Gl(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null)}get isDestroyed(){return this.docView==null}dispatchEvent(t){return dP(this,t)}dispatch(t){let e=this._props.dispatchTransaction;e?e.call(this,t):this.updateState(this.state.apply(t))}domSelectionRange(){return ze&&this.root.nodeType===11&&S$(this.dom.ownerDocument)==this.dom?NP(this):this.domSelection()}domSelection(){return this.root.getSelection()}}function zd(n){let t=Object.create(null);return t.class="ProseMirror",t.contenteditable=String(n.editable),t.translate="no",n.someProp("attributes",e=>{if(typeof e=="function"&&(e=e(n.state)),e)for(let i in e)i=="class"&&(t.class+=" "+e[i]),i=="style"?t.style=(t.style?t.style+";":"")+e[i]:!t[i]&&i!="contenteditable"&&i!="nodeName"&&(t[i]=String(e[i]))}),[sn.node(0,n.state.doc.content.size,t)]}function Bd(n){if(n.markCursor){let t=document.createElement("img");t.className="ProseMirror-separator",t.setAttribute("mark-placeholder","true"),t.setAttribute("alt",""),n.cursorWrapper={dom:t,deco:sn.widget(n.state.selection.head,t,{raw:!0,marks:n.markCursor})}}else n.cursorWrapper=null}function Fd(n){return!n.someProp("editable",t=>t(n.state)===!1)}function UP(n,t){let e=Math.min(n.$anchor.sharedDepth(n.head),t.$anchor.sharedDepth(t.head));return n.$anchor.start(e)!=t.$anchor.start(e)}function jd(n){let t=Object.create(null);function e(i){for(let r in i)Object.prototype.hasOwnProperty.call(t,r)||(t[r]=i[r])}return n.someProp("nodeViews",e),n.someProp("markViews",e),t}function qP(n,t){let e=0,i=0;for(let r in n){if(n[r]!=t[r])return!0;e++}for(let r in t)i++;return e!=i}function Vd(n){if(n.spec.state||n.spec.filterTransaction||n.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var yi={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},sa={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},Hd=typeof navigator<"u"&&/Chrome\/(\d+)/.exec(navigator.userAgent),WP=typeof navigator<"u"&&/Mac/.test(navigator.platform),KP=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),JP=WP||Hd&&+Hd[1]<57;for(var Me=0;Me<10;Me++)yi[48+Me]=yi[96+Me]=String(Me);for(var Me=1;Me<=24;Me++)yi[Me+111]="F"+Me;for(var Me=65;Me<=90;Me++)yi[Me]=String.fromCharCode(Me+32),sa[Me]=String.fromCharCode(Me);for(var Xl in yi)sa.hasOwnProperty(Xl)||(sa[Xl]=yi[Xl]);function GP(n){var t=JP&&(n.ctrlKey||n.altKey||n.metaKey)||KP&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",e=!t&&n.key||(n.shiftKey?sa:yi)[n.keyCode]||n.key||"Unidentified";return e=="Esc"&&(e="Escape"),e=="Del"&&(e="Delete"),e=="Left"&&(e="ArrowLeft"),e=="Up"&&(e="ArrowUp"),e=="Right"&&(e="ArrowRight"),e=="Down"&&(e="ArrowDown"),e}const YP=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!1;function XP(n){let t=n.split(/-(?!$)/),e=t[t.length-1];e=="Space"&&(e=" ");let i,r,s,o;for(let a=0;a<t.length-1;a++){let l=t[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))i=!0;else if(/^(c|ctrl|control)$/i.test(l))r=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))YP?o=!0:r=!0;else throw new Error("Unrecognized modifier name: "+l)}return i&&(e="Alt-"+e),r&&(e="Ctrl-"+e),o&&(e="Meta-"+e),s&&(e="Shift-"+e),e}function QP(n){let t=Object.create(null);for(let e in n)t[XP(e)]=n[e];return t}function Ql(n,t,e=!0){return t.altKey&&(n="Alt-"+n),t.ctrlKey&&(n="Ctrl-"+n),t.metaKey&&(n="Meta-"+n),e&&t.shiftKey&&(n="Shift-"+n),n}function ZP(n){return new je({props:{handleKeyDown:ny(n)}})}function ny(n){let t=QP(n);return function(e,i){let r=GP(i),s,o=t[Ql(r,i)];if(o&&o(e.state,e.dispatch,e))return!0;if(r.length==1&&r!=" "){if(i.shiftKey){let a=t[Ql(r,i,!1)];if(a&&a(e.state,e.dispatch,e))return!0}if((i.shiftKey||i.altKey||i.metaKey||r.charCodeAt(0)>127)&&(s=yi[i.keyCode])&&s!=r){let a=t[Ql(s,i)];if(a&&a(e.state,e.dispatch,e))return!0}}return!1}}const tD=(n,t)=>n.selection.empty?!1:(t&&t(n.tr.deleteSelection().scrollIntoView()),!0);function eD(n,t){let{$cursor:e}=n.selection;return!e||(t?!t.endOfTextblock("backward",n):e.parentOffset>0)?null:e}const nD=(n,t,e)=>{let i=eD(n,e);if(!i)return!1;let r=iy(i);if(!r){let o=i.blockRange(),a=o&&Xr(o);return a==null?!1:(t&&t(n.tr.lift(o,a).scrollIntoView()),!0)}let s=r.nodeBefore;if(!s.type.spec.isolating&&oy(n,r,t))return!0;if(i.parent.content.size==0&&(Nr(s,"end")||Mt.isSelectable(s))){let o=Ku(n.doc,i.before(),i.after(),ht.empty);if(o&&o.slice.size<o.to-o.from){if(t){let a=n.tr.step(o);a.setSelection(Nr(s,"end")?$t.findFrom(a.doc.resolve(a.mapping.map(r.pos,-1)),-1):Mt.create(a.doc,r.pos-s.nodeSize)),t(a.scrollIntoView())}return!0}}return s.isAtom&&r.depth==i.depth-1?(t&&t(n.tr.delete(r.pos-s.nodeSize,r.pos).scrollIntoView()),!0):!1};function Nr(n,t,e=!1){for(let i=n;i;i=t=="start"?i.firstChild:i.lastChild){if(i.isTextblock)return!0;if(e&&i.childCount!=1)return!1}return!1}const iD=(n,t,e)=>{let{$head:i,empty:r}=n.selection,s=i;if(!r)return!1;if(i.parent.isTextblock){if(e?!e.endOfTextblock("backward",n):i.parentOffset>0)return!1;s=iy(i)}let o=s&&s.nodeBefore;return!o||!Mt.isSelectable(o)?!1:(t&&t(n.tr.setSelection(Mt.create(n.doc,s.pos-o.nodeSize)).scrollIntoView()),!0)};function iy(n){if(!n.parent.type.spec.isolating)for(let t=n.depth-1;t>=0;t--){if(n.index(t)>0)return n.doc.resolve(n.before(t+1));if(n.node(t).type.spec.isolating)break}return null}function rD(n,t){let{$cursor:e}=n.selection;return!e||(t?!t.endOfTextblock("forward",n):e.parentOffset<e.parent.content.size)?null:e}const sD=(n,t,e)=>{let i=rD(n,e);if(!i)return!1;let r=ry(i);if(!r)return!1;let s=r.nodeAfter;if(oy(n,r,t))return!0;if(i.parent.content.size==0&&(Nr(s,"start")||Mt.isSelectable(s))){let o=Ku(n.doc,i.before(),i.after(),ht.empty);if(o&&o.slice.size<o.to-o.from){if(t){let a=n.tr.step(o);a.setSelection(Nr(s,"start")?$t.findFrom(a.doc.resolve(a.mapping.map(r.pos)),1):Mt.create(a.doc,a.mapping.map(r.pos))),t(a.scrollIntoView())}return!0}}return s.isAtom&&r.depth==i.depth-1?(t&&t(n.tr.delete(r.pos,r.pos+s.nodeSize).scrollIntoView()),!0):!1},oD=(n,t,e)=>{let{$head:i,empty:r}=n.selection,s=i;if(!r)return!1;if(i.parent.isTextblock){if(e?!e.endOfTextblock("forward",n):i.parentOffset<i.parent.content.size)return!1;s=ry(i)}let o=s&&s.nodeAfter;return!o||!Mt.isSelectable(o)?!1:(t&&t(n.tr.setSelection(Mt.create(n.doc,s.pos)).scrollIntoView()),!0)};function ry(n){if(!n.parent.type.spec.isolating)for(let t=n.depth-1;t>=0;t--){let e=n.node(t);if(n.index(t)+1<e.childCount)return n.doc.resolve(n.after(t+1));if(e.type.spec.isolating)break}return null}const aD=(n,t)=>{let e=n.selection,i=e instanceof Mt,r;if(i){if(e.node.isTextblock||!_i(n.doc,e.from))return!1;r=e.from}else if(r=m0(n.doc,e.from,-1),r==null)return!1;if(t){let s=n.tr.join(r);i&&s.setSelection(Mt.create(s.doc,r-n.doc.resolve(r).nodeBefore.nodeSize)),t(s.scrollIntoView())}return!0},lD=(n,t)=>{let e=n.selection,i;if(e instanceof Mt){if(e.node.isTextblock||!_i(n.doc,e.to))return!1;i=e.to}else if(i=m0(n.doc,e.to,1),i==null)return!1;return t&&t(n.tr.join(i).scrollIntoView()),!0},cD=(n,t)=>{let{$from:e,$to:i}=n.selection,r=e.blockRange(i),s=r&&Xr(r);return s==null?!1:(t&&t(n.tr.lift(r,s).scrollIntoView()),!0)},uD=(n,t)=>{let{$head:e,$anchor:i}=n.selection;return!e.parent.type.spec.code||!e.sameParent(i)?!1:(t&&t(n.tr.insertText(`
`).scrollIntoView()),!0)};function sy(n){for(let t=0;t<n.edgeCount;t++){let{type:e}=n.edge(t);if(e.isTextblock&&!e.hasRequiredAttrs())return e}return null}const hD=(n,t)=>{let{$head:e,$anchor:i}=n.selection;if(!e.parent.type.spec.code||!e.sameParent(i))return!1;let r=e.node(-1),s=e.indexAfter(-1),o=sy(r.contentMatchAt(s));if(!o||!r.canReplaceWith(s,s,o))return!1;if(t){let a=e.after(),l=n.tr.replaceWith(a,a,o.createAndFill());l.setSelection($t.near(l.doc.resolve(a),1)),t(l.scrollIntoView())}return!0},fD=(n,t)=>{let e=n.selection,{$from:i,$to:r}=e;if(e instanceof un||i.parent.inlineContent||r.parent.inlineContent)return!1;let s=sy(r.parent.contentMatchAt(r.indexAfter()));if(!s||!s.isTextblock)return!1;if(t){let o=(!i.parentOffset&&r.index()<r.parent.childCount?i:r).pos,a=n.tr.insert(o,s.createAndFill());a.setSelection(Pt.create(a.doc,o+1)),t(a.scrollIntoView())}return!0},dD=(n,t)=>{let{$cursor:e}=n.selection;if(!e||e.parent.content.size)return!1;if(e.depth>1&&e.after()!=e.end(-1)){let s=e.before();if(Sr(n.doc,s))return t&&t(n.tr.split(s).scrollIntoView()),!0}let i=e.blockRange(),r=i&&Xr(i);return r==null?!1:(t&&t(n.tr.lift(i,r).scrollIntoView()),!0)},pD=(n,t)=>{let{$from:e,to:i}=n.selection,r,s=e.sharedDepth(i);return s==0?!1:(r=e.before(s),t&&t(n.tr.setSelection(Mt.create(n.doc,r))),!0)};function gD(n,t,e){let i=t.nodeBefore,r=t.nodeAfter,s=t.index();return!i||!r||!i.type.compatibleContent(r.type)?!1:!i.content.size&&t.parent.canReplace(s-1,s)?(e&&e(n.tr.delete(t.pos-i.nodeSize,t.pos).scrollIntoView()),!0):!t.parent.canReplace(s,s+1)||!(r.isTextblock||_i(n.doc,t.pos))?!1:(e&&e(n.tr.clearIncompatible(t.pos,i.type,i.contentMatchAt(i.childCount)).join(t.pos).scrollIntoView()),!0)}function oy(n,t,e){let i=t.nodeBefore,r=t.nodeAfter,s,o;if(i.type.spec.isolating||r.type.spec.isolating)return!1;if(gD(n,t,e))return!0;let a=t.parent.canReplace(t.index(),t.index()+1);if(a&&(s=(o=i.contentMatchAt(i.childCount)).findWrapping(r.type))&&o.matchType(s[0]||r.type).validEnd){if(e){let h=t.pos+r.nodeSize,f=et.empty;for(let b=s.length-1;b>=0;b--)f=et.from(s[b].create(null,f));f=et.from(i.copy(f));let d=n.tr.step(new we(t.pos-1,h,t.pos,h,new ht(f,1,0),s.length,!0)),g=h+2*s.length;_i(d.doc,g)&&d.join(g),e(d.scrollIntoView())}return!0}let l=$t.findFrom(t,1),c=l&&l.$from.blockRange(l.$to),u=c&&Xr(c);if(u!=null&&u>=t.depth)return e&&e(n.tr.lift(c,u).scrollIntoView()),!0;if(a&&Nr(r,"start",!0)&&Nr(i,"end")){let h=i,f=[];for(;f.push(h),!h.isTextblock;)h=h.lastChild;let d=r,g=1;for(;!d.isTextblock;d=d.firstChild)g++;if(h.canReplace(h.childCount,h.childCount,d.content)){if(e){let b=et.empty;for(let O=f.length-1;O>=0;O--)b=et.from(f[O].copy(b));let k=n.tr.step(new we(t.pos-f.length,t.pos+r.nodeSize,t.pos+g,t.pos+r.nodeSize-g,new ht(b,f.length,0),0,!0));e(k.scrollIntoView())}return!0}}return!1}function ay(n){return function(t,e){let i=t.selection,r=n<0?i.$from:i.$to,s=r.depth;for(;r.node(s).isInline;){if(!s)return!1;s--}return r.node(s).isTextblock?(e&&e(t.tr.setSelection(Pt.create(t.doc,n<0?r.start(s):r.end(s)))),!0):!1}}const mD=ay(-1),yD=ay(1);function bD(n,t=null){return function(e,i){let{$from:r,$to:s}=e.selection,o=r.blockRange(s),a=o&&Wu(o,n,t);return a?(i&&i(e.tr.wrap(o,a).scrollIntoView()),!0):!1}}function Ud(n,t=null){return function(e,i){let r=!1;for(let s=0;s<e.selection.ranges.length&&!r;s++){let{$from:{pos:o},$to:{pos:a}}=e.selection.ranges[s];e.doc.nodesBetween(o,a,(l,c)=>{if(r)return!1;if(!(!l.isTextblock||l.hasMarkup(n,t)))if(l.type==n)r=!0;else{let u=e.doc.resolve(c),h=u.index();r=u.parent.canReplaceWith(h,h+1,n)}})}if(!r)return!1;if(i){let s=e.tr;for(let o=0;o<e.selection.ranges.length;o++){let{$from:{pos:a},$to:{pos:l}}=e.selection.ranges[o];s.setBlockType(a,l,n,t)}i(s.scrollIntoView())}return!0}}typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function vD(n,t=null){return function(e,i){let{$from:r,$to:s}=e.selection,o=r.blockRange(s),a=!1,l=o;if(!o)return!1;if(o.depth>=2&&r.node(o.depth-1).type.compatibleContent(n)&&o.startIndex==0){if(r.index(o.depth-1)==0)return!1;let u=e.doc.resolve(o.start-2);l=new Qo(u,u,o.depth),o.endIndex<o.parent.childCount&&(o=new Qo(r,e.doc.resolve(s.end(o.depth)),o.depth)),a=!0}let c=Wu(l,n,t,o);return c?(i&&i(xD(e.tr,o,c,a,n).scrollIntoView()),!0):!1}}function xD(n,t,e,i,r){let s=et.empty;for(let u=e.length-1;u>=0;u--)s=et.from(e[u].type.create(e[u].attrs,s));n.step(new we(t.start-(i?2:0),t.end,t.start,t.end,new ht(s,0,0),e.length,!0));let o=0;for(let u=0;u<e.length;u++)e[u].type==r&&(o=u+1);let a=e.length-o,l=t.start+e.length-(i?2:0),c=t.parent;for(let u=t.startIndex,h=t.endIndex,f=!0;u<h;u++,f=!1)!f&&Sr(n.doc,l,a)&&(n.split(l,a),l+=2*a),l+=c.child(u).nodeSize;return n}function wD(n){return function(t,e){let{$from:i,$to:r}=t.selection,s=i.blockRange(r,o=>o.childCount>0&&o.firstChild.type==n);return s?e?i.node(s.depth-1).type==n?_D(t,e,n,s):SD(t,e,s):!0:!1}}function _D(n,t,e,i){let r=n.tr,s=i.end,o=i.$to.end(i.depth);s<o&&(r.step(new we(s-1,o,s,o,new ht(et.from(e.create(null,i.parent.copy())),1,0),1,!0)),i=new Qo(r.doc.resolve(i.$from.pos),r.doc.resolve(o),i.depth));const a=Xr(i);if(a==null)return!1;r.lift(i,a);let l=r.mapping.map(s,-1)-1;return _i(r.doc,l)&&r.join(l),t(r.scrollIntoView()),!0}function SD(n,t,e){let i=n.tr,r=e.parent;for(let d=e.end,g=e.endIndex-1,b=e.startIndex;g>b;g--)d-=r.child(g).nodeSize,i.delete(d-1,d+1);let s=i.doc.resolve(e.start),o=s.nodeAfter;if(i.mapping.map(e.end)!=e.start+s.nodeAfter.nodeSize)return!1;let a=e.startIndex==0,l=e.endIndex==r.childCount,c=s.node(-1),u=s.index(-1);if(!c.canReplace(u+(a?0:1),u+1,o.content.append(l?et.empty:et.from(r))))return!1;let h=s.pos,f=h+o.nodeSize;return i.step(new we(h-(a?1:0),f+(l?1:0),h+1,f-1,new ht((a?et.empty:et.from(r.copy(et.empty))).append(l?et.empty:et.from(r.copy(et.empty))),a?0:1,l?0:1),a?0:1)),t(i.scrollIntoView()),!0}function kD(n){return function(t,e){let{$from:i,$to:r}=t.selection,s=i.blockRange(r,c=>c.childCount>0&&c.firstChild.type==n);if(!s)return!1;let o=s.startIndex;if(o==0)return!1;let a=s.parent,l=a.child(o-1);if(l.type!=n)return!1;if(e){let c=l.lastChild&&l.lastChild.type==a.type,u=et.from(c?n.create():null),h=new ht(et.from(n.create(null,et.from(a.type.create(null,u)))),c?3:1,0),f=s.start,d=s.end;e(t.tr.step(new we(f-(c?3:1),d,f,d,h,1,!0)).scrollIntoView())}return!0}}function rl(n){const{state:t,transaction:e}=n;let{selection:i}=e,{doc:r}=e,{storedMarks:s}=e;return{...t,apply:t.apply.bind(t),applyTransaction:t.applyTransaction.bind(t),filterTransaction:t.filterTransaction,plugins:t.plugins,schema:t.schema,reconfigure:t.reconfigure.bind(t),toJSON:t.toJSON.bind(t),get storedMarks(){return s},get selection(){return i},get doc(){return r},get tr(){return i=e.selection,r=e.doc,s=e.storedMarks,e}}}class sl{constructor(t){this.editor=t.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=t.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:t,editor:e,state:i}=this,{view:r}=e,{tr:s}=i,o=this.buildProps(s);return Object.fromEntries(Object.entries(t).map(([a,l])=>[a,(...u)=>{const h=l(...u)(o);return!s.getMeta("preventDispatch")&&!this.hasCustomState&&r.dispatch(s),h}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(t,e=!0){const{rawCommands:i,editor:r,state:s}=this,{view:o}=r,a=[],l=!!t,c=t||s.tr,u=()=>(!l&&e&&!c.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(c),a.every(f=>f===!0)),h={...Object.fromEntries(Object.entries(i).map(([f,d])=>[f,(...b)=>{const k=this.buildProps(c,e),O=d(...b)(k);return a.push(O),h}])),run:u};return h}createCan(t){const{rawCommands:e,state:i}=this,r=!1,s=t||i.tr,o=this.buildProps(s,r);return{...Object.fromEntries(Object.entries(e).map(([l,c])=>[l,(...u)=>c(...u)({...o,dispatch:void 0})])),chain:()=>this.createChain(s,r)}}buildProps(t,e=!0){const{rawCommands:i,editor:r,state:s}=this,{view:o}=r;s.storedMarks&&t.setStoredMarks(s.storedMarks);const a={tr:t,editor:r,view:o,state:rl({state:s,transaction:t}),dispatch:e?()=>{}:void 0,chain:()=>this.createChain(t),can:()=>this.createCan(t),get commands(){return Object.fromEntries(Object.entries(i).map(([l,c])=>[l,(...u)=>c(...u)(a)]))}};return a}}class MD{constructor(){this.callbacks={}}on(t,e){return this.callbacks[t]||(this.callbacks[t]=[]),this.callbacks[t].push(e),this}emit(t,...e){const i=this.callbacks[t];return i&&i.forEach(r=>r.apply(this,e)),this}off(t,e){const i=this.callbacks[t];return i&&(e?this.callbacks[t]=i.filter(r=>r!==e):delete this.callbacks[t]),this}removeAllListeners(){this.callbacks={}}}function dt(n,t,e){return n.config[t]===void 0&&n.parent?dt(n.parent,t,e):typeof n.config[t]=="function"?n.config[t].bind({...e,parent:n.parent?dt(n.parent,t,e):null}):n.config[t]}function ol(n){const t=n.filter(r=>r.type==="extension"),e=n.filter(r=>r.type==="node"),i=n.filter(r=>r.type==="mark");return{baseExtensions:t,nodeExtensions:e,markExtensions:i}}function ly(n){const t=[],{nodeExtensions:e,markExtensions:i}=ol(n),r=[...e,...i],s={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return n.forEach(o=>{const a={name:o.name,options:o.options,storage:o.storage},l=dt(o,"addGlobalAttributes",a);if(!l)return;l().forEach(u=>{u.types.forEach(h=>{Object.entries(u.attributes).forEach(([f,d])=>{t.push({type:h,name:f,attribute:{...s,...d}})})})})}),r.forEach(o=>{const a={name:o.name,options:o.options,storage:o.storage},l=dt(o,"addAttributes",a);if(!l)return;const c=l();Object.entries(c).forEach(([u,h])=>{const f={...s,...h};h?.isRequired&&h?.default===void 0&&delete f.default,t.push({type:o.name,name:u,attribute:f})})}),t}function _e(n,t){if(typeof n=="string"){if(!t.nodes[n])throw Error(`There is no node type named '${n}'. Maybe you forgot to add the extension?`);return t.nodes[n]}return n}function ce(...n){return n.filter(t=>!!t).reduce((t,e)=>{const i={...t};return Object.entries(e).forEach(([r,s])=>{if(!i[r]){i[r]=s;return}r==="class"?i[r]=[i[r],s].join(" "):r==="style"?i[r]=[i[r],s].join("; "):i[r]=s}),i},{})}function tu(n,t){return t.filter(e=>e.attribute.rendered).map(e=>e.attribute.renderHTML?e.attribute.renderHTML(n.attrs)||{}:{[e.name]:n.attrs[e.name]}).reduce((e,i)=>ce(e,i),{})}function cy(n){return typeof n=="function"}function Et(n,t=void 0,...e){return cy(n)?t?n.bind(t)(...e):n(...e):n}function CD(n={}){return Object.keys(n).length===0&&n.constructor===Object}function OD(n){return typeof n!="string"?n:n.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(n):n==="true"?!0:n==="false"?!1:n}function qd(n,t){return n.style?n:{...n,getAttrs:e=>{const i=n.getAttrs?n.getAttrs(e):n.attrs;if(i===!1)return!1;const r=t.reduce((s,o)=>{const a=o.attribute.parseHTML?o.attribute.parseHTML(e):OD(e.getAttribute(o.name));return a==null?s:{...s,[o.name]:a}},{});return{...i,...r}}}}function Wd(n){return Object.fromEntries(Object.entries(n).filter(([t,e])=>t==="attrs"&&CD(e)?!1:e!=null))}function AD(n){var t;const e=ly(n),{nodeExtensions:i,markExtensions:r}=ol(n),s=(t=i.find(l=>dt(l,"topNode")))===null||t===void 0?void 0:t.name,o=Object.fromEntries(i.map(l=>{const c=e.filter(k=>k.type===l.name),u={name:l.name,options:l.options,storage:l.storage},h=n.reduce((k,O)=>{const D=dt(O,"extendNodeSchema",u);return{...k,...D?D(l):{}}},{}),f=Wd({...h,content:Et(dt(l,"content",u)),marks:Et(dt(l,"marks",u)),group:Et(dt(l,"group",u)),inline:Et(dt(l,"inline",u)),atom:Et(dt(l,"atom",u)),selectable:Et(dt(l,"selectable",u)),draggable:Et(dt(l,"draggable",u)),code:Et(dt(l,"code",u)),defining:Et(dt(l,"defining",u)),isolating:Et(dt(l,"isolating",u)),attrs:Object.fromEntries(c.map(k=>{var O;return[k.name,{default:(O=k?.attribute)===null||O===void 0?void 0:O.default}]}))}),d=Et(dt(l,"parseHTML",u));d&&(f.parseDOM=d.map(k=>qd(k,c)));const g=dt(l,"renderHTML",u);g&&(f.toDOM=k=>g({node:k,HTMLAttributes:tu(k,c)}));const b=dt(l,"renderText",u);return b&&(f.toText=b),[l.name,f]})),a=Object.fromEntries(r.map(l=>{const c=e.filter(b=>b.type===l.name),u={name:l.name,options:l.options,storage:l.storage},h=n.reduce((b,k)=>{const O=dt(k,"extendMarkSchema",u);return{...b,...O?O(l):{}}},{}),f=Wd({...h,inclusive:Et(dt(l,"inclusive",u)),excludes:Et(dt(l,"excludes",u)),group:Et(dt(l,"group",u)),spanning:Et(dt(l,"spanning",u)),code:Et(dt(l,"code",u)),attrs:Object.fromEntries(c.map(b=>{var k;return[b.name,{default:(k=b?.attribute)===null||k===void 0?void 0:k.default}]}))}),d=Et(dt(l,"parseHTML",u));d&&(f.parseDOM=d.map(b=>qd(b,c)));const g=dt(l,"renderHTML",u);return g&&(f.toDOM=b=>g({mark:b,HTMLAttributes:tu(b,c)})),[l.name,f]}));return new jE({topNode:s,nodes:o,marks:a})}function Zl(n,t){return t.nodes[n]||t.marks[n]||null}function Kd(n,t){return Array.isArray(t)?t.some(e=>(typeof e=="string"?e:e.name)===n.name):t}const TD=(n,t=500)=>{let e="";const i=n.parentOffset;return n.parent.nodesBetween(Math.max(0,i-t),i,(r,s,o,a)=>{var l,c;const u=((c=(l=r.type.spec).toText)===null||c===void 0?void 0:c.call(l,{node:r,pos:s,parent:o,index:a}))||r.textContent||"%leaf%";e+=u.slice(0,Math.max(0,i-s))}),e};function rh(n){return Object.prototype.toString.call(n)==="[object RegExp]"}class al{constructor(t){this.find=t.find,this.handler=t.handler}}const ED=(n,t)=>{if(rh(t))return t.exec(n);const e=t(n);if(!e)return null;const i=[e.text];return i.index=e.index,i.input=n,i.data=e.data,e.replaceWith&&(e.text.includes(e.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),i.push(e.replaceWith)),i};function tc(n){var t;const{editor:e,from:i,to:r,text:s,rules:o,plugin:a}=n,{view:l}=e;if(l.composing)return!1;const c=l.state.doc.resolve(i);if(c.parent.type.spec.code||!((t=c.nodeBefore||c.nodeAfter)===null||t===void 0)&&t.marks.find(f=>f.type.spec.code))return!1;let u=!1;const h=TD(c)+s;return o.forEach(f=>{if(u)return;const d=ED(h,f.find);if(!d)return;const g=l.state.tr,b=rl({state:l.state,transaction:g}),k={from:i-(d[0].length-s.length),to:r},{commands:O,chain:D,can:F}=new sl({editor:e,state:b});f.handler({state:b,range:k,match:d,commands:O,chain:D,can:F})===null||!g.steps.length||(g.setMeta(a,{transform:g,from:i,to:r,text:s}),l.dispatch(g),u=!0)}),u}function $D(n){const{editor:t,rules:e}=n,i=new je({state:{init(){return null},apply(r,s){const o=r.getMeta(i);return o||(r.selectionSet||r.docChanged?null:s)}},props:{handleTextInput(r,s,o,a){return tc({editor:t,from:s,to:o,text:a,rules:e,plugin:i})},handleDOMEvents:{compositionend:r=>(setTimeout(()=>{const{$cursor:s}=r.state.selection;s&&tc({editor:t,from:s.pos,to:s.pos,text:"",rules:e,plugin:i})}),!1)},handleKeyDown(r,s){if(s.key!=="Enter")return!1;const{$cursor:o}=r.state.selection;return o?tc({editor:t,from:o.pos,to:o.pos,text:`
`,rules:e,plugin:i}):!1}},isInputRules:!0});return i}function PD(n){return typeof n=="number"}class DD{constructor(t){this.find=t.find,this.handler=t.handler}}const ID=(n,t)=>{if(rh(t))return[...n.matchAll(t)];const e=t(n);return e?e.map(i=>{const r=[i.text];return r.index=i.index,r.input=n,r.data=i.data,i.replaceWith&&(i.text.includes(i.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),r.push(i.replaceWith)),r}):[]};function ND(n){const{editor:t,state:e,from:i,to:r,rule:s}=n,{commands:o,chain:a,can:l}=new sl({editor:t,state:e}),c=[];return e.doc.nodesBetween(i,r,(h,f)=>{if(!h.isTextblock||h.type.spec.code)return;const d=Math.max(i,f),g=Math.min(r,f+h.content.size),b=h.textBetween(d-f,g-f,void 0,"");ID(b,s.find).forEach(O=>{if(O.index===void 0)return;const D=d+O.index+1,F=D+O[0].length,W={from:e.tr.mapping.map(D),to:e.tr.mapping.map(F)},V=s.handler({state:e,range:W,match:O,commands:o,chain:a,can:l});c.push(V)})}),c.every(h=>h!==null)}function LD(n){const{editor:t,rules:e}=n;let i=null,r=!1,s=!1;return e.map(a=>new je({view(l){const c=u=>{var h;i=!((h=l.dom.parentElement)===null||h===void 0)&&h.contains(u.target)?l.dom.parentElement:null};return window.addEventListener("dragstart",c),{destroy(){window.removeEventListener("dragstart",c)}}},props:{handleDOMEvents:{drop:l=>(s=i===l.dom.parentElement,!1),paste:(l,c)=>{var u;const h=(u=c.clipboardData)===null||u===void 0?void 0:u.getData("text/html");return r=!!h?.includes("data-pm-slice"),!1}}},appendTransaction:(l,c,u)=>{const h=l[0],f=h.getMeta("uiEvent")==="paste"&&!r,d=h.getMeta("uiEvent")==="drop"&&!s;if(!f&&!d)return;const g=c.doc.content.findDiffStart(u.doc.content),b=c.doc.content.findDiffEnd(u.doc.content);if(!PD(g)||!b||g===b.b)return;const k=u.tr,O=rl({state:u,transaction:k});if(!(!ND({editor:t,state:O,from:Math.max(g-1,0),to:b.b-1,rule:a})||!k.steps.length))return k}}))}function RD(n){const t=n.filter((e,i)=>n.indexOf(e)!==i);return[...new Set(t)]}class mr{constructor(t,e){this.splittableMarks=[],this.editor=e,this.extensions=mr.resolve(t),this.schema=AD(this.extensions),this.extensions.forEach(i=>{var r;this.editor.extensionStorage[i.name]=i.storage;const s={name:i.name,options:i.options,storage:i.storage,editor:this.editor,type:Zl(i.name,this.schema)};i.type==="mark"&&(!((r=Et(dt(i,"keepOnSplit",s)))!==null&&r!==void 0)||r)&&this.splittableMarks.push(i.name);const o=dt(i,"onBeforeCreate",s);o&&this.editor.on("beforeCreate",o);const a=dt(i,"onCreate",s);a&&this.editor.on("create",a);const l=dt(i,"onUpdate",s);l&&this.editor.on("update",l);const c=dt(i,"onSelectionUpdate",s);c&&this.editor.on("selectionUpdate",c);const u=dt(i,"onTransaction",s);u&&this.editor.on("transaction",u);const h=dt(i,"onFocus",s);h&&this.editor.on("focus",h);const f=dt(i,"onBlur",s);f&&this.editor.on("blur",f);const d=dt(i,"onDestroy",s);d&&this.editor.on("destroy",d)})}static resolve(t){const e=mr.sort(mr.flatten(t)),i=RD(e.map(r=>r.name));return i.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${i.map(r=>`'${r}'`).join(", ")}]. This can lead to issues.`),e}static flatten(t){return t.map(e=>{const i={name:e.name,options:e.options,storage:e.storage},r=dt(e,"addExtensions",i);return r?[e,...this.flatten(r())]:e}).flat(10)}static sort(t){return t.sort((i,r)=>{const s=dt(i,"priority")||100,o=dt(r,"priority")||100;return s>o?-1:s<o?1:0})}get commands(){return this.extensions.reduce((t,e)=>{const i={name:e.name,options:e.options,storage:e.storage,editor:this.editor,type:Zl(e.name,this.schema)},r=dt(e,"addCommands",i);return r?{...t,...r()}:t},{})}get plugins(){const{editor:t}=this,e=mr.sort([...this.extensions].reverse()),i=[],r=[],s=e.map(o=>{const a={name:o.name,options:o.options,storage:o.storage,editor:t,type:Zl(o.name,this.schema)},l=[],c=dt(o,"addKeyboardShortcuts",a);let u={};if(o.type==="mark"&&o.config.exitable&&(u.ArrowRight=()=>on.handleExit({editor:t,mark:o})),c){const b=Object.fromEntries(Object.entries(c()).map(([k,O])=>[k,()=>O({editor:t})]));u={...u,...b}}const h=ZP(u);l.push(h);const f=dt(o,"addInputRules",a);Kd(o,t.options.enableInputRules)&&f&&i.push(...f());const d=dt(o,"addPasteRules",a);Kd(o,t.options.enablePasteRules)&&d&&r.push(...d());const g=dt(o,"addProseMirrorPlugins",a);if(g){const b=g();l.push(...b)}return l}).flat();return[$D({editor:t,rules:i}),...LD({editor:t,rules:r}),...s]}get attributes(){return ly(this.extensions)}get nodeViews(){const{editor:t}=this,{nodeExtensions:e}=ol(this.extensions);return Object.fromEntries(e.filter(i=>!!dt(i,"addNodeView")).map(i=>{const r=this.attributes.filter(l=>l.type===i.name),s={name:i.name,options:i.options,storage:i.storage,editor:t,type:_e(i.name,this.schema)},o=dt(i,"addNodeView",s);if(!o)return[];const a=(l,c,u,h)=>{const f=tu(l,r);return o()({editor:t,node:l,getPos:u,decorations:h,HTMLAttributes:f,extension:i})};return[i.name,a]}))}}function zD(n){return Object.prototype.toString.call(n).slice(8,-1)}function ec(n){return zD(n)!=="Object"?!1:n.constructor===Object&&Object.getPrototypeOf(n)===Object.prototype}function ll(n,t){const e={...n};return ec(n)&&ec(t)&&Object.keys(t).forEach(i=>{ec(t[i])?i in n?e[i]=ll(n[i],t[i]):Object.assign(e,{[i]:t[i]}):Object.assign(e,{[i]:t[i]})}),e}class Ze{constructor(t={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...t},this.name=this.config.name,t.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Et(dt(this,"addOptions",{name:this.name}))),this.storage=Et(dt(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(t={}){return new Ze(t)}configure(t={}){const e=this.extend();return e.options=ll(this.options,t),e.storage=Et(dt(e,"addStorage",{name:e.name,options:e.options})),e}extend(t={}){const e=new Ze(t);return e.parent=this,this.child=e,e.name=t.name?t.name:e.parent.name,t.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${e.name}".`),e.options=Et(dt(e,"addOptions",{name:e.name})),e.storage=Et(dt(e,"addStorage",{name:e.name,options:e.options})),e}}function uy(n,t,e){const{from:i,to:r}=t,{blockSeparator:s=`

`,textSerializers:o={}}=e||{};let a="",l=!0;return n.nodesBetween(i,r,(c,u,h,f)=>{var d;const g=o?.[c.type.name];g?(c.isBlock&&!l&&(a+=s,l=!0),h&&(a+=g({node:c,pos:u,parent:h,index:f,range:t}))):c.isText?(a+=(d=c?.text)===null||d===void 0?void 0:d.slice(Math.max(i,u)-u,r-u),l=!1):c.isBlock&&!l&&(a+=s,l=!0)}),a}function hy(n){return Object.fromEntries(Object.entries(n.nodes).filter(([,t])=>t.spec.toText).map(([t,e])=>[t,e.spec.toText]))}const BD=Ze.create({name:"clipboardTextSerializer",addProseMirrorPlugins(){return[new je({key:new gn("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:n}=this,{state:t,schema:e}=n,{doc:i,selection:r}=t,{ranges:s}=r,o=Math.min(...s.map(u=>u.$from.pos)),a=Math.max(...s.map(u=>u.$to.pos)),l=hy(e);return uy(i,{from:o,to:a},{textSerializers:l})}}})]}}),FD=()=>({editor:n,view:t})=>(requestAnimationFrame(()=>{var e;n.isDestroyed||(t.dom.blur(),(e=window?.getSelection())===null||e===void 0||e.removeAllRanges())}),!0),jD=(n=!1)=>({commands:t})=>t.setContent("",n),VD=()=>({state:n,tr:t,dispatch:e})=>{const{selection:i}=t,{ranges:r}=i;return e&&r.forEach(({$from:s,$to:o})=>{n.doc.nodesBetween(s.pos,o.pos,(a,l)=>{if(a.type.isText)return;const{doc:c,mapping:u}=t,h=c.resolve(u.map(l)),f=c.resolve(u.map(l+a.nodeSize)),d=h.blockRange(f);if(!d)return;const g=Xr(d);if(a.type.isTextblock){const{defaultType:b}=h.parent.contentMatchAt(h.index());t.setNodeMarkup(d.start,b)}(g||g===0)&&t.lift(d,g)})}),!0},HD=n=>t=>n(t),UD=()=>({state:n,dispatch:t})=>fD(n,t),qD=()=>({tr:n,dispatch:t})=>{const{selection:e}=n,i=e.$anchor.node();if(i.content.size>0)return!1;const r=n.selection.$anchor;for(let s=r.depth;s>0;s-=1)if(r.node(s).type===i.type){if(t){const a=r.before(s),l=r.after(s);n.delete(a,l).scrollIntoView()}return!0}return!1},WD=n=>({tr:t,state:e,dispatch:i})=>{const r=_e(n,e.schema),s=t.selection.$anchor;for(let o=s.depth;o>0;o-=1)if(s.node(o).type===r){if(i){const l=s.before(o),c=s.after(o);t.delete(l,c).scrollIntoView()}return!0}return!1},KD=n=>({tr:t,dispatch:e})=>{const{from:i,to:r}=n;return e&&t.delete(i,r),!0},JD=()=>({state:n,dispatch:t})=>tD(n,t),GD=()=>({commands:n})=>n.keyboardShortcut("Enter"),YD=()=>({state:n,dispatch:t})=>hD(n,t);function oa(n,t,e={strict:!0}){const i=Object.keys(t);return i.length?i.every(r=>e.strict?t[r]===n[r]:rh(t[r])?t[r].test(n[r]):t[r]===n[r]):!0}function eu(n,t,e={}){return n.find(i=>i.type===t&&oa(i.attrs,e))}function XD(n,t,e={}){return!!eu(n,t,e)}function sh(n,t,e={}){if(!n||!t)return;let i=n.parent.childAfter(n.parentOffset);if(n.parentOffset===i.offset&&i.offset!==0&&(i=n.parent.childBefore(n.parentOffset)),!i.node)return;const r=eu([...i.node.marks],t,e);if(!r)return;let s=i.index,o=n.start()+i.offset,a=s+1,l=o+i.node.nodeSize;for(eu([...i.node.marks],t,e);s>0&&r.isInSet(n.parent.child(s-1).marks);)s-=1,o-=n.parent.child(s).nodeSize;for(;a<n.parent.childCount&&XD([...n.parent.child(a).marks],t,e);)l+=n.parent.child(a).nodeSize,a+=1;return{from:o,to:l}}function ki(n,t){if(typeof n=="string"){if(!t.marks[n])throw Error(`There is no mark type named '${n}'. Maybe you forgot to add the extension?`);return t.marks[n]}return n}const QD=(n,t={})=>({tr:e,state:i,dispatch:r})=>{const s=ki(n,i.schema),{doc:o,selection:a}=e,{$from:l,from:c,to:u}=a;if(r){const h=sh(l,s,t);if(h&&h.from<=c&&h.to>=u){const f=Pt.create(o,h.from,h.to);e.setSelection(f)}}return!0},ZD=n=>t=>{const e=typeof n=="function"?n(t):n;for(let i=0;i<e.length;i+=1)if(e[i](t))return!0;return!1};function fy(n){return n instanceof Pt}function zi(n=0,t=0,e=0){return Math.min(Math.max(n,t),e)}function dy(n,t=null){if(!t)return null;const e=$t.atStart(n),i=$t.atEnd(n);if(t==="start"||t===!0)return e;if(t==="end")return i;const r=e.from,s=i.to;return t==="all"?Pt.create(n,zi(0,r,s),zi(n.content.size,r,s)):Pt.create(n,zi(t,r,s),zi(t,r,s))}function oh(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const tI=(n=null,t={})=>({editor:e,view:i,tr:r,dispatch:s})=>{t={scrollIntoView:!0,...t};const o=()=>{oh()&&i.dom.focus(),requestAnimationFrame(()=>{e.isDestroyed||(i.focus(),t?.scrollIntoView&&e.commands.scrollIntoView())})};if(i.hasFocus()&&n===null||n===!1)return!0;if(s&&n===null&&!fy(e.state.selection))return o(),!0;const a=dy(r.doc,n)||e.state.selection,l=e.state.selection.eq(a);return s&&(l||r.setSelection(a),l&&r.storedMarks&&r.setStoredMarks(r.storedMarks),o()),!0},eI=(n,t)=>e=>n.every((i,r)=>t(i,{...e,index:r})),nI=(n,t)=>({tr:e,commands:i})=>i.insertContentAt({from:e.selection.from,to:e.selection.to},n,t);function Jd(n){const t=`<body>${n}</body>`;return new window.DOMParser().parseFromString(t,"text/html").body}function aa(n,t,e){if(e={slice:!0,parseOptions:{},...e},typeof n=="object"&&n!==null)try{return Array.isArray(n)&&n.length>0?et.fromArray(n.map(i=>t.nodeFromJSON(i))):t.nodeFromJSON(n)}catch(i){return console.warn("[tiptap warn]: Invalid content.","Passed value:",n,"Error:",i),aa("",t,e)}if(typeof n=="string"){const i=Er.fromSchema(t);return e.slice?i.parseSlice(Jd(n),e.parseOptions).content:i.parse(Jd(n),e.parseOptions)}return aa("",t,e)}function iI(n,t,e){const i=n.steps.length-1;if(i<t)return;const r=n.steps[i];if(!(r instanceof Pe||r instanceof we))return;const s=n.mapping.maps[i];let o=0;s.forEach((a,l,c,u)=>{o===0&&(o=u)}),n.setSelection($t.near(n.doc.resolve(o),e))}const rI=n=>n.toString().startsWith("<"),sI=(n,t,e)=>({tr:i,dispatch:r,editor:s})=>{if(r){e={parseOptions:{},updateSelection:!0,...e};const o=aa(t,s.schema,{parseOptions:{preserveWhitespace:"full",...e.parseOptions}});if(o.toString()==="<>")return!0;let{from:a,to:l}=typeof n=="number"?{from:n,to:n}:n,c=!0,u=!0;if((rI(o)?o:[o]).forEach(f=>{f.check(),c=c?f.isText&&f.marks.length===0:!1,u=u?f.isBlock:!1}),a===l&&u){const{parent:f}=i.doc.resolve(a);f.isTextblock&&!f.type.spec.code&&!f.childCount&&(a-=1,l+=1)}c?Array.isArray(t)?i.insertText(t.map(f=>f.text||"").join(""),a,l):typeof t=="object"&&t&&t.text?i.insertText(t.text,a,l):i.insertText(t,a,l):i.replaceWith(a,l,o),e.updateSelection&&iI(i,i.steps.length-1,-1)}return!0},oI=()=>({state:n,dispatch:t})=>aD(n,t),aI=()=>({state:n,dispatch:t})=>lD(n,t),lI=()=>({state:n,dispatch:t})=>nD(n,t),cI=()=>({state:n,dispatch:t})=>sD(n,t);function py(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function uI(n){const t=n.split(/-(?!$)/);let e=t[t.length-1];e==="Space"&&(e=" ");let i,r,s,o;for(let a=0;a<t.length-1;a+=1){const l=t[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))i=!0;else if(/^(c|ctrl|control)$/i.test(l))r=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))oh()||py()?o=!0:r=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return i&&(e=`Alt-${e}`),r&&(e=`Ctrl-${e}`),o&&(e=`Meta-${e}`),s&&(e=`Shift-${e}`),e}const hI=n=>({editor:t,view:e,tr:i,dispatch:r})=>{const s=uI(n).split(/-(?!$)/),o=s.find(c=>!["Alt","Ctrl","Meta","Shift"].includes(c)),a=new KeyboardEvent("keydown",{key:o==="Space"?" ":o,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),l=t.captureTransaction(()=>{e.someProp("handleKeyDown",c=>c(e,a))});return l?.steps.forEach(c=>{const u=c.map(i.mapping);u&&r&&i.maybeStep(u)}),!0};function Ls(n,t,e={}){const{from:i,to:r,empty:s}=n.selection,o=t?_e(t,n.schema):null,a=[];n.doc.nodesBetween(i,r,(h,f)=>{if(h.isText)return;const d=Math.max(i,f),g=Math.min(r,f+h.nodeSize);a.push({node:h,from:d,to:g})});const l=r-i,c=a.filter(h=>o?o.name===h.node.type.name:!0).filter(h=>oa(h.node.attrs,e,{strict:!1}));return s?!!c.length:c.reduce((h,f)=>h+f.to-f.from,0)>=l}const fI=(n,t={})=>({state:e,dispatch:i})=>{const r=_e(n,e.schema);return Ls(e,r,t)?cD(e,i):!1},dI=()=>({state:n,dispatch:t})=>dD(n,t),pI=n=>({state:t,dispatch:e})=>{const i=_e(n,t.schema);return wD(i)(t,e)},gI=()=>({state:n,dispatch:t})=>uD(n,t);function cl(n,t){return t.nodes[n]?"node":t.marks[n]?"mark":null}function Gd(n,t){const e=typeof t=="string"?[t]:t;return Object.keys(n).reduce((i,r)=>(e.includes(r)||(i[r]=n[r]),i),{})}const mI=(n,t)=>({tr:e,state:i,dispatch:r})=>{let s=null,o=null;const a=cl(typeof n=="string"?n:n.name,i.schema);return a?(a==="node"&&(s=_e(n,i.schema)),a==="mark"&&(o=ki(n,i.schema)),r&&e.selection.ranges.forEach(l=>{i.doc.nodesBetween(l.$from.pos,l.$to.pos,(c,u)=>{s&&s===c.type&&e.setNodeMarkup(u,void 0,Gd(c.attrs,t)),o&&c.marks.length&&c.marks.forEach(h=>{o===h.type&&e.addMark(u,u+c.nodeSize,o.create(Gd(h.attrs,t)))})})}),!0):!1},yI=()=>({tr:n,dispatch:t})=>(t&&n.scrollIntoView(),!0),bI=()=>({tr:n,commands:t})=>t.setTextSelection({from:0,to:n.doc.content.size}),vI=()=>({state:n,dispatch:t})=>iD(n,t),xI=()=>({state:n,dispatch:t})=>oD(n,t),wI=()=>({state:n,dispatch:t})=>pD(n,t),_I=()=>({state:n,dispatch:t})=>yD(n,t),SI=()=>({state:n,dispatch:t})=>mD(n,t);function gy(n,t,e={}){return aa(n,t,{slice:!1,parseOptions:e})}const kI=(n,t=!1,e={})=>({tr:i,editor:r,dispatch:s})=>{const{doc:o}=i,a=gy(n,r.schema,e);return s&&i.replaceWith(0,o.content.size,a).setMeta("preventUpdate",!t),!0};function MI(n,t){const e=new _0(n);return t.forEach(i=>{i.steps.forEach(r=>{e.step(r)})}),e}function CI(n){for(let t=0;t<n.edgeCount;t+=1){const{type:e}=n.edge(t);if(e.isTextblock&&!e.hasRequiredAttrs())return e}return null}function OI(n,t,e){const i=[];return n.nodesBetween(t.from,t.to,(r,s)=>{e(r)&&i.push({node:r,pos:s})}),i}function AI(n,t){for(let e=n.depth;e>0;e-=1){const i=n.node(e);if(t(i))return{pos:e>0?n.before(e):0,start:n.start(e),depth:e,node:i}}}function ah(n){return t=>AI(t.$from,n)}function TI(n,t){const e=Sn.fromSchema(t).serializeFragment(n),r=document.implementation.createHTMLDocument().createElement("div");return r.appendChild(e),r.innerHTML}function EI(n,t){const e={from:0,to:n.content.size};return uy(n,e,t)}function ul(n,t){const e=ki(t,n.schema),{from:i,to:r,empty:s}=n.selection,o=[];s?(n.storedMarks&&o.push(...n.storedMarks),o.push(...n.selection.$head.marks())):n.doc.nodesBetween(i,r,l=>{o.push(...l.marks)});const a=o.find(l=>l.type.name===e.name);return a?{...a.attrs}:{}}function $I(n,t){const e=_e(t,n.schema),{from:i,to:r}=n.selection,s=[];n.doc.nodesBetween(i,r,a=>{s.push(a)});const o=s.reverse().find(a=>a.type.name===e.name);return o?{...o.attrs}:{}}function my(n,t){const e=cl(typeof t=="string"?t:t.name,n.schema);return e==="node"?$I(n,t):e==="mark"?ul(n,t):{}}function PI(n,t=JSON.stringify){const e={};return n.filter(i=>{const r=t(i);return Object.prototype.hasOwnProperty.call(e,r)?!1:e[r]=!0})}function DI(n){const t=PI(n);return t.length===1?t:t.filter((e,i)=>!t.filter((s,o)=>o!==i).some(s=>e.oldRange.from>=s.oldRange.from&&e.oldRange.to<=s.oldRange.to&&e.newRange.from>=s.newRange.from&&e.newRange.to<=s.newRange.to))}function II(n){const{mapping:t,steps:e}=n,i=[];return t.maps.forEach((r,s)=>{const o=[];if(r.ranges.length)r.forEach((a,l)=>{o.push({from:a,to:l})});else{const{from:a,to:l}=e[s];if(a===void 0||l===void 0)return;o.push({from:a,to:l})}o.forEach(({from:a,to:l})=>{const c=t.slice(s).map(a,-1),u=t.slice(s).map(l),h=t.invert().map(c,-1),f=t.invert().map(u);i.push({oldRange:{from:h,to:f},newRange:{from:c,to:u}})})}),DI(i)}function la(n,t,e){const i=[];return n===t?e.resolve(n).marks().forEach(r=>{const s=e.resolve(n-1),o=sh(s,r.type);o&&i.push({mark:r,...o})}):e.nodesBetween(n,t,(r,s)=>{i.push(...r.marks.map(o=>({from:s,to:s+r.nodeSize,mark:o})))}),i}function To(n,t,e){return Object.fromEntries(Object.entries(e).filter(([i])=>{const r=n.find(s=>s.type===t&&s.name===i);return r?r.attribute.keepOnSplit:!1}))}function nu(n,t,e={}){const{empty:i,ranges:r}=n.selection,s=t?ki(t,n.schema):null;if(i)return!!(n.storedMarks||n.selection.$from.marks()).filter(h=>s?s.name===h.type.name:!0).find(h=>oa(h.attrs,e,{strict:!1}));let o=0;const a=[];if(r.forEach(({$from:h,$to:f})=>{const d=h.pos,g=f.pos;n.doc.nodesBetween(d,g,(b,k)=>{if(!b.isText&&!b.marks.length)return;const O=Math.max(d,k),D=Math.min(g,k+b.nodeSize),F=D-O;o+=F,a.push(...b.marks.map(W=>({mark:W,from:O,to:D})))})}),o===0)return!1;const l=a.filter(h=>s?s.name===h.mark.type.name:!0).filter(h=>oa(h.mark.attrs,e,{strict:!1})).reduce((h,f)=>h+f.to-f.from,0),c=a.filter(h=>s?h.mark.type!==s&&h.mark.type.excludes(s):!0).reduce((h,f)=>h+f.to-f.from,0);return(l>0?l+c:l)>=o}function NI(n,t,e={}){if(!t)return Ls(n,null,e)||nu(n,null,e);const i=cl(t,n.schema);return i==="node"?Ls(n,t,e):i==="mark"?nu(n,t,e):!1}function Yd(n,t){const{nodeExtensions:e}=ol(t),i=e.find(o=>o.name===n);if(!i)return!1;const r={name:i.name,options:i.options,storage:i.storage},s=Et(dt(i,"group",r));return typeof s!="string"?!1:s.split(" ").includes("list")}function LI(n){var t;const e=(t=n.type.createAndFill())===null||t===void 0?void 0:t.toJSON(),i=n.toJSON();return JSON.stringify(e)===JSON.stringify(i)}function RI(n,t,e){var i;const{selection:r}=t;let s=null;if(fy(r)&&(s=r.$cursor),s){const a=(i=n.storedMarks)!==null&&i!==void 0?i:s.marks();return!!e.isInSet(a)||!a.some(l=>l.type.excludes(e))}const{ranges:o}=r;return o.some(({$from:a,$to:l})=>{let c=a.depth===0?n.doc.inlineContent&&n.doc.type.allowsMarkType(e):!1;return n.doc.nodesBetween(a.pos,l.pos,(u,h,f)=>{if(c)return!1;if(u.isInline){const d=!f||f.type.allowsMarkType(e),g=!!e.isInSet(u.marks)||!u.marks.some(b=>b.type.excludes(e));c=d&&g}return!c}),c})}const zI=(n,t={})=>({tr:e,state:i,dispatch:r})=>{const{selection:s}=e,{empty:o,ranges:a}=s,l=ki(n,i.schema);if(r)if(o){const c=ul(i,l);e.addStoredMark(l.create({...c,...t}))}else a.forEach(c=>{const u=c.$from.pos,h=c.$to.pos;i.doc.nodesBetween(u,h,(f,d)=>{const g=Math.max(d,u),b=Math.min(d+f.nodeSize,h);f.marks.find(O=>O.type===l)?f.marks.forEach(O=>{l===O.type&&e.addMark(g,b,l.create({...O.attrs,...t}))}):e.addMark(g,b,l.create(t))})});return RI(i,e,l)},BI=(n,t)=>({tr:e})=>(e.setMeta(n,t),!0),FI=(n,t={})=>({state:e,dispatch:i,chain:r})=>{const s=_e(n,e.schema);return s.isTextblock?r().command(({commands:o})=>Ud(s,t)(e)?!0:o.clearNodes()).command(({state:o})=>Ud(s,t)(o,i)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},jI=n=>({tr:t,dispatch:e})=>{if(e){const{doc:i}=t,r=zi(n,0,i.content.size),s=Mt.create(i,r);t.setSelection(s)}return!0},VI=n=>({tr:t,dispatch:e})=>{if(e){const{doc:i}=t,{from:r,to:s}=typeof n=="number"?{from:n,to:n}:n,o=Pt.atStart(i).from,a=Pt.atEnd(i).to,l=zi(r,o,a),c=zi(s,o,a),u=Pt.create(i,l,c);t.setSelection(u)}return!0},HI=n=>({state:t,dispatch:e})=>{const i=_e(n,t.schema);return kD(i)(t,e)};function Xd(n,t){const e=n.storedMarks||n.selection.$to.parentOffset&&n.selection.$from.marks();if(e){const i=e.filter(r=>t?.includes(r.type.name));n.tr.ensureMarks(i)}}const UI=({keepMarks:n=!0}={})=>({tr:t,state:e,dispatch:i,editor:r})=>{const{selection:s,doc:o}=t,{$from:a,$to:l}=s,c=r.extensionManager.attributes,u=To(c,a.node().type.name,a.node().attrs);if(s instanceof Mt&&s.node.isBlock)return!a.parentOffset||!Sr(o,a.pos)?!1:(i&&(n&&Xd(e,r.extensionManager.splittableMarks),t.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;if(i){const h=l.parentOffset===l.parent.content.size;s instanceof Pt&&t.deleteSelection();const f=a.depth===0?void 0:CI(a.node(-1).contentMatchAt(a.indexAfter(-1)));let d=h&&f?[{type:f,attrs:u}]:void 0,g=Sr(t.doc,t.mapping.map(a.pos),1,d);if(!d&&!g&&Sr(t.doc,t.mapping.map(a.pos),1,f?[{type:f}]:void 0)&&(g=!0,d=f?[{type:f,attrs:u}]:void 0),g&&(t.split(t.mapping.map(a.pos),1,d),f&&!h&&!a.parentOffset&&a.parent.type!==f)){const b=t.mapping.map(a.before()),k=t.doc.resolve(b);a.node(-1).canReplaceWith(k.index(),k.index()+1,f)&&t.setNodeMarkup(t.mapping.map(a.before()),f)}n&&Xd(e,r.extensionManager.splittableMarks),t.scrollIntoView()}return!0},qI=n=>({tr:t,state:e,dispatch:i,editor:r})=>{var s;const o=_e(n,e.schema),{$from:a,$to:l}=e.selection,c=e.selection.node;if(c&&c.isBlock||a.depth<2||!a.sameParent(l))return!1;const u=a.node(-1);if(u.type!==o)return!1;const h=r.extensionManager.attributes;if(a.parent.content.size===0&&a.node(-1).childCount===a.indexAfter(-1)){if(a.depth===2||a.node(-3).type!==o||a.index(-2)!==a.node(-2).childCount-1)return!1;if(i){let k=et.empty;const O=a.index(-1)?1:a.index(-2)?2:3;for(let L=a.depth-O;L>=a.depth-3;L-=1)k=et.from(a.node(L).copy(k));const D=a.indexAfter(-1)<a.node(-2).childCount?1:a.indexAfter(-2)<a.node(-3).childCount?2:3,F=To(h,a.node().type.name,a.node().attrs),W=((s=o.contentMatch.defaultType)===null||s===void 0?void 0:s.createAndFill(F))||void 0;k=k.append(et.from(o.createAndFill(null,W)||void 0));const V=a.before(a.depth-(O-1));t.replace(V,a.after(-D),new ht(k,4-O,0));let T=-1;t.doc.nodesBetween(V,t.doc.content.size,(L,R)=>{if(T>-1)return!1;L.isTextblock&&L.content.size===0&&(T=R+1)}),T>-1&&t.setSelection(Pt.near(t.doc.resolve(T))),t.scrollIntoView()}return!0}const f=l.pos===a.end()?u.contentMatchAt(0).defaultType:null,d=To(h,u.type.name,u.attrs),g=To(h,a.node().type.name,a.node().attrs);t.delete(a.pos,l.pos);const b=f?[{type:o,attrs:d},{type:f,attrs:g}]:[{type:o,attrs:d}];if(!Sr(t.doc,a.pos,2))return!1;if(i){const{selection:k,storedMarks:O}=e,{splittableMarks:D}=r.extensionManager,F=O||k.$to.parentOffset&&k.$from.marks();if(t.split(a.pos,2,b).scrollIntoView(),!F||!i)return!0;const W=F.filter(V=>D.includes(V.type.name));t.ensureMarks(W)}return!0},nc=(n,t)=>{const e=ah(o=>o.type===t)(n.selection);if(!e)return!0;const i=n.doc.resolve(Math.max(0,e.pos-1)).before(e.depth);if(i===void 0)return!0;const r=n.doc.nodeAt(i);return e.node.type===r?.type&&_i(n.doc,e.pos)&&n.join(e.pos),!0},ic=(n,t)=>{const e=ah(o=>o.type===t)(n.selection);if(!e)return!0;const i=n.doc.resolve(e.start).after(e.depth);if(i===void 0)return!0;const r=n.doc.nodeAt(i);return e.node.type===r?.type&&_i(n.doc,i)&&n.join(i),!0},WI=(n,t,e)=>({editor:i,tr:r,state:s,dispatch:o,chain:a,commands:l,can:c})=>{const{extensions:u,splittableMarks:h}=i.extensionManager,f=_e(n,s.schema),d=_e(t,s.schema),{selection:g,storedMarks:b}=s,{$from:k,$to:O}=g,D=k.blockRange(O),F=b||g.$to.parentOffset&&g.$from.marks();if(!D)return!1;const W=ah(V=>Yd(V.type.name,u))(g);if(D.depth>=1&&W&&D.depth-W.depth<=1){if(W.node.type===f)return l.liftListItem(d);if(Yd(W.node.type.name,u)&&f.validContent(W.node.content)&&o)return a().command(()=>(r.setNodeMarkup(W.pos,f),!0)).command(()=>nc(r,f)).command(()=>ic(r,f)).run()}return!e||!F||!o?a().command(()=>c().wrapInList(f)?!0:l.clearNodes()).wrapInList(f).command(()=>nc(r,f)).command(()=>ic(r,f)).run():a().command(()=>{const V=c().wrapInList(f),T=F.filter(L=>h.includes(L.type.name));return r.ensureMarks(T),V?!0:l.clearNodes()}).wrapInList(f).command(()=>nc(r,f)).command(()=>ic(r,f)).run()},KI=(n,t={},e={})=>({state:i,commands:r})=>{const{extendEmptyMarkRange:s=!1}=e,o=ki(n,i.schema);return nu(i,o,t)?r.unsetMark(o,{extendEmptyMarkRange:s}):r.setMark(o,t)},JI=(n,t,e={})=>({state:i,commands:r})=>{const s=_e(n,i.schema),o=_e(t,i.schema);return Ls(i,s,e)?r.setNode(o):r.setNode(s,e)},GI=(n,t={})=>({state:e,commands:i})=>{const r=_e(n,e.schema);return Ls(e,r,t)?i.lift(r):i.wrapIn(r,t)},YI=()=>({state:n,dispatch:t})=>{const e=n.plugins;for(let i=0;i<e.length;i+=1){const r=e[i];let s;if(r.spec.isInputRules&&(s=r.getState(n))){if(t){const o=n.tr,a=s.transform;for(let l=a.steps.length-1;l>=0;l-=1)o.step(a.steps[l].invert(a.docs[l]));if(s.text){const l=o.doc.resolve(s.from).marks();o.replaceWith(s.from,s.to,n.schema.text(s.text,l))}else o.delete(s.from,s.to)}return!0}}return!1},XI=()=>({tr:n,dispatch:t})=>{const{selection:e}=n,{empty:i,ranges:r}=e;return i||t&&r.forEach(s=>{n.removeMark(s.$from.pos,s.$to.pos)}),!0},QI=(n,t={})=>({tr:e,state:i,dispatch:r})=>{var s;const{extendEmptyMarkRange:o=!1}=t,{selection:a}=e,l=ki(n,i.schema),{$from:c,empty:u,ranges:h}=a;if(!r)return!0;if(u&&o){let{from:f,to:d}=a;const g=(s=c.marks().find(k=>k.type===l))===null||s===void 0?void 0:s.attrs,b=sh(c,l,g);b&&(f=b.from,d=b.to),e.removeMark(f,d,l)}else h.forEach(f=>{e.removeMark(f.$from.pos,f.$to.pos,l)});return e.removeStoredMark(l),!0},ZI=(n,t={})=>({tr:e,state:i,dispatch:r})=>{let s=null,o=null;const a=cl(typeof n=="string"?n:n.name,i.schema);return a?(a==="node"&&(s=_e(n,i.schema)),a==="mark"&&(o=ki(n,i.schema)),r&&e.selection.ranges.forEach(l=>{const c=l.$from.pos,u=l.$to.pos;i.doc.nodesBetween(c,u,(h,f)=>{s&&s===h.type&&e.setNodeMarkup(f,void 0,{...h.attrs,...t}),o&&h.marks.length&&h.marks.forEach(d=>{if(o===d.type){const g=Math.max(f,c),b=Math.min(f+h.nodeSize,u);e.addMark(g,b,o.create({...d.attrs,...t}))}})})}),!0):!1},tN=(n,t={})=>({state:e,dispatch:i})=>{const r=_e(n,e.schema);return bD(r,t)(e,i)},eN=(n,t={})=>({state:e,dispatch:i})=>{const r=_e(n,e.schema);return vD(r,t)(e,i)};var nN=Object.freeze({__proto__:null,blur:FD,clearContent:jD,clearNodes:VD,command:HD,createParagraphNear:UD,deleteCurrentNode:qD,deleteNode:WD,deleteRange:KD,deleteSelection:JD,enter:GD,exitCode:YD,extendMarkRange:QD,first:ZD,focus:tI,forEach:eI,insertContent:nI,insertContentAt:sI,joinUp:oI,joinDown:aI,joinBackward:lI,joinForward:cI,keyboardShortcut:hI,lift:fI,liftEmptyBlock:dI,liftListItem:pI,newlineInCode:gI,resetAttributes:mI,scrollIntoView:yI,selectAll:bI,selectNodeBackward:vI,selectNodeForward:xI,selectParentNode:wI,selectTextblockEnd:_I,selectTextblockStart:SI,setContent:kI,setMark:zI,setMeta:BI,setNode:FI,setNodeSelection:jI,setTextSelection:VI,sinkListItem:HI,splitBlock:UI,splitListItem:qI,toggleList:WI,toggleMark:KI,toggleNode:JI,toggleWrap:GI,undoInputRule:YI,unsetAllMarks:XI,unsetMark:QI,updateAttributes:ZI,wrapIn:tN,wrapInList:eN});const iN=Ze.create({name:"commands",addCommands(){return{...nN}}}),rN=Ze.create({name:"editable",addProseMirrorPlugins(){return[new je({key:new gn("editable"),props:{editable:()=>this.editor.options.editable}})]}}),sN=Ze.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:n}=this;return[new je({key:new gn("focusEvents"),props:{handleDOMEvents:{focus:(t,e)=>{n.isFocused=!0;const i=n.state.tr.setMeta("focus",{event:e}).setMeta("addToHistory",!1);return t.dispatch(i),!1},blur:(t,e)=>{n.isFocused=!1;const i=n.state.tr.setMeta("blur",{event:e}).setMeta("addToHistory",!1);return t.dispatch(i),!1}}}})]}}),oN=Ze.create({name:"keymap",addKeyboardShortcuts(){const n=()=>this.editor.commands.first(({commands:o})=>[()=>o.undoInputRule(),()=>o.command(({tr:a})=>{const{selection:l,doc:c}=a,{empty:u,$anchor:h}=l,{pos:f,parent:d}=h,g=$t.atStart(c).from===f;return!u||!g||!d.type.isTextblock||d.textContent.length?!1:o.clearNodes()}),()=>o.deleteSelection(),()=>o.joinBackward(),()=>o.selectNodeBackward()]),t=()=>this.editor.commands.first(({commands:o})=>[()=>o.deleteSelection(),()=>o.deleteCurrentNode(),()=>o.joinForward(),()=>o.selectNodeForward()]),i={Enter:()=>this.editor.commands.first(({commands:o})=>[()=>o.newlineInCode(),()=>o.createParagraphNear(),()=>o.liftEmptyBlock(),()=>o.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:n,"Mod-Backspace":n,"Shift-Backspace":n,Delete:t,"Mod-Delete":t,"Mod-a":()=>this.editor.commands.selectAll()},r={...i},s={...i,"Ctrl-h":n,"Alt-Backspace":n,"Ctrl-d":t,"Ctrl-Alt-Backspace":t,"Alt-Delete":t,"Alt-d":t,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return oh()||py()?s:r},addProseMirrorPlugins(){return[new je({key:new gn("clearDocument"),appendTransaction:(n,t,e)=>{if(!(n.some(g=>g.docChanged)&&!t.doc.eq(e.doc)))return;const{empty:r,from:s,to:o}=t.selection,a=$t.atStart(t.doc).from,l=$t.atEnd(t.doc).to,c=s===a&&o===l,u=e.doc.textBetween(0,e.doc.content.size," "," ").length===0;if(r||!c||!u)return;const h=e.tr,f=rl({state:e,transaction:h}),{commands:d}=new sl({editor:this.editor,state:f});if(d.clearNodes(),!!h.steps.length)return h}})]}}),aN=Ze.create({name:"tabindex",addProseMirrorPlugins(){return[new je({key:new gn("tabindex"),props:{attributes:this.editor.isEditable?{tabindex:"0"}:{}}})]}});var lN=Object.freeze({__proto__:null,ClipboardTextSerializer:BD,Commands:iN,Editable:rN,FocusEvents:sN,Keymap:oN,Tabindex:aN});const cN=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 1px !important;
  height: 1px !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function uN(n,t){const e=document.querySelector("style[data-tiptap-style]");if(e!==null)return e;const i=document.createElement("style");return t&&i.setAttribute("nonce",t),i.setAttribute("data-tiptap-style",""),i.innerHTML=n,document.getElementsByTagName("head")[0].appendChild(i),i}class hN extends MD{constructor(t={}){super(),this.isFocused=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(t),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}))},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=uN(cN,this.options.injectNonce))}setOptions(t={}){this.options={...this.options,...t},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(t,e=!0){this.setOptions({editable:t}),e&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(t,e){const i=cy(e)?e(t,[...this.state.plugins]):[...this.state.plugins,t],r=this.state.reconfigure({plugins:i});this.view.updateState(r)}unregisterPlugin(t){if(this.isDestroyed)return;const e=typeof t=="string"?`${t}$`:t.key,i=this.state.reconfigure({plugins:this.state.plugins.filter(r=>!r.key.startsWith(e))});this.view.updateState(i)}createExtensionManager(){const e=[...this.options.enableCoreExtensions?Object.values(lN):[],...this.options.extensions].filter(i=>["extension","node","mark"].includes(i?.type));this.extensionManager=new mr(e,this)}createCommandManager(){this.commandManager=new sl({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){const t=gy(this.options.content,this.schema,this.options.parseOptions),e=dy(t,this.options.autofocus);this.view=new HP(this.options.element,{...this.options.editorProps,dispatchTransaction:this.dispatchTransaction.bind(this),state:pr.create({doc:t,selection:e||void 0})});const i=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(i),this.createNodeViews();const r=this.view.dom;r.editor=this}createNodeViews(){this.view.setProps({nodeViews:this.extensionManager.nodeViews})}captureTransaction(t){this.isCapturingTransaction=!0,t(),this.isCapturingTransaction=!1;const e=this.capturedTransaction;return this.capturedTransaction=null,e}dispatchTransaction(t){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=t;return}t.steps.forEach(o=>{var a;return(a=this.capturedTransaction)===null||a===void 0?void 0:a.step(o)});return}const e=this.state.apply(t),i=!this.state.selection.eq(e.selection);this.view.updateState(e),this.emit("transaction",{editor:this,transaction:t}),i&&this.emit("selectionUpdate",{editor:this,transaction:t});const r=t.getMeta("focus"),s=t.getMeta("blur");r&&this.emit("focus",{editor:this,event:r.event,transaction:t}),s&&this.emit("blur",{editor:this,event:s.event,transaction:t}),!(!t.docChanged||t.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:t})}getAttributes(t){return my(this.state,t)}isActive(t,e){const i=typeof t=="string"?t:null,r=typeof t=="string"?e:t;return NI(this.state,i,r)}getJSON(){return this.state.doc.toJSON()}getHTML(){return TI(this.state.doc.content,this.schema)}getText(t){const{blockSeparator:e=`

`,textSerializers:i={}}=t||{};return EI(this.state.doc,{blockSeparator:e,textSerializers:{...hy(this.schema),...i}})}get isEmpty(){return LI(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){this.emit("destroy"),this.view&&this.view.destroy(),this.removeAllListeners()}get isDestroyed(){var t;return!(!((t=this.view)===null||t===void 0)&&t.docView)}}function Lr(n){return new al({find:n.find,handler:({state:t,range:e,match:i})=>{const r=Et(n.getAttributes,void 0,i);if(r===!1||r===null)return null;const{tr:s}=t,o=i[i.length-1],a=i[0];let l=e.to;if(o){const c=a.search(/\S/),u=e.from+a.indexOf(o),h=u+o.length;if(la(e.from,e.to,t.doc).filter(d=>d.mark.type.excluded.find(b=>b===n.type&&b!==d.mark.type)).filter(d=>d.to>u).length)return null;h<e.to&&s.delete(h,e.to),u>e.from&&s.delete(e.from+c,u),l=e.from+c+o.length,s.addMark(e.from+c,l,n.type.create(r||{})),s.removeStoredMark(n.type)}}})}function yy(n){return new al({find:n.find,handler:({state:t,range:e,match:i})=>{const r=Et(n.getAttributes,void 0,i)||{},{tr:s}=t,o=e.from;let a=e.to;if(i[1]){const l=i[0].lastIndexOf(i[1]);let c=o+l;c>a?c=a:a=c+i[1].length;const u=i[0][i[0].length-1];s.insertText(u,o+i[0].length-1),s.replaceWith(c,a,n.type.create(r))}else i[0]&&s.replaceWith(o,a,n.type.create(r))}})}function iu(n){return new al({find:n.find,handler:({state:t,range:e,match:i})=>{const r=t.doc.resolve(e.from),s=Et(n.getAttributes,void 0,i)||{};if(!r.node(-1).canReplaceWith(r.index(-1),r.indexAfter(-1),n.type))return null;t.tr.delete(e.from,e.to).setBlockType(e.from,e.from,n.type,s)}})}function Rs(n){return new al({find:n.find,handler:({state:t,range:e,match:i,chain:r})=>{const s=Et(n.getAttributes,void 0,i)||{},o=t.tr.delete(e.from,e.to),l=o.doc.resolve(e.from).blockRange(),c=l&&Wu(l,n.type,s);if(!c)return null;if(o.wrap(l,c),n.keepMarks&&n.editor){const{selection:h,storedMarks:f}=t,{splittableMarks:d}=n.editor.extensionManager,g=f||h.$to.parentOffset&&h.$from.marks();if(g){const b=g.filter(k=>d.includes(k.type.name));o.ensureMarks(b)}}if(n.keepAttributes){const h=n.type.name==="bulletList"||n.type.name==="orderedList"?"listItem":"taskList";r().updateAttributes(h,s).run()}const u=o.doc.resolve(e.from-1).nodeBefore;u&&u.type===n.type&&_i(o.doc,e.from-1)&&(!n.joinPredicate||n.joinPredicate(i,u))&&o.join(e.from-1)}})}class on{constructor(t={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...t},this.name=this.config.name,t.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Et(dt(this,"addOptions",{name:this.name}))),this.storage=Et(dt(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(t={}){return new on(t)}configure(t={}){const e=this.extend();return e.options=ll(this.options,t),e.storage=Et(dt(e,"addStorage",{name:e.name,options:e.options})),e}extend(t={}){const e=new on(t);return e.parent=this,this.child=e,e.name=t.name?t.name:e.parent.name,t.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${e.name}".`),e.options=Et(dt(e,"addOptions",{name:e.name})),e.storage=Et(dt(e,"addStorage",{name:e.name,options:e.options})),e}static handleExit({editor:t,mark:e}){const{tr:i}=t.state,r=t.state.selection.$from;if(r.pos===r.end()){const o=r.marks();if(!!!o.find(c=>c?.type.name===e.name))return!1;const l=o.find(c=>c?.type.name===e.name);return l&&i.removeStoredMark(l),i.insertText(" ",r.pos),t.view.dispatch(i),!0}return!1}}let Ge=class ru{constructor(t={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...t},this.name=this.config.name,t.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Et(dt(this,"addOptions",{name:this.name}))),this.storage=Et(dt(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(t={}){return new ru(t)}configure(t={}){const e=this.extend();return e.options=ll(this.options,t),e.storage=Et(dt(e,"addStorage",{name:e.name,options:e.options})),e}extend(t={}){const e=new ru(t);return e.parent=this,this.child=e,e.name=t.name?t.name:e.parent.name,t.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${e.name}".`),e.options=Et(dt(e,"addOptions",{name:e.name})),e.storage=Et(dt(e,"addStorage",{name:e.name,options:e.options})),e}};function Zi(n){return new DD({find:n.find,handler:({state:t,range:e,match:i})=>{const r=Et(n.getAttributes,void 0,i);if(r===!1||r===null)return null;const{tr:s}=t,o=i[i.length-1],a=i[0];let l=e.to;if(o){const c=a.search(/\S/),u=e.from+a.indexOf(o),h=u+o.length;if(la(e.from,e.to,t.doc).filter(d=>d.mark.type.excluded.find(b=>b===n.type&&b!==d.mark.type)).filter(d=>d.to>u).length)return null;h<e.to&&s.delete(h,e.to),u>e.from&&s.delete(e.from+c,u),l=e.from+c+o.length,s.addMark(e.from+c,l,n.type.create(r||{})),s.removeStoredMark(n.type)}}})}const fN="aaa1rp3barth4b0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0faromeo7ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4vianca6w0s2x0a2z0ure5ba0by2idu3namex3narepublic11d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2ntley5rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re2s2c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y0eats7k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0cast4mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking0channel11l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dabur3d1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t0isalat7u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0at2delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d0network8tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntdoor4ier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0ardian6cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5gtv3iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0eles2s3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6logistics9properties14fh2g1h1i0a1ds2m1nder2le4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3ncaster5ia3d0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4de2k2psy3ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0cys3drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7serati6ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic3tual5v1w1x1y1z2na0b1goya4me2tura4vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rthwesternmutual14on4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9dnavy5lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3ssagens7y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0america6xi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cher3ks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0a1b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp2w2ell3ia1ksha5oes2p0ping5uji3w0time7i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ffany5ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0channel7ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lkswagen7vo3te1ing3o2yage5u0elos6wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4finity6ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",dN="1213426321653223333353565455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",Rr=(n,t)=>{for(const e in t)n[e]=t[e];return n},su="numeric",ou="ascii",au="alpha",Eo="asciinumeric",lo="alphanumeric",lu="domain",by="emoji",pN="scheme",gN="slashscheme",Qd="whitespace";function mN(n,t){return n in t||(t[n]=[]),t[n]}function Bi(n,t,e){t[su]&&(t[Eo]=!0,t[lo]=!0),t[ou]&&(t[Eo]=!0,t[au]=!0),t[Eo]&&(t[lo]=!0),t[au]&&(t[lo]=!0),t[lo]&&(t[lu]=!0),t[by]&&(t[lu]=!0);for(const i in t){const r=mN(i,e);r.indexOf(n)<0&&r.push(n)}}function yN(n,t){const e={};for(const i in t)t[i].indexOf(n)>=0&&(e[i]=!0);return e}function He(n){n===void 0&&(n=null),this.j={},this.jr=[],this.jd=null,this.t=n}He.groups={};He.prototype={accepts(){return!!this.t},go(n){const t=this,e=t.j[n];if(e)return e;for(let i=0;i<t.jr.length;i++){const r=t.jr[i][0],s=t.jr[i][1];if(s&&r.test(n))return s}return t.jd},has(n,t){return t===void 0&&(t=!1),t?n in this.j:!!this.go(n)},ta(n,t,e,i){for(let r=0;r<n.length;r++)this.tt(n[r],t,e,i)},tr(n,t,e,i){i=i||He.groups;let r;return t&&t.j?r=t:(r=new He(t),e&&i&&Bi(t,e,i)),this.jr.push([n,r]),r},ts(n,t,e,i){let r=this;const s=n.length;if(!s)return r;for(let o=0;o<s-1;o++)r=r.tt(n[o]);return r.tt(n[s-1],t,e,i)},tt(n,t,e,i){i=i||He.groups;const r=this;if(t&&t.j)return r.j[n]=t,t;const s=t;let o,a=r.go(n);if(a?(o=new He,Rr(o.j,a.j),o.jr.push.apply(o.jr,a.jr),o.jd=a.jd,o.t=a.t):o=new He,s){if(i)if(o.t&&typeof o.t=="string"){const l=Rr(yN(o.t,i),e);Bi(s,l,i)}else e&&Bi(s,e,i);o.t=s}return r.j[n]=o,o}};const vt=(n,t,e,i,r)=>n.ta(t,e,i,r),tn=(n,t,e,i,r)=>n.tr(t,e,i,r),Zd=(n,t,e,i,r)=>n.ts(t,e,i,r),it=(n,t,e,i,r)=>n.tt(t,e,i,r),$n="WORD",cu="UWORD",zs="LOCALHOST",uu="TLD",hu="UTLD",$o="SCHEME",fr="SLASH_SCHEME",lh="NUM",vy="WS",ch="NL",yr="OPENBRACE",_s="OPENBRACKET",Ss="OPENANGLEBRACKET",ks="OPENPAREN",Ni="CLOSEBRACE",br="CLOSEBRACKET",vr="CLOSEANGLEBRACKET",Li="CLOSEPAREN",ca="AMPERSAND",ua="APOSTROPHE",ha="ASTERISK",Gn="AT",fa="BACKSLASH",da="BACKTICK",pa="CARET",Qn="COLON",uh="COMMA",ga="DOLLAR",mn="DOT",ma="EQUALS",hh="EXCLAMATION",yn="HYPHEN",ya="PERCENT",ba="PIPE",va="PLUS",xa="POUND",wa="QUERY",fh="QUOTE",dh="SEMI",bn="SLASH",Ms="TILDE",_a="UNDERSCORE",xy="EMOJI",Sa="SYM";var wy=Object.freeze({__proto__:null,WORD:$n,UWORD:cu,LOCALHOST:zs,TLD:uu,UTLD:hu,SCHEME:$o,SLASH_SCHEME:fr,NUM:lh,WS:vy,NL:ch,OPENBRACE:yr,OPENBRACKET:_s,OPENANGLEBRACKET:Ss,OPENPAREN:ks,CLOSEBRACE:Ni,CLOSEBRACKET:br,CLOSEANGLEBRACKET:vr,CLOSEPAREN:Li,AMPERSAND:ca,APOSTROPHE:ua,ASTERISK:ha,AT:Gn,BACKSLASH:fa,BACKTICK:da,CARET:pa,COLON:Qn,COMMA:uh,DOLLAR:ga,DOT:mn,EQUALS:ma,EXCLAMATION:hh,HYPHEN:yn,PERCENT:ya,PIPE:ba,PLUS:va,POUND:xa,QUERY:wa,QUOTE:fh,SEMI:dh,SLASH:bn,TILDE:Ms,UNDERSCORE:_a,EMOJI:xy,SYM:Sa});const lr=/[a-z]/,rc=/\p{L}/u,sc=/\p{Emoji}/u,oc=/\d/,tp=/\s/,ep=`
`,bN="",vN="";let co=null,uo=null;function xN(n){n===void 0&&(n=[]);const t={};He.groups=t;const e=new He;co==null&&(co=np(fN)),uo==null&&(uo=np(dN)),it(e,"'",ua),it(e,"{",yr),it(e,"[",_s),it(e,"<",Ss),it(e,"(",ks),it(e,"}",Ni),it(e,"]",br),it(e,">",vr),it(e,")",Li),it(e,"&",ca),it(e,"*",ha),it(e,"@",Gn),it(e,"`",da),it(e,"^",pa),it(e,":",Qn),it(e,",",uh),it(e,"$",ga),it(e,".",mn),it(e,"=",ma),it(e,"!",hh),it(e,"-",yn),it(e,"%",ya),it(e,"|",ba),it(e,"+",va),it(e,"#",xa),it(e,"?",wa),it(e,'"',fh),it(e,"/",bn),it(e,";",dh),it(e,"~",Ms),it(e,"_",_a),it(e,"\\",fa);const i=tn(e,oc,lh,{[su]:!0});tn(i,oc,i);const r=tn(e,lr,$n,{[ou]:!0});tn(r,lr,r);const s=tn(e,rc,cu,{[au]:!0});tn(s,lr),tn(s,rc,s);const o=tn(e,tp,vy,{[Qd]:!0});it(e,ep,ch,{[Qd]:!0}),it(o,ep),tn(o,tp,o);const a=tn(e,sc,xy,{[by]:!0});tn(a,sc,a),it(a,bN,a);const l=it(a,vN);tn(l,sc,a);const c=[[lr,r]],u=[[lr,null],[rc,s]];for(let h=0;h<co.length;h++)Kn(e,co[h],uu,$n,c);for(let h=0;h<uo.length;h++)Kn(e,uo[h],hu,cu,u);Bi(uu,{tld:!0,ascii:!0},t),Bi(hu,{utld:!0,alpha:!0},t),Kn(e,"file",$o,$n,c),Kn(e,"mailto",$o,$n,c),Kn(e,"http",fr,$n,c),Kn(e,"https",fr,$n,c),Kn(e,"ftp",fr,$n,c),Kn(e,"ftps",fr,$n,c),Bi($o,{scheme:!0,ascii:!0},t),Bi(fr,{slashscheme:!0,ascii:!0},t),n=n.sort((h,f)=>h[0]>f[0]?1:-1);for(let h=0;h<n.length;h++){const f=n[h][0],g=n[h][1]?{[pN]:!0}:{[gN]:!0};f.indexOf("-")>=0?g[lu]=!0:lr.test(f)?oc.test(f)?g[Eo]=!0:g[ou]=!0:g[su]=!0,Zd(e,f,f,g)}return Zd(e,"localhost",zs,{ascii:!0}),e.jd=new He(Sa),{start:e,tokens:Rr({groups:t},wy)}}function wN(n,t){const e=_N(t.replace(/[A-Z]/g,a=>a.toLowerCase())),i=e.length,r=[];let s=0,o=0;for(;o<i;){let a=n,l=null,c=0,u=null,h=-1,f=-1;for(;o<i&&(l=a.go(e[o]));)a=l,a.accepts()?(h=0,f=0,u=a):h>=0&&(h+=e[o].length,f++),c+=e[o].length,s+=e[o].length,o++;s-=h,o-=f,c-=h,r.push({t:u.t,v:t.slice(s-c,s),s:s-c,e:s})}return r}function _N(n){const t=[],e=n.length;let i=0;for(;i<e;){let r=n.charCodeAt(i),s,o=r<55296||r>56319||i+1===e||(s=n.charCodeAt(i+1))<56320||s>57343?n[i]:n.slice(i,i+2);t.push(o),i+=o.length}return t}function Kn(n,t,e,i,r){let s;const o=t.length;for(let a=0;a<o-1;a++){const l=t[a];n.j[l]?s=n.j[l]:(s=new He(i),s.jr=r.slice(),n.j[l]=s),n=s}return s=new He(e),s.jr=r.slice(),n.j[t[o-1]]=s,s}function np(n){const t=[],e=[];let i=0,r="0123456789";for(;i<n.length;){let s=0;for(;r.indexOf(n[i+s])>=0;)s++;if(s>0){t.push(e.join(""));for(let o=parseInt(n.substring(i,i+s),10);o>0;o--)e.pop();i+=s}else e.push(n[i]),i++}return t}const Bs={defaultProtocol:"http",events:null,format:ip,formatHref:ip,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function ph(n,t){t===void 0&&(t=null);let e=Rr({},Bs);n&&(e=Rr(e,n instanceof ph?n.o:n));const i=e.ignoreTags,r=[];for(let s=0;s<i.length;s++)r.push(i[s].toUpperCase());this.o=e,t&&(this.defaultRender=t),this.ignoreTags=r}ph.prototype={o:Bs,ignoreTags:[],defaultRender(n){return n},check(n){return this.get("validate",n.toString(),n)},get(n,t,e){const i=t!=null;let r=this.o[n];return r&&(typeof r=="object"?(r=e.t in r?r[e.t]:Bs[n],typeof r=="function"&&i&&(r=r(t,e))):typeof r=="function"&&i&&(r=r(t,e.t,e)),r)},getObj(n,t,e){let i=this.o[n];return typeof i=="function"&&t!=null&&(i=i(t,e.t,e)),i},render(n){const t=n.render(this);return(this.get("render",null,n)||this.defaultRender)(t,n.t,n)}};function ip(n){return n}function _y(n,t){this.t="token",this.v=n,this.tk=t}_y.prototype={isLink:!1,toString(){return this.v},toHref(n){return this.toString()},toFormattedString(n){const t=this.toString(),e=n.get("truncate",t,this),i=n.get("format",t,this);return e&&i.length>e?i.substring(0,e)+"":i},toFormattedHref(n){return n.get("formatHref",this.toHref(n.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(n){return n===void 0&&(n=Bs.defaultProtocol),{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(n),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(n){return{type:this.t,value:this.toFormattedString(n),isLink:this.isLink,href:this.toFormattedHref(n),start:this.startIndex(),end:this.endIndex()}},validate(n){return n.get("validate",this.toString(),this)},render(n){const t=this,e=this.toHref(n.get("defaultProtocol")),i=n.get("formatHref",e,this),r=n.get("tagName",e,t),s=this.toFormattedString(n),o={},a=n.get("className",e,t),l=n.get("target",e,t),c=n.get("rel",e,t),u=n.getObj("attributes",e,t),h=n.getObj("events",e,t);return o.href=i,a&&(o.class=a),l&&(o.target=l),c&&(o.rel=c),u&&Rr(o,u),{tagName:r,attributes:o,content:s,eventListeners:h}}};function hl(n,t){class e extends _y{constructor(r,s){super(r,s),this.t=n}}for(const i in t)e.prototype[i]=t[i];return e.t=n,e}const rp=hl("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),sp=hl("text"),SN=hl("nl"),Oi=hl("url",{isLink:!0,toHref(n){return n===void 0&&(n=Bs.defaultProtocol),this.hasProtocol()?this.v:`${n}://${this.v}`},hasProtocol(){const n=this.tk;return n.length>=2&&n[0].t!==zs&&n[1].t===Qn}}),be=n=>new He(n);function kN(n){let{groups:t}=n;const e=t.domain.concat([ca,ha,Gn,fa,da,pa,ga,ma,yn,lh,ya,ba,va,xa,bn,Sa,Ms,_a]),i=[ua,vr,Ni,br,Li,Qn,uh,mn,hh,Ss,yr,_s,ks,wa,fh,dh],r=[ca,ua,ha,fa,da,pa,Ni,ga,ma,yn,yr,ya,ba,va,xa,wa,bn,Sa,Ms,_a],s=be(),o=it(s,Ms);vt(o,r,o),vt(o,t.domain,o);const a=be(),l=be(),c=be();vt(s,t.domain,a),vt(s,t.scheme,l),vt(s,t.slashscheme,c),vt(a,r,o),vt(a,t.domain,a);const u=it(a,Gn);it(o,Gn,u),it(l,Gn,u),it(c,Gn,u);const h=it(o,mn);vt(h,r,o),vt(h,t.domain,o);const f=be();vt(u,t.domain,f),vt(f,t.domain,f);const d=it(f,mn);vt(d,t.domain,f);const g=be(rp);vt(d,t.tld,g),vt(d,t.utld,g),it(u,zs,g);const b=it(f,yn);vt(b,t.domain,f),vt(g,t.domain,f),it(g,mn,d),it(g,yn,b);const k=it(g,Qn);vt(k,t.numeric,rp);const O=it(a,yn),D=it(a,mn);vt(O,t.domain,a),vt(D,r,o),vt(D,t.domain,a);const F=be(Oi);vt(D,t.tld,F),vt(D,t.utld,F),vt(F,t.domain,a),vt(F,r,o),it(F,mn,D),it(F,yn,O),it(F,Gn,u);const W=it(F,Qn),V=be(Oi);vt(W,t.numeric,V);const T=be(Oi),L=be();vt(T,e,T),vt(T,i,L),vt(L,e,T),vt(L,i,L),it(F,bn,T),it(V,bn,T);const R=it(l,Qn),st=it(c,Qn),xt=it(st,bn),bt=it(xt,bn);vt(l,t.domain,a),it(l,mn,D),it(l,yn,O),vt(c,t.domain,a),it(c,mn,D),it(c,yn,O),vt(R,t.domain,T),it(R,bn,T),vt(bt,t.domain,T),vt(bt,e,T),it(bt,bn,T);const Tt=it(T,yr),Lt=it(T,_s),q=it(T,Ss),H=it(T,ks);it(L,yr,Tt),it(L,_s,Lt),it(L,Ss,q),it(L,ks,H),it(Tt,Ni,T),it(Lt,br,T),it(q,vr,T),it(H,Li,T),it(Tt,Ni,T);const U=be(Oi),j=be(Oi),z=be(Oi),G=be(Oi);vt(Tt,e,U),vt(Lt,e,j),vt(q,e,z),vt(H,e,G);const rt=be(),Z=be(),ct=be(),It=be();return vt(Tt,i),vt(Lt,i),vt(q,i),vt(H,i),vt(U,e,U),vt(j,e,j),vt(z,e,z),vt(G,e,G),vt(U,i,U),vt(j,i,j),vt(z,i,z),vt(G,i,G),vt(rt,e,rt),vt(Z,e,j),vt(ct,e,z),vt(It,e,G),vt(rt,i,rt),vt(Z,i,Z),vt(ct,i,ct),vt(It,i,It),it(j,br,T),it(z,vr,T),it(G,Li,T),it(U,Ni,T),it(Z,br,T),it(ct,vr,T),it(It,Li,T),it(rt,Li,T),it(s,zs,F),it(s,ch,SN),{start:s,tokens:wy}}function MN(n,t,e){let i=e.length,r=0,s=[],o=[];for(;r<i;){let a=n,l=null,c=null,u=0,h=null,f=-1;for(;r<i&&!(l=a.go(e[r].t));)o.push(e[r++]);for(;r<i&&(c=l||a.go(e[r].t));)l=null,a=c,a.accepts()?(f=0,h=a):f>=0&&f++,r++,u++;if(f<0)r-=u,r<i&&(o.push(e[r]),r++);else{o.length>0&&(s.push(ac(sp,t,o)),o=[]),r-=f,u-=f;const d=h.t,g=e.slice(r-u,r);s.push(ac(d,t,g))}}return o.length>0&&s.push(ac(sp,t,o)),s}function ac(n,t,e){const i=e[0].s,r=e[e.length-1].e,s=t.slice(i,r);return new n(s,e)}const CN=typeof console<"u"&&console&&console.warn||(()=>{}),ON="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",ne={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function AN(){He.groups={},ne.scanner=null,ne.parser=null,ne.tokenQueue=[],ne.pluginQueue=[],ne.customSchemes=[],ne.initialized=!1}function op(n,t){if(t===void 0&&(t=!1),ne.initialized&&CN(`linkifyjs: already initialized - will not register custom scheme "${n}" ${ON}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(n))throw new Error(`linkifyjs: incorrect scheme format.
 1. Must only contain digits, lowercase ASCII letters or "-"
 2. Cannot start or end with "-"
 3. "-" cannot repeat`);ne.customSchemes.push([n,t])}function TN(){ne.scanner=xN(ne.customSchemes);for(let n=0;n<ne.tokenQueue.length;n++)ne.tokenQueue[n][1]({scanner:ne.scanner});ne.parser=kN(ne.scanner.tokens);for(let n=0;n<ne.pluginQueue.length;n++)ne.pluginQueue[n][1]({scanner:ne.scanner,parser:ne.parser});ne.initialized=!0}function Sy(n){return ne.initialized||TN(),MN(ne.parser.start,n,wN(ne.scanner.start,n))}function gh(n,t,e){if(t===void 0&&(t=null),e===void 0&&(e=null),t&&typeof t=="object"){if(e)throw Error(`linkifyjs: Invalid link type ${t}; must be a string`);e=t,t=null}const i=new ph(e),r=Sy(n),s=[];for(let o=0;o<r.length;o++){const a=r[o];a.isLink&&(!t||a.t===t)&&s.push(a.toFormattedObject(i))}return s}function ap(n,t){t===void 0&&(t=null);const e=Sy(n);return e.length===1&&e[0].isLink&&(!t||e[0].t===t)}function EN(n){return new je({key:new gn("autolink"),appendTransaction:(t,e,i)=>{const r=t.some(u=>u.docChanged)&&!e.doc.eq(i.doc),s=t.some(u=>u.getMeta("preventAutolink"));if(!r||s)return;const{tr:o}=i,a=MI(e.doc,[...t]),{mapping:l}=a;if(II(a).forEach(({oldRange:u,newRange:h})=>{la(u.from,u.to,e.doc).filter(b=>b.mark.type===n.type).forEach(b=>{const k=l.map(b.from),O=l.map(b.to),D=la(k,O,i.doc).filter(R=>R.mark.type===n.type);if(!D.length)return;const F=D[0],W=e.doc.textBetween(b.from,b.to,void 0," "),V=i.doc.textBetween(F.from,F.to,void 0," "),T=ap(W),L=ap(V);T&&!L&&o.removeMark(F.from,F.to,n.type)});const f=OI(i.doc,h,b=>b.isTextblock);let d,g;if(f.length>1?(d=f[0],g=i.doc.textBetween(d.pos,d.pos+d.node.nodeSize,void 0," ")):f.length&&i.doc.textBetween(h.from,h.to," "," ").endsWith(" ")&&(d=f[0],g=i.doc.textBetween(d.pos,h.to,void 0," ")),d&&g){const b=g.split(" ").filter(D=>D!=="");if(b.length<=0)return!1;const k=b[b.length-1],O=d.pos+g.lastIndexOf(k);if(!k)return!1;gh(k).filter(D=>D.isLink).filter(D=>n.validate?n.validate(D.value):!0).map(D=>({...D,from:O+D.start+1,to:O+D.end+1})).forEach(D=>{o.addMark(D.from,D.to,n.type.create({href:D.href}))})}}),!!o.steps.length)return o}})}function $N(n){return new je({key:new gn("handleClickLink"),props:{handleClick:(t,e,i)=>{var r,s,o;const a=my(t.state,n.type.name),l=(r=i.target)===null||r===void 0?void 0:r.closest("a"),c=(s=l?.href)!==null&&s!==void 0?s:a.href,u=(o=l?.target)!==null&&o!==void 0?o:a.target;return l&&c?(window.open(c,u),!0):!1}}})}function PN(n){return new je({key:new gn("handlePasteLink"),props:{handlePaste:(t,e,i)=>{const{state:r}=t,{selection:s}=r,{empty:o}=s;if(o)return!1;let a="";i.content.forEach(c=>{a+=c.textContent});const l=gh(a).find(c=>c.isLink&&c.value===a);return!a||!l?!1:(n.editor.commands.setMark(n.type,{href:l.href}),!0)}}})}const DN=on.create({name:"link",priority:1e3,keepOnSplit:!1,onCreate(){this.options.protocols.forEach(n=>{if(typeof n=="string"){op(n);return}op(n.scheme,n.optionalSlashes)})},onDestroy(){AN()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,linkOnPaste:!0,autolink:!0,protocols:[],HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},validate:void 0}},addAttributes(){return{href:{default:null},target:{default:this.options.HTMLAttributes.target},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:'a[href]:not([href *= "javascript:" i])'}]},renderHTML({HTMLAttributes:n}){return["a",ce(this.options.HTMLAttributes,n),0]},addCommands(){return{setLink:n=>({chain:t})=>t().setMark(this.name,n).setMeta("preventAutolink",!0).run(),toggleLink:n=>({chain:t})=>t().toggleMark(this.name,n,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run(),unsetLink:()=>({chain:n})=>n().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[Zi({find:n=>gh(n).filter(t=>this.options.validate?this.options.validate(t.value):!0).filter(t=>t.isLink).map(t=>({text:t.value,index:t.start,data:t})),type:this.type,getAttributes:n=>{var t;return{href:(t=n.data)===null||t===void 0?void 0:t.href}}})]},addProseMirrorPlugins(){const n=[];return this.options.autolink&&n.push(EN({type:this.type,validate:this.options.validate})),this.options.openOnClick&&n.push($N({type:this.type})),this.options.linkOnPaste&&n.push(PN({editor:this.editor,type:this.type})),n}}),IN=on.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:n=>n.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:n}){return["u",ce(this.options.HTMLAttributes,n),0]},addCommands(){return{setUnderline:()=>({commands:n})=>n.setMark(this.name),toggleUnderline:()=>({commands:n})=>n.toggleMark(this.name),unsetUnderline:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}}),NN=/^\s*>\s$/,LN=Ge.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:n}){return["blockquote",ce(this.options.HTMLAttributes,n),0]},addCommands(){return{setBlockquote:()=>({commands:n})=>n.wrapIn(this.name),toggleBlockquote:()=>({commands:n})=>n.toggleWrap(this.name),unsetBlockquote:()=>({commands:n})=>n.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[Rs({find:NN,type:this.type})]}}),RN=/(?:^|\s)((?:\*\*)((?:[^*]+))(?:\*\*))$/,zN=/(?:^|\s)((?:\*\*)((?:[^*]+))(?:\*\*))/g,BN=/(?:^|\s)((?:__)((?:[^__]+))(?:__))$/,FN=/(?:^|\s)((?:__)((?:[^__]+))(?:__))/g,jN=on.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:n=>n.style.fontWeight!=="normal"&&null},{style:"font-weight",getAttrs:n=>/^(bold(er)?|[5-9]\d{2,})$/.test(n)&&null}]},renderHTML({HTMLAttributes:n}){return["strong",ce(this.options.HTMLAttributes,n),0]},addCommands(){return{setBold:()=>({commands:n})=>n.setMark(this.name),toggleBold:()=>({commands:n})=>n.toggleMark(this.name),unsetBold:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[Lr({find:RN,type:this.type}),Lr({find:BN,type:this.type})]},addPasteRules(){return[Zi({find:zN,type:this.type}),Zi({find:FN,type:this.type})]}}),VN=Ge.create({name:"listItem",addOptions(){return{HTMLAttributes:{}}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:n}){return["li",ce(this.options.HTMLAttributes,n),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),lp=on.create({name:"textStyle",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"span",getAttrs:n=>n.hasAttribute("style")?{}:!1}]},renderHTML({HTMLAttributes:n}){return["span",ce(this.options.HTMLAttributes,n),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:n,commands:t})=>{const e=ul(n,this.type);return Object.entries(e).some(([,r])=>!!r)?!0:t.unsetMark(this.name)}}}}),cp=/^\s*([-+*])\s$/,HN=Ge.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:n}){return["ul",ce(this.options.HTMLAttributes,n),0]},addCommands(){return{toggleBulletList:()=>({commands:n,chain:t})=>this.options.keepAttributes?t().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(VN.name,this.editor.getAttributes(lp.name)).run():n.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let n=Rs({find:cp,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(n=Rs({find:cp,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(lp.name),editor:this.editor})),[n]}}),UN=/(?:^|\s)((?:`)((?:[^`]+))(?:`))$/,qN=/(?:^|\s)((?:`)((?:[^`]+))(?:`))/g,WN=on.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:n}){return["code",ce(this.options.HTMLAttributes,n),0]},addCommands(){return{setCode:()=>({commands:n})=>n.setMark(this.name),toggleCode:()=>({commands:n})=>n.toggleMark(this.name),unsetCode:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[Lr({find:UN,type:this.type})]},addPasteRules(){return[Zi({find:qN,type:this.type})]}}),KN=/^```([a-z]+)?[\s\n]$/,JN=/^~~~([a-z]+)?[\s\n]$/,GN=Ge.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:null,parseHTML:n=>{var t;const{languageClassPrefix:e}=this.options,s=[...((t=n.firstElementChild)===null||t===void 0?void 0:t.classList)||[]].filter(o=>o.startsWith(e)).map(o=>o.replace(e,""))[0];return s||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:n,HTMLAttributes:t}){return["pre",ce(this.options.HTMLAttributes,t),["code",{class:n.attrs.language?this.options.languageClassPrefix+n.attrs.language:null},0]]},addCommands(){return{setCodeBlock:n=>({commands:t})=>t.setNode(this.name,n),toggleCodeBlock:n=>({commands:t})=>t.toggleNode(this.name,"paragraph",n)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:n,$anchor:t}=this.editor.state.selection,e=t.pos===1;return!n||t.parent.type.name!==this.name?!1:e||!t.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:n})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:t}=n,{selection:e}=t,{$from:i,empty:r}=e;if(!r||i.parent.type!==this.type)return!1;const s=i.parentOffset===i.parent.nodeSize-2,o=i.parent.textContent.endsWith(`

`);return!s||!o?!1:n.chain().command(({tr:a})=>(a.delete(i.pos-2,i.pos),!0)).exitCode().run()},ArrowDown:({editor:n})=>{if(!this.options.exitOnArrowDown)return!1;const{state:t}=n,{selection:e,doc:i}=t,{$from:r,empty:s}=e;if(!s||r.parent.type!==this.type||!(r.parentOffset===r.parent.nodeSize-2))return!1;const a=r.after();return a===void 0||i.nodeAt(a)?!1:n.commands.exitCode()}}},addInputRules(){return[iu({find:KN,type:this.type,getAttributes:n=>({language:n[1]})}),iu({find:JN,type:this.type,getAttributes:n=>({language:n[1]})})]},addProseMirrorPlugins(){return[new je({key:new gn("codeBlockVSCodeHandler"),props:{handlePaste:(n,t)=>{if(!t.clipboardData||this.editor.isActive(this.type.name))return!1;const e=t.clipboardData.getData("text/plain"),i=t.clipboardData.getData("vscode-editor-data"),r=i?JSON.parse(i):void 0,s=r?.mode;if(!e||!s)return!1;const{tr:o}=n.state;return o.replaceSelectionWith(this.type.create({language:s})),o.setSelection(Pt.near(o.doc.resolve(Math.max(0,o.selection.from-2)))),o.insertText(e.replace(/\r\n?/g,`
`)),o.setMeta("paste",!0),n.dispatch(o),!0}}})]}}),YN=Ge.create({name:"doc",topNode:!0,content:"block+"});function XN(n={}){return new je({view(t){return new QN(t,n)}})}class QN{constructor(t,e){this.editorView=t,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=e.width||1,this.color=e.color||"black",this.class=e.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let r=s=>{this[i](s)};return t.dom.addEventListener(i,r),{name:i,handler:r}})}destroy(){this.handlers.forEach(({name:t,handler:e})=>this.editorView.dom.removeEventListener(t,e))}update(t,e){this.cursorPos!=null&&e.doc!=t.state.doc&&(this.cursorPos>t.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(t){t!=this.cursorPos&&(this.cursorPos=t,t==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let t=this.editorView.state.doc.resolve(this.cursorPos),e=!t.parent.inlineContent,i;if(e){let a=t.nodeBefore,l=t.nodeAfter;if(a||l){let c=this.editorView.nodeDOM(this.cursorPos-(a?a.nodeSize:0));if(c){let u=c.getBoundingClientRect(),h=a?u.bottom:u.top;a&&l&&(h=(h+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),i={left:u.left,right:u.right,top:h-this.width/2,bottom:h+this.width/2}}}}if(!i){let a=this.editorView.coordsAtPos(this.cursorPos);i={left:a.left-this.width/2,right:a.left+this.width/2,top:a.top,bottom:a.bottom}}let r=this.editorView.dom.offsetParent;this.element||(this.element=r.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none; background-color: "+this.color),this.element.classList.toggle("prosemirror-dropcursor-block",e),this.element.classList.toggle("prosemirror-dropcursor-inline",!e);let s,o;if(!r||r==document.body&&getComputedStyle(r).position=="static")s=-pageXOffset,o=-pageYOffset;else{let a=r.getBoundingClientRect();s=a.left-r.scrollLeft,o=a.top-r.scrollTop}this.element.style.left=i.left-s+"px",this.element.style.top=i.top-o+"px",this.element.style.width=i.right-i.left+"px",this.element.style.height=i.bottom-i.top+"px"}scheduleRemoval(t){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),t)}dragover(t){if(!this.editorView.editable)return;let e=this.editorView.posAtCoords({left:t.clientX,top:t.clientY}),i=e&&e.inside>=0&&this.editorView.state.doc.nodeAt(e.inside),r=i&&i.type.spec.disableDropCursor,s=typeof r=="function"?r(this.editorView,e,t):r;if(e&&!s){let o=e.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let a=y0(this.editorView.state.doc,o,this.editorView.dragging.slice);a!=null&&(o=a)}this.setCursor(o),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(t){(t.target==this.editorView.dom||!this.editorView.dom.contains(t.relatedTarget))&&this.setCursor(null)}}const ZN=Ze.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[XN(this.options)]}});class ae extends $t{constructor(t){super(t,t)}map(t,e){let i=t.resolve(e.map(this.head));return ae.valid(i)?new ae(i):$t.near(i)}content(){return ht.empty}eq(t){return t instanceof ae&&t.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(t,e){if(typeof e.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new ae(t.resolve(e.pos))}getBookmark(){return new mh(this.anchor)}static valid(t){let e=t.parent;if(e.isTextblock||!tL(t)||!eL(t))return!1;let i=e.type.spec.allowGapCursor;if(i!=null)return i;let r=e.contentMatchAt(t.index()).defaultType;return r&&r.isTextblock}static findGapCursorFrom(t,e,i=!1){t:for(;;){if(!i&&ae.valid(t))return t;let r=t.pos,s=null;for(let o=t.depth;;o--){let a=t.node(o);if(e>0?t.indexAfter(o)<a.childCount:t.index(o)>0){s=a.child(e>0?t.indexAfter(o):t.index(o)-1);break}else if(o==0)return null;r+=e;let l=t.doc.resolve(r);if(ae.valid(l))return l}for(;;){let o=e>0?s.firstChild:s.lastChild;if(!o){if(s.isAtom&&!s.isText&&!Mt.isSelectable(s)){t=t.doc.resolve(r+s.nodeSize*e),i=!1;continue t}break}s=o,r+=e;let a=t.doc.resolve(r);if(ae.valid(a))return a}return null}}}ae.prototype.visible=!1;ae.findFrom=ae.findGapCursorFrom;$t.jsonID("gapcursor",ae);class mh{constructor(t){this.pos=t}map(t){return new mh(t.map(this.pos))}resolve(t){let e=t.resolve(this.pos);return ae.valid(e)?new ae(e):$t.near(e)}}function tL(n){for(let t=n.depth;t>=0;t--){let e=n.index(t),i=n.node(t);if(e==0){if(i.type.spec.isolating)return!0;continue}for(let r=i.child(e-1);;r=r.lastChild){if(r.childCount==0&&!r.inlineContent||r.isAtom||r.type.spec.isolating)return!0;if(r.inlineContent)return!1}}return!0}function eL(n){for(let t=n.depth;t>=0;t--){let e=n.indexAfter(t),i=n.node(t);if(e==i.childCount){if(i.type.spec.isolating)return!0;continue}for(let r=i.child(e);;r=r.firstChild){if(r.childCount==0&&!r.inlineContent||r.isAtom||r.type.spec.isolating)return!0;if(r.inlineContent)return!1}}return!0}function nL(){return new je({props:{decorations:oL,createSelectionBetween(n,t,e){return t.pos==e.pos&&ae.valid(e)?new ae(e):null},handleClick:rL,handleKeyDown:iL,handleDOMEvents:{beforeinput:sL}}})}const iL=ny({ArrowLeft:ho("horiz",-1),ArrowRight:ho("horiz",1),ArrowUp:ho("vert",-1),ArrowDown:ho("vert",1)});function ho(n,t){const e=n=="vert"?t>0?"down":"up":t>0?"right":"left";return function(i,r,s){let o=i.selection,a=t>0?o.$to:o.$from,l=o.empty;if(o instanceof Pt){if(!s.endOfTextblock(e)||a.depth==0)return!1;l=!1,a=i.doc.resolve(t>0?a.after():a.before())}let c=ae.findGapCursorFrom(a,t,l);return c?(r&&r(i.tr.setSelection(new ae(c))),!0):!1}}function rL(n,t,e){if(!n||!n.editable)return!1;let i=n.state.doc.resolve(t);if(!ae.valid(i))return!1;let r=n.posAtCoords({left:e.clientX,top:e.clientY});return r&&r.inside>-1&&Mt.isSelectable(n.state.doc.nodeAt(r.inside))?!1:(n.dispatch(n.state.tr.setSelection(new ae(i))),!0)}function sL(n,t){if(t.inputType!="insertCompositionText"||!(n.state.selection instanceof ae))return!1;let{$from:e}=n.state.selection,i=e.parent.contentMatchAt(e.index()).findWrapping(n.state.schema.nodes.text);if(!i)return!1;let r=et.empty;for(let o=i.length-1;o>=0;o--)r=et.from(i[o].createAndFill(null,r));let s=n.state.tr.replace(e.pos,e.pos,new ht(r,0,0));return s.setSelection(Pt.near(s.doc.resolve(e.pos+1))),n.dispatch(s),!1}function oL(n){if(!(n.selection instanceof ae))return null;let t=document.createElement("div");return t.className="ProseMirror-gapcursor",pe.create(n.doc,[sn.widget(n.selection.head,t,{key:"gapcursor"})])}const aL=Ze.create({name:"gapCursor",addProseMirrorPlugins(){return[nL()]},extendNodeSchema(n){var t;const e={name:n.name,options:n.options,storage:n.storage};return{allowGapCursor:(t=Et(dt(n,"allowGapCursor",e)))!==null&&t!==void 0?t:null}}}),lL=Ge.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:n}){return["br",ce(this.options.HTMLAttributes,n)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:n,chain:t,state:e,editor:i})=>n.first([()=>n.exitCode(),()=>n.command(()=>{const{selection:r,storedMarks:s}=e;if(r.$from.parent.type.spec.isolating)return!1;const{keepMarks:o}=this.options,{splittableMarks:a}=i.extensionManager,l=s||r.$to.parentOffset&&r.$from.marks();return t().insertContent({type:this.name}).command(({tr:c,dispatch:u})=>{if(u&&l&&o){const h=l.filter(f=>a.includes(f.type.name));c.ensureMarks(h)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),cL=Ge.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(n=>({tag:`h${n}`,attrs:{level:n}}))},renderHTML({node:n,HTMLAttributes:t}){return[`h${this.options.levels.includes(n.attrs.level)?n.attrs.level:this.options.levels[0]}`,ce(this.options.HTMLAttributes,t),0]},addCommands(){return{setHeading:n=>({commands:t})=>this.options.levels.includes(n.level)?t.setNode(this.name,n):!1,toggleHeading:n=>({commands:t})=>this.options.levels.includes(n.level)?t.toggleNode(this.name,"paragraph",n):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((n,t)=>({...n,[`Mod-Alt-${t}`]:()=>this.editor.commands.toggleHeading({level:t})}),{})},addInputRules(){return this.options.levels.map(n=>iu({find:new RegExp(`^(#{1,${n}})\\s$`),type:this.type,getAttributes:{level:n}}))}});var ka=200,Ae=function(){};Ae.prototype.append=function(t){return t.length?(t=Ae.from(t),!this.length&&t||t.length<ka&&this.leafAppend(t)||this.length<ka&&t.leafPrepend(this)||this.appendInner(t)):this};Ae.prototype.prepend=function(t){return t.length?Ae.from(t).append(this):this};Ae.prototype.appendInner=function(t){return new uL(this,t)};Ae.prototype.slice=function(t,e){return t===void 0&&(t=0),e===void 0&&(e=this.length),t>=e?Ae.empty:this.sliceInner(Math.max(0,t),Math.min(this.length,e))};Ae.prototype.get=function(t){if(!(t<0||t>=this.length))return this.getInner(t)};Ae.prototype.forEach=function(t,e,i){e===void 0&&(e=0),i===void 0&&(i=this.length),e<=i?this.forEachInner(t,e,i,0):this.forEachInvertedInner(t,e,i,0)};Ae.prototype.map=function(t,e,i){e===void 0&&(e=0),i===void 0&&(i=this.length);var r=[];return this.forEach(function(s,o){return r.push(t(s,o))},e,i),r};Ae.from=function(t){return t instanceof Ae?t:t&&t.length?new ky(t):Ae.empty};var ky=function(n){function t(i){n.call(this),this.values=i}n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t;var e={length:{configurable:!0},depth:{configurable:!0}};return t.prototype.flatten=function(){return this.values},t.prototype.sliceInner=function(r,s){return r==0&&s==this.length?this:new t(this.values.slice(r,s))},t.prototype.getInner=function(r){return this.values[r]},t.prototype.forEachInner=function(r,s,o,a){for(var l=s;l<o;l++)if(r(this.values[l],a+l)===!1)return!1},t.prototype.forEachInvertedInner=function(r,s,o,a){for(var l=s-1;l>=o;l--)if(r(this.values[l],a+l)===!1)return!1},t.prototype.leafAppend=function(r){if(this.length+r.length<=ka)return new t(this.values.concat(r.flatten()))},t.prototype.leafPrepend=function(r){if(this.length+r.length<=ka)return new t(r.flatten().concat(this.values))},e.length.get=function(){return this.values.length},e.depth.get=function(){return 0},Object.defineProperties(t.prototype,e),t}(Ae);Ae.empty=new ky([]);var uL=function(n){function t(e,i){n.call(this),this.left=e,this.right=i,this.length=e.length+i.length,this.depth=Math.max(e.depth,i.depth)+1}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},t.prototype.getInner=function(i){return i<this.left.length?this.left.get(i):this.right.get(i-this.left.length)},t.prototype.forEachInner=function(i,r,s,o){var a=this.left.length;if(r<a&&this.left.forEachInner(i,r,Math.min(s,a),o)===!1||s>a&&this.right.forEachInner(i,Math.max(r-a,0),Math.min(this.length,s)-a,o+a)===!1)return!1},t.prototype.forEachInvertedInner=function(i,r,s,o){var a=this.left.length;if(r>a&&this.right.forEachInvertedInner(i,r-a,Math.max(s,a)-a,o+a)===!1||s<a&&this.left.forEachInvertedInner(i,Math.min(r,a),s,o)===!1)return!1},t.prototype.sliceInner=function(i,r){if(i==0&&r==this.length)return this;var s=this.left.length;return r<=s?this.left.slice(i,r):i>=s?this.right.slice(i-s,r-s):this.left.slice(i,s).append(this.right.slice(0,r-s))},t.prototype.leafAppend=function(i){var r=this.right.leafAppend(i);if(r)return new t(this.left,r)},t.prototype.leafPrepend=function(i){var r=this.left.leafPrepend(i);if(r)return new t(r,this.right)},t.prototype.appendInner=function(i){return this.left.depth>=Math.max(this.right.depth,i.depth)+1?new t(this.left,new t(this.right,i)):new t(this,i)},t}(Ae),My=Ae;const hL=500;class cn{constructor(t,e){this.items=t,this.eventCount=e}popEvent(t,e){if(this.eventCount==0)return null;let i=this.items.length;for(;;i--)if(this.items.get(i-1).selection){--i;break}let r,s;e&&(r=this.remapping(i,this.items.length),s=r.maps.length);let o=t.tr,a,l,c=[],u=[];return this.items.forEach((h,f)=>{if(!h.step){r||(r=this.remapping(i,f+1),s=r.maps.length),s--,u.push(h);return}if(r){u.push(new vn(h.map));let d=h.step.map(r.slice(s)),g;d&&o.maybeStep(d).doc&&(g=o.mapping.maps[o.mapping.maps.length-1],c.push(new vn(g,void 0,void 0,c.length+u.length))),s--,g&&r.appendMap(g,s)}else o.maybeStep(h.step);if(h.selection)return a=r?h.selection.map(r.slice(s)):h.selection,l=new cn(this.items.slice(0,i).append(u.reverse().concat(c)),this.eventCount-1),!1},this.items.length,0),{remaining:l,transform:o,selection:a}}addTransform(t,e,i,r){let s=[],o=this.eventCount,a=this.items,l=!r&&a.length?a.get(a.length-1):null;for(let u=0;u<t.steps.length;u++){let h=t.steps[u].invert(t.docs[u]),f=new vn(t.mapping.maps[u],h,e),d;(d=l&&l.merge(f))&&(f=d,u?s.pop():a=a.slice(0,a.length-1)),s.push(f),e&&(o++,e=void 0),r||(l=f)}let c=o-i.depth;return c>dL&&(a=fL(a,c),o-=c),new cn(a.append(s),o)}remapping(t,e){let i=new _r;return this.items.forEach((r,s)=>{let o=r.mirrorOffset!=null&&s-r.mirrorOffset>=t?i.maps.length-r.mirrorOffset:void 0;i.appendMap(r.map,o)},t,e),i}addMaps(t){return this.eventCount==0?this:new cn(this.items.append(t.map(e=>new vn(e))),this.eventCount)}rebased(t,e){if(!this.eventCount)return this;let i=[],r=Math.max(0,this.items.length-e),s=t.mapping,o=t.steps.length,a=this.eventCount;this.items.forEach(f=>{f.selection&&a--},r);let l=e;this.items.forEach(f=>{let d=s.getMirror(--l);if(d==null)return;o=Math.min(o,d);let g=s.maps[d];if(f.step){let b=t.steps[d].invert(t.docs[d]),k=f.selection&&f.selection.map(s.slice(l+1,d));k&&a++,i.push(new vn(g,b,k))}else i.push(new vn(g))},r);let c=[];for(let f=e;f<o;f++)c.push(new vn(s.maps[f]));let u=this.items.slice(0,r).append(c).append(i),h=new cn(u,a);return h.emptyItemCount()>hL&&(h=h.compress(this.items.length-i.length)),h}emptyItemCount(){let t=0;return this.items.forEach(e=>{e.step||t++}),t}compress(t=this.items.length){let e=this.remapping(0,t),i=e.maps.length,r=[],s=0;return this.items.forEach((o,a)=>{if(a>=t)r.push(o),o.selection&&s++;else if(o.step){let l=o.step.map(e.slice(i)),c=l&&l.getMap();if(i--,c&&e.appendMap(c,i),l){let u=o.selection&&o.selection.map(e.slice(i));u&&s++;let h=new vn(c.invert(),l,u),f,d=r.length-1;(f=r.length&&r[d].merge(h))?r[d]=f:r.push(h)}}else o.map&&i--},this.items.length,0),new cn(My.from(r.reverse()),s)}}cn.empty=new cn(My.empty,0);function fL(n,t){let e;return n.forEach((i,r)=>{if(i.selection&&t--==0)return e=r,!1}),n.slice(e)}class vn{constructor(t,e,i,r){this.map=t,this.step=e,this.selection=i,this.mirrorOffset=r}merge(t){if(this.step&&t.step&&!t.selection){let e=t.step.merge(this.step);if(e)return new vn(e.getMap().invert(),e,this.selection)}}}class Yn{constructor(t,e,i,r){this.done=t,this.undone=e,this.prevRanges=i,this.prevTime=r}}const dL=20;function pL(n,t,e,i){let r=e.getMeta(li),s;if(r)return r.historyState;e.getMeta(mL)&&(n=new Yn(n.done,n.undone,null,0));let o=e.getMeta("appendedTransaction");if(e.steps.length==0)return n;if(o&&o.getMeta(li))return o.getMeta(li).redo?new Yn(n.done.addTransform(e,void 0,i,Po(t)),n.undone,up(e.mapping.maps[e.steps.length-1]),n.prevTime):new Yn(n.done,n.undone.addTransform(e,void 0,i,Po(t)),null,n.prevTime);if(e.getMeta("addToHistory")!==!1&&!(o&&o.getMeta("addToHistory")===!1)){let a=n.prevTime==0||!o&&(n.prevTime<(e.time||0)-i.newGroupDelay||!gL(e,n.prevRanges)),l=o?lc(n.prevRanges,e.mapping):up(e.mapping.maps[e.steps.length-1]);return new Yn(n.done.addTransform(e,a?t.selection.getBookmark():void 0,i,Po(t)),cn.empty,l,e.time)}else return(s=e.getMeta("rebased"))?new Yn(n.done.rebased(e,s),n.undone.rebased(e,s),lc(n.prevRanges,e.mapping),n.prevTime):new Yn(n.done.addMaps(e.mapping.maps),n.undone.addMaps(e.mapping.maps),lc(n.prevRanges,e.mapping),n.prevTime)}function gL(n,t){if(!t)return!1;if(!n.docChanged)return!0;let e=!1;return n.mapping.maps[0].forEach((i,r)=>{for(let s=0;s<t.length;s+=2)i<=t[s+1]&&r>=t[s]&&(e=!0)}),e}function up(n){let t=[];return n.forEach((e,i,r,s)=>t.push(r,s)),t}function lc(n,t){if(!n)return null;let e=[];for(let i=0;i<n.length;i+=2){let r=t.map(n[i],1),s=t.map(n[i+1],-1);r<=s&&e.push(r,s)}return e}function Cy(n,t,e,i){let r=Po(t),s=li.get(t).spec.config,o=(i?n.undone:n.done).popEvent(t,r);if(!o)return;let a=o.selection.resolve(o.transform.doc),l=(i?n.done:n.undone).addTransform(o.transform,t.selection.getBookmark(),s,r),c=new Yn(i?l:o.remaining,i?o.remaining:l,null,0);e(o.transform.setSelection(a).setMeta(li,{redo:i,historyState:c}).scrollIntoView())}let cc=!1,hp=null;function Po(n){let t=n.plugins;if(hp!=t){cc=!1,hp=t;for(let e=0;e<t.length;e++)if(t[e].spec.historyPreserveItems){cc=!0;break}}return cc}const li=new gn("history"),mL=new gn("closeHistory");function yL(n={}){return n={depth:n.depth||100,newGroupDelay:n.newGroupDelay||500},new je({key:li,state:{init(){return new Yn(cn.empty,cn.empty,null,0)},apply(t,e,i){return pL(e,i,t,n)}},config:n,props:{handleDOMEvents:{beforeinput(t,e){let i=e.inputType,r=i=="historyUndo"?Oy:i=="historyRedo"?Ay:null;return r?(e.preventDefault(),r(t.state,t.dispatch)):!1}}}})}const Oy=(n,t)=>{let e=li.getState(n);return!e||e.done.eventCount==0?!1:(t&&Cy(e,n,t,!1),!0)},Ay=(n,t)=>{let e=li.getState(n);return!e||e.undone.eventCount==0?!1:(t&&Cy(e,n,t,!0),!0)},bL=Ze.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:n,dispatch:t})=>Oy(n,t),redo:()=>({state:n,dispatch:t})=>Ay(n,t)}},addProseMirrorPlugins(){return[yL(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Mod-y":()=>this.editor.commands.redo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),vL=Ge.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:n}){return["hr",ce(this.options.HTMLAttributes,n)]},addCommands(){return{setHorizontalRule:()=>({chain:n})=>n().insertContent({type:this.name}).command(({tr:t,dispatch:e})=>{var i;if(e){const{$to:r}=t.selection,s=r.end();if(r.nodeAfter)t.setSelection(Pt.create(t.doc,r.pos));else{const o=(i=r.parent.type.contentMatch.defaultType)===null||i===void 0?void 0:i.create();o&&(t.insert(s,o),t.setSelection(Pt.create(t.doc,s)))}t.scrollIntoView()}return!0}).run()}},addInputRules(){return[yy({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),xL=/(?:^|\s)((?:\*)((?:[^*]+))(?:\*))$/,wL=/(?:^|\s)((?:\*)((?:[^*]+))(?:\*))/g,_L=/(?:^|\s)((?:_)((?:[^_]+))(?:_))$/,SL=/(?:^|\s)((?:_)((?:[^_]+))(?:_))/g,kL=on.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:n=>n.style.fontStyle!=="normal"&&null},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:n}){return["em",ce(this.options.HTMLAttributes,n),0]},addCommands(){return{setItalic:()=>({commands:n})=>n.setMark(this.name),toggleItalic:()=>({commands:n})=>n.toggleMark(this.name),unsetItalic:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[Lr({find:xL,type:this.type}),Lr({find:_L,type:this.type})]},addPasteRules(){return[Zi({find:wL,type:this.type}),Zi({find:SL,type:this.type})]}}),ML=Ge.create({name:"listItem",addOptions(){return{HTMLAttributes:{}}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:n}){return["li",ce(this.options.HTMLAttributes,n),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),CL=Ge.create({name:"listItem",addOptions(){return{HTMLAttributes:{}}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:n}){return["li",ce(this.options.HTMLAttributes,n),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),fp=on.create({name:"textStyle",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"span",getAttrs:n=>n.hasAttribute("style")?{}:!1}]},renderHTML({HTMLAttributes:n}){return["span",ce(this.options.HTMLAttributes,n),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:n,commands:t})=>{const e=ul(n,this.type);return Object.entries(e).some(([,r])=>!!r)?!0:t.unsetMark(this.name)}}}}),dp=/^(\d+)\.\s$/,OL=Ge.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:n=>n.hasAttribute("start")?parseInt(n.getAttribute("start")||"",10):1}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:n}){const{start:t,...e}=n;return t===1?["ol",ce(this.options.HTMLAttributes,e),0]:["ol",ce(this.options.HTMLAttributes,n),0]},addCommands(){return{toggleOrderedList:()=>({commands:n,chain:t})=>this.options.keepAttributes?t().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(CL.name,this.editor.getAttributes(fp.name)).run():n.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let n=Rs({find:dp,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(n=Rs({find:dp,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(fp.name),editor:this.editor})),[n]}}),AL=Ge.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:n}){return["p",ce(this.options.HTMLAttributes,n),0]},addCommands(){return{setParagraph:()=>({commands:n})=>n.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),TL=/(?:^|\s)((?:~~)((?:[^~]+))(?:~~))$/,EL=/(?:^|\s)((?:~~)((?:[^~]+))(?:~~))/g,$L=on.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:n=>n.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:n}){return["s",ce(this.options.HTMLAttributes,n),0]},addCommands(){return{setStrike:()=>({commands:n})=>n.setMark(this.name),toggleStrike:()=>({commands:n})=>n.toggleMark(this.name),unsetStrike:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-x":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[Lr({find:TL,type:this.type})]},addPasteRules(){return[Zi({find:EL,type:this.type})]}}),PL=Ge.create({name:"text",group:"inline"}),DL=Ze.create({name:"starterKit",addExtensions(){var n,t,e,i,r,s,o,a,l,c,u,h,f,d,g,b,k,O;const D=[];return this.options.blockquote!==!1&&D.push(LN.configure((n=this.options)===null||n===void 0?void 0:n.blockquote)),this.options.bold!==!1&&D.push(jN.configure((t=this.options)===null||t===void 0?void 0:t.bold)),this.options.bulletList!==!1&&D.push(HN.configure((e=this.options)===null||e===void 0?void 0:e.bulletList)),this.options.code!==!1&&D.push(WN.configure((i=this.options)===null||i===void 0?void 0:i.code)),this.options.codeBlock!==!1&&D.push(GN.configure((r=this.options)===null||r===void 0?void 0:r.codeBlock)),this.options.document!==!1&&D.push(YN.configure((s=this.options)===null||s===void 0?void 0:s.document)),this.options.dropcursor!==!1&&D.push(ZN.configure((o=this.options)===null||o===void 0?void 0:o.dropcursor)),this.options.gapcursor!==!1&&D.push(aL.configure((a=this.options)===null||a===void 0?void 0:a.gapcursor)),this.options.hardBreak!==!1&&D.push(lL.configure((l=this.options)===null||l===void 0?void 0:l.hardBreak)),this.options.heading!==!1&&D.push(cL.configure((c=this.options)===null||c===void 0?void 0:c.heading)),this.options.history!==!1&&D.push(bL.configure((u=this.options)===null||u===void 0?void 0:u.history)),this.options.horizontalRule!==!1&&D.push(vL.configure((h=this.options)===null||h===void 0?void 0:h.horizontalRule)),this.options.italic!==!1&&D.push(kL.configure((f=this.options)===null||f===void 0?void 0:f.italic)),this.options.listItem!==!1&&D.push(ML.configure((d=this.options)===null||d===void 0?void 0:d.listItem)),this.options.orderedList!==!1&&D.push(OL.configure((g=this.options)===null||g===void 0?void 0:g.orderedList)),this.options.paragraph!==!1&&D.push(AL.configure((b=this.options)===null||b===void 0?void 0:b.paragraph)),this.options.strike!==!1&&D.push($L.configure((k=this.options)===null||k===void 0?void 0:k.strike)),this.options.text!==!1&&D.push(PL.configure((O=this.options)===null||O===void 0?void 0:O.text)),D}});var IL=_m;function NL(n,t,e){var i=n.length;return e=e===void 0?i:e,!t&&e>=i?n:IL(n,t,e)}var LL=NL,RL="\\ud800-\\udfff",zL="\\u0300-\\u036f",BL="\\ufe20-\\ufe2f",FL="\\u20d0-\\u20ff",jL=zL+BL+FL,VL="\\ufe0e\\ufe0f",HL="\\u200d",UL=RegExp("["+HL+RL+jL+VL+"]");function qL(n){return UL.test(n)}var Ty=qL;function WL(n){return n.split("")}var KL=WL,Ey="\\ud800-\\udfff",JL="\\u0300-\\u036f",GL="\\ufe20-\\ufe2f",YL="\\u20d0-\\u20ff",XL=JL+GL+YL,QL="\\ufe0e\\ufe0f",ZL="["+Ey+"]",fu="["+XL+"]",du="\\ud83c[\\udffb-\\udfff]",tR="(?:"+fu+"|"+du+")",$y="[^"+Ey+"]",Py="(?:\\ud83c[\\udde6-\\uddff]){2}",Dy="[\\ud800-\\udbff][\\udc00-\\udfff]",eR="\\u200d",Iy=tR+"?",Ny="["+QL+"]?",nR="(?:"+eR+"(?:"+[$y,Py,Dy].join("|")+")"+Ny+Iy+")*",iR=Ny+Iy+nR,rR="(?:"+[$y+fu+"?",fu,Py,Dy,ZL].join("|")+")",sR=RegExp(du+"(?="+du+")|"+rR+iR,"g");function oR(n){return n.match(sR)||[]}var aR=oR,lR=KL,cR=Ty,uR=aR;function hR(n){return cR(n)?uR(n):lR(n)}var fR=hR,dR=LL,pR=Ty,gR=fR,mR=Fu;function yR(n){return function(t){t=mR(t);var e=pR(t)?gR(t):void 0,i=e?e[0]:t.charAt(0),r=e?dR(e,1).join(""):t.slice(1);return i[n]()+r}}var bR=yR,vR=bR,xR=vR("toUpperCase"),wR=xR,_R=Fu,SR=wR;function kR(n){return SR(_R(n).toLowerCase())}var Ly=kR;const MR=/(?:^|\s)(!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\))$/,CR=Ge.create({name:"image",addOptions(){return{inline:!1,allowBase64:!1,HTMLAttributes:{}}},inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes(){return{src:{default:null},alt:{default:null},title:{default:null}}},parseHTML(){return[{tag:this.options.allowBase64?"img[src]":'img[src]:not([src^="data:"])'}]},renderHTML({HTMLAttributes:n}){return["img",ce(this.options.HTMLAttributes,n)]},addCommands(){return{setImage:n=>({commands:t})=>t.insertContent({type:this.name,attrs:n})}},addInputRules(){return[yy({find:MR,type:this.type,getAttributes:n=>{const[,,t,e,i]=n;return{src:e,alt:t,title:i}}})]}}),OR=_t("<span></span>",2),AR=_t("<li></li>",2),TR=_t('<input type="url">',1),ER=_t("<article><footer><nav><ul><li></li></ul><ul><li></li></ul></nav></footer></article>",14),$R=_t("<ul><li></li><li></li></ul>",6),PR=_t("<ul><li></li></ul>",4),DR=_t('<article class="rich-editor"><header><nav><ul></ul><ul></ul><ul></ul><ul></ul></nav></header><footer><nav><ul><li></li></ul><ul><li></li><li></li></ul><ul><li></li></ul></nav></footer></article>',32),IR=n=>{const t=n.children,e=new hN({element:OR.cloneNode(!0),content:t,extensions:[DL,IN,DN.configure({openOnClick:!1}),CR.configure({allowBase64:!0})]}),i=o=>{const a=()=>e.isActive(o.name,o.attributes),[l,c]=Zt(a());e.on("transaction",()=>c(a()));const u=`${Ly(o.name[0])}${o.name.slice(1)}`,h=`toggle${u}`,f=`set${u}`;return(()=>{const d=AR.cloneNode(!0);return J(d,I(Nt,{get icon(){return o.icon},action:()=>{(e.commands[h]??e.commands[f])(o.attributes),e.commands.focus()},get class(){return l()?void 0:"outline"}})),d})()},r=o=>{const a=(()=>{const u=TR.cloneNode(!0);return u.$$keydown=({key:h})=>{switch(h){case"Escape":l();break;case"Enter":c();break}},Oe(()=>u.value=o.href),u})();function l(){re.back()}function c(){e.commands.setLink({href:a.value,target:"_blank"}),l(),e.commands.focus()}return(()=>{const u=ER.cloneNode(!0),h=u.firstChild,f=h.firstChild,d=f.firstChild,g=d.firstChild,b=d.nextSibling,k=b.firstChild;return J(u,a,h),J(g,I(Nt,{icon:"close",action:l})),J(k,I(Nt,{icon:"done",action:c})),u})()},s=()=>{const[o,a]=Zt(e.getAttributes("link")?.href??"");return e.on("transaction",()=>a(e.getAttributes("link")?.href??"")),()=>I(Vr,{get children(){return[I(We,{get when(){return o()},get children(){const l=$R.cloneNode(!0),c=l.firstChild,u=c.nextSibling;return J(c,I(Nt,{icon:"link",action:()=>re.push(()=>I(r,{get href(){return o()}}))})),J(u,I(Nt,{icon:"link_off",action:()=>e.commands.unsetLink(),class:"outline"})),l}}),I(We,{when:!0,get children(){const l=PR.cloneNode(!0),c=l.firstChild;return J(c,I(Nt,{icon:"add_link",action:()=>re.push(()=>I(r,{get href(){return o()}})),class:"outline"})),l}})]}})};return()=>(()=>{const o=DR.cloneNode(!0),a=o.firstChild,l=a.firstChild,c=l.firstChild,u=c.nextSibling,h=u.nextSibling,f=h.nextSibling,d=a.nextSibling,g=d.firstChild,b=g.firstChild,k=b.firstChild,O=b.nextSibling,D=O.firstChild,F=D.nextSibling,W=O.nextSibling,V=W.firstChild;return o.$$click=()=>e.commands.focus(),J(c,I(i,{icon:"format_h1",name:"heading",attributes:{level:1}}),null),J(c,I(i,{icon:"format_h2",name:"heading",attributes:{level:2}}),null),J(c,I(i,{icon:"format_h3",name:"heading",attributes:{level:3}}),null),J(c,I(i,{icon:"format_h4",name:"heading",attributes:{level:4}}),null),J(c,I(i,{icon:"format_h5",name:"heading",attributes:{level:5}}),null),J(c,I(i,{icon:"format_h6",name:"heading",attributes:{level:6}}),null),J(c,I(i,{icon:"code",name:"code"}),null),J(c,I(i,{icon:"format_paragraph",name:"paragraph"}),null),J(u,I(i,{icon:"format_quote",name:"blockquote"}),null),J(u,I(i,{icon:"data_object",name:"codeBlock"}),null),J(h,I(i,{icon:"format_list_numbered",name:"orderedList"}),null),J(h,I(i,{icon:"format_list_bulleted",name:"bulletList"}),null),J(l,I(s,{}),f),J(f,I(i,{icon:"format_bold",name:"bold"}),null),J(f,I(i,{icon:"format_italic",name:"italic"}),null),J(f,I(i,{icon:"format_underlined",name:"underline"}),null),J(f,I(i,{icon:"format_strikethrough",name:"strike"}),null),J(o,()=>e.options.element,d),J(k,I(Nt,{icon:"close",action:()=>re.back()})),J(D,I(Nt,{icon:"undo",action:()=>e.commands.undo()})),J(F,I(Nt,{icon:"redo",action:()=>e.commands.redo()})),J(V,I(Nt,{icon:"done",action:()=>{n.onSave(e.getHTML()),re.back()}})),o})()};vi(["keydown","click"]);const NR=_t("<div></div>",2),LR=_t('<div class="multiline-viewer"></div>',2),RR=n=>{const t=NR.cloneNode(!0);return er(()=>t.innerHTML=Bn(kt.store,n.path)??""),(()=>{const e=LR.cloneNode(!0);return J(e,I(Ce,{get when(){return he.get()==="edit"},get children(){return I(Nt,{icon:"edit_note",action:()=>re.push(()=>I(IR,{onSave:i=>kt.update(r=>Uu(r,n.path,i)),get children(){return t.innerHTML}}))})}}),null),J(e,t,null),e})()},Ue=n=>{const[t,e]=pn(n,["multiline"]);return I(Ce,{get when(){return t.multiline},get fallback(){return I(CE,e)},get children(){return I(RR,e)}})},pp=_t("<li></li>",2),zR=_t("<ul></ul>",2);function yh(n){const[t,e]=pn(n,["children","path","factory","inline"]);function i(){function r(o){kt.update(a=>{let l=Bn(a,t.path);l||(l=[],Uu(a,t.path,l)),l.push(o)})}const s=t.factory;s?re.push(()=>I(s,{callback:r})):r(null)}return(()=>{const r=zR.cloneNode(!0);return xi(r,e,!1,!0),J(r,I(xr,{get each(){return Bn(kt.store,n.path)},children:(s,o)=>(()=>{const a=pp.cloneNode(!0);return J(a,I(Ce,{get when(){return he.get()==="edit"},get fallback(){return t.children(`${n.path}[${o()}]`)},get children(){return I(Ji,{get children(){return[Re(()=>t.children(`${n.path}[${o()}]`)),I(Nt,{icon:"delete",action:()=>kt.update(l=>Bn(l,t.path).splice(o(),1)),class:"outline danger"})]}})}})),a})()}),null),J(r,I(Ce,{get when(){return he.get()==="edit"},get children(){const s=pp.cloneNode(!0);return J(s,I(Nt,{icon:"add",action:i,class:"outline"})),s}}),null),r})()}const BR=_t("<button></button>",2),Ry=n=>{const[t,e]=pn(n,["action","active","name","class"]);return(()=>{const i=BR.cloneNode(!0);return xi(i,jn({get class(){return Js("keyword",t.active?void 0:"outline",t.class)},get onClick(){return t.action}},e),!1,!0),J(i,()=>t.name),i})()};const zy=n=>I(yh,{get path(){return n.path},class:"tags",get factory(){return n.factory},children:t=>I(_u.Provider,{get value(){return Re(()=>!!n.readonly)()?"view":he.get()},get children(){return[I(De,{name:"loyalty"}),I(Ue,{path:t})]}})}),FR=_t("<article><header><hgroup><h1></h1><h2></h2></hgroup></header><footer><nav><ul></ul><ul><li></li></ul></nav></footer></article>",20),jR="keywords",bh=n=>{const t=`${jR}.${n.keyword}`,e=i=>`${t}.${i}`;return()=>(()=>{const i=FR.cloneNode(!0),r=i.firstChild,s=r.firstChild,o=s.firstChild,a=o.nextSibling,l=r.nextSibling,c=l.firstChild,u=c.firstChild,h=u.nextSibling,f=h.firstChild;return i.style.setProperty("width","100%"),J(o,()=>n.keyword),J(a,I(Ue,{get path(){return e("url")}})),J(i,I(Ue,{get path(){return e("description")},multiline:!0}),l),J(i,I(zy,{get path(){return e("tags")}}),l),J(f,I(Nt,{icon:"done",action:()=>{re.back(),n.callback&&n.callback()}})),i})()},VR=_t('<article><footer><nav><ul><li></li></ul><ul><li><input type="search" placeholder="enter keyword"></li></ul><ul><li></li></ul></nav></footer></article>',19),HR=n=>{const[t,e]=Zt(""),[i,r]=Zt(Object.keys(kt.store.keywords));function s(){re.back(),kt.update(l=>l.keywords[t()]={}),o(t()),re.push(()=>I(bh,{get keyword(){return t()}}))}function o(l=i()[0]){n.callback(l),re.back()}function a(){re.back()}return()=>(()=>{const l=VR.cloneNode(!0),c=l.firstChild,u=c.firstChild,h=u.firstChild,f=h.firstChild,d=h.nextSibling,g=d.firstChild,b=g.firstChild,k=d.nextSibling,O=k.firstChild;return l.style.setProperty("width","100%"),J(l,I(Km,{nowrap:!0,get children(){return I(xr,{get each(){return i()},children:D=>I(Ry,{action:()=>o(D),name:D,get active(){return uc(D,t())}})})}}),c),J(f,I(Nt,{icon:"close",action:a,class:"secondary outline"})),b.$$keyup=({key:D,target:F})=>{if(F instanceof HTMLInputElement){const W=F.value.toLowerCase();switch(D){case"Enter":if(t().length<3)return;uc(t(),i()[0])?o():s();return;case"Escape":a();return}r(Object.keys(kt.store.keywords).map(V=>[V,V.toLowerCase()]).filter(([,V])=>V.startsWith(W)).sort(([,V],[,T])=>V.localeCompare(T)).map(([V])=>V)),e(F.value)}},b.autofocus=!0,J(O,I(Vr,{get fallback(){return I(Nt,{icon:"question_mark",disabled:!0,action:()=>{}})},get children(){return[I(We,{get when(){return uc(t(),i()[0])},get children(){return I(Nt,{icon:"done",action:()=>o(i()[0])})}}),I(We,{get when(){return t().length>2},get children(){return I(Nt,{icon:"add",action:s})}})]}})),Oe(()=>b.value=t()),l})()},uc=(n,t)=>n?.localeCompare(t??"",void 0,{sensitivity:"base"})===0;vi(["keyup"]);const UR=n=>I(yh,{class:"keyword-list",get path(){return n.path},factory:HR,children:t=>{const e=Bn(kt.store,t);return I(Ry,{action:()=>re.push(()=>I(bh,{keyword:e})),name:e})}});const qR=_t("<section><h6></h6></section>",4),Ma=n=>{const[t,e]=pn(n,["children"]);return I(Ce,{get when(){return Bn(kt.store,n.path)?.length||he.get()==="edit"},get children(){const i=qR.cloneNode(!0),r=i.firstChild;return J(r,()=>Ly(String($s(n.path.split("."))))),J(i,I(yh,jn({class:"inline"},e,{get children(){return t.children}})),null),i}})},WR=_t("<footer></footer>",2),KR=_t("<article><header><hgroup><h4></h4><h5></h5></hgroup></header></article>",10),JR="cv.experience",GR=n=>{const t=kt.store.cv.experience[n.id],e=`${JR}[${[n.id]}]`,i=r=>`${e}.${r}`;return(()=>{const r=KR.cloneNode(!0),s=r.firstChild,o=s.firstChild,a=o.firstChild,l=a.nextSibling;return J(a,I(Ji,{get children(){return[I(Oo,{record:t}),I(Ue,{path:`${e}.title`})]}})),J(l,I(Ue,{path:`${e}.interval`})),J(r,I(Ce,{get when(){return t.type==="professional"},get children(){return[I(Ma,{get path(){return i("roles")},children:c=>I(Ue,{path:c})}),I(Ma,{get path(){return i("tasks")},children:c=>I(Ue,{path:c})})]}}),null),J(r,I(Ue,{get path(){return i("description")},multiline:!0}),null),J(r,I(Ce,{get when(){return t.keywords?.length||he.get()==="edit"},get children(){const c=WR.cloneNode(!0);return J(c,I(UR,{get path(){return i("keywords")}})),c}}),null),Oe(()=>jg(r,Js(t.type,"record"))),r})()},gp=_t("<h2>Experience</h2>",2),YR=_t("<section></section>",2),mp=_t("<h3></h3>",2),XR=_t('<section class="scope"></section>',2),hc={professional:0,education:1,hobby:2},QR={professional:"work",education:"school",hobby:"self_improvement"},yp={professional:"Work Projects",education:"Education",hobby:"Hobbies and Interests"},ZR=()=>{const[n,t]=Zt({_:[]}),e=i=>{const[r,s]=i.substring(0,7).split("/");return s&&r?new Date(+s,+r-1,0,0,0,0,0).getTime():Number.MAX_SAFE_INTEGER};return er(()=>{const i=kt.store.cv.experience.map((r,s)=>({record:r,id:s})).filter(({record:{type:r}})=>fc(hc[r],...kt.store.cv.profile.scope)).sort(({record:{interval:r}},{record:{interval:s}})=>e(s)-e(r));if(kt.store.cv.profile.grouped){const r={};for(const{record:s,id:o}of i)r[s.type]?r[s.type].push(o):r[s.type]=[o];t(r)}else t({_:i.map(({id:r})=>r)})}),(()=>{const i=YR.cloneNode(!0);return J(i,I(Ce,{get when(){return he.get()==="edit"&&!kt.store.cv.profile.grouped},get fallback(){return gp.cloneNode(!0)},get children(){return I(Ji,{style:{width:"100%","justify-content":"space-between"},get children(){return[gp.cloneNode(!0),I(Ji,{get children(){return I(xr,{each:["professional","education","hobby"],children:r=>I(Ce,{get when(){return fc(hc[r],...kt.store.cv.profile.scope)},get children(){return I(Nt,{get icon(){return QR[r]},action:()=>{kt.update(s=>s.cv.experience.push(bp(r)))},class:r})}})})}})]}})}}),null),J(i,I(xr,{get each(){return Re(()=>!!kt.store.cv.profile.grouped)()?["professional","education","hobby"].filter(r=>fc(hc[r],...kt.store.cv.profile.scope)):["_"]},children:r=>(()=>{const s=XR.cloneNode(!0);return J(s,I(Ce,{get when(){return n()[r]?.length>1||he.get()==="edit"},get children(){return[I(Ce,{get when(){return Re(()=>!!kt.store.cv.profile.grouped)()&&he.get()==="edit"},get fallback(){return(()=>{const o=mp.cloneNode(!0);return J(o,()=>yp[r]),o})()},get children(){return I(Km,{style:{width:"100%","justify-content":"space-between"},get children(){return[(()=>{const o=mp.cloneNode(!0);return J(o,()=>yp[r]),o})(),I(Nt,{icon:"add",action:()=>{kt.update(o=>o.cv.experience.push(bp(r)))},class:r})]}})}}),I(xr,{get each(){return n()[r]},children:o=>I(GR,{id:o})})]}})),s})()}),null),i})()},fc=(n,t,e)=>n>=t&&n<=e,bp=n=>{switch(n){case"education":case"hobby":return{type:n,title:"",interval:"",keywords:[]};case"professional":return{type:n,title:"",interval:"",roles:[],tasks:[],keywords:[]}}};/*!
 * @kurkle/color v0.3.2
 * https://github.com/kurkle/color#readme
 * (c) 2023 Jukka Kurkela
 * Released under the MIT License
 */function Ys(n){return n+.5|0}const ni=(n,t,e)=>Math.max(Math.min(n,e),t);function ps(n){return ni(Ys(n*2.55),0,255)}function ci(n){return ni(Ys(n*255),0,255)}function Nn(n){return ni(Ys(n/2.55)/100,0,1)}function vp(n){return ni(Ys(n*100),0,100)}const en={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},pu=[..."0123456789ABCDEF"],t5=n=>pu[n&15],e5=n=>pu[(n&240)>>4]+pu[n&15],fo=n=>(n&240)>>4===(n&15),n5=n=>fo(n.r)&&fo(n.g)&&fo(n.b)&&fo(n.a);function i5(n){var t=n.length,e;return n[0]==="#"&&(t===4||t===5?e={r:255&en[n[1]]*17,g:255&en[n[2]]*17,b:255&en[n[3]]*17,a:t===5?en[n[4]]*17:255}:(t===7||t===9)&&(e={r:en[n[1]]<<4|en[n[2]],g:en[n[3]]<<4|en[n[4]],b:en[n[5]]<<4|en[n[6]],a:t===9?en[n[7]]<<4|en[n[8]]:255})),e}const r5=(n,t)=>n<255?t(n):"";function s5(n){var t=n5(n)?t5:e5;return n?"#"+t(n.r)+t(n.g)+t(n.b)+r5(n.a,t):void 0}const o5=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function By(n,t,e){const i=t*Math.min(e,1-e),r=(s,o=(s+n/30)%12)=>e-i*Math.max(Math.min(o-3,9-o,1),-1);return[r(0),r(8),r(4)]}function a5(n,t,e){const i=(r,s=(r+n/60)%6)=>e-e*t*Math.max(Math.min(s,4-s,1),0);return[i(5),i(3),i(1)]}function l5(n,t,e){const i=By(n,1,.5);let r;for(t+e>1&&(r=1/(t+e),t*=r,e*=r),r=0;r<3;r++)i[r]*=1-t-e,i[r]+=t;return i}function c5(n,t,e,i,r){return n===r?(t-e)/i+(t<e?6:0):t===r?(e-n)/i+2:(n-t)/i+4}function vh(n){const e=n.r/255,i=n.g/255,r=n.b/255,s=Math.max(e,i,r),o=Math.min(e,i,r),a=(s+o)/2;let l,c,u;return s!==o&&(u=s-o,c=a>.5?u/(2-s-o):u/(s+o),l=c5(e,i,r,u,s),l=l*60+.5),[l|0,c||0,a]}function xh(n,t,e,i){return(Array.isArray(t)?n(t[0],t[1],t[2]):n(t,e,i)).map(ci)}function wh(n,t,e){return xh(By,n,t,e)}function u5(n,t,e){return xh(l5,n,t,e)}function h5(n,t,e){return xh(a5,n,t,e)}function Fy(n){return(n%360+360)%360}function f5(n){const t=o5.exec(n);let e=255,i;if(!t)return;t[5]!==i&&(e=t[6]?ps(+t[5]):ci(+t[5]));const r=Fy(+t[2]),s=+t[3]/100,o=+t[4]/100;return t[1]==="hwb"?i=u5(r,s,o):t[1]==="hsv"?i=h5(r,s,o):i=wh(r,s,o),{r:i[0],g:i[1],b:i[2],a:e}}function d5(n,t){var e=vh(n);e[0]=Fy(e[0]+t),e=wh(e),n.r=e[0],n.g=e[1],n.b=e[2]}function p5(n){if(!n)return;const t=vh(n),e=t[0],i=vp(t[1]),r=vp(t[2]);return n.a<255?`hsla(${e}, ${i}%, ${r}%, ${Nn(n.a)})`:`hsl(${e}, ${i}%, ${r}%)`}const xp={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},wp={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function g5(){const n={},t=Object.keys(wp),e=Object.keys(xp);let i,r,s,o,a;for(i=0;i<t.length;i++){for(o=a=t[i],r=0;r<e.length;r++)s=e[r],a=a.replace(s,xp[s]);s=parseInt(wp[o],16),n[a]=[s>>16&255,s>>8&255,s&255]}return n}let po;function m5(n){po||(po=g5(),po.transparent=[0,0,0,0]);const t=po[n.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const y5=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function b5(n){const t=y5.exec(n);let e=255,i,r,s;if(t){if(t[7]!==i){const o=+t[7];e=t[8]?ps(o):ni(o*255,0,255)}return i=+t[1],r=+t[3],s=+t[5],i=255&(t[2]?ps(i):ni(i,0,255)),r=255&(t[4]?ps(r):ni(r,0,255)),s=255&(t[6]?ps(s):ni(s,0,255)),{r:i,g:r,b:s,a:e}}}function v5(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${Nn(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}const dc=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,cr=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function x5(n,t,e){const i=cr(Nn(n.r)),r=cr(Nn(n.g)),s=cr(Nn(n.b));return{r:ci(dc(i+e*(cr(Nn(t.r))-i))),g:ci(dc(r+e*(cr(Nn(t.g))-r))),b:ci(dc(s+e*(cr(Nn(t.b))-s))),a:n.a+e*(t.a-n.a)}}function go(n,t,e){if(n){let i=vh(n);i[t]=Math.max(0,Math.min(i[t]+i[t]*e,t===0?360:1)),i=wh(i),n.r=i[0],n.g=i[1],n.b=i[2]}}function jy(n,t){return n&&Object.assign(t||{},n)}function _p(n){var t={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(t={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(t.a=ci(n[3]))):(t=jy(n,{r:0,g:0,b:0,a:1}),t.a=ci(t.a)),t}function w5(n){return n.charAt(0)==="r"?b5(n):f5(n)}class Fs{constructor(t){if(t instanceof Fs)return t;const e=typeof t;let i;e==="object"?i=_p(t):e==="string"&&(i=i5(t)||m5(t)||w5(t)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var t=jy(this._rgb);return t&&(t.a=Nn(t.a)),t}set rgb(t){this._rgb=_p(t)}rgbString(){return this._valid?v5(this._rgb):void 0}hexString(){return this._valid?s5(this._rgb):void 0}hslString(){return this._valid?p5(this._rgb):void 0}mix(t,e){if(t){const i=this.rgb,r=t.rgb;let s;const o=e===s?.5:e,a=2*o-1,l=i.a-r.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;s=1-c,i.r=255&c*i.r+s*r.r+.5,i.g=255&c*i.g+s*r.g+.5,i.b=255&c*i.b+s*r.b+.5,i.a=o*i.a+(1-o)*r.a,this.rgb=i}return this}interpolate(t,e){return t&&(this._rgb=x5(this._rgb,t._rgb,e)),this}clone(){return new Fs(this.rgb)}alpha(t){return this._rgb.a=ci(t),this}clearer(t){const e=this._rgb;return e.a*=1-t,this}greyscale(){const t=this._rgb,e=Ys(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=e,this}opaquer(t){const e=this._rgb;return e.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return go(this._rgb,2,t),this}darken(t){return go(this._rgb,2,-t),this}saturate(t){return go(this._rgb,1,t),this}desaturate(t){return go(this._rgb,1,-t),this}rotate(t){return d5(this._rgb,t),this}}/*!
 * Chart.js v4.2.1
 * https://www.chartjs.org
 * (c) 2023 Chart.js Contributors
 * Released under the MIT License
 */const _5=(()=>{let n=0;return()=>n++})();function Wt(n){return n===null||typeof n>"u"}function le(n){if(Array.isArray&&Array.isArray(n))return!0;const t=Object.prototype.toString.call(n);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function Ft(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}function ve(n){return(typeof n=="number"||n instanceof Number)&&isFinite(+n)}function Xe(n,t){return ve(n)?n:t}function se(n,t){return typeof n>"u"?t:n}const S5=(n,t)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*t:+n;function oe(n,t,e){if(n&&typeof n.call=="function")return n.apply(e,t)}function Ee(n,t,e,i){let r,s,o;if(le(n))if(s=n.length,i)for(r=s-1;r>=0;r--)t.call(e,n[r],r);else for(r=0;r<s;r++)t.call(e,n[r],r);else if(Ft(n))for(o=Object.keys(n),s=o.length,r=0;r<s;r++)t.call(e,n[o[r]],o[r])}function Sp(n,t){let e,i,r,s;if(!n||!t||n.length!==t.length)return!1;for(e=0,i=n.length;e<i;++e)if(r=n[e],s=t[e],r.datasetIndex!==s.datasetIndex||r.index!==s.index)return!1;return!0}function Ca(n){if(le(n))return n.map(Ca);if(Ft(n)){const t=Object.create(null),e=Object.keys(n),i=e.length;let r=0;for(;r<i;++r)t[e[r]]=Ca(n[e[r]]);return t}return n}function Vy(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function k5(n,t,e,i){if(!Vy(n))return;const r=t[n],s=e[n];Ft(r)&&Ft(s)?js(r,s,i):t[n]=Ca(s)}function js(n,t,e){const i=le(t)?t:[t],r=i.length;if(!Ft(n))return n;e=e||{};const s=e.merger||k5;let o;for(let a=0;a<r;++a){if(o=i[a],!Ft(o))continue;const l=Object.keys(o);for(let c=0,u=l.length;c<u;++c)s(l[c],n,o,e)}return n}function Cs(n,t){return js(n,t,{merger:M5})}function M5(n,t,e){if(!Vy(n))return;const i=t[n],r=e[n];Ft(i)&&Ft(r)?Cs(i,r):Object.prototype.hasOwnProperty.call(t,n)||(t[n]=Ca(r))}const kp={"":n=>n,x:n=>n.x,y:n=>n.y};function C5(n){const t=n.split("."),e=[];let i="";for(const r of t)i+=r,i.endsWith("\\")?i=i.slice(0,-1)+".":(e.push(i),i="");return e}function O5(n){const t=C5(n);return e=>{for(const i of t){if(i==="")break;e=e&&e[i]}return e}}function zr(n,t){return(kp[t]||(kp[t]=O5(t)))(n)}function _h(n){return n.charAt(0).toUpperCase()+n.slice(1)}const an=n=>typeof n<"u",bi=n=>typeof n=="function",Mp=(n,t)=>{if(n.size!==t.size)return!1;for(const e of n)if(!t.has(e))return!1;return!0};function A5(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}const On=Math.PI,ui=2*On,Oa=Number.POSITIVE_INFINITY,Mn=On/2,ii=Math.log10,hi=Math.sign;function Do(n,t,e){return Math.abs(n-t)<e}function Cp(n){const t=Math.round(n);n=Do(n,t,n/1e3)?t:n;const e=Math.pow(10,Math.floor(ii(n))),i=n/e;return(i<=1?1:i<=2?2:i<=5?5:10)*e}function T5(n){const t=[],e=Math.sqrt(n);let i;for(i=1;i<e;i++)n%i===0&&(t.push(i),t.push(n/i));return e===(e|0)&&t.push(e),t.sort((r,s)=>r-s).pop(),t}function Aa(n){return!isNaN(parseFloat(n))&&isFinite(n)}function E5(n,t){const e=Math.round(n);return e-t<=n&&e+t>=n}function Hy(n,t,e){let i,r,s;for(i=0,r=n.length;i<r;i++)s=n[i][e],isNaN(s)||(t.min=Math.min(t.min,s),t.max=Math.max(t.max,s))}function ri(n){return n*(On/180)}function Sh(n){return n*(180/On)}function Op(n){if(!ve(n))return;let t=1,e=0;for(;Math.round(n*t)/t!==n;)t*=10,e++;return e}function $5(n,t){const e=t.x-n.x,i=t.y-n.y,r=Math.sqrt(e*e+i*i);let s=Math.atan2(i,e);return s<-.5*On&&(s+=ui),{angle:s,distance:r}}function wn(n){return(n%ui+ui)%ui}function P5(n,t,e,i){const r=wn(n),s=wn(t),o=wn(e),a=wn(s-r),l=wn(o-r),c=wn(r-s),u=wn(r-o);return r===s||r===o||i&&s===o||a>l&&c<u}function Ln(n,t,e){return Math.max(t,Math.min(e,n))}function D5(n){return Ln(n,-32768,32767)}function Ap(n,t,e,i=1e-6){return n>=Math.min(t,e)-i&&n<=Math.max(t,e)+i}function kh(n,t,e){e=e||(o=>n[o]<t);let i=n.length-1,r=0,s;for(;i-r>1;)s=r+i>>1,e(s)?r=s:i=s;return{lo:r,hi:i}}const gu=(n,t,e,i)=>kh(n,e,i?r=>{const s=n[r][t];return s<e||s===e&&n[r+1][t]===e}:r=>n[r][t]<e),I5=(n,t,e)=>kh(n,e,i=>n[i][t]>=e);function N5(n,t,e){let i=0,r=n.length;for(;i<r&&n[i]<t;)i++;for(;r>i&&n[r-1]>e;)r--;return i>0||r<n.length?n.slice(i,r):n}const Uy=["push","pop","shift","splice","unshift"];function L5(n,t){if(n._chartjs){n._chartjs.listeners.push(t);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),Uy.forEach(e=>{const i="_onData"+_h(e),r=n[e];Object.defineProperty(n,e,{configurable:!0,enumerable:!1,value(...s){const o=r.apply(this,s);return n._chartjs.listeners.forEach(a=>{typeof a[i]=="function"&&a[i](...s)}),o}})})}function Tp(n,t){const e=n._chartjs;if(!e)return;const i=e.listeners,r=i.indexOf(t);r!==-1&&i.splice(r,1),!(i.length>0)&&(Uy.forEach(s=>{delete n[s]}),delete n._chartjs)}function qy(n){const t=new Set;let e,i;for(e=0,i=n.length;e<i;++e)t.add(n[e]);return t.size===i?n:Array.from(t)}const Wy=function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame}();function Ky(n,t){let e=[],i=!1;return function(...r){e=r,i||(i=!0,Wy.call(window,()=>{i=!1,n.apply(t,e)}))}}function R5(n,t){let e;return function(...i){return t?(clearTimeout(e),e=setTimeout(n,t,i)):n.apply(this,i),t}}const z5=n=>n==="start"?"left":n==="end"?"right":"center",Ep=(n,t,e)=>n==="start"?t:n==="end"?e:(t+e)/2,mo=n=>n===0||n===1,$p=(n,t,e)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-t)*ui/e)),Pp=(n,t,e)=>Math.pow(2,-10*n)*Math.sin((n-t)*ui/e)+1,Os={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*Mn)+1,easeOutSine:n=>Math.sin(n*Mn),easeInOutSine:n=>-.5*(Math.cos(On*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>mo(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>mo(n)?n:$p(n,.075,.3),easeOutElastic:n=>mo(n)?n:Pp(n,.075,.3),easeInOutElastic(n){return mo(n)?n:n<.5?.5*$p(n*2,.1125,.45):.5+.5*Pp(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let t=1.70158;return(n/=.5)<1?.5*(n*n*(((t*=1.525)+1)*n-t)):.5*((n-=2)*n*(((t*=1.525)+1)*n+t)+2)},easeInBounce:n=>1-Os.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?Os.easeInBounce(n*2)*.5:Os.easeOutBounce(n*2-1)*.5+.5};function Jy(n){if(n&&typeof n=="object"){const t=n.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function Dp(n){return Jy(n)?n:new Fs(n)}function pc(n){return Jy(n)?n:new Fs(n).saturate(.5).darken(.1).hexString()}const B5=["x","y","borderWidth","radius","tension"],F5=["color","borderColor","backgroundColor"];function j5(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),n.set("animations",{colors:{type:"color",properties:F5},numbers:{type:"number",properties:B5}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function V5(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Ip=new Map;function H5(n,t){t=t||{};const e=n+JSON.stringify(t);let i=Ip.get(e);return i||(i=new Intl.NumberFormat(n,t),Ip.set(e,i)),i}function Mh(n,t,e){return H5(t,e).format(n)}const Gy={values(n){return le(n)?n:""+n},numeric(n,t,e){if(n===0)return"0";const i=this.chart.options.locale;let r,s=n;if(e.length>1){const c=Math.max(Math.abs(e[0].value),Math.abs(e[e.length-1].value));(c<1e-4||c>1e15)&&(r="scientific"),s=U5(n,e)}const o=ii(Math.abs(s)),a=Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:r,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),Mh(n,i,l)},logarithmic(n,t,e){if(n===0)return"0";const i=e[t].significand||n/Math.pow(10,Math.floor(ii(n)));return[1,2,3,5,10,15].includes(i)||t>.8*e.length?Gy.numeric.call(this,n,t,e):""}};function U5(n,t){let e=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(e)>=1&&n!==Math.floor(n)&&(e=n-Math.floor(n)),e}var fl={formatters:Gy};function q5(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:fl.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const tr=Object.create(null),mu=Object.create(null);function As(n,t){if(!t)return n;const e=t.split(".");for(let i=0,r=e.length;i<r;++i){const s=e[i];n=n[s]||(n[s]=Object.create(null))}return n}function gc(n,t,e){return typeof t=="string"?js(As(n,t),e):js(As(n,""),t)}class W5{constructor(t,e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,r)=>pc(r.backgroundColor),this.hoverBorderColor=(i,r)=>pc(r.borderColor),this.hoverColor=(i,r)=>pc(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(e)}set(t,e){return gc(this,t,e)}get(t){return As(this,t)}describe(t,e){return gc(mu,t,e)}override(t,e){return gc(tr,t,e)}route(t,e,i,r){const s=As(this,t),o=As(this,i),a="_"+e;Object.defineProperties(s,{[a]:{value:s[e],writable:!0},[e]:{enumerable:!0,get(){const l=this[a],c=o[r];return Ft(l)?Object.assign({},c,l):se(l,c)},set(l){this[a]=l}}})}apply(t){t.forEach(e=>e(this))}}var de=new W5({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[j5,V5,q5]);function K5(n){return!n||Wt(n.size)||Wt(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function Ta(n,t,e,i,r){let s=t[r];return s||(s=t[r]=n.measureText(r).width,e.push(r)),s>i&&(i=s),i}function J5(n,t,e,i){i=i||{};let r=i.data=i.data||{},s=i.garbageCollect=i.garbageCollect||[];i.font!==t&&(r=i.data={},s=i.garbageCollect=[],i.font=t),n.save(),n.font=t;let o=0;const a=e.length;let l,c,u,h,f;for(l=0;l<a;l++)if(h=e[l],h!=null&&le(h)!==!0)o=Ta(n,r,s,o,h);else if(le(h))for(c=0,u=h.length;c<u;c++)f=h[c],f!=null&&!le(f)&&(o=Ta(n,r,s,o,f));n.restore();const d=s.length/2;if(d>e.length){for(l=0;l<d;l++)delete r[s[l]];s.splice(0,d)}return o}function Ai(n,t,e){const i=n.currentDevicePixelRatio,r=e!==0?Math.max(e/2,.5):0;return Math.round((t-r)*i)/i+r}function Np(n,t){t=t||n.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,n.width,n.height),t.restore()}function Yy(n,t,e){return e=e||.5,!t||n&&n.x>t.left-e&&n.x<t.right+e&&n.y>t.top-e&&n.y<t.bottom+e}function Xy(n,t){n.save(),n.beginPath(),n.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),n.clip()}function Qy(n){n.restore()}function Ea(n,t,e,i,r,s={}){const o=le(t)?t:[t],a=s.strokeWidth>0&&s.strokeColor!=="";let l,c;for(n.save(),n.font=r.string,G5(n,s),l=0;l<o.length;++l)c=o[l],s.backdrop&&X5(n,s.backdrop),a&&(s.strokeColor&&(n.strokeStyle=s.strokeColor),Wt(s.strokeWidth)||(n.lineWidth=s.strokeWidth),n.strokeText(c,e,i,s.maxWidth)),n.fillText(c,e,i,s.maxWidth),Y5(n,e,i,c,s),i+=r.lineHeight;n.restore()}function G5(n,t){t.translation&&n.translate(t.translation[0],t.translation[1]),Wt(t.rotation)||n.rotate(t.rotation),t.color&&(n.fillStyle=t.color),t.textAlign&&(n.textAlign=t.textAlign),t.textBaseline&&(n.textBaseline=t.textBaseline)}function Y5(n,t,e,i,r){if(r.strikethrough||r.underline){const s=n.measureText(i),o=t-s.actualBoundingBoxLeft,a=t+s.actualBoundingBoxRight,l=e-s.actualBoundingBoxAscent,c=e+s.actualBoundingBoxDescent,u=r.strikethrough?(l+c)/2:c;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=r.decorationWidth||2,n.moveTo(o,u),n.lineTo(a,u),n.stroke()}}function X5(n,t){const e=n.fillStyle;n.fillStyle=t.color,n.fillRect(t.left,t.top,t.width,t.height),n.fillStyle=e}function Zy(n,t){const{x:e,y:i,w:r,h:s,radius:o}=t;n.arc(e+o.topLeft,i+o.topLeft,o.topLeft,-Mn,On,!0),n.lineTo(e,i+s-o.bottomLeft),n.arc(e+o.bottomLeft,i+s-o.bottomLeft,o.bottomLeft,On,Mn,!0),n.lineTo(e+r-o.bottomRight,i+s),n.arc(e+r-o.bottomRight,i+s-o.bottomRight,o.bottomRight,Mn,0,!0),n.lineTo(e+r,i+o.topRight),n.arc(e+r-o.topRight,i+o.topRight,o.topRight,0,-Mn,!0),n.lineTo(e+o.topLeft,i)}const Q5=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Z5=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function t3(n,t){const e=(""+n).match(Q5);if(!e||e[1]==="normal")return t*1.2;switch(n=+e[2],e[3]){case"px":return n;case"%":n/=100;break}return t*n}const e3=n=>+n||0;function tb(n,t){const e={},i=Ft(t),r=i?Object.keys(t):t,s=Ft(n)?i?o=>se(n[o],n[t[o]]):o=>n[o]:()=>n;for(const o of r)e[o]=e3(s(o));return e}function eb(n){return tb(n,{top:"y",right:"x",bottom:"y",left:"x"})}function nb(n){return tb(n,["topLeft","topRight","bottomLeft","bottomRight"])}function Vn(n){const t=eb(n);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function Br(n,t){n=n||{},t=t||de.font;let e=se(n.size,t.size);typeof e=="string"&&(e=parseInt(e,10));let i=se(n.style,t.style);i&&!(""+i).match(Z5)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const r={family:se(n.family,t.family),lineHeight:t3(se(n.lineHeight,t.lineHeight),e),size:e,style:i,weight:se(n.weight,t.weight),string:""};return r.string=K5(r),r}function yo(n,t,e,i){let r=!0,s,o,a;for(s=0,o=n.length;s<o;++s)if(a=n[s],a!==void 0&&(t!==void 0&&typeof a=="function"&&(a=a(t),r=!1),e!==void 0&&le(a)&&(a=a[e%a.length],r=!1),a!==void 0))return i&&!r&&(i.cacheable=!1),a}function n3(n,t,e){const{min:i,max:r}=n,s=S5(t,(r-i)/2),o=(a,l)=>e&&a===0?0:a+l;return{min:o(i,-Math.abs(s)),max:o(r,s)}}function Qr(n,t){return Object.assign(Object.create(n),t)}function Ch(n,t=[""],e=n,i,r=()=>n[0]){an(i)||(i=ob("_fallback",n));const s={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:e,_fallback:i,_getTarget:r,override:o=>Ch([o,...n],t,e,i)};return new Proxy(s,{deleteProperty(o,a){return delete o[a],delete o._keys,delete n[0][a],!0},get(o,a){return rb(o,a,()=>u3(a,t,n,o))},getOwnPropertyDescriptor(o,a){return Reflect.getOwnPropertyDescriptor(o._scopes[0],a)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(o,a){return Rp(o).includes(a)},ownKeys(o){return Rp(o)},set(o,a,l){const c=o._storage||(o._storage=r());return o[a]=c[a]=l,delete o._keys,!0}})}function Fr(n,t,e,i){const r={_cacheable:!1,_proxy:n,_context:t,_subProxy:e,_stack:new Set,_descriptors:ib(n,i),setContext:s=>Fr(n,s,e,i),override:s=>Fr(n.override(s),t,e,i)};return new Proxy(r,{deleteProperty(s,o){return delete s[o],delete n[o],!0},get(s,o,a){return rb(s,o,()=>r3(s,o,a))},getOwnPropertyDescriptor(s,o){return s._descriptors.allKeys?Reflect.has(n,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,o)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(s,o){return Reflect.has(n,o)},ownKeys(){return Reflect.ownKeys(n)},set(s,o,a){return n[o]=a,delete s[o],!0}})}function ib(n,t={scriptable:!0,indexable:!0}){const{_scriptable:e=t.scriptable,_indexable:i=t.indexable,_allKeys:r=t.allKeys}=n;return{allKeys:r,scriptable:e,indexable:i,isScriptable:bi(e)?e:()=>e,isIndexable:bi(i)?i:()=>i}}const i3=(n,t)=>n?n+_h(t):t,Oh=(n,t)=>Ft(t)&&n!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function rb(n,t,e){if(Object.prototype.hasOwnProperty.call(n,t))return n[t];const i=e();return n[t]=i,i}function r3(n,t,e){const{_proxy:i,_context:r,_subProxy:s,_descriptors:o}=n;let a=i[t];return bi(a)&&o.isScriptable(t)&&(a=s3(t,a,n,e)),le(a)&&a.length&&(a=o3(t,a,n,o.isIndexable)),Oh(t,a)&&(a=Fr(a,r,s&&s[t],o)),a}function s3(n,t,e,i){const{_proxy:r,_context:s,_subProxy:o,_stack:a}=e;if(a.has(n))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+n);return a.add(n),t=t(s,o||i),a.delete(n),Oh(n,t)&&(t=Ah(r._scopes,r,n,t)),t}function o3(n,t,e,i){const{_proxy:r,_context:s,_subProxy:o,_descriptors:a}=e;if(an(s.index)&&i(n))t=t[s.index%t.length];else if(Ft(t[0])){const l=t,c=r._scopes.filter(u=>u!==l);t=[];for(const u of l){const h=Ah(c,r,n,u);t.push(Fr(h,s,o&&o[n],a))}}return t}function sb(n,t,e){return bi(n)?n(t,e):n}const a3=(n,t)=>n===!0?t:typeof n=="string"?zr(t,n):void 0;function l3(n,t,e,i,r){for(const s of t){const o=a3(e,s);if(o){n.add(o);const a=sb(o._fallback,e,r);if(an(a)&&a!==e&&a!==i)return a}else if(o===!1&&an(i)&&e!==i)return null}return!1}function Ah(n,t,e,i){const r=t._rootScopes,s=sb(t._fallback,e,i),o=[...n,...r],a=new Set;a.add(i);let l=Lp(a,o,e,s||e,i);return l===null||an(s)&&s!==e&&(l=Lp(a,o,s,l,i),l===null)?!1:Ch(Array.from(a),[""],r,s,()=>c3(t,e,i))}function Lp(n,t,e,i,r){for(;e;)e=l3(n,t,e,i,r);return e}function c3(n,t,e){const i=n._getTarget();t in i||(i[t]={});const r=i[t];return le(r)&&Ft(e)?e:r||{}}function u3(n,t,e,i){let r;for(const s of t)if(r=ob(i3(s,n),e),an(r))return Oh(n,r)?Ah(e,i,n,r):r}function ob(n,t){for(const e of t){if(!e)continue;const i=e[n];if(an(i))return i}}function Rp(n){let t=n._keys;return t||(t=n._keys=h3(n._scopes)),t}function h3(n){const t=new Set;for(const e of n)for(const i of Object.keys(e).filter(r=>!r.startsWith("_")))t.add(i);return Array.from(t)}function ab(){return typeof window<"u"&&typeof document<"u"}function Th(n){let t=n.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function $a(n,t,e){let i;return typeof n=="string"?(i=parseInt(n,10),n.indexOf("%")!==-1&&(i=i/100*t.parentNode[e])):i=n,i}const dl=n=>n.ownerDocument.defaultView.getComputedStyle(n,null);function f3(n,t){return dl(n).getPropertyValue(t)}const d3=["top","right","bottom","left"];function Wi(n,t,e){const i={};e=e?"-"+e:"";for(let r=0;r<4;r++){const s=d3[r];i[s]=parseFloat(n[t+"-"+s+e])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const p3=(n,t,e)=>(n>0||t>0)&&(!e||!e.shadowRoot);function g3(n,t){const e=n.touches,i=e&&e.length?e[0]:n,{offsetX:r,offsetY:s}=i;let o=!1,a,l;if(p3(r,s,n.target))a=r,l=s;else{const c=t.getBoundingClientRect();a=i.clientX-c.left,l=i.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function Pi(n,t){if("native"in n)return n;const{canvas:e,currentDevicePixelRatio:i}=t,r=dl(e),s=r.boxSizing==="border-box",o=Wi(r,"padding"),a=Wi(r,"border","width"),{x:l,y:c,box:u}=g3(n,e),h=o.left+(u&&a.left),f=o.top+(u&&a.top);let{width:d,height:g}=t;return s&&(d-=o.width+a.width,g-=o.height+a.height),{x:Math.round((l-h)/d*e.width/i),y:Math.round((c-f)/g*e.height/i)}}function m3(n,t,e){let i,r;if(t===void 0||e===void 0){const s=Th(n);if(!s)t=n.clientWidth,e=n.clientHeight;else{const o=s.getBoundingClientRect(),a=dl(s),l=Wi(a,"border","width"),c=Wi(a,"padding");t=o.width-c.width-l.width,e=o.height-c.height-l.height,i=$a(a.maxWidth,s,"clientWidth"),r=$a(a.maxHeight,s,"clientHeight")}}return{width:t,height:e,maxWidth:i||Oa,maxHeight:r||Oa}}const bo=n=>Math.round(n*10)/10;function y3(n,t,e,i){const r=dl(n),s=Wi(r,"margin"),o=$a(r.maxWidth,n,"clientWidth")||Oa,a=$a(r.maxHeight,n,"clientHeight")||Oa,l=m3(n,t,e);let{width:c,height:u}=l;if(r.boxSizing==="content-box"){const f=Wi(r,"border","width"),d=Wi(r,"padding");c-=d.width+f.width,u-=d.height+f.height}return c=Math.max(0,c-s.width),u=Math.max(0,i?c/i:u-s.height),c=bo(Math.min(c,o,l.maxWidth)),u=bo(Math.min(u,a,l.maxHeight)),c&&!u&&(u=bo(c/2)),(t!==void 0||e!==void 0)&&i&&l.height&&u>l.height&&(u=l.height,c=bo(Math.floor(u*i))),{width:c,height:u}}function zp(n,t,e){const i=t||1,r=Math.floor(n.height*i),s=Math.floor(n.width*i);n.height=Math.floor(n.height),n.width=Math.floor(n.width);const o=n.canvas;return o.style&&(e||!o.style.height&&!o.style.width)&&(o.style.height=`${n.height}px`,o.style.width=`${n.width}px`),n.currentDevicePixelRatio!==i||o.height!==r||o.width!==s?(n.currentDevicePixelRatio=i,o.height=r,o.width=s,n.ctx.setTransform(i,0,0,i,0,0),!0):!1}const b3=function(){let n=!1;try{const t={get passive(){return n=!0,!1}};window.addEventListener("test",null,t),window.removeEventListener("test",null,t)}catch{}return n}();function Bp(n,t){const e=f3(n,t),i=e&&e.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}/*!
 * Chart.js v4.2.1
 * https://www.chartjs.org
 * (c) 2023 Chart.js Contributors
 * Released under the MIT License
 */class v3{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,i,r){const s=e.listeners[r],o=e.duration;s.forEach(a=>a({chart:t,initial:e.initial,numSteps:o,currentStep:Math.min(i-e.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=Wy.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let e=0;this._charts.forEach((i,r)=>{if(!i.running||!i.items.length)return;const s=i.items;let o=s.length-1,a=!1,l;for(;o>=0;--o)l=s[o],l._active?(l._total>i.duration&&(i.duration=l._total),l.tick(t),a=!0):(s[o]=s[s.length-1],s.pop());a&&(r.draw(),this._notify(r,i,t,"progress")),s.length||(i.running=!1,this._notify(r,i,t,"complete"),i.initial=!1),e+=s.length}),this._lastDate=t,e===0&&(this._running=!1)}_getAnims(t){const e=this._charts;let i=e.get(t);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,i)),i}listen(t,e,i){this._getAnims(t).listeners[e].push(i)}add(t,e){!e||!e.length||this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){const e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce((i,r)=>Math.max(i,r._duration),0),this._refresh())}running(t){if(!this._running)return!1;const e=this._charts.get(t);return!(!e||!e.running||!e.items.length)}stop(t){const e=this._charts.get(t);if(!e||!e.items.length)return;const i=e.items;let r=i.length-1;for(;r>=0;--r)i[r].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var Pn=new v3;const Fp="transparent",x3={boolean(n,t,e){return e>.5?t:n},color(n,t,e){const i=Dp(n||Fp),r=i.valid&&Dp(t||Fp);return r&&r.valid?r.mix(i,e).hexString():t},number(n,t,e){return n+(t-n)*e}};class w3{constructor(t,e,i,r){const s=e[i];r=yo([t.to,r,s,t.from]);const o=yo([t.from,s,r]);this._active=!0,this._fn=t.fn||x3[t.type||typeof o],this._easing=Os[t.easing]||Os.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=i,this._from=o,this._to=r,this._promises=void 0}active(){return this._active}update(t,e,i){if(this._active){this._notify(!1);const r=this._target[this._prop],s=i-this._start,o=this._duration-s;this._start=i,this._duration=Math.floor(Math.max(o,t.duration)),this._total+=s,this._loop=!!t.loop,this._to=yo([t.to,e,r,t.from]),this._from=yo([t.from,r,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const e=t-this._start,i=this._duration,r=this._prop,s=this._from,o=this._loop,a=this._to;let l;if(this._active=s!==a&&(o||e<i),!this._active){this._target[r]=a,this._notify(!0);return}if(e<0){this._target[r]=s;return}l=e/i%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[r]=this._fn(s,a,l)}wait(){const t=this._promises||(this._promises=[]);return new Promise((e,i)=>{t.push({res:e,rej:i})})}_notify(t){const e=t?"res":"rej",i=this._promises||[];for(let r=0;r<i.length;r++)i[r][e]()}}class _3{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!Ft(t))return;const e=Object.keys(de.animation),i=this._properties;Object.getOwnPropertyNames(t).forEach(r=>{const s=t[r];if(!Ft(s))return;const o={};for(const a of e)o[a]=s[a];(le(s.properties)&&s.properties||[r]).forEach(a=>{(a===r||!i.has(a))&&i.set(a,o)})})}_animateOptions(t,e){const i=e.options,r=k3(t,i);if(!r)return[];const s=this._createAnimations(r,i);return i.$shared&&S3(t.options.$animations,i).then(()=>{t.options=i},()=>{}),s}_createAnimations(t,e){const i=this._properties,r=[],s=t.$animations||(t.$animations={}),o=Object.keys(e),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){r.push(...this._animateOptions(t,e));continue}const u=e[c];let h=s[c];const f=i.get(c);if(h)if(f&&h.active()){h.update(f,u,a);continue}else h.cancel();if(!f||!f.duration){t[c]=u;continue}s[c]=h=new w3(f,t,c,u),r.push(h)}return r}update(t,e){if(this._properties.size===0){Object.assign(t,e);return}const i=this._createAnimations(t,e);if(i.length)return Pn.add(this._chart,i),!0}}function S3(n,t){const e=[],i=Object.keys(t);for(let r=0;r<i.length;r++){const s=n[i[r]];s&&s.active()&&e.push(s.wait())}return Promise.all(e)}function k3(n,t){if(!t)return;let e=n.options;if(!e){n.options=t;return}return e.$shared&&(n.options=e=Object.assign({},e,{$shared:!1,$animations:{}})),e}function jp(n,t){const e=n&&n.options||{},i=e.reverse,r=e.min===void 0?t:0,s=e.max===void 0?t:0;return{start:i?s:r,end:i?r:s}}function M3(n,t,e){if(e===!1)return!1;const i=jp(n,e),r=jp(t,e);return{top:r.end,right:i.end,bottom:r.start,left:i.start}}function C3(n){let t,e,i,r;return Ft(n)?(t=n.top,e=n.right,i=n.bottom,r=n.left):t=e=i=r=n,{top:t,right:e,bottom:i,left:r,disabled:n===!1}}function lb(n,t){const e=[],i=n._getSortedDatasetMetas(t);let r,s;for(r=0,s=i.length;r<s;++r)e.push(i[r].index);return e}function Vp(n,t,e,i={}){const r=n.keys,s=i.mode==="single";let o,a,l,c;if(t!==null){for(o=0,a=r.length;o<a;++o){if(l=+r[o],l===e){if(i.all)continue;break}c=n.values[l],ve(c)&&(s||t===0||hi(t)===hi(c))&&(t+=c)}return t}}function O3(n){const t=Object.keys(n),e=new Array(t.length);let i,r,s;for(i=0,r=t.length;i<r;++i)s=t[i],e[i]={x:s,y:n[s]};return e}function Hp(n,t){const e=n&&n.options.stacked;return e||e===void 0&&t.stack!==void 0}function A3(n,t,e){return`${n.id}.${t.id}.${e.stack||e.type}`}function T3(n){const{min:t,max:e,minDefined:i,maxDefined:r}=n.getUserBounds();return{min:i?t:Number.NEGATIVE_INFINITY,max:r?e:Number.POSITIVE_INFINITY}}function E3(n,t,e){const i=n[t]||(n[t]={});return i[e]||(i[e]={})}function Up(n,t,e,i){for(const r of t.getMatchingVisibleMetas(i).reverse()){const s=n[r.index];if(e&&s>0||!e&&s<0)return r.index}return null}function qp(n,t){const{chart:e,_cachedMeta:i}=n,r=e._stacks||(e._stacks={}),{iScale:s,vScale:o,index:a}=i,l=s.axis,c=o.axis,u=A3(s,o,i),h=t.length;let f;for(let d=0;d<h;++d){const g=t[d],{[l]:b,[c]:k}=g,O=g._stacks||(g._stacks={});f=O[c]=E3(r,u,b),f[a]=k,f._top=Up(f,o,!0,i.type),f._bottom=Up(f,o,!1,i.type);const D=f._visualValues||(f._visualValues={});D[a]=k}}function mc(n,t){const e=n.scales;return Object.keys(e).filter(i=>e[i].axis===t).shift()}function $3(n,t){return Qr(n,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function P3(n,t,e){return Qr(n,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:e,index:t,mode:"default",type:"data"})}function is(n,t){const e=n.controller.index,i=n.vScale&&n.vScale.axis;if(i){t=t||n._parsed;for(const r of t){const s=r._stacks;if(!s||s[i]===void 0||s[i][e]===void 0)return;delete s[i][e],s[i]._visualValues!==void 0&&s[i]._visualValues[e]!==void 0&&delete s[i]._visualValues[e]}}}const yc=n=>n==="reset"||n==="none",Wp=(n,t)=>t?n:Object.assign({},n),D3=(n,t,e)=>n&&!t.hidden&&t._stacked&&{keys:lb(e,!0),values:null};class cb{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(t,e){this.chart=t,this._ctx=t.ctx,this.index=e,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=Hp(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&is(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,e=this._cachedMeta,i=this.getDataset(),r=(h,f,d,g)=>h==="x"?f:h==="r"?g:d,s=e.xAxisID=se(i.xAxisID,mc(t,"x")),o=e.yAxisID=se(i.yAxisID,mc(t,"y")),a=e.rAxisID=se(i.rAxisID,mc(t,"r")),l=e.indexAxis,c=e.iAxisID=r(l,s,o,a),u=e.vAxisID=r(l,o,s,a);e.xScale=this.getScaleForId(s),e.yScale=this.getScaleForId(o),e.rScale=this.getScaleForId(a),e.iScale=this.getScaleForId(c),e.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const e=this._cachedMeta;return t===e.iScale?e.vScale:e.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&Tp(this._data,this),t._stacked&&is(t)}_dataCheck(){const t=this.getDataset(),e=t.data||(t.data=[]),i=this._data;if(Ft(e))this._data=O3(e);else if(i!==e){if(i){Tp(i,this);const r=this._cachedMeta;is(r),r._parsed=[]}e&&Object.isExtensible(e)&&L5(e,this),this._syncList=[],this._data=e}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const e=this._cachedMeta,i=this.getDataset();let r=!1;this._dataCheck();const s=e._stacked;e._stacked=Hp(e.vScale,e),e.stack!==i.stack&&(r=!0,is(e),e.stack=i.stack),this._resyncElements(t),(r||s!==e._stacked)&&qp(this,e._parsed)}configure(){const t=this.chart.config,e=t.datasetScopeKeys(this._type),i=t.getOptionScopes(this.getDataset(),e,!0);this.options=t.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,e){const{_cachedMeta:i,_data:r}=this,{iScale:s,_stacked:o}=i,a=s.axis;let l=t===0&&e===r.length?!0:i._sorted,c=t>0&&i._parsed[t-1],u,h,f;if(this._parsing===!1)i._parsed=r,i._sorted=!0,f=r;else{le(r[t])?f=this.parseArrayData(i,r,t,e):Ft(r[t])?f=this.parseObjectData(i,r,t,e):f=this.parsePrimitiveData(i,r,t,e);const d=()=>h[a]===null||c&&h[a]<c[a];for(u=0;u<e;++u)i._parsed[u+t]=h=f[u],l&&(d()&&(l=!1),c=h);i._sorted=l}o&&qp(this,f)}parsePrimitiveData(t,e,i,r){const{iScale:s,vScale:o}=t,a=s.axis,l=o.axis,c=s.getLabels(),u=s===o,h=new Array(r);let f,d,g;for(f=0,d=r;f<d;++f)g=f+i,h[f]={[a]:u||s.parse(c[g],g),[l]:o.parse(e[g],g)};return h}parseArrayData(t,e,i,r){const{xScale:s,yScale:o}=t,a=new Array(r);let l,c,u,h;for(l=0,c=r;l<c;++l)u=l+i,h=e[u],a[l]={x:s.parse(h[0],u),y:o.parse(h[1],u)};return a}parseObjectData(t,e,i,r){const{xScale:s,yScale:o}=t,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(r);let u,h,f,d;for(u=0,h=r;u<h;++u)f=u+i,d=e[f],c[u]={x:s.parse(zr(d,a),f),y:o.parse(zr(d,l),f)};return c}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,e,i){const r=this.chart,s=this._cachedMeta,o=e[t.axis],a={keys:lb(r,!0),values:e._stacks[t.axis]._visualValues};return Vp(a,o,s.index,{mode:i})}updateRangeFromParsed(t,e,i,r){const s=i[e.axis];let o=s===null?NaN:s;const a=r&&i._stacks[e.axis];r&&a&&(r.values=a,o=Vp(r,s,this._cachedMeta.index)),t.min=Math.min(t.min,o),t.max=Math.max(t.max,o)}getMinMax(t,e){const i=this._cachedMeta,r=i._parsed,s=i._sorted&&t===i.iScale,o=r.length,a=this._getOtherScale(t),l=D3(e,i,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:h}=T3(a);let f,d;function g(){d=r[f];const b=d[a.axis];return!ve(d[t.axis])||u>b||h<b}for(f=0;f<o&&!(!g()&&(this.updateRangeFromParsed(c,t,d,l),s));++f);if(s){for(f=o-1;f>=0;--f)if(!g()){this.updateRangeFromParsed(c,t,d,l);break}}return c}getAllParsedValues(t){const e=this._cachedMeta._parsed,i=[];let r,s,o;for(r=0,s=e.length;r<s;++r)o=e[r][t.axis],ve(o)&&i.push(o);return i}getMaxOverflow(){return!1}getLabelAndValue(t){const e=this._cachedMeta,i=e.iScale,r=e.vScale,s=this.getParsed(t);return{label:i?""+i.getLabelForValue(s[i.axis]):"",value:r?""+r.getLabelForValue(s[r.axis]):""}}_update(t){const e=this._cachedMeta;this.update(t||"default"),e._clip=C3(se(this.options.clip,M3(e.xScale,e.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,e=this.chart,i=this._cachedMeta,r=i.data||[],s=e.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||r.length-a,c=this.options.drawActiveElementsOnTop;let u;for(i.dataset&&i.dataset.draw(t,s,a,l),u=a;u<a+l;++u){const h=r[u];h.hidden||(h.active&&c?o.push(h):h.draw(t,s))}for(u=0;u<o.length;++u)o[u].draw(t,s)}getStyle(t,e){const i=e?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(t||0,i)}getContext(t,e,i){const r=this.getDataset();let s;if(t>=0&&t<this._cachedMeta.data.length){const o=this._cachedMeta.data[t];s=o.$context||(o.$context=P3(this.getContext(),t,o)),s.parsed=this.getParsed(t),s.raw=r.data[t],s.index=s.dataIndex=t}else s=this.$context||(this.$context=$3(this.chart.getContext(),this.index)),s.dataset=r,s.index=s.datasetIndex=this.index;return s.active=!!e,s.mode=i,s}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,e){return this._resolveElementOptions(this.dataElementType.id,e,t)}_resolveElementOptions(t,e="default",i){const r=e==="active",s=this._cachedDataOpts,o=t+"-"+e,a=s[o],l=this.enableOptionSharing&&an(i);if(a)return Wp(a,l);const c=this.chart.config,u=c.datasetElementScopeKeys(this._type,t),h=r?[`${t}Hover`,"hover",t,""]:[t,""],f=c.getOptionScopes(this.getDataset(),u),d=Object.keys(de.elements[t]),g=()=>this.getContext(i,r,e),b=c.resolveNamedOptions(f,d,g,h);return b.$shared&&(b.$shared=l,s[o]=Object.freeze(Wp(b,l))),b}_resolveAnimations(t,e,i){const r=this.chart,s=this._cachedDataOpts,o=`animation-${e}`,a=s[o];if(a)return a;let l;if(r.options.animation!==!1){const u=this.chart.config,h=u.datasetAnimationScopeKeys(this._type,e),f=u.getOptionScopes(this.getDataset(),h);l=u.createResolver(f,this.getContext(t,i,e))}const c=new _3(r,l&&l.animations);return l&&l._cacheable&&(s[o]=Object.freeze(c)),c}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,e){return!e||yc(t)||this.chart._animationsDisabled}_getSharedOptions(t,e){const i=this.resolveDataElementOptions(t,e),r=this._sharedOptions,s=this.getSharedOptions(i),o=this.includeOptions(e,s)||s!==r;return this.updateSharedOptions(s,e,i),{sharedOptions:s,includeOptions:o}}updateElement(t,e,i,r){yc(r)?Object.assign(t,i):this._resolveAnimations(e,r).update(t,i)}updateSharedOptions(t,e,i){t&&!yc(e)&&this._resolveAnimations(void 0,e).update(t,i)}_setStyle(t,e,i,r){t.active=r;const s=this.getStyle(e,r);this._resolveAnimations(e,i,r).update(t,{options:!r&&this.getSharedOptions(s)||s})}removeHoverStyle(t,e,i){this._setStyle(t,i,"active",!1)}setHoverStyle(t,e,i){this._setStyle(t,i,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const e=this._data,i=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const r=i.length,s=e.length,o=Math.min(s,r);o&&this.parse(0,o),s>r?this._insertElements(r,s-r,t):s<r&&this._removeElements(s,r-s)}_insertElements(t,e,i=!0){const r=this._cachedMeta,s=r.data,o=t+e;let a;const l=c=>{for(c.length+=e,a=c.length-1;a>=o;a--)c[a]=c[a-e]};for(l(s),a=t;a<o;++a)s[a]=new this.dataElementType;this._parsing&&l(r._parsed),this.parse(t,e),i&&this.updateElements(s,t,e,"reset")}updateElements(t,e,i,r){}_removeElements(t,e){const i=this._cachedMeta;if(this._parsing){const r=i._parsed.splice(t,e);i._stacked&&is(i,r)}i.data.splice(t,e)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[e,i,r]=t;this[e](i,r)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,e){e&&this._sync(["_removeElements",t,e]);const i=arguments.length-2;i&&this._sync(["_insertElements",t,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function I3(n,t){if(!n._cache.$bar){const e=n.getMatchingVisibleMetas(t);let i=[];for(let r=0,s=e.length;r<s;r++)i=i.concat(e[r].controller.getAllParsedValues(n));n._cache.$bar=qy(i.sort((r,s)=>r-s))}return n._cache.$bar}function N3(n){const t=n.iScale,e=I3(t,n.type);let i=t._length,r,s,o,a;const l=()=>{o===32767||o===-32768||(an(a)&&(i=Math.min(i,Math.abs(o-a)||i)),a=o)};for(r=0,s=e.length;r<s;++r)o=t.getPixelForValue(e[r]),l();for(a=void 0,r=0,s=t.ticks.length;r<s;++r)o=t.getPixelForTick(r),l();return i}function L3(n,t,e,i){const r=e.barThickness;let s,o;return Wt(r)?(s=t.min*e.categoryPercentage,o=e.barPercentage):(s=r*i,o=1),{chunk:s/i,ratio:o,start:t.pixels[n]-s/2}}function R3(n,t,e,i){const r=t.pixels,s=r[n];let o=n>0?r[n-1]:null,a=n<r.length-1?r[n+1]:null;const l=e.categoryPercentage;o===null&&(o=s-(a===null?t.end-t.start:a-s)),a===null&&(a=s+s-o);const c=s-(s-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/i,ratio:e.barPercentage,start:c}}function z3(n,t,e,i){const r=e.parse(n[0],i),s=e.parse(n[1],i),o=Math.min(r,s),a=Math.max(r,s);let l=o,c=a;Math.abs(o)>Math.abs(a)&&(l=a,c=o),t[e.axis]=c,t._custom={barStart:l,barEnd:c,start:r,end:s,min:o,max:a}}function ub(n,t,e,i){return le(n)?z3(n,t,e,i):t[e.axis]=e.parse(n,i),t}function Kp(n,t,e,i){const r=n.iScale,s=n.vScale,o=r.getLabels(),a=r===s,l=[];let c,u,h,f;for(c=e,u=e+i;c<u;++c)f=t[c],h={},h[r.axis]=a||r.parse(o[c],c),l.push(ub(f,h,s,c));return l}function bc(n){return n&&n.barStart!==void 0&&n.barEnd!==void 0}function B3(n,t,e){return n!==0?hi(n):(t.isHorizontal()?1:-1)*(t.min>=e?1:-1)}function F3(n){let t,e,i,r,s;return n.horizontal?(t=n.base>n.x,e="left",i="right"):(t=n.base<n.y,e="bottom",i="top"),t?(r="end",s="start"):(r="start",s="end"),{start:e,end:i,reverse:t,top:r,bottom:s}}function j3(n,t,e,i){let r=t.borderSkipped;const s={};if(!r){n.borderSkipped=s;return}if(r===!0){n.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:a,reverse:l,top:c,bottom:u}=F3(n);r==="middle"&&e&&(n.enableBorderRadius=!0,(e._top||0)===i?r=c:(e._bottom||0)===i?r=u:(s[Jp(u,o,a,l)]=!0,r=c)),s[Jp(r,o,a,l)]=!0,n.borderSkipped=s}function Jp(n,t,e,i){return i?(n=V3(n,t,e),n=Gp(n,e,t)):n=Gp(n,t,e),n}function V3(n,t,e){return n===t?e:n===e?t:n}function Gp(n,t,e){return n==="start"?t:n==="end"?e:n}function H3(n,{inflateAmount:t},e){n.inflateAmount=t==="auto"?e===1?.33:0:t}class U3 extends cb{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(t,e,i,r){return Kp(t,e,i,r)}parseArrayData(t,e,i,r){return Kp(t,e,i,r)}parseObjectData(t,e,i,r){const{iScale:s,vScale:o}=t,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=s.axis==="x"?a:l,u=o.axis==="x"?a:l,h=[];let f,d,g,b;for(f=i,d=i+r;f<d;++f)b=e[f],g={},g[s.axis]=s.parse(zr(b,c),f),h.push(ub(zr(b,u),g,o,f));return h}updateRangeFromParsed(t,e,i,r){super.updateRangeFromParsed(t,e,i,r);const s=i._custom;s&&e===this._cachedMeta.vScale&&(t.min=Math.min(t.min,s.min),t.max=Math.max(t.max,s.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const e=this._cachedMeta,{iScale:i,vScale:r}=e,s=this.getParsed(t),o=s._custom,a=bc(o)?"["+o.start+", "+o.end+"]":""+r.getLabelForValue(s[r.axis]);return{label:""+i.getLabelForValue(s[i.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){const e=this._cachedMeta;this.updateElements(e.data,0,e.data.length,t)}updateElements(t,e,i,r){const s=r==="reset",{index:o,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),c=a.isHorizontal(),u=this._getRuler(),{sharedOptions:h,includeOptions:f}=this._getSharedOptions(e,r);for(let d=e;d<e+i;d++){const g=this.getParsed(d),b=s||Wt(g[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(d),k=this._calculateBarIndexPixels(d,u),O=(g._stacks||{})[a.axis],D={horizontal:c,base:b.base,enableBorderRadius:!O||bc(g._custom)||o===O._top||o===O._bottom,x:c?b.head:k.center,y:c?k.center:b.head,height:c?k.size:Math.abs(b.size),width:c?Math.abs(b.size):k.size};f&&(D.options=h||this.resolveDataElementOptions(d,t[d].active?"active":r));const F=D.options||t[d].options;j3(D,F,O,o),H3(D,F,u.ratio),this.updateElement(t[d],d,D,r)}}_getStacks(t,e){const{iScale:i}=this._cachedMeta,r=i.getMatchingVisibleMetas(this._type).filter(l=>l.controller.options.grouped),s=i.options.stacked,o=[],a=l=>{const c=l.controller.getParsed(e),u=c&&c[l.vScale.axis];if(Wt(u)||isNaN(u))return!0};for(const l of r)if(!(e!==void 0&&a(l))&&((s===!1||o.indexOf(l.stack)===-1||s===void 0&&l.stack===void 0)&&o.push(l.stack),l.index===t))break;return o.length||o.push(void 0),o}_getStackCount(t){return this._getStacks(void 0,t).length}_getStackIndex(t,e,i){const r=this._getStacks(t,i),s=e!==void 0?r.indexOf(e):-1;return s===-1?r.length-1:s}_getRuler(){const t=this.options,e=this._cachedMeta,i=e.iScale,r=[];let s,o;for(s=0,o=e.data.length;s<o;++s)r.push(i.getPixelForValue(this.getParsed(s)[i.axis],s));const a=t.barThickness;return{min:a||N3(e),pixels:r,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:t.grouped,ratio:a?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:e,_stacked:i,index:r},options:{base:s,minBarLength:o}}=this,a=s||0,l=this.getParsed(t),c=l._custom,u=bc(c);let h=l[e.axis],f=0,d=i?this.applyStack(e,l,i):h,g,b;d!==h&&(f=d-h,d=h),u&&(h=c.barStart,d=c.barEnd-c.barStart,h!==0&&hi(h)!==hi(c.barEnd)&&(f=0),f+=h);const k=!Wt(s)&&!u?s:f;let O=e.getPixelForValue(k);if(this.chart.getDataVisibility(t)?g=e.getPixelForValue(f+d):g=O,b=g-O,Math.abs(b)<o){b=B3(b,e,a)*o,h===a&&(O-=b/2);const D=e.getPixelForDecimal(0),F=e.getPixelForDecimal(1),W=Math.min(D,F),V=Math.max(D,F);O=Math.max(Math.min(O,V),W),g=O+b,i&&!u&&(l._stacks[e.axis]._visualValues[r]=e.getValueForPixel(g)-e.getValueForPixel(O))}if(O===e.getPixelForValue(a)){const D=hi(b)*e.getLineWidthForValue(a)/2;O+=D,b-=D}return{size:b,base:O,head:g,center:g+b/2}}_calculateBarIndexPixels(t,e){const i=e.scale,r=this.options,s=r.skipNull,o=se(r.maxBarThickness,1/0);let a,l;if(e.grouped){const c=s?this._getStackCount(t):e.stackCount,u=r.barThickness==="flex"?R3(t,e,r,c):L3(t,e,r,c),h=this._getStackIndex(this.index,this._cachedMeta.stack,s?t:void 0);a=u.start+u.chunk*h+u.chunk/2,l=Math.min(o,u.chunk*u.ratio)}else a=i.getPixelForValue(this.getParsed(t)[i.axis],t),l=Math.min(o,e.min*e.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const t=this._cachedMeta,e=t.vScale,i=t.data,r=i.length;let s=0;for(;s<r;++s)this.getParsed(s)[e.axis]!==null&&i[s].draw(this._ctx)}}function Ti(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Eh{static override(t){Object.assign(Eh.prototype,t)}constructor(t){this.options=t||{}}init(){}formats(){return Ti()}parse(){return Ti()}format(){return Ti()}add(){return Ti()}diff(){return Ti()}startOf(){return Ti()}endOf(){return Ti()}}var q3={_date:Eh};function W3(n,t,e,i){const{controller:r,data:s,_sorted:o}=n,a=r._cachedMeta.iScale;if(a&&t===a.axis&&t!=="r"&&o&&s.length){const l=a._reversePixels?I5:gu;if(i){if(r._sharedOptions){const c=s[0],u=typeof c.getRange=="function"&&c.getRange(t);if(u){const h=l(s,t,e-u),f=l(s,t,e+u);return{lo:h.lo,hi:f.hi}}}}else return l(s,t,e)}return{lo:0,hi:s.length-1}}function Xs(n,t,e,i,r){const s=n.getSortedVisibleDatasetMetas(),o=e[t];for(let a=0,l=s.length;a<l;++a){const{index:c,data:u}=s[a],{lo:h,hi:f}=W3(s[a],t,o,r);for(let d=h;d<=f;++d){const g=u[d];g.skip||i(g,c,d)}}}function K3(n){const t=n.indexOf("x")!==-1,e=n.indexOf("y")!==-1;return function(i,r){const s=t?Math.abs(i.x-r.x):0,o=e?Math.abs(i.y-r.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}function vc(n,t,e,i,r){const s=[];return!r&&!n.isPointInArea(t)||Xs(n,e,t,function(a,l,c){!r&&!Yy(a,n.chartArea,0)||a.inRange(t.x,t.y,i)&&s.push({element:a,datasetIndex:l,index:c})},!0),s}function J3(n,t,e,i){let r=[];function s(o,a,l){const{startAngle:c,endAngle:u}=o.getProps(["startAngle","endAngle"],i),{angle:h}=$5(o,{x:t.x,y:t.y});P5(h,c,u)&&r.push({element:o,datasetIndex:a,index:l})}return Xs(n,e,t,s),r}function G3(n,t,e,i,r,s){let o=[];const a=K3(e);let l=Number.POSITIVE_INFINITY;function c(u,h,f){const d=u.inRange(t.x,t.y,r);if(i&&!d)return;const g=u.getCenterPoint(r);if(!(!!s||n.isPointInArea(g))&&!d)return;const k=a(t,g);k<l?(o=[{element:u,datasetIndex:h,index:f}],l=k):k===l&&o.push({element:u,datasetIndex:h,index:f})}return Xs(n,e,t,c),o}function xc(n,t,e,i,r,s){return!s&&!n.isPointInArea(t)?[]:e==="r"&&!i?J3(n,t,e,r):G3(n,t,e,i,r,s)}function Yp(n,t,e,i,r){const s=[],o=e==="x"?"inXRange":"inYRange";let a=!1;return Xs(n,e,t,(l,c,u)=>{l[o](t[e],r)&&(s.push({element:l,datasetIndex:c,index:u}),a=a||l.inRange(t.x,t.y,r))}),i&&!a?[]:s}var Y3={evaluateInteractionItems:Xs,modes:{index(n,t,e,i){const r=Pi(t,n),s=e.axis||"x",o=e.includeInvisible||!1,a=e.intersect?vc(n,r,s,i,o):xc(n,r,s,!1,i,o),l=[];return a.length?(n.getSortedVisibleDatasetMetas().forEach(c=>{const u=a[0].index,h=c.data[u];h&&!h.skip&&l.push({element:h,datasetIndex:c.index,index:u})}),l):[]},dataset(n,t,e,i){const r=Pi(t,n),s=e.axis||"xy",o=e.includeInvisible||!1;let a=e.intersect?vc(n,r,s,i,o):xc(n,r,s,!1,i,o);if(a.length>0){const l=a[0].datasetIndex,c=n.getDatasetMeta(l).data;a=[];for(let u=0;u<c.length;++u)a.push({element:c[u],datasetIndex:l,index:u})}return a},point(n,t,e,i){const r=Pi(t,n),s=e.axis||"xy",o=e.includeInvisible||!1;return vc(n,r,s,i,o)},nearest(n,t,e,i){const r=Pi(t,n),s=e.axis||"xy",o=e.includeInvisible||!1;return xc(n,r,s,e.intersect,i,o)},x(n,t,e,i){const r=Pi(t,n);return Yp(n,r,"x",e.intersect,i)},y(n,t,e,i){const r=Pi(t,n);return Yp(n,r,"y",e.intersect,i)}}};const hb=["left","top","right","bottom"];function rs(n,t){return n.filter(e=>e.pos===t)}function Xp(n,t){return n.filter(e=>hb.indexOf(e.pos)===-1&&e.box.axis===t)}function ss(n,t){return n.sort((e,i)=>{const r=t?i:e,s=t?e:i;return r.weight===s.weight?r.index-s.index:r.weight-s.weight})}function X3(n){const t=[];let e,i,r,s,o,a;for(e=0,i=(n||[]).length;e<i;++e)r=n[e],{position:s,options:{stack:o,stackWeight:a=1}}=r,t.push({index:e,box:r,pos:s,horizontal:r.isHorizontal(),weight:r.weight,stack:o&&s+o,stackWeight:a});return t}function Q3(n){const t={};for(const e of n){const{stack:i,pos:r,stackWeight:s}=e;if(!i||!hb.includes(r))continue;const o=t[i]||(t[i]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return t}function Z3(n,t){const e=Q3(n),{vBoxMaxWidth:i,hBoxMaxHeight:r}=t;let s,o,a;for(s=0,o=n.length;s<o;++s){a=n[s];const{fullSize:l}=a.box,c=e[a.stack],u=c&&a.stackWeight/c.weight;a.horizontal?(a.width=u?u*i:l&&t.availableWidth,a.height=r):(a.width=i,a.height=u?u*r:l&&t.availableHeight)}return e}function t4(n){const t=X3(n),e=ss(t.filter(c=>c.box.fullSize),!0),i=ss(rs(t,"left"),!0),r=ss(rs(t,"right")),s=ss(rs(t,"top"),!0),o=ss(rs(t,"bottom")),a=Xp(t,"x"),l=Xp(t,"y");return{fullSize:e,leftAndTop:i.concat(s),rightAndBottom:r.concat(l).concat(o).concat(a),chartArea:rs(t,"chartArea"),vertical:i.concat(r).concat(l),horizontal:s.concat(o).concat(a)}}function Qp(n,t,e,i){return Math.max(n[e],t[e])+Math.max(n[i],t[i])}function fb(n,t){n.top=Math.max(n.top,t.top),n.left=Math.max(n.left,t.left),n.bottom=Math.max(n.bottom,t.bottom),n.right=Math.max(n.right,t.right)}function e4(n,t,e,i){const{pos:r,box:s}=e,o=n.maxPadding;if(!Ft(r)){e.size&&(n[r]-=e.size);const h=i[e.stack]||{size:0,count:1};h.size=Math.max(h.size,e.horizontal?s.height:s.width),e.size=h.size/h.count,n[r]+=e.size}s.getPadding&&fb(o,s.getPadding());const a=Math.max(0,t.outerWidth-Qp(o,n,"left","right")),l=Math.max(0,t.outerHeight-Qp(o,n,"top","bottom")),c=a!==n.w,u=l!==n.h;return n.w=a,n.h=l,e.horizontal?{same:c,other:u}:{same:u,other:c}}function n4(n){const t=n.maxPadding;function e(i){const r=Math.max(t[i]-n[i],0);return n[i]+=r,r}n.y+=e("top"),n.x+=e("left"),e("right"),e("bottom")}function i4(n,t){const e=t.maxPadding;function i(r){const s={left:0,top:0,right:0,bottom:0};return r.forEach(o=>{s[o]=Math.max(t[o],e[o])}),s}return i(n?["left","right"]:["top","bottom"])}function gs(n,t,e,i){const r=[];let s,o,a,l,c,u;for(s=0,o=n.length,c=0;s<o;++s){a=n[s],l=a.box,l.update(a.width||t.w,a.height||t.h,i4(a.horizontal,t));const{same:h,other:f}=e4(t,e,a,i);c|=h&&r.length,u=u||f,l.fullSize||r.push(a)}return c&&gs(r,t,e,i)||u}function vo(n,t,e,i,r){n.top=e,n.left=t,n.right=t+i,n.bottom=e+r,n.width=i,n.height=r}function Zp(n,t,e,i){const r=e.padding;let{x:s,y:o}=t;for(const a of n){const l=a.box,c=i[a.stack]||{count:1,placed:0,weight:1},u=a.stackWeight/c.weight||1;if(a.horizontal){const h=t.w*u,f=c.size||l.height;an(c.start)&&(o=c.start),l.fullSize?vo(l,r.left,o,e.outerWidth-r.right-r.left,f):vo(l,t.left+c.placed,o,h,f),c.start=o,c.placed+=h,o=l.bottom}else{const h=t.h*u,f=c.size||l.width;an(c.start)&&(s=c.start),l.fullSize?vo(l,s,r.top,f,e.outerHeight-r.bottom-r.top):vo(l,s,t.top+c.placed,f,h),c.start=s,c.placed+=h,s=l.right}}t.x=s,t.y=o}var xo={addBox(n,t){n.boxes||(n.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},n.boxes.push(t)},removeBox(n,t){const e=n.boxes?n.boxes.indexOf(t):-1;e!==-1&&n.boxes.splice(e,1)},configure(n,t,e){t.fullSize=e.fullSize,t.position=e.position,t.weight=e.weight},update(n,t,e,i){if(!n)return;const r=Vn(n.options.layout.padding),s=Math.max(t-r.width,0),o=Math.max(e-r.height,0),a=t4(n.boxes),l=a.vertical,c=a.horizontal;Ee(n.boxes,b=>{typeof b.beforeLayout=="function"&&b.beforeLayout()});const u=l.reduce((b,k)=>k.box.options&&k.box.options.display===!1?b:b+1,0)||1,h=Object.freeze({outerWidth:t,outerHeight:e,padding:r,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/u,hBoxMaxHeight:o/2}),f=Object.assign({},r);fb(f,Vn(i));const d=Object.assign({maxPadding:f,w:s,h:o,x:r.left,y:r.top},r),g=Z3(l.concat(c),h);gs(a.fullSize,d,h,g),gs(l,d,h,g),gs(c,d,h,g)&&gs(l,d,h,g),n4(d),Zp(a.leftAndTop,d,h,g),d.x+=d.w,d.y+=d.h,Zp(a.rightAndBottom,d,h,g),n.chartArea={left:d.left,top:d.top,right:d.left+d.w,bottom:d.top+d.h,height:d.h,width:d.w},Ee(a.chartArea,b=>{const k=b.box;Object.assign(k,n.chartArea),k.update(d.w,d.h,{left:0,top:0,right:0,bottom:0})})}};class db{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,i){}removeEventListener(t,e,i){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,i,r){return e=Math.max(0,e||t.width),i=i||t.height,{width:e,height:Math.max(0,r?Math.floor(e/r):i)}}isAttached(t){return!0}updateConfig(t){}}class r4 extends db{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const Io="$chartjs",s4={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},tg=n=>n===null||n==="";function o4(n,t){const e=n.style,i=n.getAttribute("height"),r=n.getAttribute("width");if(n[Io]={initial:{height:i,width:r,style:{display:e.display,height:e.height,width:e.width}}},e.display=e.display||"block",e.boxSizing=e.boxSizing||"border-box",tg(r)){const s=Bp(n,"width");s!==void 0&&(n.width=s)}if(tg(i))if(n.style.height==="")n.height=n.width/(t||2);else{const s=Bp(n,"height");s!==void 0&&(n.height=s)}return n}const pb=b3?{passive:!0}:!1;function a4(n,t,e){n.addEventListener(t,e,pb)}function l4(n,t,e){n.canvas.removeEventListener(t,e,pb)}function c4(n,t){const e=s4[n.type]||n.type,{x:i,y:r}=Pi(n,t);return{type:e,chart:t,native:n,x:i!==void 0?i:null,y:r!==void 0?r:null}}function Pa(n,t){for(const e of n)if(e===t||e.contains(t))return!0}function u4(n,t,e){const i=n.canvas,r=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||Pa(a.addedNodes,i),o=o&&!Pa(a.removedNodes,i);o&&e()});return r.observe(document,{childList:!0,subtree:!0}),r}function h4(n,t,e){const i=n.canvas,r=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||Pa(a.removedNodes,i),o=o&&!Pa(a.addedNodes,i);o&&e()});return r.observe(document,{childList:!0,subtree:!0}),r}const Vs=new Map;let eg=0;function gb(){const n=window.devicePixelRatio;n!==eg&&(eg=n,Vs.forEach((t,e)=>{e.currentDevicePixelRatio!==n&&t()}))}function f4(n,t){Vs.size||window.addEventListener("resize",gb),Vs.set(n,t)}function d4(n){Vs.delete(n),Vs.size||window.removeEventListener("resize",gb)}function p4(n,t,e){const i=n.canvas,r=i&&Th(i);if(!r)return;const s=Ky((a,l)=>{const c=r.clientWidth;e(a,l),c<r.clientWidth&&e()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,u=l.contentRect.height;c===0&&u===0||s(c,u)});return o.observe(r),f4(n,s),o}function wc(n,t,e){e&&e.disconnect(),t==="resize"&&d4(n)}function g4(n,t,e){const i=n.canvas,r=Ky(s=>{n.ctx!==null&&e(c4(s,n))},n);return a4(i,t,r),r}class m4 extends db{acquireContext(t,e){const i=t&&t.getContext&&t.getContext("2d");return i&&i.canvas===t?(o4(t,e),i):null}releaseContext(t){const e=t.canvas;if(!e[Io])return!1;const i=e[Io].initial;["height","width"].forEach(s=>{const o=i[s];Wt(o)?e.removeAttribute(s):e.setAttribute(s,o)});const r=i.style||{};return Object.keys(r).forEach(s=>{e.style[s]=r[s]}),e.width=e.width,delete e[Io],!0}addEventListener(t,e,i){this.removeEventListener(t,e);const r=t.$proxies||(t.$proxies={}),o={attach:u4,detach:h4,resize:p4}[e]||g4;r[e]=o(t,e,i)}removeEventListener(t,e){const i=t.$proxies||(t.$proxies={}),r=i[e];if(!r)return;({attach:wc,detach:wc,resize:wc}[e]||l4)(t,e,r),i[e]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,i,r){return y3(t,e,i,r)}isAttached(t){const e=Th(t);return!!(e&&e.isConnected)}}function y4(n){return!ab()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?r4:m4}class $h{static defaults={};static defaultRoutes=void 0;active=!1;tooltipPosition(t){const{x:e,y:i}=this.getProps(["x","y"],t);return{x:e,y:i}}hasValue(){return Aa(this.x)&&Aa(this.y)}getProps(t,e){const i=this.$animations;if(!e||!i)return this;const r={};return t.forEach(s=>{r[s]=i[s]&&i[s].active()?i[s]._to:this[s]}),r}}function b4(n,t){const e=n.options.ticks,i=v4(n),r=Math.min(e.maxTicksLimit||i,i),s=e.major.enabled?w4(t):[],o=s.length,a=s[0],l=s[o-1],c=[];if(o>r)return _4(t,c,s,o/r),c;const u=x4(s,t,r);if(o>0){let h,f;const d=o>1?Math.round((l-a)/(o-1)):null;for(wo(t,c,u,Wt(d)?0:a-d,a),h=0,f=o-1;h<f;h++)wo(t,c,u,s[h],s[h+1]);return wo(t,c,u,l,Wt(d)?t.length:l+d),c}return wo(t,c,u),c}function v4(n){const t=n.options.offset,e=n._tickSize(),i=n._length/e+(t?0:1),r=n._maxLength/e;return Math.floor(Math.min(i,r))}function x4(n,t,e){const i=S4(n),r=t.length/e;if(!i)return Math.max(r,1);const s=T5(i);for(let o=0,a=s.length-1;o<a;o++){const l=s[o];if(l>r)return l}return Math.max(r,1)}function w4(n){const t=[];let e,i;for(e=0,i=n.length;e<i;e++)n[e].major&&t.push(e);return t}function _4(n,t,e,i){let r=0,s=e[0],o;for(i=Math.ceil(i),o=0;o<n.length;o++)o===s&&(t.push(n[o]),r++,s=e[r*i])}function wo(n,t,e,i,r){const s=se(i,0),o=Math.min(se(r,n.length),n.length);let a=0,l,c,u;for(e=Math.ceil(e),r&&(l=r-i,e=l/Math.floor(l/e)),u=s;u<0;)a++,u=Math.round(s+a*e);for(c=Math.max(s,0);c<o;c++)c===u&&(t.push(n[c]),a++,u=Math.round(s+a*e))}function S4(n){const t=n.length;let e,i;if(t<2)return!1;for(i=n[0],e=1;e<t;++e)if(n[e]-n[e-1]!==i)return!1;return i}const k4=n=>n==="left"?"right":n==="right"?"left":n,ng=(n,t,e)=>t==="top"||t==="left"?n[t]+e:n[t]-e,ig=(n,t)=>Math.min(t||n,n);function rg(n,t){const e=[],i=n.length/t,r=n.length;let s=0;for(;s<r;s+=i)e.push(n[Math.floor(s)]);return e}function M4(n,t,e){const i=n.ticks.length,r=Math.min(t,i-1),s=n._startPixel,o=n._endPixel,a=1e-6;let l=n.getPixelForTick(r),c;if(!(e&&(i===1?c=Math.max(l-s,o-l):t===0?c=(n.getPixelForTick(1)-l)/2:c=(l-n.getPixelForTick(r-1))/2,l+=r<t?c:-c,l<s-a||l>o+a)))return l}function C4(n,t){Ee(n,e=>{const i=e.gc,r=i.length/2;let s;if(r>t){for(s=0;s<r;++s)delete e.data[i[s]];i.splice(0,r)}})}function as(n){return n.drawTicks?n.tickLength:0}function sg(n,t){if(!n.display)return 0;const e=Br(n.font,t),i=Vn(n.padding);return(le(n.text)?n.text.length:1)*e.lineHeight+i.height}function O4(n,t){return Qr(n,{scale:t,type:"scale"})}function A4(n,t,e){return Qr(n,{tick:e,index:t,type:"tick"})}function T4(n,t,e){let i=z5(n);return(e&&t!=="right"||!e&&t==="right")&&(i=k4(i)),i}function E4(n,t,e,i){const{top:r,left:s,bottom:o,right:a,chart:l}=n,{chartArea:c,scales:u}=l;let h=0,f,d,g;const b=o-r,k=a-s;if(n.isHorizontal()){if(d=Ep(i,s,a),Ft(e)){const O=Object.keys(e)[0],D=e[O];g=u[O].getPixelForValue(D)+b-t}else e==="center"?g=(c.bottom+c.top)/2+b-t:g=ng(n,e,t);f=a-s}else{if(Ft(e)){const O=Object.keys(e)[0],D=e[O];d=u[O].getPixelForValue(D)-k+t}else e==="center"?d=(c.left+c.right)/2-k+t:d=ng(n,e,t);g=Ep(i,o,r),h=e==="left"?-Mn:Mn}return{titleX:d,titleY:g,maxWidth:f,rotation:h}}class ir extends $h{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:i,_suggestedMax:r}=this;return t=Xe(t,Number.POSITIVE_INFINITY),e=Xe(e,Number.NEGATIVE_INFINITY),i=Xe(i,Number.POSITIVE_INFINITY),r=Xe(r,Number.NEGATIVE_INFINITY),{min:Xe(t,i),max:Xe(e,r),minDefined:ve(t),maxDefined:ve(e)}}getMinMax(t){let{min:e,max:i,minDefined:r,maxDefined:s}=this.getUserBounds(),o;if(r&&s)return{min:e,max:i};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,t),r||(e=Math.min(e,o.min)),s||(i=Math.max(i,o.max));return e=s&&e>i?i:e,i=r&&e>i?e:i,{min:Xe(e,Xe(i,e)),max:Xe(i,Xe(e,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){oe(this.options.beforeUpdate,[this])}update(t,e,i){const{beginAtZero:r,grace:s,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=n3(this,s,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?rg(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=b4(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,e,i;this.isHorizontal()?(e=this.left,i=this.right):(e=this.top,i=this.bottom,t=!t),this._startPixel=e,this._endPixel=i,this._reversePixels=t,this._length=i-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){oe(this.options.afterUpdate,[this])}beforeSetDimensions(){oe(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){oe(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),oe(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){oe(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const e=this.options.ticks;let i,r,s;for(i=0,r=t.length;i<r;i++)s=t[i],s.label=oe(e.callback,[s.value,i,t],this)}afterTickToLabelConversion(){oe(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){oe(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,e=t.ticks,i=ig(this.ticks.length,t.ticks.maxTicksLimit),r=e.minRotation||0,s=e.maxRotation;let o=r,a,l,c;if(!this._isVisible()||!e.display||r>=s||i<=1||!this.isHorizontal()){this.labelRotation=r;return}const u=this._getLabelSizes(),h=u.widest.width,f=u.highest.height,d=Ln(this.chart.width-h,0,this.maxWidth);a=t.offset?this.maxWidth/i:d/(i-1),h+6>a&&(a=d/(i-(t.offset?.5:1)),l=this.maxHeight-as(t.grid)-e.padding-sg(t.title,this.chart.options.font),c=Math.sqrt(h*h+f*f),o=Sh(Math.min(Math.asin(Ln((u.highest.height+6)/a,-1,1)),Math.asin(Ln(l/c,-1,1))-Math.asin(Ln(f/c,-1,1)))),o=Math.max(r,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){oe(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){oe(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:e,options:{ticks:i,title:r,grid:s}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=sg(r,e.options.font);if(a?(t.width=this.maxWidth,t.height=as(s)+l):(t.height=this.maxHeight,t.width=as(s)+l),i.display&&this.ticks.length){const{first:c,last:u,widest:h,highest:f}=this._getLabelSizes(),d=i.padding*2,g=ri(this.labelRotation),b=Math.cos(g),k=Math.sin(g);if(a){const O=i.mirror?0:k*h.width+b*f.height;t.height=Math.min(this.maxHeight,t.height+O+d)}else{const O=i.mirror?0:b*h.width+k*f.height;t.width=Math.min(this.maxWidth,t.width+O+d)}this._calculatePadding(c,u,k,b)}}this._handleMargins(),a?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,i,r){const{ticks:{align:s,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1);let f=0,d=0;l?c?(f=r*t.width,d=i*e.height):(f=i*t.height,d=r*e.width):s==="start"?d=e.width:s==="end"?f=t.width:s!=="inner"&&(f=t.width/2,d=e.width/2),this.paddingLeft=Math.max((f-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((d-h+o)*this.width/(this.width-h),0)}else{let u=e.height/2,h=t.height/2;s==="start"?(u=0,h=t.height):s==="end"&&(u=e.height,h=0),this.paddingTop=u+o,this.paddingBottom=h+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){oe(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:e}=this.options;return e==="top"||e==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let e,i;for(e=0,i=t.length;e<i;e++)Wt(t[e].label)&&(t.splice(e,1),i--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const e=this.options.ticks.sampleSize;let i=this.ticks;e<i.length&&(i=rg(i,e)),this._labelSizes=t=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,e,i){const{ctx:r,_longestTextCache:s}=this,o=[],a=[],l=Math.floor(e/ig(e,i));let c=0,u=0,h,f,d,g,b,k,O,D,F,W,V;for(h=0;h<e;h+=l){if(g=t[h].label,b=this._resolveTickFontOptions(h),r.font=k=b.string,O=s[k]=s[k]||{data:{},gc:[]},D=b.lineHeight,F=W=0,!Wt(g)&&!le(g))F=Ta(r,O.data,O.gc,F,g),W=D;else if(le(g))for(f=0,d=g.length;f<d;++f)V=g[f],!Wt(V)&&!le(V)&&(F=Ta(r,O.data,O.gc,F,V),W+=D);o.push(F),a.push(W),c=Math.max(F,c),u=Math.max(W,u)}C4(s,e);const T=o.indexOf(c),L=a.indexOf(u),R=st=>({width:o[st]||0,height:a[st]||0});return{first:R(0),last:R(e-1),widest:R(T),highest:R(L),widths:o,heights:a}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const e=this._startPixel+t*this._length;return D5(this._alignToPixels?Ai(this.chart,e,0):e)}getDecimalForPixel(t){const e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){const e=this.ticks||[];if(t>=0&&t<e.length){const i=e[t];return i.$context||(i.$context=A4(this.getContext(),t,i))}return this.$context||(this.$context=O4(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,e=ri(this.labelRotation),i=Math.abs(Math.cos(e)),r=Math.abs(Math.sin(e)),s=this._getLabelSizes(),o=t.autoSkipPadding||0,a=s?s.widest.width+o:0,l=s?s.highest.height+o:0;return this.isHorizontal()?l*i>a*r?a/i:l/r:l*r<a*i?l/i:a/r}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const e=this.axis,i=this.chart,r=this.options,{grid:s,position:o,border:a}=r,l=s.offset,c=this.isHorizontal(),h=this.ticks.length+(l?1:0),f=as(s),d=[],g=a.setContext(this.getContext()),b=g.display?g.width:0,k=b/2,O=function(U){return Ai(i,U,b)};let D,F,W,V,T,L,R,st,xt,bt,Tt,Lt;if(o==="top")D=O(this.bottom),L=this.bottom-f,st=D-k,bt=O(t.top)+k,Lt=t.bottom;else if(o==="bottom")D=O(this.top),bt=t.top,Lt=O(t.bottom)-k,L=D+k,st=this.top+f;else if(o==="left")D=O(this.right),T=this.right-f,R=D-k,xt=O(t.left)+k,Tt=t.right;else if(o==="right")D=O(this.left),xt=t.left,Tt=O(t.right)-k,T=D+k,R=this.left+f;else if(e==="x"){if(o==="center")D=O((t.top+t.bottom)/2+.5);else if(Ft(o)){const U=Object.keys(o)[0],j=o[U];D=O(this.chart.scales[U].getPixelForValue(j))}bt=t.top,Lt=t.bottom,L=D+k,st=L+f}else if(e==="y"){if(o==="center")D=O((t.left+t.right)/2);else if(Ft(o)){const U=Object.keys(o)[0],j=o[U];D=O(this.chart.scales[U].getPixelForValue(j))}T=D-k,R=T-f,xt=t.left,Tt=t.right}const q=se(r.ticks.maxTicksLimit,h),H=Math.max(1,Math.ceil(h/q));for(F=0;F<h;F+=H){const U=this.getContext(F),j=s.setContext(U),z=a.setContext(U),G=j.lineWidth,rt=j.color,Z=z.dash||[],ct=z.dashOffset,It=j.tickWidth,Ht=j.tickColor,pt=j.tickBorderDash||[],y=j.tickBorderDashOffset;W=M4(this,F,l),W!==void 0&&(V=Ai(i,W,G),c?T=R=xt=Tt=V:L=st=bt=Lt=V,d.push({tx1:T,ty1:L,tx2:R,ty2:st,x1:xt,y1:bt,x2:Tt,y2:Lt,width:G,color:rt,borderDash:Z,borderDashOffset:ct,tickWidth:It,tickColor:Ht,tickBorderDash:pt,tickBorderDashOffset:y}))}return this._ticksLength=h,this._borderValue=D,d}_computeLabelItems(t){const e=this.axis,i=this.options,{position:r,ticks:s}=i,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:u,mirror:h}=s,f=as(i.grid),d=f+u,g=h?-u:d,b=-ri(this.labelRotation),k=[];let O,D,F,W,V,T,L,R,st,xt,bt,Tt,Lt="middle";if(r==="top")T=this.bottom-g,L=this._getXAxisLabelAlignment();else if(r==="bottom")T=this.top+g,L=this._getXAxisLabelAlignment();else if(r==="left"){const H=this._getYAxisLabelAlignment(f);L=H.textAlign,V=H.x}else if(r==="right"){const H=this._getYAxisLabelAlignment(f);L=H.textAlign,V=H.x}else if(e==="x"){if(r==="center")T=(t.top+t.bottom)/2+d;else if(Ft(r)){const H=Object.keys(r)[0],U=r[H];T=this.chart.scales[H].getPixelForValue(U)+d}L=this._getXAxisLabelAlignment()}else if(e==="y"){if(r==="center")V=(t.left+t.right)/2-d;else if(Ft(r)){const H=Object.keys(r)[0],U=r[H];V=this.chart.scales[H].getPixelForValue(U)}L=this._getYAxisLabelAlignment(f).textAlign}e==="y"&&(l==="start"?Lt="top":l==="end"&&(Lt="bottom"));const q=this._getLabelSizes();for(O=0,D=a.length;O<D;++O){F=a[O],W=F.label;const H=s.setContext(this.getContext(O));R=this.getPixelForTick(O)+s.labelOffset,st=this._resolveTickFontOptions(O),xt=st.lineHeight,bt=le(W)?W.length:1;const U=bt/2,j=H.color,z=H.textStrokeColor,G=H.textStrokeWidth;let rt=L;o?(V=R,L==="inner"&&(O===D-1?rt=this.options.reverse?"left":"right":O===0?rt=this.options.reverse?"right":"left":rt="center"),r==="top"?c==="near"||b!==0?Tt=-bt*xt+xt/2:c==="center"?Tt=-q.highest.height/2-U*xt+xt:Tt=-q.highest.height+xt/2:c==="near"||b!==0?Tt=xt/2:c==="center"?Tt=q.highest.height/2-U*xt:Tt=q.highest.height-bt*xt,h&&(Tt*=-1),b!==0&&!H.showLabelBackdrop&&(V+=xt/2*Math.sin(b))):(T=R,Tt=(1-bt)*xt/2);let Z;if(H.showLabelBackdrop){const ct=Vn(H.backdropPadding),It=q.heights[O],Ht=q.widths[O];let pt=Tt-ct.top,y=0-ct.left;switch(Lt){case"middle":pt-=It/2;break;case"bottom":pt-=It;break}switch(L){case"center":y-=Ht/2;break;case"right":y-=Ht;break}Z={left:y,top:pt,width:Ht+ct.width,height:It+ct.height,color:H.backdropColor}}k.push({label:W,font:st,textOffset:Tt,options:{rotation:b,color:j,strokeColor:z,strokeWidth:G,textAlign:rt,textBaseline:Lt,translation:[V,T],backdrop:Z}})}return k}_getXAxisLabelAlignment(){const{position:t,ticks:e}=this.options;if(-ri(this.labelRotation))return t==="top"?"left":"right";let r="center";return e.align==="start"?r="left":e.align==="end"?r="right":e.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(t){const{position:e,ticks:{crossAlign:i,mirror:r,padding:s}}=this.options,o=this._getLabelSizes(),a=t+s,l=o.widest.width;let c,u;return e==="left"?r?(u=this.right+s,i==="near"?c="left":i==="center"?(c="center",u+=l/2):(c="right",u+=l)):(u=this.right-a,i==="near"?c="right":i==="center"?(c="center",u-=l/2):(c="left",u=this.left)):e==="right"?r?(u=this.left+s,i==="near"?c="right":i==="center"?(c="center",u-=l/2):(c="left",u-=l)):(u=this.left+a,i==="near"?c="left":i==="center"?(c="center",u+=l/2):(c="right",u=this.right)):c="right",{textAlign:c,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,e=this.options.position;if(e==="left"||e==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(e==="top"||e==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:e},left:i,top:r,width:s,height:o}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(i,r,s,o),t.restore())}getLineWidthForValue(t){const e=this.options.grid;if(!this._isVisible()||!e.display)return 0;const r=this.ticks.findIndex(s=>s.value===t);return r>=0?e.setContext(this.getContext(r)).lineWidth:0}drawGrid(t){const e=this.options.grid,i=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let s,o;const a=(l,c,u)=>{!u.width||!u.color||(i.save(),i.lineWidth=u.width,i.strokeStyle=u.color,i.setLineDash(u.borderDash||[]),i.lineDashOffset=u.borderDashOffset,i.beginPath(),i.moveTo(l.x,l.y),i.lineTo(c.x,c.y),i.stroke(),i.restore())};if(e.display)for(s=0,o=r.length;s<o;++s){const l=r[s];e.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),e.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:e,options:{border:i,grid:r}}=this,s=i.setContext(this.getContext()),o=i.display?s.width:0;if(!o)return;const a=r.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,u,h,f;this.isHorizontal()?(c=Ai(t,this.left,o)-o/2,u=Ai(t,this.right,a)+a/2,h=f=l):(h=Ai(t,this.top,o)-o/2,f=Ai(t,this.bottom,a)+a/2,c=u=l),e.save(),e.lineWidth=s.width,e.strokeStyle=s.color,e.beginPath(),e.moveTo(c,h),e.lineTo(u,f),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;const i=this.ctx,r=this._computeLabelArea();r&&Xy(i,r);const s=this.getLabelItems(t);for(const o of s){const a=o.options,l=o.font,c=o.label,u=o.textOffset;Ea(i,c,0,u,l,a)}r&&Qy(i)}drawTitle(){const{ctx:t,options:{position:e,title:i,reverse:r}}=this;if(!i.display)return;const s=Br(i.font),o=Vn(i.padding),a=i.align;let l=s.lineHeight/2;e==="bottom"||e==="center"||Ft(e)?(l+=o.bottom,le(i.text)&&(l+=s.lineHeight*(i.text.length-1))):l+=o.top;const{titleX:c,titleY:u,maxWidth:h,rotation:f}=E4(this,l,e,a);Ea(t,i.text,0,0,s,{color:i.color,maxWidth:h,rotation:f,textAlign:T4(a,e,r),textBaseline:"middle",translation:[c,u]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,e=t.ticks&&t.ticks.z||0,i=se(t.grid&&t.grid.z,-1),r=se(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==ir.prototype.draw?[{z:e,draw:s=>{this.draw(s)}}]:[{z:i,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:e,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(t){const e=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",r=[];let s,o;for(s=0,o=e.length;s<o;++s){const a=e[s];a[i]===this.id&&(!t||a.type===t)&&r.push(a)}return r}_resolveTickFontOptions(t){const e=this.options.ticks.setContext(this.getContext(t));return Br(e.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class _o{constructor(t,e,i){this.type=t,this.scope=e,this.override=i,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const e=Object.getPrototypeOf(t);let i;D4(e)&&(i=this.register(e));const r=this.items,s=t.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+t);return s in r||(r[s]=t,$4(t,o,i),this.override&&de.override(t.id,t.overrides)),o}get(t){return this.items[t]}unregister(t){const e=this.items,i=t.id,r=this.scope;i in e&&delete e[i],r&&i in de[r]&&(delete de[r][i],this.override&&delete tr[i])}}function $4(n,t,e){const i=js(Object.create(null),[e?de.get(e):{},de.get(t),n.defaults]);de.set(t,i),n.defaultRoutes&&P4(t,n.defaultRoutes),n.descriptors&&de.describe(t,n.descriptors)}function P4(n,t){Object.keys(t).forEach(e=>{const i=e.split("."),r=i.pop(),s=[n].concat(i).join("."),o=t[e].split("."),a=o.pop(),l=o.join(".");de.route(s,r,l,a)})}function D4(n){return"id"in n&&"defaults"in n}class I4{constructor(){this.controllers=new _o(cb,"datasets",!0),this.elements=new _o($h,"elements"),this.plugins=new _o(Object,"plugins"),this.scales=new _o(ir,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,i){[...e].forEach(r=>{const s=i||this._getRegistryForType(r);i||s.isForType(r)||s===this.plugins&&r.id?this._exec(t,s,r):Ee(r,o=>{const a=i||this._getRegistryForType(o);this._exec(t,a,o)})})}_exec(t,e,i){const r=_h(t);oe(i["before"+r],[],i),e[t](i),oe(i["after"+r],[],i)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){const i=this._typedRegistries[e];if(i.isForType(t))return i}return this.plugins}_get(t,e,i){const r=e.get(t);if(r===void 0)throw new Error('"'+t+'" is not a registered '+i+".");return r}}var xn=new I4;class N4{constructor(){this._init=[]}notify(t,e,i,r){e==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const s=r?this._descriptors(t).filter(r):this._descriptors(t),o=this._notify(s,t,e,i);return e==="afterDestroy"&&(this._notify(s,t,"stop"),this._notify(this._init,t,"uninstall")),o}_notify(t,e,i,r){r=r||{};for(const s of t){const o=s.plugin,a=o[i],l=[e,r,s.options];if(oe(a,l,o)===!1&&r.cancelable)return!1}return!0}invalidate(){Wt(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){const i=t&&t.config,r=se(i.options&&i.options.plugins,{}),s=L4(i);return r===!1&&!e?[]:z4(t,s,r,e)}_notifyStateChanges(t){const e=this._oldCache||[],i=this._cache,r=(s,o)=>s.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(r(e,i),t,"stop"),this._notify(r(i,e),t,"start")}}function L4(n){const t={},e=[],i=Object.keys(xn.plugins.items);for(let s=0;s<i.length;s++)e.push(xn.getPlugin(i[s]));const r=n.plugins||[];for(let s=0;s<r.length;s++){const o=r[s];e.indexOf(o)===-1&&(e.push(o),t[o.id]=!0)}return{plugins:e,localIds:t}}function R4(n,t){return!t&&n===!1?null:n===!0?{}:n}function z4(n,{plugins:t,localIds:e},i,r){const s=[],o=n.getContext();for(const a of t){const l=a.id,c=R4(i[l],r);c!==null&&s.push({plugin:a,options:B4(n.config,{plugin:a,local:e[l]},c,o)})}return s}function B4(n,{plugin:t,local:e},i,r){const s=n.pluginScopeKeys(t),o=n.getOptionScopes(i,s);return e&&t.defaults&&o.push(t.defaults),n.createResolver(o,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function yu(n,t){const e=de.datasets[n]||{};return((t.datasets||{})[n]||{}).indexAxis||t.indexAxis||e.indexAxis||"x"}function F4(n,t){let e=n;return n==="_index_"?e=t:n==="_value_"&&(e=t==="x"?"y":"x"),e}function j4(n,t){return n===t?"_index_":"_value_"}function V4(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function Da(n,t){if(n==="x"||n==="y"||n==="r"||(n=t.axis||V4(t.position)||n.length>1&&Da(n[0].toLowerCase(),t),n))return n;throw new Error(`Cannot determine type of '${name}' axis. Please provide 'axis' or 'position' option.`)}function H4(n,t){const e=tr[n.type]||{scales:{}},i=t.scales||{},r=yu(n.type,t),s=Object.create(null);return Object.keys(i).forEach(o=>{const a=i[o];if(!Ft(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=Da(o,a),c=j4(l,r),u=e.scales||{};s[o]=Cs(Object.create(null),[{axis:l},a,u[l],u[c]])}),n.data.datasets.forEach(o=>{const a=o.type||n.type,l=o.indexAxis||yu(a,t),u=(tr[a]||{}).scales||{};Object.keys(u).forEach(h=>{const f=F4(h,l),d=o[f+"AxisID"]||f;s[d]=s[d]||Object.create(null),Cs(s[d],[{axis:f},i[d],u[h]])})}),Object.keys(s).forEach(o=>{const a=s[o];Cs(a,[de.scales[a.type],de.scale])}),s}function mb(n){const t=n.options||(n.options={});t.plugins=se(t.plugins,{}),t.scales=H4(n,t)}function yb(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function U4(n){return n=n||{},n.data=yb(n.data),mb(n),n}const og=new Map,bb=new Set;function So(n,t){let e=og.get(n);return e||(e=t(),og.set(n,e),bb.add(e)),e}const ls=(n,t,e)=>{const i=zr(t,e);i!==void 0&&n.add(i)};class q4{constructor(t){this._config=U4(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=yb(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),mb(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return So(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,e){return So(`${t}.transition.${e}`,()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,e){return So(`${t}-${e}`,()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]])}pluginScopeKeys(t){const e=t.id,i=this.type;return So(`${i}-plugin-${e}`,()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,e){const i=this._scopeCache;let r=i.get(t);return(!r||e)&&(r=new Map,i.set(t,r)),r}getOptionScopes(t,e,i){const{options:r,type:s}=this,o=this._cachedScopes(t,i),a=o.get(e);if(a)return a;const l=new Set;e.forEach(u=>{t&&(l.add(t),u.forEach(h=>ls(l,t,h))),u.forEach(h=>ls(l,r,h)),u.forEach(h=>ls(l,tr[s]||{},h)),u.forEach(h=>ls(l,de,h)),u.forEach(h=>ls(l,mu,h))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),bb.has(e)&&o.set(e,c),c}chartOptionScopes(){const{options:t,type:e}=this;return[t,tr[e]||{},de.datasets[e]||{},{type:e},de,mu]}resolveNamedOptions(t,e,i,r=[""]){const s={$shared:!0},{resolver:o,subPrefixes:a}=ag(this._resolverCache,t,r);let l=o;if(K4(o,e)){s.$shared=!1,i=bi(i)?i():i;const c=this.createResolver(t,i,a);l=Fr(o,i,c)}for(const c of e)s[c]=l[c];return s}createResolver(t,e,i=[""],r){const{resolver:s}=ag(this._resolverCache,t,i);return Ft(e)?Fr(s,e,void 0,r):s}}function ag(n,t,e){let i=n.get(t);i||(i=new Map,n.set(t,i));const r=e.join();let s=i.get(r);return s||(s={resolver:Ch(t,e),subPrefixes:e.filter(a=>!a.toLowerCase().includes("hover"))},i.set(r,s)),s}const W4=n=>Ft(n)&&Object.getOwnPropertyNames(n).reduce((t,e)=>t||bi(n[e]),!1);function K4(n,t){const{isScriptable:e,isIndexable:i}=ib(n);for(const r of t){const s=e(r),o=i(r),a=(o||s)&&n[r];if(s&&(bi(a)||W4(a))||o&&le(a))return!0}return!1}var J4="4.2.1";const G4=["top","bottom","left","right","chartArea"];function lg(n,t){return n==="top"||n==="bottom"||G4.indexOf(n)===-1&&t==="x"}function cg(n,t){return function(e,i){return e[n]===i[n]?e[t]-i[t]:e[n]-i[n]}}function ug(n){const t=n.chart,e=t.options.animation;t.notifyPlugins("afterRender"),oe(e&&e.onComplete,[n],t)}function Y4(n){const t=n.chart,e=t.options.animation;oe(e&&e.onProgress,[n],t)}function vb(n){return ab()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}const No={},hg=n=>{const t=vb(n);return Object.values(No).filter(e=>e.canvas===t).pop()};function X4(n,t,e){const i=Object.keys(n);for(const r of i){const s=+r;if(s>=t){const o=n[r];delete n[r],(e>0||s>t)&&(n[s+e]=o)}}}function Q4(n,t,e,i){return!e||n.type==="mouseout"?null:i?t:n}function Z4(n){const{xScale:t,yScale:e}=n;if(t&&e)return{left:t.left,right:t.right,top:e.top,bottom:e.bottom}}let bu=class{static defaults=de;static instances=No;static overrides=tr;static registry=xn;static version=J4;static getChart=hg;static register(...t){xn.add(...t),fg()}static unregister(...t){xn.remove(...t),fg()}constructor(t,e){const i=this.config=new q4(e),r=vb(t),s=hg(r);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const o=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||y4(r)),this.platform.updateConfig(i);const a=this.platform.acquireContext(r,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,u=l&&l.width;if(this.id=_5(),this.ctx=a,this.canvas=l,this.width=u,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new N4,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=R5(h=>this.update(h),o.resizeDelay||0),this._dataChanges=[],No[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}Pn.listen(this,"complete",ug),Pn.listen(this,"progress",Y4),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:e},width:i,height:r,_aspectRatio:s}=this;return Wt(t)?e&&s?s:r?i/r:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return xn}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():zp(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Np(this.canvas,this.ctx),this}stop(){return Pn.stop(this),this}resize(t,e){Pn.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){const i=this.options,r=this.canvas,s=i.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(r,t,e,s),a=i.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,zp(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),oe(i.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const e=this.options.scales||{};Ee(e,(i,r)=>{i.id=r})}buildOrUpdateScales(){const t=this.options,e=t.scales,i=this.scales,r=Object.keys(i).reduce((o,a)=>(o[a]=!1,o),{});let s=[];e&&(s=s.concat(Object.keys(e).map(o=>{const a=e[o],l=Da(o,a),c=l==="r",u=l==="x";return{options:a,dposition:c?"chartArea":u?"bottom":"left",dtype:c?"radialLinear":u?"category":"linear"}}))),Ee(s,o=>{const a=o.options,l=a.id,c=Da(l,a),u=se(a.type,o.dtype);(a.position===void 0||lg(a.position,c)!==lg(o.dposition))&&(a.position=o.dposition),r[l]=!0;let h=null;if(l in i&&i[l].type===u)h=i[l];else{const f=xn.getScale(u);h=new f({id:l,type:u,ctx:this.ctx,chart:this}),i[h.id]=h}h.init(a,t)}),Ee(r,(o,a)=>{o||delete i[a]}),Ee(i,o=>{xo.configure(this,o,o.options),xo.addBox(this,o)})}_updateMetasets(){const t=this._metasets,e=this.data.datasets.length,i=t.length;if(t.sort((r,s)=>r.index-s.index),i>e){for(let r=e;r<i;++r)this._destroyDatasetMeta(r);t.splice(e,i-e)}this._sortedMetasets=t.slice(0).sort(cg("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach((i,r)=>{e.filter(s=>s===i._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const t=[],e=this.data.datasets;let i,r;for(this._removeUnreferencedMetasets(),i=0,r=e.length;i<r;i++){const s=e[i];let o=this.getDatasetMeta(i);const a=s.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(i),o=this.getDatasetMeta(i)),o.type=a,o.indexAxis=s.indexAxis||yu(a,this.options),o.order=s.order||0,o.index=i,o.label=""+s.label,o.visible=this.isDatasetVisible(i),o.controller)o.controller.updateIndex(i),o.controller.linkScales();else{const l=xn.getController(a),{datasetElementType:c,dataElementType:u}=de.datasets[a];Object.assign(l,{dataElementType:xn.getElement(u),datasetElementType:c&&xn.getElement(c)}),o.controller=new l(this,i),t.push(o.controller)}}return this._updateMetasets(),t}_resetElements(){Ee(this.data.datasets,(t,e)=>{this.getDatasetMeta(e).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const e=this.config;e.update();const i=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,u=this.data.datasets.length;c<u;c++){const{controller:h}=this.getDatasetMeta(c),f=!r&&s.indexOf(h)===-1;h.buildOrUpdateElements(f),o=Math.max(+h.getMaxOverflow(),o)}o=this._minPadding=i.layout.autoPadding?o:0,this._updateLayout(o),r||Ee(s,c=>{c.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(cg("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){Ee(this.scales,t=>{xo.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,e=new Set(Object.keys(this._listeners)),i=new Set(t.events);(!Mp(e,i)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,e=this._getUniformDataChanges()||[];for(const{method:i,start:r,count:s}of e){const o=i==="_removeElements"?-s:s;X4(t,r,o)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const e=this.data.datasets.length,i=s=>new Set(t.filter(o=>o[0]===s).map((o,a)=>a+","+o.splice(1).join(","))),r=i(0);for(let s=1;s<e;s++)if(!Mp(r,i(s)))return;return Array.from(r).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;xo.update(this,this.width,this.height,t);const e=this.chartArea,i=e.width<=0||e.height<=0;this._layers=[],Ee(this.boxes,r=>{i&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,s)=>{r._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let e=0,i=this.data.datasets.length;e<i;++e)this.getDatasetMeta(e).controller.configure();for(let e=0,i=this.data.datasets.length;e<i;++e)this._updateDataset(e,bi(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){const i=this.getDatasetMeta(t),r={meta:i,index:t,mode:e,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(i.controller._update(e),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Pn.has(this)?this.attached&&!Pn.running(this)&&Pn.start(this):(this.draw(),ug({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:i,height:r}=this._resizeBeforeDraw;this._resize(i,r),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const e=this._sortedMetasets,i=[];let r,s;for(r=0,s=e.length;r<s;++r){const o=e[r];(!t||o.visible)&&i.push(o)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const e=this.ctx,i=t._clip,r=!i.disabled,s=Z4(t)||this.chartArea,o={meta:t,index:t.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",o)!==!1&&(r&&Xy(e,{left:i.left===!1?0:s.left-i.left,right:i.right===!1?this.width:s.right+i.right,top:i.top===!1?0:s.top-i.top,bottom:i.bottom===!1?this.height:s.bottom+i.bottom}),t.controller.draw(),r&&Qy(e),o.cancelable=!1,this.notifyPlugins("afterDatasetDraw",o))}isPointInArea(t){return Yy(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,e,i,r){const s=Y3.modes[e];return typeof s=="function"?s(this,t,i,r):[]}getDatasetMeta(t){const e=this.data.datasets[t],i=this._metasets;let r=i.filter(s=>s&&s._dataset===e).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},i.push(r)),r}getContext(){return this.$context||(this.$context=Qr(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const e=this.data.datasets[t];if(!e)return!1;const i=this.getDatasetMeta(t);return typeof i.hidden=="boolean"?!i.hidden:!e.hidden}setDatasetVisibility(t,e){const i=this.getDatasetMeta(t);i.hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,i){const r=i?"show":"hide",s=this.getDatasetMeta(t),o=s.controller._resolveAnimations(void 0,r);an(e)?(s.data[e].hidden=!i,this.update()):(this.setDatasetVisibility(t,i),o.update(s,{visible:i}),this.update(a=>a.datasetIndex===t?r:void 0))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){const e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),Pn.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),Np(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),delete No[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,e=this.platform,i=(s,o)=>{e.addEventListener(this,s,o),t[s]=o},r=(s,o,a)=>{s.offsetX=o,s.offsetY=a,this._eventHandler(s)};Ee(this.options.events,s=>i(s,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,e=this.platform,i=(l,c)=>{e.addEventListener(this,l,c),t[l]=c},r=(l,c)=>{t[l]&&(e.removeEventListener(this,l,c),delete t[l])},s=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{r("attach",a),this.attached=!0,this.resize(),i("resize",s),i("detach",o)};o=()=>{this.attached=!1,r("resize",s),this._stop(),this._resize(0,0),i("attach",a)},e.isAttached(this.canvas)?a():o()}unbindEvents(){Ee(this._listeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._listeners={},Ee(this._responsiveListeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,e,i){const r=i?"set":"remove";let s,o,a,l;for(e==="dataset"&&(s=this.getDatasetMeta(t[0].datasetIndex),s.controller["_"+r+"DatasetHoverStyle"]()),a=0,l=t.length;a<l;++a){o=t[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[r+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const e=this._active||[],i=t.map(({datasetIndex:s,index:o})=>{const a=this.getDatasetMeta(s);if(!a)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:a.data[o],index:o}});!Sp(i,e)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,e))}notifyPlugins(t,e,i){return this._plugins.notify(this,t,e,i)}isPluginEnabled(t){return this._plugins._cache.filter(e=>e.plugin.id===t).length===1}_updateHoverStyles(t,e,i){const r=this.options.hover,s=(l,c)=>l.filter(u=>!c.some(h=>u.datasetIndex===h.datasetIndex&&u.index===h.index)),o=s(e,t),a=i?t:s(t,e);o.length&&this.updateHoverStyle(o,r.mode,!1),a.length&&r.mode&&this.updateHoverStyle(a,r.mode,!0)}_eventHandler(t,e){const i={event:t,replay:e,cancelable:!0,inChartArea:this.isPointInArea(t)},r=o=>(o.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",i,r)===!1)return;const s=this._handleEvent(t,e,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,r),(s||i.changed)&&this.render(),this}_handleEvent(t,e,i){const{_active:r=[],options:s}=this,o=e,a=this._getActiveElements(t,r,i,o),l=A5(t),c=Q4(t,this._lastEvent,i,l);i&&(this._lastEvent=null,oe(s.onHover,[t,a,this],this),l&&oe(s.onClick,[t,a,this],this));const u=!Sp(a,r);return(u||e)&&(this._active=a,this._updateHoverStyles(a,r,e)),this._lastEvent=c,u}_getActiveElements(t,e,i,r){if(t.type==="mouseout")return[];if(!i)return e;const s=this.options.hover;return this.getElementsAtEventForMode(t,s.mode,s,r)}};function fg(){return Ee(bu.instances,n=>n._plugins.invalidate())}function xb(n,t){const{x:e,y:i,base:r,width:s,height:o}=n.getProps(["x","y","base","width","height"],t);let a,l,c,u,h;return n.horizontal?(h=o/2,a=Math.min(e,r),l=Math.max(e,r),c=i-h,u=i+h):(h=s/2,a=e-h,l=e+h,c=Math.min(i,r),u=Math.max(i,r)),{left:a,top:c,right:l,bottom:u}}function si(n,t,e,i){return n?0:Ln(t,e,i)}function tz(n,t,e){const i=n.options.borderWidth,r=n.borderSkipped,s=eb(i);return{t:si(r.top,s.top,0,e),r:si(r.right,s.right,0,t),b:si(r.bottom,s.bottom,0,e),l:si(r.left,s.left,0,t)}}function ez(n,t,e){const{enableBorderRadius:i}=n.getProps(["enableBorderRadius"]),r=n.options.borderRadius,s=nb(r),o=Math.min(t,e),a=n.borderSkipped,l=i||Ft(r);return{topLeft:si(!l||a.top||a.left,s.topLeft,0,o),topRight:si(!l||a.top||a.right,s.topRight,0,o),bottomLeft:si(!l||a.bottom||a.left,s.bottomLeft,0,o),bottomRight:si(!l||a.bottom||a.right,s.bottomRight,0,o)}}function nz(n){const t=xb(n),e=t.right-t.left,i=t.bottom-t.top,r=tz(n,e/2,i/2),s=ez(n,e/2,i/2);return{outer:{x:t.left,y:t.top,w:e,h:i,radius:s},inner:{x:t.left+r.l,y:t.top+r.t,w:e-r.l-r.r,h:i-r.t-r.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,s.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(r.b,r.r))}}}}function _c(n,t,e,i){const r=t===null,s=e===null,a=n&&!(r&&s)&&xb(n,i);return a&&(r||Ap(t,a.left,a.right))&&(s||Ap(e,a.top,a.bottom))}function iz(n){return n.topLeft||n.topRight||n.bottomLeft||n.bottomRight}function rz(n,t){n.rect(t.x,t.y,t.w,t.h)}function Sc(n,t,e={}){const i=n.x!==e.x?-t:0,r=n.y!==e.y?-t:0,s=(n.x+n.w!==e.x+e.w?t:0)-i,o=(n.y+n.h!==e.y+e.h?t:0)-r;return{x:n.x+i,y:n.y+r,w:n.w+s,h:n.h+o,radius:n.radius}}class sz extends $h{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:e,options:{borderColor:i,backgroundColor:r}}=this,{inner:s,outer:o}=nz(this),a=iz(o.radius)?Zy:rz;t.save(),(o.w!==s.w||o.h!==s.h)&&(t.beginPath(),a(t,Sc(o,e,s)),t.clip(),a(t,Sc(s,-e,o)),t.fillStyle=i,t.fill("evenodd")),t.beginPath(),a(t,Sc(s,e)),t.fillStyle=r,t.fill(),t.restore()}inRange(t,e,i){return _c(this,t,e,i)}inXRange(t,e){return _c(this,t,null,e)}inYRange(t,e){return _c(this,null,t,e)}getCenterPoint(t){const{x:e,y:i,base:r,horizontal:s}=this.getProps(["x","y","base","horizontal"],t);return{x:s?(e+r)/2:e,y:s?i:(i+r)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}}const oz=(n,t,e,i)=>(typeof t=="string"?(e=n.push(t)-1,i.unshift({index:e,label:t})):isNaN(t)&&(e=null),e);function az(n,t,e,i){const r=n.indexOf(t);if(r===-1)return oz(n,t,e,i);const s=n.lastIndexOf(t);return r!==s?e:r}const lz=(n,t)=>n===null?null:Ln(Math.round(n),0,t);function dg(n){const t=this.getLabels();return n>=0&&n<t.length?t[n]:n}class cz extends ir{static id="category";static defaults={ticks:{callback:dg}};constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const e=this._addedLabels;if(e.length){const i=this.getLabels();for(const{index:r,label:s}of e)i[r]===s&&i.splice(r,1);this._addedLabels=[]}super.init(t)}parse(t,e){if(Wt(t))return null;const i=this.getLabels();return e=isFinite(e)&&i[e]===t?e:az(i,t,se(e,t),this._addedLabels),lz(e,i.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let{min:i,max:r}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(i=0),e||(r=this.getLabels().length-1)),this.min=i,this.max=r}buildTicks(){const t=this.min,e=this.max,i=this.options.offset,r=[];let s=this.getLabels();s=t===0&&e===s.length-1?s:s.slice(t,e+1),this._valueRange=Math.max(s.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let o=t;o<=e;o++)r.push({value:o});return r}getLabelForValue(t){return dg.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}function uz(n,t){const e=[],{bounds:r,step:s,min:o,max:a,precision:l,count:c,maxTicks:u,maxDigits:h,includeBounds:f}=n,d=s||1,g=u-1,{min:b,max:k}=t,O=!Wt(o),D=!Wt(a),F=!Wt(c),W=(k-b)/(h+1);let V=Cp((k-b)/g/d)*d,T,L,R,st;if(V<1e-14&&!O&&!D)return[{value:b},{value:k}];st=Math.ceil(k/V)-Math.floor(b/V),st>g&&(V=Cp(st*V/g/d)*d),Wt(l)||(T=Math.pow(10,l),V=Math.ceil(V*T)/T),r==="ticks"?(L=Math.floor(b/V)*V,R=Math.ceil(k/V)*V):(L=b,R=k),O&&D&&s&&E5((a-o)/s,V/1e3)?(st=Math.round(Math.min((a-o)/V,u)),V=(a-o)/st,L=o,R=a):F?(L=O?o:L,R=D?a:R,st=c-1,V=(R-L)/st):(st=(R-L)/V,Do(st,Math.round(st),V/1e3)?st=Math.round(st):st=Math.ceil(st));const xt=Math.max(Op(V),Op(L));T=Math.pow(10,Wt(l)?xt:l),L=Math.round(L*T)/T,R=Math.round(R*T)/T;let bt=0;for(O&&(f&&L!==o?(e.push({value:o}),L<o&&bt++,Do(Math.round((L+bt*V)*T)/T,o,pg(o,W,n))&&bt++):L<o&&bt++);bt<st;++bt)e.push({value:Math.round((L+bt*V)*T)/T});return D&&f&&R!==a?e.length&&Do(e[e.length-1].value,a,pg(a,W,n))?e[e.length-1].value=a:e.push({value:a}):(!D||R===a)&&e.push({value:R}),e}function pg(n,t,{horizontal:e,minRotation:i}){const r=ri(i),s=(e?Math.sin(r):Math.cos(r))||.001,o=.75*t*(""+n).length;return Math.min(t/s,o)}class Ia extends ir{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return Wt(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:e,maxDefined:i}=this.getUserBounds();let{min:r,max:s}=this;const o=l=>r=e?r:l,a=l=>s=i?s:l;if(t){const l=hi(r),c=hi(s);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(r===s){let l=s===0?1:Math.abs(s*.05);a(s+l),t||o(r-l)}this.min=r,this.max=s}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:e,stepSize:i}=t,r;return i?(r=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),e=e||11),e&&(r=Math.min(e,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,e=t.ticks;let i=this.getTickLimit();i=Math.max(2,i);const r={maxTicks:i,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:e.includeBounds!==!1},s=this._range||this,o=uz(r,s);return t.bounds==="ticks"&&Hy(o,this,"value"),t.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const t=this.ticks;let e=this.min,i=this.max;if(super.configure(),this.options.offset&&t.length){const r=(i-e)/Math.max(t.length-1,1)/2;e-=r,i+=r}this._startValue=e,this._endValue=i,this._valueRange=i-e}getLabelForValue(t){return Mh(t,this.chart.options.locale,this.options.ticks.format)}}class hz extends Ia{static id="linear";static defaults={ticks:{callback:fl.formatters.numeric}};determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=ve(t)?t:0,this.max=ve(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),e=t?this.width:this.height,i=ri(this.options.ticks.minRotation),r=(t?Math.sin(i):Math.cos(i))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,s.lineHeight/r))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}const Hs=n=>Math.floor(ii(n)),Ei=(n,t)=>Math.pow(10,Hs(n)+t);function gg(n){return n/Math.pow(10,Hs(n))===1}function mg(n,t,e){const i=Math.pow(10,e),r=Math.floor(n/i);return Math.ceil(t/i)-r}function fz(n,t){const e=t-n;let i=Hs(e);for(;mg(n,t,i)>10;)i++;for(;mg(n,t,i)<10;)i--;return Math.min(i,Hs(n))}function dz(n,{min:t,max:e}){t=Xe(n.min,t);const i=[],r=Hs(t);let s=fz(t,e),o=s<0?Math.pow(10,Math.abs(s)):1;const a=Math.pow(10,s),l=r>s?Math.pow(10,r):0,c=Math.round((t-l)*o)/o,u=Math.floor((t-l)/a/10)*a*10;let h=Math.floor((c-u)/Math.pow(10,s)),f=Xe(n.min,Math.round((l+u+h*Math.pow(10,s))*o)/o);for(;f<e;)i.push({value:f,major:gg(f),significand:h}),h>=10?h=h<15?15:20:h++,h>=20&&(s++,h=2,o=s>=0?1:o),f=Math.round((l+u+h*Math.pow(10,s))*o)/o;const d=Xe(n.max,f);return i.push({value:d,major:gg(d),significand:h}),i}class kF extends ir{static id="logarithmic";static defaults={ticks:{callback:fl.formatters.logarithmic,major:{enabled:!0}}};constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,e){const i=Ia.prototype.parse.apply(this,[t,e]);if(i===0){this._zero=!0;return}return ve(i)&&i>0?i:null}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=ve(t)?Math.max(0,t):null,this.max=ve(e)?Math.max(0,e):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!ve(this._userMin)&&(this.min=t===Ei(this.min,0)?Ei(this.min,-1):Ei(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let i=this.min,r=this.max;const s=a=>i=t?i:a,o=a=>r=e?r:a;i===r&&(i<=0?(s(1),o(10)):(s(Ei(i,-1)),o(Ei(r,1)))),i<=0&&s(Ei(r,-1)),r<=0&&o(Ei(i,1)),this.min=i,this.max=r}buildTicks(){const t=this.options,e={min:this._userMin,max:this._userMax},i=dz(e,this);return t.bounds==="ticks"&&Hy(i,this,"value"),t.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}getLabelForValue(t){return t===void 0?"0":Mh(t,this.chart.options.locale,this.options.ticks.format)}configure(){const t=this.min;super.configure(),this._startValue=ii(t),this._valueRange=ii(this.max)-ii(t)}getPixelForValue(t){return(t===void 0||t===0)&&(t=this.min),t===null||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(ii(t)-this._startValue)/this._valueRange)}getValueForPixel(t){const e=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+e*this._valueRange)}}function vu(n){const t=n.ticks;if(t.display&&n.display){const e=Vn(t.backdropPadding);return se(t.font&&t.font.size,de.font.size)+e.height}return 0}function pz(n,t,e){return e=le(e)?e:[e],{w:J5(n,t.string,e),h:e.length*t.lineHeight}}function yg(n,t,e,i,r){return n===i||n===r?{start:t-e/2,end:t+e/2}:n<i||n>r?{start:t-e,end:t}:{start:t,end:t+e}}function gz(n){const t={l:n.left+n._padding.left,r:n.right-n._padding.right,t:n.top+n._padding.top,b:n.bottom-n._padding.bottom},e=Object.assign({},t),i=[],r=[],s=n._pointLabels.length,o=n.options.pointLabels,a=o.centerPointLabels?On/s:0;for(let l=0;l<s;l++){const c=o.setContext(n.getPointLabelContext(l));r[l]=c.padding;const u=n.getPointPosition(l,n.drawingArea+r[l],a),h=Br(c.font),f=pz(n.ctx,h,n._pointLabels[l]);i[l]=f;const d=wn(n.getIndexAngle(l)+a),g=Math.round(Sh(d)),b=yg(g,u.x,f.w,0,180),k=yg(g,u.y,f.h,90,270);mz(e,t,d,b,k)}n.setCenterPoint(t.l-e.l,e.r-t.r,t.t-e.t,e.b-t.b),n._pointLabelItems=yz(n,i,r)}function mz(n,t,e,i,r){const s=Math.abs(Math.sin(e)),o=Math.abs(Math.cos(e));let a=0,l=0;i.start<t.l?(a=(t.l-i.start)/s,n.l=Math.min(n.l,t.l-a)):i.end>t.r&&(a=(i.end-t.r)/s,n.r=Math.max(n.r,t.r+a)),r.start<t.t?(l=(t.t-r.start)/o,n.t=Math.min(n.t,t.t-l)):r.end>t.b&&(l=(r.end-t.b)/o,n.b=Math.max(n.b,t.b+l))}function yz(n,t,e){const i=[],r=n._pointLabels.length,s=n.options,o=vu(s)/2,a=n.drawingArea,l=s.pointLabels.centerPointLabels?On/r:0;for(let c=0;c<r;c++){const u=n.getPointPosition(c,a+o+e[c],l),h=Math.round(Sh(wn(u.angle+Mn))),f=t[c],d=xz(u.y,f.h,h),g=bz(h),b=vz(u.x,f.w,g);i.push({x:u.x,y:d,textAlign:g,left:b,top:d,right:b+f.w,bottom:d+f.h})}return i}function bz(n){return n===0||n===180?"center":n<180?"left":"right"}function vz(n,t,e){return e==="right"?n-=t:e==="center"&&(n-=t/2),n}function xz(n,t,e){return e===90||e===270?n-=t/2:(e>270||e<90)&&(n-=t),n}function wz(n,t){const{ctx:e,options:{pointLabels:i}}=n;for(let r=t-1;r>=0;r--){const s=i.setContext(n.getPointLabelContext(r)),o=Br(s.font),{x:a,y:l,textAlign:c,left:u,top:h,right:f,bottom:d}=n._pointLabelItems[r],{backdropColor:g}=s;if(!Wt(g)){const b=nb(s.borderRadius),k=Vn(s.backdropPadding);e.fillStyle=g;const O=u-k.left,D=h-k.top,F=f-u+k.width,W=d-h+k.height;Object.values(b).some(V=>V!==0)?(e.beginPath(),Zy(e,{x:O,y:D,w:F,h:W,radius:b}),e.fill()):e.fillRect(O,D,F,W)}Ea(e,n._pointLabels[r],a,l+o.lineHeight/2,o,{color:s.color,textAlign:c,textBaseline:"middle"})}}function wb(n,t,e,i){const{ctx:r}=n;if(e)r.arc(n.xCenter,n.yCenter,t,0,ui);else{let s=n.getPointPosition(0,t);r.moveTo(s.x,s.y);for(let o=1;o<i;o++)s=n.getPointPosition(o,t),r.lineTo(s.x,s.y)}}function _z(n,t,e,i,r){const s=n.ctx,o=t.circular,{color:a,lineWidth:l}=t;!o&&!i||!a||!l||e<0||(s.save(),s.strokeStyle=a,s.lineWidth=l,s.setLineDash(r.dash),s.lineDashOffset=r.dashOffset,s.beginPath(),wb(n,e,o,i),s.closePath(),s.stroke(),s.restore())}function Sz(n,t,e){return Qr(n,{label:e,index:t,type:"pointLabel"})}class MF extends Ia{static id="radialLinear";static defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:fl.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(t){return t},padding:5,centerPointLabels:!1}};static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const t=this._padding=Vn(vu(this.options)/2),e=this.width=this.maxWidth-t.width,i=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+e/2+t.left),this.yCenter=Math.floor(this.top+i/2+t.top),this.drawingArea=Math.floor(Math.min(e,i)/2)}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!1);this.min=ve(t)&&!isNaN(t)?t:0,this.max=ve(e)&&!isNaN(e)?e:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/vu(this.options))}generateTickLabels(t){Ia.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map((e,i)=>{const r=oe(this.options.pointLabels.callback,[e,i],this);return r||r===0?r:""}).filter((e,i)=>this.chart.getDataVisibility(i))}fit(){const t=this.options;t.display&&t.pointLabels.display?gz(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,e,i,r){this.xCenter+=Math.floor((t-e)/2),this.yCenter+=Math.floor((i-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,e,i,r))}getIndexAngle(t){const e=ui/(this._pointLabels.length||1),i=this.options.startAngle||0;return wn(t*e+ri(i))}getDistanceFromCenterForValue(t){if(Wt(t))return NaN;const e=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*e:(t-this.min)*e}getValueForDistanceFromCenter(t){if(Wt(t))return NaN;const e=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-e:this.min+e}getPointLabelContext(t){const e=this._pointLabels||[];if(t>=0&&t<e.length){const i=e[t];return Sz(this.getContext(),t,i)}}getPointPosition(t,e,i=0){const r=this.getIndexAngle(t)-Mn+i;return{x:Math.cos(r)*e+this.xCenter,y:Math.sin(r)*e+this.yCenter,angle:r}}getPointPositionForValue(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){const{left:e,top:i,right:r,bottom:s}=this._pointLabelItems[t];return{left:e,top:i,right:r,bottom:s}}drawBackground(){const{backgroundColor:t,grid:{circular:e}}=this.options;if(t){const i=this.ctx;i.save(),i.beginPath(),wb(this,this.getDistanceFromCenterForValue(this._endValue),e,this._pointLabels.length),i.closePath(),i.fillStyle=t,i.fill(),i.restore()}}drawGrid(){const t=this.ctx,e=this.options,{angleLines:i,grid:r,border:s}=e,o=this._pointLabels.length;let a,l,c;if(e.pointLabels.display&&wz(this,o),r.display&&this.ticks.forEach((u,h)=>{if(h!==0){l=this.getDistanceFromCenterForValue(u.value);const f=this.getContext(h),d=r.setContext(f),g=s.setContext(f);_z(this,d,l,o,g)}}),i.display){for(t.save(),a=o-1;a>=0;a--){const u=i.setContext(this.getPointLabelContext(a)),{color:h,lineWidth:f}=u;!f||!h||(t.lineWidth=f,t.strokeStyle=h,t.setLineDash(u.borderDash),t.lineDashOffset=u.borderDashOffset,l=this.getDistanceFromCenterForValue(e.ticks.reverse?this.min:this.max),c=this.getPointPosition(a,l),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(c.x,c.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){const t=this.ctx,e=this.options,i=e.ticks;if(!i.display)return;const r=this.getIndexAngle(0);let s,o;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(r),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach((a,l)=>{if(l===0&&!e.reverse)return;const c=i.setContext(this.getContext(l)),u=Br(c.font);if(s=this.getDistanceFromCenterForValue(this.ticks[l].value),c.showLabelBackdrop){t.font=u.string,o=t.measureText(a.label).width,t.fillStyle=c.backdropColor;const h=Vn(c.backdropPadding);t.fillRect(-o/2-h.left,-s-u.size/2-h.top,o+h.width,u.size+h.height)}Ea(t,a.label,0,-s,u,{color:c.color})}),t.restore()}drawTitle(){}}const pl={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},qe=Object.keys(pl);function kz(n,t){return n-t}function bg(n,t){if(Wt(t))return null;const e=n._adapter,{parser:i,round:r,isoWeekday:s}=n._parseOpts;let o=t;return typeof i=="function"&&(o=i(o)),ve(o)||(o=typeof i=="string"?e.parse(o,i):e.parse(o)),o===null?null:(r&&(o=r==="week"&&(Aa(s)||s===!0)?e.startOf(o,"isoWeek",s):e.startOf(o,r)),+o)}function vg(n,t,e,i){const r=qe.length;for(let s=qe.indexOf(n);s<r-1;++s){const o=pl[qe[s]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((e-t)/(a*o.size))<=i)return qe[s]}return qe[r-1]}function Mz(n,t,e,i,r){for(let s=qe.length-1;s>=qe.indexOf(e);s--){const o=qe[s];if(pl[o].common&&n._adapter.diff(r,i,o)>=t-1)return o}return qe[e?qe.indexOf(e):0]}function Cz(n){for(let t=qe.indexOf(n)+1,e=qe.length;t<e;++t)if(pl[qe[t]].common)return qe[t]}function xg(n,t,e){if(!e)n[t]=!0;else if(e.length){const{lo:i,hi:r}=kh(e,t),s=e[i]>=t?e[i]:e[r];n[s]=!0}}function Oz(n,t,e,i){const r=n._adapter,s=+r.startOf(t[0].value,i),o=t[t.length-1].value;let a,l;for(a=s;a<=o;a=+r.add(a,1,i))l=e[a],l>=0&&(t[l].major=!0);return t}function wg(n,t,e){const i=[],r={},s=t.length;let o,a;for(o=0;o<s;++o)a=t[o],r[a]=o,i.push({value:a,major:!1});return s===0||!e?i:Oz(n,i,r,e)}class _g extends ir{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,e={}){const i=t.time||(t.time={}),r=this._adapter=new q3._date(t.adapters.date);r.init(e),Cs(i.displayFormats,r.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(t),this._normalized=e.normalized}parse(t,e){return t===void 0?null:bg(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,e=this._adapter,i=t.time.unit||"day";let{min:r,max:s,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(r=Math.min(r,c.min)),!a&&!isNaN(c.max)&&(s=Math.max(s,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&l(this.getMinMax(!1))),r=ve(r)&&!isNaN(r)?r:+e.startOf(Date.now(),i),s=ve(s)&&!isNaN(s)?s:+e.endOf(Date.now(),i)+1,this.min=Math.min(r,s-1),this.max=Math.max(r+1,s)}_getLabelBounds(){const t=this.getLabelTimestamps();let e=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return t.length&&(e=t[0],i=t[t.length-1]),{min:e,max:i}}buildTicks(){const t=this.options,e=t.time,i=t.ticks,r=i.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const s=this.min,o=this.max,a=N5(r,s,o);return this._unit=e.unit||(i.autoSkip?vg(e.minUnit,this.min,this.max,this._getLabelCapacity(s)):Mz(this,a.length,e.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:Cz(this._unit),this.initOffsets(r),t.reverse&&a.reverse(),wg(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let e=0,i=0,r,s;this.options.offset&&t.length&&(r=this.getDecimalForValue(t[0]),t.length===1?e=1-r:e=(this.getDecimalForValue(t[1])-r)/2,s=this.getDecimalForValue(t[t.length-1]),t.length===1?i=s:i=(s-this.getDecimalForValue(t[t.length-2]))/2);const o=t.length<3?.5:.25;e=Ln(e,0,o),i=Ln(i,0,o),this._offsets={start:e,end:i,factor:1/(e+1+i)}}_generate(){const t=this._adapter,e=this.min,i=this.max,r=this.options,s=r.time,o=s.unit||vg(s.minUnit,e,i,this._getLabelCapacity(e)),a=se(r.ticks.stepSize,1),l=o==="week"?s.isoWeekday:!1,c=Aa(l)||l===!0,u={};let h=e,f,d;if(c&&(h=+t.startOf(h,"isoWeek",l)),h=+t.startOf(h,c?"day":o),t.diff(i,e,o)>1e5*a)throw new Error(e+" and "+i+" are too far apart with stepSize of "+a+" "+o);const g=r.ticks.source==="data"&&this.getDataTimestamps();for(f=h,d=0;f<i;f=+t.add(f,a,o),d++)xg(u,f,g);return(f===i||r.bounds==="ticks"||d===1)&&xg(u,f,g),Object.keys(u).sort((b,k)=>b-k).map(b=>+b)}getLabelForValue(t){const e=this._adapter,i=this.options.time;return i.tooltipFormat?e.format(t,i.tooltipFormat):e.format(t,i.displayFormats.datetime)}format(t,e){const r=this.options.time.displayFormats,s=this._unit,o=e||r[s];return this._adapter.format(t,o)}_tickFormatFunction(t,e,i,r){const s=this.options,o=s.ticks.callback;if(o)return oe(o,[t,e,i],this);const a=s.time.displayFormats,l=this._unit,c=this._majorUnit,u=l&&a[l],h=c&&a[c],f=i[e],d=c&&h&&f&&f.major;return this._adapter.format(t,r||(d?h:u))}generateTickLabels(t){let e,i,r;for(e=0,i=t.length;e<i;++e)r=t[e],r.label=this._tickFormatFunction(r.value,e,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const e=this._offsets,i=this.getDecimalForValue(t);return this.getPixelForDecimal((e.start+i)*e.factor)}getValueForPixel(t){const e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return this.min+i*(this.max-this.min)}_getLabelSize(t){const e=this.options.ticks,i=this.ctx.measureText(t).width,r=ri(this.isHorizontal()?e.maxRotation:e.minRotation),s=Math.cos(r),o=Math.sin(r),a=this._resolveTickFontOptions(0).size;return{w:i*s+a*o,h:i*o+a*s}}_getLabelCapacity(t){const e=this.options.time,i=e.displayFormats,r=i[e.unit]||i.millisecond,s=this._tickFormatFunction(t,0,wg(this,[t],this._majorUnit),r),o=this._getLabelSize(s),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let t=this._cache.data||[],e,i;if(t.length)return t;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(e=0,i=r.length;e<i;++e)t=t.concat(r[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let e,i;if(t.length)return t;const r=this.getLabels();for(e=0,i=r.length;e<i;++e)t.push(bg(this,r[e]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return qy(t.sort(kz))}}function ko(n,t,e){let i=0,r=n.length-1,s,o,a,l;e?(t>=n[i].pos&&t<=n[r].pos&&({lo:i,hi:r}=gu(n,"pos",t)),{pos:s,time:a}=n[i],{pos:o,time:l}=n[r]):(t>=n[i].time&&t<=n[r].time&&({lo:i,hi:r}=gu(n,"time",t)),{time:s,pos:a}=n[i],{time:o,pos:l}=n[r]);const c=o-s;return c?a+(l-a)*(t-s)/c:a}class CF extends _g{static id="timeseries";static defaults=_g.defaults;constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=ko(e,this.min),this._tableRange=ko(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:e,max:i}=this,r=[],s=[];let o,a,l,c,u;for(o=0,a=t.length;o<a;++o)c=t[o],c>=e&&c<=i&&r.push(c);if(r.length<2)return[{time:e,pos:0},{time:i,pos:1}];for(o=0,a=r.length;o<a;++o)u=r[o+1],l=r[o-1],c=r[o],Math.round((u+l)/2)!==c&&s.push({time:c,pos:o/(a-1)});return s}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const e=this.getDataTimestamps(),i=this.getLabelTimestamps();return e.length&&i.length?t=this.normalize(e.concat(i)):t=e.length?e:i,t=this._cache.all=t,t}getDecimalForValue(t){return(ko(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return ko(this._table,i*this._tableRange+this._minPos,!0)}}const Az=_t("<canvas></canvas>",2),Tz=n=>{const t=(()=>{const i=Az.cloneNode(!0);return Vg(r=>document.adoptNode(r),i),i})();let e;return er(()=>{e?.destroy(),bu.register(n.plugins),e=new bu(t,{type:n.type,data:n.data,options:n.options}),e.resize(e.width,(n.data.labels?.length??0)*40+40)}),t};var Ez="__lodash_hash_undefined__";function $z(n){return this.__data__.set(n,Ez),this}var Pz=$z;function Dz(n){return this.__data__.has(n)}var Iz=Dz,Nz=Mu,Lz=Pz,Rz=Iz;function Na(n){var t=-1,e=n==null?0:n.length;for(this.__data__=new Nz;++t<e;)this.add(n[t])}Na.prototype.add=Na.prototype.push=Lz;Na.prototype.has=Rz;var Ph=Na;function zz(n,t,e,i){for(var r=n.length,s=e+(i?1:-1);i?s--:++s<r;)if(t(n[s],s,n))return s;return-1}var Bz=zz;function Fz(n){return n!==n}var jz=Fz;function Vz(n,t,e){for(var i=e-1,r=n.length;++i<r;)if(n[i]===t)return i;return-1}var Hz=Vz,Uz=Bz,qz=jz,Wz=Hz;function Kz(n,t,e){return t===t?Wz(n,t,e):Uz(n,qz,e)}var Jz=Kz,Gz=Jz;function Yz(n,t){var e=n==null?0:n.length;return!!e&&Gz(n,t,0)>-1}var Dh=Yz;function Xz(n,t,e){for(var i=-1,r=n==null?0:n.length;++i<r;)if(e(t,n[i]))return!0;return!1}var Ih=Xz;function Qz(n,t){return n.has(t)}var Nh=Qz,Zz=Ph,tB=Dh,eB=Ih,nB=Ks,iB=qs,Sg=Nh,rB=Math.min;function sB(n,t,e){for(var i=e?eB:tB,r=n[0].length,s=n.length,o=s,a=Array(s),l=1/0,c=[];o--;){var u=n[o];o&&t&&(u=nB(u,iB(t))),l=rB(u.length,l),a[o]=!e&&(t||r>=120&&u.length>=120)?new Zz(o&&u):void 0}u=n[0];var h=-1,f=a[0];t:for(;++h<r&&c.length<l;){var d=u[h],g=t?t(d):d;if(d=e||d!==0?d:0,!(f?Sg(f,g):i(c,g,e))){for(o=s;--o;){var b=a[o];if(!(b?Sg(b,g):i(n[o],g,e)))continue t}f&&f.push(g),c.push(d)}}return c}var oB=sB,aB=$u;function lB(n){return aB(n)?n:[]}var cB=lB,uB=Ks,hB=oB,fB=Du,dB=cB,pB=fB(function(n){var t=uB(n,dB);return t.length&&t[0]===n[0]?hB(t):[]}),kg=pB;function gB(){}var mB=gB;function yB(n){var t=-1,e=Array(n.size);return n.forEach(function(i){e[++t]=i}),e}var _b=yB,kc=gm,bB=mB,vB=_b,xB=1/0,wB=kc&&1/vB(new kc([,-0]))[1]==xB?function(n){return new kc(n)}:bB,_B=wB,SB=Ph,kB=Dh,MB=Ih,CB=Nh,OB=_B,AB=_b,TB=200;function EB(n,t,e){var i=-1,r=kB,s=n.length,o=!0,a=[],l=a;if(e)o=!1,r=MB;else if(s>=TB){var c=t?null:OB(n);if(c)return AB(c);o=!1,r=CB,l=new SB}else l=t?[]:a;t:for(;++i<s;){var u=n[i],h=t?t(u):u;if(u=e||u!==0?u:0,o&&h===h){for(var f=l.length;f--;)if(l[f]===h)continue t;t&&l.push(h),a.push(u)}else r(l,h,e)||(l!==a&&l.push(h),a.push(u))}return a}var $B=EB,PB=$B;function DB(n){return n&&n.length?PB(n):[]}var Sb=DB;var IB=Ph,NB=Dh,LB=Ih,RB=Ks,zB=qs,BB=Nh,FB=200;function jB(n,t,e,i){var r=-1,s=NB,o=!0,a=n.length,l=[],c=t.length;if(!a)return l;e&&(t=RB(t,zB(e))),i?(s=LB,o=!1):t.length>=FB&&(s=BB,o=!1,t=new IB(t));t:for(;++r<a;){var u=n[r],h=e==null?u:e(u);if(u=i||u!==0?u:0,o&&h===h){for(var f=c;f--;)if(t[f]===h)continue t;l.push(u)}else s(t,h,i)||l.push(u)}return l}var VB=jB,HB=VB,UB=km,qB=Du,Mg=$u,WB=qB(function(n,t){return Mg(n)?HB(n,UB(t,1,Mg,!0)):[]}),KB=WB;const JB=_t('<article><header><h2>Choose tag</h2></header><ul class="tags"></ul><footer><nav><ul><li></li></ul><ul><li><input type="search" placeholder="enter keyword"></li></ul><ul><li></li></ul></nav></footer></article>',25),GB=_t("<li></li>",2),YB=n=>{const t=()=>Sb(KB([...Object.values(kt.store.keywords).flatMap(({tags:l})=>l??[]),...Object.keys(kt.store.keywords).map(l=>l.toLowerCase())],kt.store.cv.profile.tags??[])).sort().filter(l=>l.includes(e())),[e,i]=Zt(""),[r,s]=Zt(t());function o(l=r()[0]){n.callback(l),re.back()}function a(){re.back()}return()=>(()=>{const l=JB.cloneNode(!0),c=l.firstChild,u=c.nextSibling,h=u.nextSibling,f=h.firstChild,d=f.firstChild,g=d.firstChild,b=d.nextSibling,k=b.firstChild,O=k.firstChild,D=b.nextSibling,F=D.firstChild;return l.style.setProperty("width","100%"),u.style.setProperty("flex-wrap","nowrap"),u.style.setProperty("overflow","scroll"),u.style.setProperty("scrollbar-width","none"),J(u,I(xr,{get each(){return r()},children:W=>(()=>{const V=GB.cloneNode(!0);return V.$$click=()=>{n.callback(W),re.back()},V.style.setProperty("cursor","pointer"),J(V,W),V})()})),J(g,I(Nt,{icon:"close",action:()=>re.back()})),O.$$keyup=({key:W,target:V})=>{if(V instanceof HTMLInputElement){switch(W){case"Enter":e().length>2&&o();return;case"Escape":a();return}i(V.value),s(t())}},O.autofocus=!0,J(F,I(Nt,{icon:"done",action:o,get disabled(){return e().length<3}})),Oe(()=>O.value=e()),l})()};vi(["keyup","click"]);const XB=_t("<article><header><h2>Profile tuning</h2></header><footer><nav><ul></ul><ul><li></li></ul></nav></footer></article>",16),QB=()=>()=>(()=>{const n=XB.cloneNode(!0),t=n.firstChild,e=t.nextSibling,i=e.firstChild,r=i.firstChild,s=r.nextSibling,o=s.firstChild;return n.$$keydown=({key:a})=>a==="Escape"&&re.back(),n.style.setProperty("width","100%"),J(n,I(_u.Provider,{value:"edit",get children(){return I(zy,{path:"cv.profile.tags",factory:YB,readonly:!0})}}),e),J(o,I(Nt,{icon:"done",action:()=>re.back()})),n})();vi(["keydown"]);const ZB=_t('<div class="chart-container"></div>',2),tF=_t('<footer><nav><ul><li role="list"><ul role="listbox"><li><a> Duration</a></li><li><a> Records</a></li><li><a> Tags</a></li></ul></li></ul><ul><li></li></ul></nav></footer>',26),eF=_t('<article class="profile"><header><nav><ul><li><h2>Profile</h2></li></ul><ul><li></li></ul></nav></header></article>',16),Cg={professional:0,education:1,hobby:2},nF={fitness:"total tag matches per all records",duration:"years for all fitting records",projects:"matched records"},iF=()=>{const[n,t]=Zt("fitness"),[e,i]=Zt(),[r,s]=Zt({indexAxis:"y",maintainAspectRatio:!1,onClick:(d,[g])=>{const b=g&&(e()?.labels??[])[g.index];typeof b=="string"&&re.push(()=>I(bh,{keyword:b}))},responsive:!0,scales:{x:{stacked:!0,grid:{z:10},ticks:{display:!0,stepSize:1},title:{display:!0,font:{size:18}}},y:{stacked:!0,grid:{drawTicks:!0,tickLength:5},ticks:{font:{size:18}}}}});function o(){const d=[],g=[];function b(T){const[L,R]=T.split(/ [-] /);if(L.length>7)throw L;if(!R)return 1;const[st,xt]=L.split("/").map(U=>+U),[bt,Tt]=R.split("/").map(U=>+U),Lt=new Date(xt,st-1),q=new Date(Tt,bt-1);return((q.getFullYear()-Lt.getFullYear())*12+(q.getMonth()-Lt.getMonth()))/12}function k(T){return kg(Sb([T.toLowerCase(),...kt.store.keywords[T].tags??[]]),kt.store.cv.profile.tags).length}const O=(T,L)=>({projects:1,duration:b(kt.store.cv.experience[T].interval),fitness:k(L)});function D(T,L,R){T.projects++,T.duration+=b(kt.store.cv.experience[L].interval),T.fitness+=k(R)}const F=kt.store.cv.experience.flatMap(({keywords:T,type:L},R)=>T.map(st=>({experienceId:R,keyword:st,scope:L}))).filter(({keyword:T})=>kg([T.toLowerCase(),...kt.store.keywords[T].tags??[]],kt.store.cv.profile.tags).length).filter(({scope:T})=>Og(Cg[T],...kt.store.cv.profile.scope)).reduce((T,{keyword:L,scope:R,experienceId:st})=>(T[L]?T[L][R]?D(T[L][R],st,L):T[L][R]=O(st,L):T[L]={[R]:O(st,L)},T),{}),W=T=>T.reduce((L,{projects:R,fitness:st,duration:xt})=>(L.projects+=R,L.fitness+=st,L.duration+=xt,L),{projects:0,duration:0,fitness:0}),V=h();for(const T of Object.keys(F).sort((L,R)=>V({name:L,stats:W(Object.values(F[L]))},{name:R,stats:W(Object.values(F[R]))})))d.push(T);for(const T of["professional","education","hobby"].filter(L=>Og(Cg[L],...kt.store.cv.profile.scope))){const L={label:T,data:[],backgroundColor:In.getColor(T)};for(const R of d)F[R][T]?L.data.push(F[R][T][n()]):L.data.push(0);g.push(L)}s(Fo(r(),{scales:{x:{title:{text:nF[n()]}}}})),i({labels:d,datasets:g})}function a(){const d={scales:{x:{grid:{color:In.getColor("primary")},title:{color:In.getColor()}},y:{grid:{color:In.getColor("primary")},ticks:{color:In.getColor()}}}};s(Fo({},r(),d))}In.observe(()=>{a(),o()}),a();const l=({name:d},{name:g})=>d.localeCompare(g),c=({stats:d},{stats:g})=>g[n()]-d[n()],u=()=>!0,[h,f]=Zt(c);return Zt(u),er(o),()=>(()=>{const d=eF.cloneNode(!0),g=d.firstChild,b=g.firstChild,k=b.firstChild,O=k.nextSibling,D=O.firstChild;return J(D,I(Nt,{icon:"tune",action:()=>re.push(()=>I(QB,{})),class:"secondary outline"})),J(d,I(Ce,{get when(){return e()?.labels?.length},get children(){return[(()=>{const F=ZB.cloneNode(!0);return F.style.setProperty("position","relative"),J(F,I(Tz,{type:"bar",get data(){return e()},get options(){return r()},plugins:[cz,hz,U3,sz]})),F})(),(()=>{const F=tF.cloneNode(!0),W=F.firstChild,V=W.firstChild,T=V.firstChild,L=T.firstChild,R=L.firstChild,st=R.firstChild,xt=st.firstChild,bt=R.nextSibling,Tt=bt.firstChild,Lt=Tt.firstChild,q=bt.nextSibling,H=q.firstChild,U=H.firstChild,j=V.nextSibling,z=j.firstChild;return J(T,I(Vr,{get children(){return[I(We,{get when(){return n()==="duration"},children:"Duration profile"}),I(We,{get when(){return n()==="projects"},children:"Records profile"}),I(We,{get when(){return n()==="fitness"},children:"Tags profile"})]}}),L),st.$$click=()=>t("duration"),J(st,I(De,{name:"calendar_month"}),xt),Tt.$$click=()=>t("projects"),J(Tt,I(De,{name:"workspaces"}),Lt),H.$$click=()=>t("fitness"),J(H,I(De,{name:"loyalty"}),U),J(z,I(Ga,{onIcon:"stacked_bar_chart",offIcon:"abc",get value(){return h()===c},handler:G=>f(()=>G?c:l)})),F})()]}}),null),d})()},Og=(n,t,e)=>n>=t&&n<=e;vi(["click"]);const rF=_t("<section><h1>Curriculum Vitae</h1></section>",4),sF=()=>(()=>{const n=rF.cloneNode(!0);return n.firstChild,n.style.setProperty("page-break-before","always"),J(n,I(iF,{}),null),J(n,I(ZR,{}),null),n})();var xu={},oF={get exports(){return xu},set exports(n){xu=n}};(function(n,t){(function(e,i){n.exports=i()})(self,()=>(()=>{var e={192:(o,a)=>{var l,c,u=function(){var h=function(q,H){var U=q,j=O[H],z=null,G=0,rt=null,Z=[],ct={},It=function(S,A){z=function(P){for(var E=new Array(P),$=0;$<P;$+=1){E[$]=new Array(P);for(var K=0;K<P;K+=1)E[$][K]=null}return E}(G=4*U+17),Ht(0,0),Ht(G-7,0),Ht(0,G-7),y(),pt(),v(S,A),U>=7&&p(S),rt==null&&(rt=x(U,j,Z)),w(rt,A)},Ht=function(S,A){for(var P=-1;P<=7;P+=1)if(!(S+P<=-1||G<=S+P))for(var E=-1;E<=7;E+=1)A+E<=-1||G<=A+E||(z[S+P][A+E]=0<=P&&P<=6&&(E==0||E==6)||0<=E&&E<=6&&(P==0||P==6)||2<=P&&P<=4&&2<=E&&E<=4)},pt=function(){for(var S=8;S<G-8;S+=1)z[S][6]==null&&(z[S][6]=S%2==0);for(var A=8;A<G-8;A+=1)z[6][A]==null&&(z[6][A]=A%2==0)},y=function(){for(var S=D.getPatternPosition(U),A=0;A<S.length;A+=1)for(var P=0;P<S.length;P+=1){var E=S[A],$=S[P];if(z[E][$]==null)for(var K=-2;K<=2;K+=1)for(var nt=-2;nt<=2;nt+=1)z[E+K][$+nt]=K==-2||K==2||nt==-2||nt==2||K==0&&nt==0}},p=function(S){for(var A=D.getBCHTypeNumber(U),P=0;P<18;P+=1){var E=!S&&(A>>P&1)==1;z[Math.floor(P/3)][P%3+G-8-3]=E}for(P=0;P<18;P+=1)E=!S&&(A>>P&1)==1,z[P%3+G-8-3][Math.floor(P/3)]=E},v=function(S,A){for(var P=j<<3|A,E=D.getBCHTypeInfo(P),$=0;$<15;$+=1){var K=!S&&(E>>$&1)==1;$<6?z[$][8]=K:$<8?z[$+1][8]=K:z[G-15+$][8]=K}for($=0;$<15;$+=1)K=!S&&(E>>$&1)==1,$<8?z[8][G-$-1]=K:$<9?z[8][15-$-1+1]=K:z[8][15-$-1]=K;z[G-8][8]=!S},w=function(S,A){for(var P=-1,E=G-1,$=7,K=0,nt=D.getMaskFunction(A),ft=G-1;ft>0;ft-=2)for(ft==6&&(ft-=1);;){for(var wt=0;wt<2;wt+=1)if(z[E][ft-wt]==null){var St=!1;K<S.length&&(St=(S[K]>>>$&1)==1),nt(E,ft-wt)&&(St=!St),z[E][ft-wt]=St,($-=1)==-1&&(K+=1,$=7)}if((E+=P)<0||G<=E){E-=P,P=-P;break}}},x=function(S,A,P){for(var E=V.getRSBlocks(S,A),$=T(),K=0;K<P.length;K+=1){var nt=P[K];$.put(nt.getMode(),4),$.put(nt.getLength(),D.getLengthInBits(nt.getMode(),S)),nt.write($)}var ft=0;for(K=0;K<E.length;K+=1)ft+=E[K].dataCount;if($.getLengthInBits()>8*ft)throw"code length overflow. ("+$.getLengthInBits()+">"+8*ft+")";for($.getLengthInBits()+4<=8*ft&&$.put(0,4);$.getLengthInBits()%8!=0;)$.putBit(!1);for(;!($.getLengthInBits()>=8*ft||($.put(236,8),$.getLengthInBits()>=8*ft));)$.put(17,8);return function(wt,St){for(var Ct=0,Xt=0,Qt=0,zt=new Array(St.length),Rt=new Array(St.length),_=0;_<St.length;_+=1){var m=St[_].dataCount,X=St[_].totalCount-m;Xt=Math.max(Xt,m),Qt=Math.max(Qt,X),zt[_]=new Array(m);for(var Y=0;Y<zt[_].length;Y+=1)zt[_][Y]=255&wt.getBuffer()[Y+Ct];Ct+=m;var tt=D.getErrorCorrectPolynomial(X),lt=W(zt[_],tt.getLength()-1).mod(tt);for(Rt[_]=new Array(tt.getLength()-1),Y=0;Y<Rt[_].length;Y+=1){var ut=Y+lt.getLength()-Rt[_].length;Rt[_][Y]=ut>=0?lt.getAt(ut):0}}var At=0;for(Y=0;Y<St.length;Y+=1)At+=St[Y].totalCount;var mt=new Array(At),yt=0;for(Y=0;Y<Xt;Y+=1)for(_=0;_<St.length;_+=1)Y<zt[_].length&&(mt[yt]=zt[_][Y],yt+=1);for(Y=0;Y<Qt;Y+=1)for(_=0;_<St.length;_+=1)Y<Rt[_].length&&(mt[yt]=Rt[_][Y],yt+=1);return mt}($,E)};ct.addData=function(S,A){var P=null;switch(A=A||"Byte"){case"Numeric":P=L(S);break;case"Alphanumeric":P=R(S);break;case"Byte":P=st(S);break;case"Kanji":P=xt(S);break;default:throw"mode:"+A}Z.push(P),rt=null},ct.isDark=function(S,A){if(S<0||G<=S||A<0||G<=A)throw S+","+A;return z[S][A]},ct.getModuleCount=function(){return G},ct.make=function(){if(U<1){for(var S=1;S<40;S++){for(var A=V.getRSBlocks(S,j),P=T(),E=0;E<Z.length;E++){var $=Z[E];P.put($.getMode(),4),P.put($.getLength(),D.getLengthInBits($.getMode(),S)),$.write(P)}var K=0;for(E=0;E<A.length;E++)K+=A[E].dataCount;if(P.getLengthInBits()<=8*K)break}U=S}It(!1,function(){for(var nt=0,ft=0,wt=0;wt<8;wt+=1){It(!0,wt);var St=D.getLostPoint(ct);(wt==0||nt>St)&&(nt=St,ft=wt)}return ft}())},ct.createTableTag=function(S,A){S=S||2;var P="";P+='<table style="',P+=" border-width: 0px; border-style: none;",P+=" border-collapse: collapse;",P+=" padding: 0px; margin: "+(A=A===void 0?4*S:A)+"px;",P+='">',P+="<tbody>";for(var E=0;E<ct.getModuleCount();E+=1){P+="<tr>";for(var $=0;$<ct.getModuleCount();$+=1)P+='<td style="',P+=" border-width: 0px; border-style: none;",P+=" border-collapse: collapse;",P+=" padding: 0px; margin: 0px;",P+=" width: "+S+"px;",P+=" height: "+S+"px;",P+=" background-color: ",P+=ct.isDark(E,$)?"#000000":"#ffffff",P+=";",P+='"/>';P+="</tr>"}return(P+="</tbody>")+"</table>"},ct.createSvgTag=function(S,A,P,E){var $={};typeof arguments[0]=="object"&&(S=($=arguments[0]).cellSize,A=$.margin,P=$.alt,E=$.title),S=S||2,A=A===void 0?4*S:A,(P=typeof P=="string"?{text:P}:P||{}).text=P.text||null,P.id=P.text?P.id||"qrcode-description":null,(E=typeof E=="string"?{text:E}:E||{}).text=E.text||null,E.id=E.text?E.id||"qrcode-title":null;var K,nt,ft,wt,St=ct.getModuleCount()*S+2*A,Ct="";for(wt="l"+S+",0 0,"+S+" -"+S+",0 0,-"+S+"z ",Ct+='<svg version="1.1" xmlns="http://www.w3.org/2000/svg"',Ct+=$.scalable?"":' width="'+St+'px" height="'+St+'px"',Ct+=' viewBox="0 0 '+St+" "+St+'" ',Ct+=' preserveAspectRatio="xMinYMin meet"',Ct+=E.text||P.text?' role="img" aria-labelledby="'+C([E.id,P.id].join(" ").trim())+'"':"",Ct+=">",Ct+=E.text?'<title id="'+C(E.id)+'">'+C(E.text)+"</title>":"",Ct+=P.text?'<description id="'+C(P.id)+'">'+C(P.text)+"</description>":"",Ct+='<rect width="100%" height="100%" fill="white" cx="0" cy="0"/>',Ct+='<path d="',nt=0;nt<ct.getModuleCount();nt+=1)for(ft=nt*S+A,K=0;K<ct.getModuleCount();K+=1)ct.isDark(nt,K)&&(Ct+="M"+(K*S+A)+","+ft+wt);return(Ct+='" stroke="transparent" fill="black"/>')+"</svg>"},ct.createDataURL=function(S,A){S=S||2,A=A===void 0?4*S:A;var P=ct.getModuleCount()*S+2*A,E=A,$=P-A;return Lt(P,P,function(K,nt){if(E<=K&&K<$&&E<=nt&&nt<$){var ft=Math.floor((K-E)/S),wt=Math.floor((nt-E)/S);return ct.isDark(wt,ft)?0:1}return 1})},ct.createImgTag=function(S,A,P){S=S||2,A=A===void 0?4*S:A;var E=ct.getModuleCount()*S+2*A,$="";return $+="<img",$+=' src="',$+=ct.createDataURL(S,A),$+='"',$+=' width="',$+=E,$+='"',$+=' height="',$+=E,$+='"',P&&($+=' alt="',$+=C(P),$+='"'),$+"/>"};var C=function(S){for(var A="",P=0;P<S.length;P+=1){var E=S.charAt(P);switch(E){case"<":A+="&lt;";break;case">":A+="&gt;";break;case"&":A+="&amp;";break;case'"':A+="&quot;";break;default:A+=E}}return A};return ct.createASCII=function(S,A){if((S=S||1)<2)return function(zt){zt=zt===void 0?2:zt;var Rt,_,m,X,Y,tt=1*ct.getModuleCount()+2*zt,lt=zt,ut=tt-zt,At={"":""," ":""," ":"","  ":" "},mt={"":""," ":""," ":" ","  ":" "},yt="";for(Rt=0;Rt<tt;Rt+=2){for(m=Math.floor((Rt-lt)/1),X=Math.floor((Rt+1-lt)/1),_=0;_<tt;_+=1)Y="",lt<=_&&_<ut&&lt<=Rt&&Rt<ut&&ct.isDark(m,Math.floor((_-lt)/1))&&(Y=" "),lt<=_&&_<ut&&lt<=Rt+1&&Rt+1<ut&&ct.isDark(X,Math.floor((_-lt)/1))?Y+=" ":Y+="",yt+=zt<1&&Rt+1>=ut?mt[Y]:At[Y];yt+=`
`}return tt%2&&zt>0?yt.substring(0,yt.length-tt-1)+Array(tt+1).join(""):yt.substring(0,yt.length-1)}(A);S-=1,A=A===void 0?2*S:A;var P,E,$,K,nt=ct.getModuleCount()*S+2*A,ft=A,wt=nt-A,St=Array(S+1).join(""),Ct=Array(S+1).join("  "),Xt="",Qt="";for(P=0;P<nt;P+=1){for($=Math.floor((P-ft)/S),Qt="",E=0;E<nt;E+=1)K=1,ft<=E&&E<wt&&ft<=P&&P<wt&&ct.isDark($,Math.floor((E-ft)/S))&&(K=0),Qt+=K?St:Ct;for($=0;$<S;$+=1)Xt+=Qt+`
`}return Xt.substring(0,Xt.length-1)},ct.renderTo2dContext=function(S,A){A=A||2;for(var P=ct.getModuleCount(),E=0;E<P;E++)for(var $=0;$<P;$++)S.fillStyle=ct.isDark(E,$)?"black":"white",S.fillRect(E*A,$*A,A,A)},ct};h.stringToBytes=(h.stringToBytesFuncs={default:function(q){for(var H=[],U=0;U<q.length;U+=1){var j=q.charCodeAt(U);H.push(255&j)}return H}}).default,h.createStringToBytes=function(q,H){var U=function(){for(var z=Tt(q),G=function(){var pt=z.read();if(pt==-1)throw"eof";return pt},rt=0,Z={};;){var ct=z.read();if(ct==-1)break;var It=G(),Ht=G()<<8|G();Z[String.fromCharCode(ct<<8|It)]=Ht,rt+=1}if(rt!=H)throw rt+" != "+H;return Z}(),j="?".charCodeAt(0);return function(z){for(var G=[],rt=0;rt<z.length;rt+=1){var Z=z.charCodeAt(rt);if(Z<128)G.push(Z);else{var ct=U[z.charAt(rt)];typeof ct=="number"?(255&ct)==ct?G.push(ct):(G.push(ct>>>8),G.push(255&ct)):G.push(j)}}return G}};var f,d,g,b,k,O={L:1,M:0,Q:3,H:2},D=(f=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],d=1335,g=7973,k=function(q){for(var H=0;q!=0;)H+=1,q>>>=1;return H},(b={}).getBCHTypeInfo=function(q){for(var H=q<<10;k(H)-k(d)>=0;)H^=d<<k(H)-k(d);return 21522^(q<<10|H)},b.getBCHTypeNumber=function(q){for(var H=q<<12;k(H)-k(g)>=0;)H^=g<<k(H)-k(g);return q<<12|H},b.getPatternPosition=function(q){return f[q-1]},b.getMaskFunction=function(q){switch(q){case 0:return function(H,U){return(H+U)%2==0};case 1:return function(H,U){return H%2==0};case 2:return function(H,U){return U%3==0};case 3:return function(H,U){return(H+U)%3==0};case 4:return function(H,U){return(Math.floor(H/2)+Math.floor(U/3))%2==0};case 5:return function(H,U){return H*U%2+H*U%3==0};case 6:return function(H,U){return(H*U%2+H*U%3)%2==0};case 7:return function(H,U){return(H*U%3+(H+U)%2)%2==0};default:throw"bad maskPattern:"+q}},b.getErrorCorrectPolynomial=function(q){for(var H=W([1],0),U=0;U<q;U+=1)H=H.multiply(W([1,F.gexp(U)],0));return H},b.getLengthInBits=function(q,H){if(1<=H&&H<10)switch(q){case 1:return 10;case 2:return 9;case 4:case 8:return 8;default:throw"mode:"+q}else if(H<27)switch(q){case 1:return 12;case 2:return 11;case 4:return 16;case 8:return 10;default:throw"mode:"+q}else{if(!(H<41))throw"type:"+H;switch(q){case 1:return 14;case 2:return 13;case 4:return 16;case 8:return 12;default:throw"mode:"+q}}},b.getLostPoint=function(q){for(var H=q.getModuleCount(),U=0,j=0;j<H;j+=1)for(var z=0;z<H;z+=1){for(var G=0,rt=q.isDark(j,z),Z=-1;Z<=1;Z+=1)if(!(j+Z<0||H<=j+Z))for(var ct=-1;ct<=1;ct+=1)z+ct<0||H<=z+ct||Z==0&&ct==0||rt==q.isDark(j+Z,z+ct)&&(G+=1);G>5&&(U+=3+G-5)}for(j=0;j<H-1;j+=1)for(z=0;z<H-1;z+=1){var It=0;q.isDark(j,z)&&(It+=1),q.isDark(j+1,z)&&(It+=1),q.isDark(j,z+1)&&(It+=1),q.isDark(j+1,z+1)&&(It+=1),It!=0&&It!=4||(U+=3)}for(j=0;j<H;j+=1)for(z=0;z<H-6;z+=1)q.isDark(j,z)&&!q.isDark(j,z+1)&&q.isDark(j,z+2)&&q.isDark(j,z+3)&&q.isDark(j,z+4)&&!q.isDark(j,z+5)&&q.isDark(j,z+6)&&(U+=40);for(z=0;z<H;z+=1)for(j=0;j<H-6;j+=1)q.isDark(j,z)&&!q.isDark(j+1,z)&&q.isDark(j+2,z)&&q.isDark(j+3,z)&&q.isDark(j+4,z)&&!q.isDark(j+5,z)&&q.isDark(j+6,z)&&(U+=40);var Ht=0;for(z=0;z<H;z+=1)for(j=0;j<H;j+=1)q.isDark(j,z)&&(Ht+=1);return U+Math.abs(100*Ht/H/H-50)/5*10},b),F=function(){for(var q=new Array(256),H=new Array(256),U=0;U<8;U+=1)q[U]=1<<U;for(U=8;U<256;U+=1)q[U]=q[U-4]^q[U-5]^q[U-6]^q[U-8];for(U=0;U<255;U+=1)H[q[U]]=U;return{glog:function(j){if(j<1)throw"glog("+j+")";return H[j]},gexp:function(j){for(;j<0;)j+=255;for(;j>=256;)j-=255;return q[j]}}}();function W(q,H){if(q.length===void 0)throw q.length+"/"+H;var U=function(){for(var z=0;z<q.length&&q[z]==0;)z+=1;for(var G=new Array(q.length-z+H),rt=0;rt<q.length-z;rt+=1)G[rt]=q[rt+z];return G}(),j={getAt:function(z){return U[z]},getLength:function(){return U.length},multiply:function(z){for(var G=new Array(j.getLength()+z.getLength()-1),rt=0;rt<j.getLength();rt+=1)for(var Z=0;Z<z.getLength();Z+=1)G[rt+Z]^=F.gexp(F.glog(j.getAt(rt))+F.glog(z.getAt(Z)));return W(G,0)},mod:function(z){if(j.getLength()-z.getLength()<0)return j;for(var G=F.glog(j.getAt(0))-F.glog(z.getAt(0)),rt=new Array(j.getLength()),Z=0;Z<j.getLength();Z+=1)rt[Z]=j.getAt(Z);for(Z=0;Z<z.getLength();Z+=1)rt[Z]^=F.gexp(F.glog(z.getAt(Z))+G);return W(rt,0).mod(z)}};return j}var V=function(){var q=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12,7,37,13],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],H=function(j,z){var G={};return G.totalCount=j,G.dataCount=z,G},U={getRSBlocks:function(j,z){var G=function(p,v){switch(v){case O.L:return q[4*(p-1)+0];case O.M:return q[4*(p-1)+1];case O.Q:return q[4*(p-1)+2];case O.H:return q[4*(p-1)+3];default:return}}(j,z);if(G===void 0)throw"bad rs block @ typeNumber:"+j+"/errorCorrectionLevel:"+z;for(var rt=G.length/3,Z=[],ct=0;ct<rt;ct+=1)for(var It=G[3*ct+0],Ht=G[3*ct+1],pt=G[3*ct+2],y=0;y<It;y+=1)Z.push(H(Ht,pt));return Z}};return U}(),T=function(){var q=[],H=0,U={getBuffer:function(){return q},getAt:function(j){var z=Math.floor(j/8);return(q[z]>>>7-j%8&1)==1},put:function(j,z){for(var G=0;G<z;G+=1)U.putBit((j>>>z-G-1&1)==1)},getLengthInBits:function(){return H},putBit:function(j){var z=Math.floor(H/8);q.length<=z&&q.push(0),j&&(q[z]|=128>>>H%8),H+=1}};return U},L=function(q){var H=q,U={getMode:function(){return 1},getLength:function(G){return H.length},write:function(G){for(var rt=H,Z=0;Z+2<rt.length;)G.put(j(rt.substring(Z,Z+3)),10),Z+=3;Z<rt.length&&(rt.length-Z==1?G.put(j(rt.substring(Z,Z+1)),4):rt.length-Z==2&&G.put(j(rt.substring(Z,Z+2)),7))}},j=function(G){for(var rt=0,Z=0;Z<G.length;Z+=1)rt=10*rt+z(G.charAt(Z));return rt},z=function(G){if("0"<=G&&G<="9")return G.charCodeAt(0)-"0".charCodeAt(0);throw"illegal char :"+G};return U},R=function(q){var H=q,U={getMode:function(){return 2},getLength:function(z){return H.length},write:function(z){for(var G=H,rt=0;rt+1<G.length;)z.put(45*j(G.charAt(rt))+j(G.charAt(rt+1)),11),rt+=2;rt<G.length&&z.put(j(G.charAt(rt)),6)}},j=function(z){if("0"<=z&&z<="9")return z.charCodeAt(0)-"0".charCodeAt(0);if("A"<=z&&z<="Z")return z.charCodeAt(0)-"A".charCodeAt(0)+10;switch(z){case" ":return 36;case"$":return 37;case"%":return 38;case"*":return 39;case"+":return 40;case"-":return 41;case".":return 42;case"/":return 43;case":":return 44;default:throw"illegal char :"+z}};return U},st=function(q){var H=h.stringToBytes(q);return{getMode:function(){return 4},getLength:function(U){return H.length},write:function(U){for(var j=0;j<H.length;j+=1)U.put(H[j],8)}}},xt=function(q){var H=h.stringToBytesFuncs.SJIS;if(!H)throw"sjis not supported.";(function(z,G){var rt=H("");if(rt.length!=2||(rt[0]<<8|rt[1])!=38726)throw"sjis not supported."})();var U=H(q),j={getMode:function(){return 8},getLength:function(z){return~~(U.length/2)},write:function(z){for(var G=U,rt=0;rt+1<G.length;){var Z=(255&G[rt])<<8|255&G[rt+1];if(33088<=Z&&Z<=40956)Z-=33088;else{if(!(57408<=Z&&Z<=60351))throw"illegal char at "+(rt+1)+"/"+Z;Z-=49472}Z=192*(Z>>>8&255)+(255&Z),z.put(Z,13),rt+=2}if(rt<G.length)throw"illegal char at "+(rt+1)}};return j},bt=function(){var q=[],H={writeByte:function(U){q.push(255&U)},writeShort:function(U){H.writeByte(U),H.writeByte(U>>>8)},writeBytes:function(U,j,z){j=j||0,z=z||U.length;for(var G=0;G<z;G+=1)H.writeByte(U[G+j])},writeString:function(U){for(var j=0;j<U.length;j+=1)H.writeByte(U.charCodeAt(j))},toByteArray:function(){return q},toString:function(){var U="";U+="[";for(var j=0;j<q.length;j+=1)j>0&&(U+=","),U+=q[j];return U+"]"}};return H},Tt=function(q){var H=q,U=0,j=0,z=0,G={read:function(){for(;z<8;){if(U>=H.length){if(z==0)return-1;throw"unexpected end of file./"+z}var Z=H.charAt(U);if(U+=1,Z=="=")return z=0,-1;Z.match(/^\s$/)||(j=j<<6|rt(Z.charCodeAt(0)),z+=6)}var ct=j>>>z-8&255;return z-=8,ct}},rt=function(Z){if(65<=Z&&Z<=90)return Z-65;if(97<=Z&&Z<=122)return Z-97+26;if(48<=Z&&Z<=57)return Z-48+52;if(Z==43)return 62;if(Z==47)return 63;throw"c:"+Z};return G},Lt=function(q,H,U){for(var j=function(Ht,pt){var y=Ht,p=pt,v=new Array(Ht*pt),w={setPixel:function(S,A,P){v[A*y+S]=P},write:function(S){S.writeString("GIF87a"),S.writeShort(y),S.writeShort(p),S.writeByte(128),S.writeByte(0),S.writeByte(0),S.writeByte(0),S.writeByte(0),S.writeByte(0),S.writeByte(255),S.writeByte(255),S.writeByte(255),S.writeString(","),S.writeShort(0),S.writeShort(0),S.writeShort(y),S.writeShort(p),S.writeByte(0);var A=x(2);S.writeByte(2);for(var P=0;A.length-P>255;)S.writeByte(255),S.writeBytes(A,P,255),P+=255;S.writeByte(A.length-P),S.writeBytes(A,P,A.length-P),S.writeByte(0),S.writeString(";")}},x=function(S){for(var A=1<<S,P=1+(1<<S),E=S+1,$=C(),K=0;K<A;K+=1)$.add(String.fromCharCode(K));$.add(String.fromCharCode(A)),$.add(String.fromCharCode(P));var nt,ft,wt,St=bt(),Ct=(nt=St,ft=0,wt=0,{write:function(Rt,_){if(Rt>>>_)throw"length over";for(;ft+_>=8;)nt.writeByte(255&(Rt<<ft|wt)),_-=8-ft,Rt>>>=8-ft,wt=0,ft=0;wt|=Rt<<ft,ft+=_},flush:function(){ft>0&&nt.writeByte(wt)}});Ct.write(A,E);var Xt=0,Qt=String.fromCharCode(v[Xt]);for(Xt+=1;Xt<v.length;){var zt=String.fromCharCode(v[Xt]);Xt+=1,$.contains(Qt+zt)?Qt+=zt:(Ct.write($.indexOf(Qt),E),$.size()<4095&&($.size()==1<<E&&(E+=1),$.add(Qt+zt)),Qt=zt)}return Ct.write($.indexOf(Qt),E),Ct.write(P,E),Ct.flush(),St.toByteArray()},C=function(){var S={},A=0,P={add:function(E){if(P.contains(E))throw"dup key:"+E;S[E]=A,A+=1},size:function(){return A},indexOf:function(E){return S[E]},contains:function(E){return S[E]!==void 0}};return P};return w}(q,H),z=0;z<H;z+=1)for(var G=0;G<q;G+=1)j.setPixel(G,z,U(G,z));var rt=bt();j.write(rt);for(var Z=function(){var Ht=0,pt=0,y=0,p="",v={},w=function(C){p+=String.fromCharCode(x(63&C))},x=function(C){if(!(C<0)){if(C<26)return 65+C;if(C<52)return C-26+97;if(C<62)return C-52+48;if(C==62)return 43;if(C==63)return 47}throw"n:"+C};return v.writeByte=function(C){for(Ht=Ht<<8|255&C,pt+=8,y+=1;pt>=6;)w(Ht>>>pt-6),pt-=6},v.flush=function(){if(pt>0&&(w(Ht<<6-pt),Ht=0,pt=0),y%3!=0)for(var C=3-y%3,S=0;S<C;S+=1)p+="="},v.toString=function(){return p},v}(),ct=rt.toByteArray(),It=0;It<ct.length;It+=1)Z.writeByte(ct[It]);return Z.flush(),"data:image/gif;base64,"+Z};return h}();u.stringToBytesFuncs["UTF-8"]=function(h){return function(f){for(var d=[],g=0;g<f.length;g++){var b=f.charCodeAt(g);b<128?d.push(b):b<2048?d.push(192|b>>6,128|63&b):b<55296||b>=57344?d.push(224|b>>12,128|b>>6&63,128|63&b):(g++,b=65536+((1023&b)<<10|1023&f.charCodeAt(g)),d.push(240|b>>18,128|b>>12&63,128|b>>6&63,128|63&b))}return d}(h)},(c=typeof(l=function(){return u})=="function"?l.apply(a,[]):l)===void 0||(o.exports=c)}},i={};function r(o){var a=i[o];if(a!==void 0)return a.exports;var l=i[o]={exports:{}};return e[o](l,l.exports,r),l.exports}r.n=o=>{var a=o&&o.__esModule?()=>o.default:()=>o;return r.d(a,{a}),a},r.d=(o,a)=>{for(var l in a)r.o(a,l)&&!r.o(o,l)&&Object.defineProperty(o,l,{enumerable:!0,get:a[l]})},r.o=(o,a)=>Object.prototype.hasOwnProperty.call(o,a);var s={};return(()=>{r.d(s,{default:()=>Ht});const o=pt=>!!pt&&typeof pt=="object"&&!Array.isArray(pt);function a(pt,...y){if(!y.length)return pt;const p=y.shift();return p!==void 0&&o(pt)&&o(p)?(pt=Object.assign({},pt),Object.keys(p).forEach(v=>{const w=pt[v],x=p[v];Array.isArray(w)&&Array.isArray(x)?pt[v]=x:o(w)&&o(x)?pt[v]=a(Object.assign({},w),x):pt[v]=x}),a(pt,...y)):pt}function l(pt,y){const p=document.createElement("a");p.download=y,p.href=pt,document.body.appendChild(p),p.click(),document.body.removeChild(p)}function c({originalHeight:pt,originalWidth:y,maxHiddenDots:p,maxHiddenAxisDots:v,dotSize:w}){const x={x:0,y:0},C={x:0,y:0};if(pt<=0||y<=0||p<=0||w<=0)return{height:0,width:0,hideYDots:0,hideXDots:0};const S=pt/y;return x.x=Math.floor(Math.sqrt(p/S)),x.x<=0&&(x.x=1),v&&v<x.x&&(x.x=v),x.x%2==0&&x.x--,C.x=x.x*w,x.y=1+2*Math.ceil((x.x*S-1)/2),C.y=Math.round(C.x*S),(x.y*x.x>p||v&&v<x.y)&&(v&&v<x.y?(x.y=v,x.y%2==0&&x.x--):x.y-=2,C.y=x.y*w,x.x=1+2*Math.ceil((x.y/S-1)/2),C.x=Math.round(C.y/S)),{height:C.y,width:C.x,hideYDots:x.x,hideXDots:x.y}}const u={L:.07,M:.15,Q:.25,H:.3},h="dots",f="rounded",d="classy",g="classy-rounded",b="extra-rounded";class k{constructor({context:y,type:p}){this._context=y,this._type=p}draw(y,p,v,w){const x=this._context;let C;switch(this._type){case h:C=this._drawDot;break;case d:C=this._drawClassy;break;case g:C=this._drawClassyRounded;break;case f:C=this._drawRounded;break;case b:C=this._drawExtraRounded;break;default:C=this._drawSquare}C.call(this,{x:y,y:p,size:v,context:x,getNeighbor:w})}_rotateFigure({x:y,y:p,size:v,context:w,rotation:x=0,draw:C}){const S=y+v/2,A=p+v/2;w.translate(S,A),x&&w.rotate(x),C(),w.closePath(),x&&w.rotate(-x),w.translate(-S,-A)}_basicDot(y){const{size:p,context:v}=y;this._rotateFigure(Object.assign(Object.assign({},y),{draw:()=>{v.arc(0,0,p/2,0,2*Math.PI)}}))}_basicSquare(y){const{size:p,context:v}=y;this._rotateFigure(Object.assign(Object.assign({},y),{draw:()=>{v.rect(-p/2,-p/2,p,p)}}))}_basicSideRounded(y){const{size:p,context:v}=y;this._rotateFigure(Object.assign(Object.assign({},y),{draw:()=>{v.arc(0,0,p/2,-Math.PI/2,Math.PI/2),v.lineTo(-p/2,p/2),v.lineTo(-p/2,-p/2),v.lineTo(0,-p/2)}}))}_basicCornerRounded(y){const{size:p,context:v}=y;this._rotateFigure(Object.assign(Object.assign({},y),{draw:()=>{v.arc(0,0,p/2,-Math.PI/2,0),v.lineTo(p/2,p/2),v.lineTo(-p/2,p/2),v.lineTo(-p/2,-p/2),v.lineTo(0,-p/2)}}))}_basicCornerExtraRounded(y){const{size:p,context:v}=y;this._rotateFigure(Object.assign(Object.assign({},y),{draw:()=>{v.arc(-p/2,p/2,p,-Math.PI/2,0),v.lineTo(-p/2,p/2),v.lineTo(-p/2,-p/2)}}))}_basicCornersRounded(y){const{size:p,context:v}=y;this._rotateFigure(Object.assign(Object.assign({},y),{draw:()=>{v.arc(0,0,p/2,-Math.PI/2,0),v.lineTo(p/2,p/2),v.lineTo(0,p/2),v.arc(0,0,p/2,Math.PI/2,Math.PI),v.lineTo(-p/2,-p/2),v.lineTo(0,-p/2)}}))}_basicCornersExtraRounded(y){const{size:p,context:v}=y;this._rotateFigure(Object.assign(Object.assign({},y),{draw:()=>{v.arc(-p/2,p/2,p,-Math.PI/2,0),v.arc(p/2,-p/2,p,Math.PI/2,Math.PI)}}))}_drawDot({x:y,y:p,size:v,context:w}){this._basicDot({x:y,y:p,size:v,context:w,rotation:0})}_drawSquare({x:y,y:p,size:v,context:w}){this._basicSquare({x:y,y:p,size:v,context:w,rotation:0})}_drawRounded({x:y,y:p,size:v,context:w,getNeighbor:x}){const C=x?+x(-1,0):0,S=x?+x(1,0):0,A=x?+x(0,-1):0,P=x?+x(0,1):0,E=C+S+A+P;if(E!==0)if(E>2||C&&S||A&&P)this._basicSquare({x:y,y:p,size:v,context:w,rotation:0});else{if(E===2){let $=0;return C&&A?$=Math.PI/2:A&&S?$=Math.PI:S&&P&&($=-Math.PI/2),void this._basicCornerRounded({x:y,y:p,size:v,context:w,rotation:$})}if(E===1){let $=0;return A?$=Math.PI/2:S?$=Math.PI:P&&($=-Math.PI/2),void this._basicSideRounded({x:y,y:p,size:v,context:w,rotation:$})}}else this._basicDot({x:y,y:p,size:v,context:w,rotation:0})}_drawExtraRounded({x:y,y:p,size:v,context:w,getNeighbor:x}){const C=x?+x(-1,0):0,S=x?+x(1,0):0,A=x?+x(0,-1):0,P=x?+x(0,1):0,E=C+S+A+P;if(E!==0)if(E>2||C&&S||A&&P)this._basicSquare({x:y,y:p,size:v,context:w,rotation:0});else{if(E===2){let $=0;return C&&A?$=Math.PI/2:A&&S?$=Math.PI:S&&P&&($=-Math.PI/2),void this._basicCornerExtraRounded({x:y,y:p,size:v,context:w,rotation:$})}if(E===1){let $=0;return A?$=Math.PI/2:S?$=Math.PI:P&&($=-Math.PI/2),void this._basicSideRounded({x:y,y:p,size:v,context:w,rotation:$})}}else this._basicDot({x:y,y:p,size:v,context:w,rotation:0})}_drawClassy({x:y,y:p,size:v,context:w,getNeighbor:x}){const C=x?+x(-1,0):0,S=x?+x(1,0):0,A=x?+x(0,-1):0,P=x?+x(0,1):0;C+S+A+P!==0?C||A?S||P?this._basicSquare({x:y,y:p,size:v,context:w,rotation:0}):this._basicCornerRounded({x:y,y:p,size:v,context:w,rotation:Math.PI/2}):this._basicCornerRounded({x:y,y:p,size:v,context:w,rotation:-Math.PI/2}):this._basicCornersRounded({x:y,y:p,size:v,context:w,rotation:Math.PI/2})}_drawClassyRounded({x:y,y:p,size:v,context:w,getNeighbor:x}){const C=x?+x(-1,0):0,S=x?+x(1,0):0,A=x?+x(0,-1):0,P=x?+x(0,1):0;C+S+A+P!==0?C||A?S||P?this._basicSquare({x:y,y:p,size:v,context:w,rotation:0}):this._basicCornerExtraRounded({x:y,y:p,size:v,context:w,rotation:Math.PI/2}):this._basicCornerExtraRounded({x:y,y:p,size:v,context:w,rotation:-Math.PI/2}):this._basicCornersRounded({x:y,y:p,size:v,context:w,rotation:Math.PI/2})}}const O="square",D="extra-rounded";class F{constructor({context:y,type:p}){this._context=y,this._type=p}draw(y,p,v,w){const x=this._context;let C;switch(this._type){case O:C=this._drawSquare;break;case D:C=this._drawExtraRounded;break;default:C=this._drawDot}C.call(this,{x:y,y:p,size:v,context:x,rotation:w})}_rotateFigure({x:y,y:p,size:v,context:w,rotation:x=0,draw:C}){const S=y+v/2,A=p+v/2;w.translate(S,A),x&&w.rotate(x),C(),w.closePath(),x&&w.rotate(-x),w.translate(-S,-A)}_basicDot(y){const{size:p,context:v}=y,w=p/7;this._rotateFigure(Object.assign(Object.assign({},y),{draw:()=>{v.arc(0,0,p/2,0,2*Math.PI),v.arc(0,0,p/2-w,0,2*Math.PI)}}))}_basicSquare(y){const{size:p,context:v}=y,w=p/7;this._rotateFigure(Object.assign(Object.assign({},y),{draw:()=>{v.rect(-p/2,-p/2,p,p),v.rect(-p/2+w,-p/2+w,p-2*w,p-2*w)}}))}_basicExtraRounded(y){const{size:p,context:v}=y,w=p/7;this._rotateFigure(Object.assign(Object.assign({},y),{draw:()=>{v.arc(-w,-w,2.5*w,Math.PI,-Math.PI/2),v.lineTo(w,-3.5*w),v.arc(w,-w,2.5*w,-Math.PI/2,0),v.lineTo(3.5*w,-w),v.arc(w,w,2.5*w,0,Math.PI/2),v.lineTo(-w,3.5*w),v.arc(-w,w,2.5*w,Math.PI/2,Math.PI),v.lineTo(-3.5*w,-w),v.arc(-w,-w,1.5*w,Math.PI,-Math.PI/2),v.lineTo(w,-2.5*w),v.arc(w,-w,1.5*w,-Math.PI/2,0),v.lineTo(2.5*w,-w),v.arc(w,w,1.5*w,0,Math.PI/2),v.lineTo(-w,2.5*w),v.arc(-w,w,1.5*w,Math.PI/2,Math.PI),v.lineTo(-2.5*w,-w)}}))}_drawDot({x:y,y:p,size:v,context:w,rotation:x}){this._basicDot({x:y,y:p,size:v,context:w,rotation:x})}_drawSquare({x:y,y:p,size:v,context:w,rotation:x}){this._basicSquare({x:y,y:p,size:v,context:w,rotation:x})}_drawExtraRounded({x:y,y:p,size:v,context:w,rotation:x}){this._basicExtraRounded({x:y,y:p,size:v,context:w,rotation:x})}}const W="square";class V{constructor({context:y,type:p}){this._context=y,this._type=p}draw(y,p,v,w){const x=this._context;let C;C=this._type===W?this._drawSquare:this._drawDot,C.call(this,{x:y,y:p,size:v,context:x,rotation:w})}_rotateFigure({x:y,y:p,size:v,context:w,rotation:x=0,draw:C}){const S=y+v/2,A=p+v/2;w.translate(S,A),x&&w.rotate(x),C(),w.closePath(),x&&w.rotate(-x),w.translate(-S,-A)}_basicDot(y){const{size:p,context:v}=y;this._rotateFigure(Object.assign(Object.assign({},y),{draw:()=>{v.arc(0,0,p/2,0,2*Math.PI)}}))}_basicSquare(y){const{size:p,context:v}=y;this._rotateFigure(Object.assign(Object.assign({},y),{draw:()=>{v.rect(-p/2,-p/2,p,p)}}))}_drawDot({x:y,y:p,size:v,context:w,rotation:x}){this._basicDot({x:y,y:p,size:v,context:w,rotation:x})}_drawSquare({x:y,y:p,size:v,context:w,rotation:x}){this._basicSquare({x:y,y:p,size:v,context:w,rotation:x})}}const T="radial",L=[[1,1,1,1,1,1,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,1,1,1,1,1,1]],R=[[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,1,1,1,0,0],[0,0,1,1,1,0,0],[0,0,1,1,1,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]];class st{constructor(y){this._canvas=document.createElement("canvas"),this._canvas.width=y.width,this._canvas.height=y.height,this._options=y}get context(){return this._canvas.getContext("2d")}get width(){return this._canvas.width}get height(){return this._canvas.height}getCanvas(){return this._canvas}clear(){const y=this.context;y&&y.clearRect(0,0,this._canvas.width,this._canvas.height)}async drawQR(y){const p=y.getModuleCount(),v=Math.min(this._options.width,this._options.height)-2*this._options.margin,w=Math.floor(v/p);let x={hideXDots:0,hideYDots:0,width:0,height:0};if(this._qr=y,this._options.image){if(await this.loadImage(),!this._image)return;const{imageOptions:C,qrOptions:S}=this._options,A=C.imageSize*u[S.errorCorrectionLevel],P=Math.floor(A*p*p);x=c({originalWidth:this._image.width,originalHeight:this._image.height,maxHiddenDots:P,maxHiddenAxisDots:p-14,dotSize:w})}this.clear(),this.drawBackground(),this.drawDots((C,S)=>{var A,P,E,$,K,nt;return!(this._options.imageOptions.hideBackgroundDots&&C>=(p-x.hideXDots)/2&&C<(p+x.hideXDots)/2&&S>=(p-x.hideYDots)/2&&S<(p+x.hideYDots)/2||!((A=L[C])===null||A===void 0)&&A[S]||!((P=L[C-p+7])===null||P===void 0)&&P[S]||!((E=L[C])===null||E===void 0)&&E[S-p+7]||!(($=R[C])===null||$===void 0)&&$[S]||!((K=R[C-p+7])===null||K===void 0)&&K[S]||!((nt=R[C])===null||nt===void 0)&&nt[S-p+7])}),this.drawCorners(),this._options.image&&this.drawImage({width:x.width,height:x.height,count:p,dotSize:w})}drawBackground(){const y=this.context,p=this._options;if(y){if(p.backgroundOptions.gradient){const v=p.backgroundOptions.gradient,w=this._createGradient({context:y,options:v,additionalRotation:0,x:0,y:0,size:this._canvas.width>this._canvas.height?this._canvas.width:this._canvas.height});v.colorStops.forEach(({offset:x,color:C})=>{w.addColorStop(x,C)}),y.fillStyle=w}else p.backgroundOptions.color&&(y.fillStyle=p.backgroundOptions.color);y.fillRect(0,0,this._canvas.width,this._canvas.height)}}drawDots(y){if(!this._qr)throw"QR code is not defined";const p=this.context;if(!p)throw"QR code is not defined";const v=this._options,w=this._qr.getModuleCount();if(w>v.width||w>v.height)throw"The canvas is too small.";const x=Math.min(v.width,v.height)-2*v.margin,C=Math.floor(x/w),S=Math.floor((v.width-w*C)/2),A=Math.floor((v.height-w*C)/2),P=new k({context:p,type:v.dotsOptions.type});p.beginPath();for(let E=0;E<w;E++)for(let $=0;$<w;$++){if(y&&!y(E,$)||!this._qr.isDark(E,$))continue;const K=this._options.useLegacyDotRotation?S+E*C:A+$*C,nt=this._options.useLegacyDotRotation?A+$*C:S+E*C;P.draw(K,nt,C,(ft,wt)=>this._options.useLegacyDotRotation?!(E+ft<0||$+wt<0||E+ft>=w||$+wt>=w)&&!(y&&!y(E+ft,$+wt))&&!!this._qr&&this._qr.isDark(E+ft,$+wt):!($+ft<0||E+wt<0||$+ft>=w||E+wt>=w)&&!(y&&!y($+ft,E+wt))&&!!this._qr&&this._qr.isDark(E+wt,$+ft))}if(v.dotsOptions.gradient){const E=v.dotsOptions.gradient,$=this._createGradient({context:p,options:E,additionalRotation:0,x:S,y:A,size:w*C});E.colorStops.forEach(({offset:K,color:nt})=>{$.addColorStop(K,nt)}),p.fillStyle=p.strokeStyle=$}else v.dotsOptions.color&&(p.fillStyle=p.strokeStyle=v.dotsOptions.color);p.fill("evenodd")}drawCorners(y){if(!this._qr)throw"QR code is not defined";const p=this.context;if(!p)throw"QR code is not defined";const v=this._options,w=this._qr.getModuleCount(),x=Math.min(v.width,v.height)-2*v.margin,C=Math.floor(x/w),S=7*C,A=3*C,P=Math.floor((v.width-w*C)/2),E=Math.floor((v.height-w*C)/2);[[0,0,0],[1,0,Math.PI/2],[0,1,-Math.PI/2]].forEach(([$,K,nt])=>{var ft,wt,St,Ct,Xt,Qt,zt,Rt,_,m;if(y&&!y($,K))return;const X=P+$*C*(w-7),Y=E+K*C*(w-7);if(!((ft=v.cornersSquareOptions)===null||ft===void 0)&&ft.type){const tt=new F({context:p,type:(wt=v.cornersSquareOptions)===null||wt===void 0?void 0:wt.type});p.beginPath(),tt.draw(X,Y,S,nt)}else{const tt=new k({context:p,type:v.dotsOptions.type});p.beginPath();for(let lt=0;lt<L.length;lt++)for(let ut=0;ut<L[lt].length;ut++)!((St=L[lt])===null||St===void 0)&&St[ut]&&tt.draw(X+lt*C,Y+ut*C,C,(At,mt)=>{var yt;return!!(!((yt=L[lt+At])===null||yt===void 0)&&yt[ut+mt])})}if(!((Ct=v.cornersSquareOptions)===null||Ct===void 0)&&Ct.gradient){const tt=v.cornersSquareOptions.gradient,lt=this._createGradient({context:p,options:tt,additionalRotation:nt,x:X,y:Y,size:S});tt.colorStops.forEach(({offset:ut,color:At})=>{lt.addColorStop(ut,At)}),p.fillStyle=p.strokeStyle=lt}else!((Xt=v.cornersSquareOptions)===null||Xt===void 0)&&Xt.color&&(p.fillStyle=p.strokeStyle=v.cornersSquareOptions.color);if(p.fill("evenodd"),(Qt=v.cornersDotOptions)===null||Qt===void 0?void 0:Qt.type){const tt=new V({context:p,type:(zt=v.cornersDotOptions)===null||zt===void 0?void 0:zt.type});p.beginPath(),tt.draw(X+2*C,Y+2*C,A,nt)}else{const tt=new k({context:p,type:v.dotsOptions.type});p.beginPath();for(let lt=0;lt<R.length;lt++)for(let ut=0;ut<R[lt].length;ut++)!((Rt=R[lt])===null||Rt===void 0)&&Rt[ut]&&tt.draw(X+lt*C,Y+ut*C,C,(At,mt)=>{var yt;return!!(!((yt=R[lt+At])===null||yt===void 0)&&yt[ut+mt])})}if(!((_=v.cornersDotOptions)===null||_===void 0)&&_.gradient){const tt=v.cornersDotOptions.gradient,lt=this._createGradient({context:p,options:tt,additionalRotation:nt,x:X+2*C,y:Y+2*C,size:A});tt.colorStops.forEach(({offset:ut,color:At})=>{lt.addColorStop(ut,At)}),p.fillStyle=p.strokeStyle=lt}else!((m=v.cornersDotOptions)===null||m===void 0)&&m.color&&(p.fillStyle=p.strokeStyle=v.cornersDotOptions.color);p.fill("evenodd")})}loadImage(){return new Promise((y,p)=>{const v=this._options,w=new Image;if(!v.image)return p("Image is not defined");typeof v.imageOptions.crossOrigin=="string"&&(w.crossOrigin=v.imageOptions.crossOrigin),this._image=w,w.onload=()=>{y()},w.src=v.image})}drawImage({width:y,height:p,count:v,dotSize:w}){const x=this.context;if(!x)throw"canvasContext is not defined";if(!this._image)throw"image is not defined";const C=this._options,S=Math.floor((C.width-v*w)/2),A=Math.floor((C.height-v*w)/2),P=S+C.imageOptions.margin+(v*w-y)/2,E=A+C.imageOptions.margin+(v*w-p)/2,$=y-2*C.imageOptions.margin,K=p-2*C.imageOptions.margin;x.drawImage(this._image,P,E,$<0?0:$,K<0?0:K)}_createGradient({context:y,options:p,additionalRotation:v,x:w,y:x,size:C}){let S;if(p.type===T)S=y.createRadialGradient(w+C/2,x+C/2,0,w+C/2,x+C/2,C/2);else{const A=((p.rotation||0)+v)%(2*Math.PI),P=(A+2*Math.PI)%(2*Math.PI);let E=w+C/2,$=x+C/2,K=w+C/2,nt=x+C/2;P>=0&&P<=.25*Math.PI||P>1.75*Math.PI&&P<=2*Math.PI?(E-=C/2,$-=C/2*Math.tan(A),K+=C/2,nt+=C/2*Math.tan(A)):P>.25*Math.PI&&P<=.75*Math.PI?($-=C/2,E-=C/2/Math.tan(A),nt+=C/2,K+=C/2/Math.tan(A)):P>.75*Math.PI&&P<=1.25*Math.PI?(E+=C/2,$+=C/2*Math.tan(A),K-=C/2,nt-=C/2*Math.tan(A)):P>1.25*Math.PI&&P<=1.75*Math.PI&&($+=C/2,E+=C/2/Math.tan(A),nt-=C/2,K-=C/2/Math.tan(A)),S=y.createLinearGradient(Math.round(E),Math.round($),Math.round(K),Math.round(nt))}return S}}class xt{constructor({svg:y,type:p}){this._svg=y,this._type=p}draw(y,p,v,w){let x;switch(this._type){case h:x=this._drawDot;break;case d:x=this._drawClassy;break;case g:x=this._drawClassyRounded;break;case f:x=this._drawRounded;break;case b:x=this._drawExtraRounded;break;default:x=this._drawSquare}x.call(this,{x:y,y:p,size:v,getNeighbor:w})}_rotateFigure({x:y,y:p,size:v,rotation:w=0,draw:x}){var C;const S=y+v/2,A=p+v/2;x(),(C=this._element)===null||C===void 0||C.setAttribute("transform",`rotate(${180*w/Math.PI},${S},${A})`)}_basicDot(y){const{size:p,x:v,y:w}=y;this._rotateFigure(Object.assign(Object.assign({},y),{draw:()=>{this._element=document.createElementNS("http://www.w3.org/2000/svg","circle"),this._element.setAttribute("cx",String(v+p/2)),this._element.setAttribute("cy",String(w+p/2)),this._element.setAttribute("r",String(p/2))}}))}_basicSquare(y){const{size:p,x:v,y:w}=y;this._rotateFigure(Object.assign(Object.assign({},y),{draw:()=>{this._element=document.createElementNS("http://www.w3.org/2000/svg","rect"),this._element.setAttribute("x",String(v)),this._element.setAttribute("y",String(w)),this._element.setAttribute("width",String(p)),this._element.setAttribute("height",String(p))}}))}_basicSideRounded(y){const{size:p,x:v,y:w}=y;this._rotateFigure(Object.assign(Object.assign({},y),{draw:()=>{this._element=document.createElementNS("http://www.w3.org/2000/svg","path"),this._element.setAttribute("d",`M ${v} ${w}v ${p}h `+p/2+`a ${p/2} ${p/2}, 0, 0, 0, 0 ${-p}`)}}))}_basicCornerRounded(y){const{size:p,x:v,y:w}=y;this._rotateFigure(Object.assign(Object.assign({},y),{draw:()=>{this._element=document.createElementNS("http://www.w3.org/2000/svg","path"),this._element.setAttribute("d",`M ${v} ${w}v ${p}h ${p}v `+-p/2+`a ${p/2} ${p/2}, 0, 0, 0, ${-p/2} ${-p/2}`)}}))}_basicCornerExtraRounded(y){const{size:p,x:v,y:w}=y;this._rotateFigure(Object.assign(Object.assign({},y),{draw:()=>{this._element=document.createElementNS("http://www.w3.org/2000/svg","path"),this._element.setAttribute("d",`M ${v} ${w}v ${p}h ${p}a ${p} ${p}, 0, 0, 0, ${-p} ${-p}`)}}))}_basicCornersRounded(y){const{size:p,x:v,y:w}=y;this._rotateFigure(Object.assign(Object.assign({},y),{draw:()=>{this._element=document.createElementNS("http://www.w3.org/2000/svg","path"),this._element.setAttribute("d",`M ${v} ${w}v `+p/2+`a ${p/2} ${p/2}, 0, 0, 0, ${p/2} ${p/2}h `+p/2+"v "+-p/2+`a ${p/2} ${p/2}, 0, 0, 0, ${-p/2} ${-p/2}`)}}))}_drawDot({x:y,y:p,size:v}){this._basicDot({x:y,y:p,size:v,rotation:0})}_drawSquare({x:y,y:p,size:v}){this._basicSquare({x:y,y:p,size:v,rotation:0})}_drawRounded({x:y,y:p,size:v,getNeighbor:w}){const x=w?+w(-1,0):0,C=w?+w(1,0):0,S=w?+w(0,-1):0,A=w?+w(0,1):0,P=x+C+S+A;if(P!==0)if(P>2||x&&C||S&&A)this._basicSquare({x:y,y:p,size:v,rotation:0});else{if(P===2){let E=0;return x&&S?E=Math.PI/2:S&&C?E=Math.PI:C&&A&&(E=-Math.PI/2),void this._basicCornerRounded({x:y,y:p,size:v,rotation:E})}if(P===1){let E=0;return S?E=Math.PI/2:C?E=Math.PI:A&&(E=-Math.PI/2),void this._basicSideRounded({x:y,y:p,size:v,rotation:E})}}else this._basicDot({x:y,y:p,size:v,rotation:0})}_drawExtraRounded({x:y,y:p,size:v,getNeighbor:w}){const x=w?+w(-1,0):0,C=w?+w(1,0):0,S=w?+w(0,-1):0,A=w?+w(0,1):0,P=x+C+S+A;if(P!==0)if(P>2||x&&C||S&&A)this._basicSquare({x:y,y:p,size:v,rotation:0});else{if(P===2){let E=0;return x&&S?E=Math.PI/2:S&&C?E=Math.PI:C&&A&&(E=-Math.PI/2),void this._basicCornerExtraRounded({x:y,y:p,size:v,rotation:E})}if(P===1){let E=0;return S?E=Math.PI/2:C?E=Math.PI:A&&(E=-Math.PI/2),void this._basicSideRounded({x:y,y:p,size:v,rotation:E})}}else this._basicDot({x:y,y:p,size:v,rotation:0})}_drawClassy({x:y,y:p,size:v,getNeighbor:w}){const x=w?+w(-1,0):0,C=w?+w(1,0):0,S=w?+w(0,-1):0,A=w?+w(0,1):0;x+C+S+A!==0?x||S?C||A?this._basicSquare({x:y,y:p,size:v,rotation:0}):this._basicCornerRounded({x:y,y:p,size:v,rotation:Math.PI/2}):this._basicCornerRounded({x:y,y:p,size:v,rotation:-Math.PI/2}):this._basicCornersRounded({x:y,y:p,size:v,rotation:Math.PI/2})}_drawClassyRounded({x:y,y:p,size:v,getNeighbor:w}){const x=w?+w(-1,0):0,C=w?+w(1,0):0,S=w?+w(0,-1):0,A=w?+w(0,1):0;x+C+S+A!==0?x||S?C||A?this._basicSquare({x:y,y:p,size:v,rotation:0}):this._basicCornerExtraRounded({x:y,y:p,size:v,rotation:Math.PI/2}):this._basicCornerExtraRounded({x:y,y:p,size:v,rotation:-Math.PI/2}):this._basicCornersRounded({x:y,y:p,size:v,rotation:Math.PI/2})}}class bt{constructor({svg:y,type:p}){this._svg=y,this._type=p}draw(y,p,v,w){let x;switch(this._type){case O:x=this._drawSquare;break;case D:x=this._drawExtraRounded;break;default:x=this._drawDot}x.call(this,{x:y,y:p,size:v,rotation:w})}_rotateFigure({x:y,y:p,size:v,rotation:w=0,draw:x}){var C;const S=y+v/2,A=p+v/2;x(),(C=this._element)===null||C===void 0||C.setAttribute("transform",`rotate(${180*w/Math.PI},${S},${A})`)}_basicDot(y){const{size:p,x:v,y:w}=y,x=p/7;this._rotateFigure(Object.assign(Object.assign({},y),{draw:()=>{this._element=document.createElementNS("http://www.w3.org/2000/svg","path"),this._element.setAttribute("clip-rule","evenodd"),this._element.setAttribute("d",`M ${v+p/2} ${w}a ${p/2} ${p/2} 0 1 0 0.1 0zm 0 ${x}a ${p/2-x} ${p/2-x} 0 1 1 -0.1 0Z`)}}))}_basicSquare(y){const{size:p,x:v,y:w}=y,x=p/7;this._rotateFigure(Object.assign(Object.assign({},y),{draw:()=>{this._element=document.createElementNS("http://www.w3.org/2000/svg","path"),this._element.setAttribute("clip-rule","evenodd"),this._element.setAttribute("d",`M ${v} ${w}v ${p}h ${p}v `+-p+`zM ${v+x} ${w+x}h `+(p-2*x)+"v "+(p-2*x)+"h "+(2*x-p)+"z")}}))}_basicExtraRounded(y){const{size:p,x:v,y:w}=y,x=p/7;this._rotateFigure(Object.assign(Object.assign({},y),{draw:()=>{this._element=document.createElementNS("http://www.w3.org/2000/svg","path"),this._element.setAttribute("clip-rule","evenodd"),this._element.setAttribute("d",`M ${v} ${w+2.5*x}v `+2*x+`a ${2.5*x} ${2.5*x}, 0, 0, 0, ${2.5*x} ${2.5*x}h `+2*x+`a ${2.5*x} ${2.5*x}, 0, 0, 0, ${2.5*x} ${2.5*-x}v `+-2*x+`a ${2.5*x} ${2.5*x}, 0, 0, 0, ${2.5*-x} ${2.5*-x}h `+-2*x+`a ${2.5*x} ${2.5*x}, 0, 0, 0, ${2.5*-x} ${2.5*x}M ${v+2.5*x} ${w+x}h `+2*x+`a ${1.5*x} ${1.5*x}, 0, 0, 1, ${1.5*x} ${1.5*x}v `+2*x+`a ${1.5*x} ${1.5*x}, 0, 0, 1, ${1.5*-x} ${1.5*x}h `+-2*x+`a ${1.5*x} ${1.5*x}, 0, 0, 1, ${1.5*-x} ${1.5*-x}v `+-2*x+`a ${1.5*x} ${1.5*x}, 0, 0, 1, ${1.5*x} ${1.5*-x}`)}}))}_drawDot({x:y,y:p,size:v,rotation:w}){this._basicDot({x:y,y:p,size:v,rotation:w})}_drawSquare({x:y,y:p,size:v,rotation:w}){this._basicSquare({x:y,y:p,size:v,rotation:w})}_drawExtraRounded({x:y,y:p,size:v,rotation:w}){this._basicExtraRounded({x:y,y:p,size:v,rotation:w})}}class Tt{constructor({svg:y,type:p}){this._svg=y,this._type=p}draw(y,p,v,w){let x;x=this._type===W?this._drawSquare:this._drawDot,x.call(this,{x:y,y:p,size:v,rotation:w})}_rotateFigure({x:y,y:p,size:v,rotation:w=0,draw:x}){var C;const S=y+v/2,A=p+v/2;x(),(C=this._element)===null||C===void 0||C.setAttribute("transform",`rotate(${180*w/Math.PI},${S},${A})`)}_basicDot(y){const{size:p,x:v,y:w}=y;this._rotateFigure(Object.assign(Object.assign({},y),{draw:()=>{this._element=document.createElementNS("http://www.w3.org/2000/svg","circle"),this._element.setAttribute("cx",String(v+p/2)),this._element.setAttribute("cy",String(w+p/2)),this._element.setAttribute("r",String(p/2))}}))}_basicSquare(y){const{size:p,x:v,y:w}=y;this._rotateFigure(Object.assign(Object.assign({},y),{draw:()=>{this._element=document.createElementNS("http://www.w3.org/2000/svg","rect"),this._element.setAttribute("x",String(v)),this._element.setAttribute("y",String(w)),this._element.setAttribute("width",String(p)),this._element.setAttribute("height",String(p))}}))}_drawDot({x:y,y:p,size:v,rotation:w}){this._basicDot({x:y,y:p,size:v,rotation:w})}_drawSquare({x:y,y:p,size:v,rotation:w}){this._basicSquare({x:y,y:p,size:v,rotation:w})}}const Lt=[[1,1,1,1,1,1,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,1,1,1,1,1,1]],q=[[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,1,1,1,0,0],[0,0,1,1,1,0,0],[0,0,1,1,1,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]];class H{constructor(y){this._element=document.createElementNS("http://www.w3.org/2000/svg","svg"),this._element.setAttribute("width",String(y.width)),this._element.setAttribute("height",String(y.height)),this._element.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),this._defs=document.createElementNS("http://www.w3.org/2000/svg","defs"),this._style=document.createElementNS("http://www.w3.org/2000/svg","style"),this._options=y}get width(){return this._options.width}get height(){return this._options.height}getElement(){return this._element}clear(){var y;const p=this._element;this._element=p.cloneNode(!1),(y=p?.parentNode)===null||y===void 0||y.replaceChild(this._element,p),this._defs=document.createElementNS("http://www.w3.org/2000/svg","defs"),this._style=document.createElementNS("http://www.w3.org/2000/svg","style"),this._element.appendChild(this._style),this._element.appendChild(this._defs)}async drawQR(y){const p=y.getModuleCount(),v=Math.min(this._options.width,this._options.height)-2*this._options.margin,w=Math.floor(v/p);let x={hideXDots:0,hideYDots:0,width:0,height:0};if(this._qr=y,this._options.image){if(await this.loadImage(),!this._image)return;const{imageOptions:C,qrOptions:S}=this._options,A=C.imageSize*u[S.errorCorrectionLevel],P=Math.floor(A*p*p);x=c({originalWidth:this._image.width,originalHeight:this._image.height,maxHiddenDots:P,maxHiddenAxisDots:p-14,dotSize:w})}this._element.appendChild(this._style),this._element.appendChild(this._defs),this.clear(),this.drawBackground(),this.drawDots((C,S)=>{var A,P,E,$,K,nt;return!(this._options.imageOptions.hideBackgroundDots&&C>=(p-x.hideXDots)/2&&C<(p+x.hideXDots)/2&&S>=(p-x.hideYDots)/2&&S<(p+x.hideYDots)/2||!((A=Lt[C])===null||A===void 0)&&A[S]||!((P=Lt[C-p+7])===null||P===void 0)&&P[S]||!((E=Lt[C])===null||E===void 0)&&E[S-p+7]||!(($=q[C])===null||$===void 0)&&$[S]||!((K=q[C-p+7])===null||K===void 0)&&K[S]||!((nt=q[C])===null||nt===void 0)&&nt[S-p+7])}),this.drawCorners(),this._options.image&&await this.drawImage({width:x.width,height:x.height,count:p,dotSize:w})}drawBackground(){var y,p,v;const w=this._element,x=this._options;if(w){const C=(y=x.backgroundOptions)===null||y===void 0?void 0:y.gradient,S=(p=x.backgroundOptions)===null||p===void 0?void 0:p.color;C?this._createColor({options:C,color:S,additionalRotation:0,x:0,y:0,height:x.height,width:x.width,name:"background-color"}):!((v=x.backgroundOptions)===null||v===void 0)&&v.color&&this._createStyle({color:S,name:"background-color"})}}drawDots(y){var p,v,w;if(!this._qr)throw"QR code is not defined";const x=this._options,C=this._qr.getModuleCount();if(C>x.width||C>x.height)throw"The canvas is too small.";const S=Math.min(x.width,x.height)-2*x.margin,A=Math.floor(S/C),P=Math.floor((x.width-C*A)/2),E=Math.floor((x.height-C*A)/2),$=new xt({svg:this._element,type:x.dotsOptions.type});!((p=x.dotsOptions)===null||p===void 0)&&p.gradient?(this._dotsClipPath=document.createElementNS("http://www.w3.org/2000/svg","clipPath"),this._dotsClipPath.setAttribute("id","clip-path-dot-color"),this._defs.appendChild(this._dotsClipPath),this._createColor({options:(v=x.dotsOptions)===null||v===void 0?void 0:v.gradient,color:x.dotsOptions.color,additionalRotation:0,x:P,y:E,height:C*A,width:C*A,name:"dot-color"})):x.dotsOptions.color&&(this._dots=document.createElementNS("http://www.w3.org/2000/svg","g"),this._dots.setAttribute("class","dot-color"),this._element.appendChild(this._dots),this._createStyle({color:x.dotsOptions.color,name:"dot-color"}));for(let K=0;K<C;K++)for(let nt=0;nt<C;nt++){if(y&&!y(K,nt)||!(!((w=this._qr)===null||w===void 0)&&w.isDark(K,nt)))continue;const ft=this._options.useLegacyDotRotation?P+K*A:E+nt*A,wt=this._options.useLegacyDotRotation?E+nt*A:P+K*A;$.draw(ft,wt,A,(St,Ct)=>this._options.useLegacyDotRotation?!(K+St<0||nt+Ct<0||K+St>=C||nt+Ct>=C)&&!(y&&!y(K+St,nt+Ct))&&!!this._qr&&this._qr.isDark(K+St,nt+Ct):!(nt+St<0||K+Ct<0||nt+St>=C||K+Ct>=C)&&!(y&&!y(nt+St,K+Ct))&&!!this._qr&&this._qr.isDark(K+Ct,nt+St)),$._element&&this._dotsClipPath?this._dotsClipPath.appendChild($._element):$._element&&this._dots&&this._dots.appendChild($._element)}}drawCorners(){if(!this._qr)throw"QR code is not defined";const y=this._element,p=this._options;if(!y)throw"Element code is not defined";const v=this._qr.getModuleCount(),w=Math.min(p.width,p.height)-2*p.margin,x=Math.floor(w/v),C=7*x,S=3*x,A=Math.floor((p.width-v*x)/2),P=Math.floor((p.height-v*x)/2);[[0,0,0],[1,0,Math.PI/2],[0,1,-Math.PI/2]].forEach(([E,$,K])=>{var nt,ft,wt,St,Ct,Xt,Qt,zt,Rt,_,m,X,Y,tt;const lt=A+E*x*(v-7),ut=P+$*x*(v-7);let At=this._dotsClipPath,mt=this._dotsClipPath;if(!((nt=p.cornersSquareOptions)===null||nt===void 0)&&nt.gradient?(At=document.createElementNS("http://www.w3.org/2000/svg","clipPath"),At.setAttribute("id",`clip-path-corners-square-color-${E}-${$}`),this._defs.appendChild(At),this._cornersSquareClipPath=this._cornersDotClipPath=mt=At,this._createColor({options:(ft=p.cornersSquareOptions)===null||ft===void 0?void 0:ft.gradient,color:(wt=p.cornersSquareOptions)===null||wt===void 0?void 0:wt.color,additionalRotation:K,x:lt,y:ut,height:C,width:C,name:`corners-square-color-${E}-${$}`})):(this._cornerSquares=document.createElementNS("http://www.w3.org/2000/svg","g"),this._cornerSquares.setAttribute("class",`corners-square-color-${E}-${$}`),this._element.appendChild(this._cornerSquares),this._createStyle({color:(St=p.cornersSquareOptions)===null||St===void 0?void 0:St.color,name:`corners-square-color-${E}-${$}`})),(Ct=p.cornersSquareOptions)===null||Ct===void 0?void 0:Ct.type){const yt=new bt({svg:this._element,type:p.cornersSquareOptions.type});yt.draw(lt,ut,C,K),!((Xt=p.cornersSquareOptions)===null||Xt===void 0)&&Xt.gradient&&yt._element&&At?At.appendChild(yt._element):yt._element&&this._cornerSquares&&this._cornerSquares.appendChild(yt._element)}else{const yt=new xt({svg:this._element,type:p.dotsOptions.type});for(let Jt=0;Jt<Lt.length;Jt++)for(let Bt=0;Bt<Lt[Jt].length;Bt++)!((Qt=Lt[Jt])===null||Qt===void 0)&&Qt[Bt]&&(yt.draw(lt+Jt*x,ut+Bt*x,x,(Dt,Ye)=>{var jt;return!!(!((jt=Lt[Jt+Dt])===null||jt===void 0)&&jt[Bt+Ye])}),yt._element&&this._cornersSquareClipPath?this._cornersSquareClipPath.appendChild(yt._element):yt._element&&this._cornerSquares&&this._cornerSquares.appendChild(yt._element))}if(!((zt=p.cornersDotOptions)===null||zt===void 0)&&zt.gradient?(mt=document.createElementNS("http://www.w3.org/2000/svg","clipPath"),mt.setAttribute("id",`clip-path-corners-dot-color-${E}-${$}`),this._defs.appendChild(mt),this._cornersDotClipPath=mt,this._createColor({options:(Rt=p.cornersDotOptions)===null||Rt===void 0?void 0:Rt.gradient,color:(_=p.cornersDotOptions)===null||_===void 0?void 0:_.color,additionalRotation:K,x:lt+2*x,y:ut+2*x,height:S,width:S,name:`corners-dot-color-${E}-${$}`})):(this._cornerDots=document.createElementNS("http://www.w3.org/2000/svg","g"),this._cornerDots.setAttribute("class",`corners-dot-color-${E}-${$}`),this._element.appendChild(this._cornerDots),this._createStyle({color:(m=p.cornersDotOptions)===null||m===void 0?void 0:m.color,name:`corners-dot-color-${E}-${$}`})),(X=p.cornersDotOptions)===null||X===void 0?void 0:X.type){const yt=new Tt({svg:this._element,type:p.cornersDotOptions.type});yt.draw(lt+2*x,ut+2*x,S,K),!((Y=p.cornersDotOptions)===null||Y===void 0)&&Y.gradient&&yt._element&&mt?mt.appendChild(yt._element):yt._element&&this._cornerDots&&this._cornerDots.appendChild(yt._element)}else{const yt=new xt({svg:this._element,type:p.dotsOptions.type});for(let Jt=0;Jt<q.length;Jt++)for(let Bt=0;Bt<q[Jt].length;Bt++)!((tt=q[Jt])===null||tt===void 0)&&tt[Bt]&&(yt.draw(lt+Jt*x,ut+Bt*x,x,(Dt,Ye)=>{var jt;return!!(!((jt=q[Jt+Dt])===null||jt===void 0)&&jt[Bt+Ye])}),yt._element&&this._cornersDotClipPath?this._cornersDotClipPath.appendChild(yt._element):yt._element&&this._cornerDots&&this._cornerDots.appendChild(yt._element))}})}loadImage(){return new Promise((y,p)=>{const v=this._options,w=new Image;if(!v.image)return p("Image is not defined");typeof v.imageOptions.crossOrigin=="string"&&(w.crossOrigin=v.imageOptions.crossOrigin),this._image=w,w.onload=()=>{y()},w.src=v.image})}async drawImage({width:y,height:p,count:v,dotSize:w}){const x=this._options,C=Math.floor((x.width-v*w)/2),S=Math.floor((x.height-v*w)/2),A=C+x.imageOptions.margin+(v*w-y)/2,P=S+x.imageOptions.margin+(v*w-p)/2,E=y-2*x.imageOptions.margin,$=p-2*x.imageOptions.margin,K=document.createElementNS("http://www.w3.org/2000/svg","image"),nt=await this._getBase64Image(x.image||"");K.setAttribute("href",nt),K.setAttribute("xlink:href",nt),K.setAttribute("x",String(A)),K.setAttribute("y",String(P)),K.setAttribute("width",`${E}px`),K.setAttribute("height",`${$}px`),this._element.appendChild(K)}async _getImageBlob(y){return(await fetch(y)).blob()}_blobToBase64(y){return new Promise(p=>{const v=new FileReader;v.onload=function(){const w=v.result;p(w)},v.readAsDataURL(y)})}async _getBase64Image(y){if(y==="")return new Promise(v=>{v("")});const p=await this._getImageBlob(y);return await this._blobToBase64(p)}_createColor({options:y,color:p,additionalRotation:v,x:w,y:x,height:C,width:S,name:A}){const P=S>C?S:C,E=document.createElementNS("http://www.w3.org/2000/svg","rect");if(E.setAttribute("x",String(w)),E.setAttribute("y",String(x)),E.setAttribute("height",String(C)),E.setAttribute("width",String(S)),E.setAttribute("clip-path",`url('#clip-path-${A}')`),y){let $;if(y.type===T)$=document.createElementNS("http://www.w3.org/2000/svg","radialGradient"),$.setAttribute("id",A),$.setAttribute("gradientUnits","userSpaceOnUse"),$.setAttribute("fx",String(w+S/2)),$.setAttribute("fy",String(x+C/2)),$.setAttribute("cx",String(w+S/2)),$.setAttribute("cy",String(x+C/2)),$.setAttribute("r",String(P/2));else{const K=((y.rotation||0)+v)%(2*Math.PI),nt=(K+2*Math.PI)%(2*Math.PI);let ft=w+S/2,wt=x+C/2,St=w+S/2,Ct=x+C/2;nt>=0&&nt<=.25*Math.PI||nt>1.75*Math.PI&&nt<=2*Math.PI?(ft-=S/2,wt-=C/2*Math.tan(K),St+=S/2,Ct+=C/2*Math.tan(K)):nt>.25*Math.PI&&nt<=.75*Math.PI?(wt-=C/2,ft-=S/2/Math.tan(K),Ct+=C/2,St+=S/2/Math.tan(K)):nt>.75*Math.PI&&nt<=1.25*Math.PI?(ft+=S/2,wt+=C/2*Math.tan(K),St-=S/2,Ct-=C/2*Math.tan(K)):nt>1.25*Math.PI&&nt<=1.75*Math.PI&&(wt+=C/2,ft+=S/2/Math.tan(K),Ct-=C/2,St-=S/2/Math.tan(K)),$=document.createElementNS("http://www.w3.org/2000/svg","linearGradient"),$.setAttribute("id",A),$.setAttribute("gradientUnits","userSpaceOnUse"),$.setAttribute("x1",String(Math.round(ft))),$.setAttribute("y1",String(Math.round(wt))),$.setAttribute("x2",String(Math.round(St))),$.setAttribute("y2",String(Math.round(Ct)))}y.colorStops.forEach(({offset:K,color:nt})=>{const ft=document.createElementNS("http://www.w3.org/2000/svg","stop");ft.setAttribute("offset",100*K+"%"),ft.setAttribute("stop-color",nt),$.appendChild(ft)}),E.setAttribute("fill",`url('#${A}')`),this._defs.appendChild($)}else p&&E.setAttribute("fill",p);this._element.appendChild(E)}_createStyle({color:y,name:p}){this._style.innerHTML+=`.${p}{ fill: ${y}; }`}}const U="canvas",j={};for(let pt=0;pt<=40;pt++)j[pt]=pt;const z={type:U,width:300,height:300,data:"",margin:0,qrOptions:{typeNumber:j[0],mode:void 0,errorCorrectionLevel:"Q"},imageOptions:{hideBackgroundDots:!0,imageSize:.4,crossOrigin:"anonymous",margin:0},dotsOptions:{type:"square",color:"#000"},backgroundOptions:{color:"#fff"},useLegacyDotRotation:!1};function G(pt){const y=Object.assign({},pt);if(!y.colorStops||!y.colorStops.length)throw"Field 'colorStops' is required in gradient";return y.rotation?y.rotation=Number(y.rotation):y.rotation=0,y.colorStops=y.colorStops.map(p=>Object.assign(Object.assign({},p),{offset:Number(p.offset)})),y}function rt(pt){const y=Object.assign({},pt);return y.width=Number(y.width),y.height=Number(y.height),y.margin=Number(y.margin),y.imageOptions=Object.assign(Object.assign({},y.imageOptions),{hideBackgroundDots:!!y.imageOptions.hideBackgroundDots,imageSize:Number(y.imageOptions.imageSize),margin:Number(y.imageOptions.margin)}),y.margin>Math.min(y.width,y.height)&&(y.margin=Math.min(y.width,y.height)),y.dotsOptions=Object.assign({},y.dotsOptions),y.dotsOptions.gradient&&(y.dotsOptions.gradient=G(y.dotsOptions.gradient)),y.cornersSquareOptions&&(y.cornersSquareOptions=Object.assign({},y.cornersSquareOptions),y.cornersSquareOptions.gradient&&(y.cornersSquareOptions.gradient=G(y.cornersSquareOptions.gradient))),y.cornersDotOptions&&(y.cornersDotOptions=Object.assign({},y.cornersDotOptions),y.cornersDotOptions.gradient&&(y.cornersDotOptions.gradient=G(y.cornersDotOptions.gradient))),y.backgroundOptions&&(y.backgroundOptions=Object.assign({},y.backgroundOptions),y.backgroundOptions.gradient&&(y.backgroundOptions.gradient=G(y.backgroundOptions.gradient))),y}var Z=r(192),ct=r.n(Z);class It{constructor(y){this._options=y?rt(a(z,y)):z,this.update()}static _clearContainer(y){y&&(y.innerHTML="")}async _getQRStylingElement(y){if(!this._qr)throw"QR code is empty";if(y.toLowerCase()==="svg"){let p,v;return this._svg&&this._svgDrawingPromise?(v=this._svg,p=this._svgDrawingPromise):(v=new H(this._options),p=v.drawQR(this._qr)),await p,v}{let p,v;return this._canvas&&this._canvasDrawingPromise?(v=this._canvas,p=this._canvasDrawingPromise):(v=new st(this._options),p=v.drawQR(this._qr)),await p,v}}update(y){It._clearContainer(this._container),this._options=y?rt(a(this._options,y)):this._options,this._options.data&&(this._qr=ct()(this._options.qrOptions.typeNumber,this._options.qrOptions.errorCorrectionLevel),this._qr.addData(this._options.data,this._options.qrOptions.mode||function(p){switch(!0){case/^[0-9]*$/.test(p):return"Numeric";case/^[0-9A-Z $%*+\-./:]*$/.test(p):return"Alphanumeric";default:return"Byte"}}(this._options.data)),this._qr.make(),this._options.type===U?(this._canvas=new st(this._options),this._canvasDrawingPromise=this._canvas.drawQR(this._qr),this._svgDrawingPromise=void 0,this._svg=void 0):(this._svg=new H(this._options),this._svgDrawingPromise=this._svg.drawQR(this._qr),this._canvasDrawingPromise=void 0,this._canvas=void 0),this.append(this._container))}append(y){if(y){if(typeof y.appendChild!="function")throw"Container should be a single DOM node";this._options.type===U?this._canvas&&y.appendChild(this._canvas.getCanvas()):this._svg&&y.appendChild(this._svg.getElement()),this._container=y}}async getRawData(y="png",p){if(!this._qr)throw"QR code is empty";const v=y.toLocaleLowerCase();if(v==="svg"){const w=await this._getQRStylingElement(v),x=new XMLSerializer().serializeToString(w.getElement());return new Blob([`<?xml version="1.0" standalone="no"?>\r
`+x],{type:"image/svg+xml"})}{const w=await this._getQRStylingElement(v);return new Promise(x=>w.getCanvas().toBlob(x,`image/${v}`,p))}}async toDataUrl(y="png",p){if(!this._qr)throw"QR code is empty";const v=y.toLocaleLowerCase();return(await this._getQRStylingElement(v)).getCanvas().toDataURL(`image/${v}`,p)}async download(y){if(!this._qr)throw"QR code is empty";let p="png",v="qr";typeof y=="object"&&y!==null&&(y.name&&(v=y.name),y.extension&&(p=y.extension));const w=p.toLocaleLowerCase();if(w==="svg"){const x=await this._getQRStylingElement(w);let C=new XMLSerializer().serializeToString(x.getElement());C=`<?xml version="1.0" standalone="no"?>\r
`+C,l("data:image/svg+xml;charset=utf-8,"+encodeURIComponent(C),`${v}.svg`)}else l((await this._getQRStylingElement(w)).getCanvas().toDataURL(`image/${p}`),`${v}.${p}`)}}const Ht=It})(),s.default})())})(oF);const aF=Ug(xu);const lF=()=>{const n=document.createElement("a");return er(()=>{const t=Lm(),e=`${document.location.protocol}//${document.location.host}/favicon.png`;n.className="qr",n.href=t;const i=new aF({type:"svg",data:t,image:e,dotsOptions:{color:"#555",type:"rounded"},backgroundOptions:{color:"#FFF"},imageOptions:{margin:3}});for(;n.firstChild;)n.removeChild(n.firstChild);i.append(n)}),n},cF=/^[a-zA-Z0-9.!#$%&*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/,uF=n=>n&&n.match(cF),hF=/^\+[0-9]+(\([0-9]+\)|-[0-9]+-)[0-9]+(-[0-9]+)*$/,fF=n=>n&&n.match(hF),dF=_t("<footer><details open><summary><h5>About me</h5></summary></details></footer>",8),pF=_t('<article class="person"><header><hgroup><h1></h1><h2></h2></hgroup></header><div class="person-card-body"><section></section><aside></aside></div></article>',16),gF=_t('<a target="_blank"></a>',2),Ag=_t("<a></a>",2),mF=()=>(()=>{const n=pF.cloneNode(!0),t=n.firstChild,e=t.firstChild,i=e.firstChild,r=i.nextSibling,s=t.nextSibling,o=s.firstChild,a=o.nextSibling;return J(i,I(Ue,{path:"person.name"})),J(r,I(Ue,{path:"person.title"})),J(o,I(Ue,{path:"person.location",children:l=>I(Ji,{style:{"padding-bottom":"1em"},get children(){return[I(De,{name:"my_location"}),(()=>{const c=gF.cloneNode(!0);return J(c,l),Oe(()=>wr(c,"href",`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(l)}`)),c})()]}})}),null),J(o,I(Ma,{path:"person.contacts",children:l=>I(Ue,jn({path:l},{children:c=>I(Vr,{fallback:c,get children(){return[I(We,{get when(){return uF(c)},get children(){return[I(De,{name:"mail"}),(()=>{const u=Ag.cloneNode(!0);return wr(u,"href",`mailto:${c}?subject=RE:%20Curriculum%20Vitae`),J(u,c),u})()]}}),I(We,{get when(){return fF(c)},get children(){return[I(De,{name:"call"}),(()=>{const u=Ag.cloneNode(!0);return J(u,c),Oe(()=>wr(u,"href",`tel:${yF(c)}`)),u})()]}})]}})}))}),null),J(o,I(Ma,{path:"person.documents",children:l=>I(Ue,jn({path:l},{children:c=>I(Ji,{get children(){return[I(De,{name:"file_present"}),c]}})}))}),null),J(a,I(lF,{})),J(n,I(Ce,{get when(){return kt.store.person.description||he.get()==="edit"},get children(){const l=dF.cloneNode(!0),c=l.firstChild;return c.firstChild,J(c,I(Ue,{path:"person.description",multiline:!0}),null),l}}),null),n})(),yF=n=>n.replace(/[()-]/g,""),bF=_t('<main class="container"></main>',2),vF=()=>(()=>{const n=bF.cloneNode(!0);return J(n,I(mF,{}),null),J(n,I(sF,{}),null),n})(),xF=_t('<main aria-busy="true"></main>',2),wF=()=>{const[n]=Zb(async()=>{const t=await fetch("data.json");try{const e=await t.json();kt.init(e),e.title&&(document.title=e.title)}catch{}return!0});return I(Ce,{get when(){return n()},get fallback(){return I(_F,{})},get children(){return[I(tE,{}),I(vF,{}),I(gE,{})]}})},_F=()=>(()=>{const n=xF.cloneNode(!0);return n.style.setProperty("position","absolute"),n.style.setProperty("left","0"),n.style.setProperty("right","0"),n.style.setProperty("top","0"),n.style.setProperty("bottom","0"),n.style.setProperty("display","flex"),n.style.setProperty("justify-content","center"),n.style.setProperty("align-items","center"),n})();window.onkeydown=n=>{n.ctrlKey&&n.key==="s"&&(n.preventDefault(),document.getSelection())};Fg(wF,document.body);
